(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-vendors"],{"02f0":function(e,t,n){"use strict";var r=n("1672"),i=n("858e"),s=n("b55a"),o=n("65e2"),a=n("9f28"),c=i([].join),l=s!=Object,u=a("join",",");r({target:"Array",proto:!0,forced:l||!u},{join:function(e){return c(o(this),void 0===e?",":e)}})},"0361":function(e,t,n){var r=n("0a26"),i=n("668f"),s=r.String,o=r.TypeError;e.exports=function(e){if(i(e))return e;throw o(s(e)+" is not an object")}},"0376":function(e,t,n){var r=n("191b"),i=n("858e"),s=n("a5e6"),o=n("39be"),a=n("0361"),c=i([].concat);e.exports=r("Reflect","ownKeys")||function(e){var t=s.f(a(e)),n=o.f;return n?c(t,n(e)):t}},"04aa":function(e,t,n){var r=n("0a26");e.exports=r.Promise},"063a":function(e,t,n){"use strict";var r=n("1672"),i=n("8a87");r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},"06f4":function(e,t,n){var r,i,s,o,a,c,l,u,h=n("0a26"),d=n("8d88"),p=n("2f5b").f,f=n("0997").set,m=n("f516"),g=n("a4db"),v=n("c880"),y=n("d0a7"),_=h.MutationObserver||h.WebKitMutationObserver,x=h.document,b=h.process,w=h.Promise,M=p(h,"queueMicrotask"),S=M&&M.value;S||(r=function(){var e,t;y&&(e=b.domain)&&e.exit();while(i){t=i.fn,i=i.next;try{t()}catch(n){throw i?o():s=void 0,n}}s=void 0,e&&e.enter()},m||y||v||!_||!x?!g&&w&&w.resolve?(l=w.resolve(void 0),l.constructor=w,u=d(l.then,l),o=function(){u(r)}):y?o=function(){b.nextTick(r)}:(f=d(f,h),o=function(){f(r)}):(a=!0,c=x.createTextNode(""),new _(r).observe(c,{characterData:!0}),o=function(){c.data=a=!a})),e.exports=S||function(e){var t={fn:e,next:void 0};s&&(s.next=t),i||(i=t,o()),s=t}},"070a":function(e,t,n){"use strict";n.d(t,"a",(function(){return r["createApp"]}));var r=n("cca5"),i=n("8143"),s=n("ea1f");function o(e){throw e}function a(e){}function c(e,t,n,r){const i=e,s=new SyntaxError(String(i));return s.code=e,s.loc=t,s}const l=Symbol(""),u=Symbol(""),h=Symbol(""),d=Symbol(""),p=Symbol(""),f=Symbol(""),m=Symbol(""),g=Symbol(""),v=Symbol(""),y=Symbol(""),_=Symbol(""),x=Symbol(""),b=Symbol(""),w=Symbol(""),M=Symbol(""),S=Symbol(""),T=Symbol(""),E=Symbol(""),A=Symbol(""),R=Symbol(""),C=Symbol(""),L=Symbol(""),O=Symbol(""),P=Symbol(""),I=Symbol(""),D=Symbol(""),N=Symbol(""),k=Symbol(""),F=Symbol(""),U=Symbol(""),B=Symbol(""),z=Symbol(""),H=Symbol(""),j=Symbol(""),V=Symbol(""),G=Symbol(""),W=Symbol(""),q=Symbol(""),X=Symbol(""),Y={[l]:"Fragment",[u]:"Teleport",[h]:"Suspense",[d]:"KeepAlive",[p]:"BaseTransition",[f]:"openBlock",[m]:"createBlock",[g]:"createElementBlock",[v]:"createVNode",[y]:"createElementVNode",[_]:"createCommentVNode",[x]:"createTextVNode",[b]:"createStaticVNode",[w]:"resolveComponent",[M]:"resolveDynamicComponent",[S]:"resolveDirective",[T]:"resolveFilter",[E]:"withDirectives",[A]:"renderList",[R]:"renderSlot",[C]:"createSlots",[L]:"toDisplayString",[O]:"mergeProps",[P]:"normalizeClass",[I]:"normalizeStyle",[D]:"normalizeProps",[N]:"guardReactiveProps",[k]:"toHandlers",[F]:"camelize",[U]:"capitalize",[B]:"toHandlerKey",[z]:"setBlockTracking",[H]:"pushScopeId",[j]:"popScopeId",[V]:"withCtx",[G]:"unref",[W]:"isRef",[q]:"withMemo",[X]:"isMemoSame"};function K(e){Object.getOwnPropertySymbols(e).forEach(t=>{Y[t]=e[t]})}const J={source:"",start:{line:1,column:1,offset:0},end:{line:1,column:1,offset:0}};function Z(e,t=J){return{type:0,children:e,helpers:[],components:[],directives:[],hoists:[],imports:[],cached:0,temps:0,codegenNode:void 0,loc:t}}function $(e,t,n,r,i,s,o,a=!1,c=!1,l=!1,u=J){return e&&(a?(e.helper(f),e.helper(Oe(e.inSSR,l))):e.helper(Le(e.inSSR,l)),o&&e.helper(E)),{type:13,tag:t,props:n,children:r,patchFlag:i,dynamicProps:s,directives:o,isBlock:a,disableTracking:c,isComponent:l,loc:u}}function Q(e,t=J){return{type:17,loc:t,elements:e}}function ee(e,t=J){return{type:15,loc:t,properties:e}}function te(e,t){return{type:16,loc:J,key:Object(s["G"])(e)?ne(e,!0):e,value:t}}function ne(e,t=!1,n=J,r=0){return{type:4,loc:n,content:e,isStatic:t,constType:t?3:r}}function re(e,t=J){return{type:8,loc:t,children:e}}function ie(e,t=[],n=J){return{type:14,loc:n,callee:e,arguments:t}}function se(e,t,n=!1,r=!1,i=J){return{type:18,params:e,returns:t,newline:n,isSlot:r,loc:i}}function oe(e,t,n,r=!0){return{type:19,test:e,consequent:t,alternate:n,newline:r,loc:J}}function ae(e,t,n=!1){return{type:20,index:e,value:t,isVNode:n,loc:J}}function ce(e){return{type:21,body:e,loc:J}}const le=e=>4===e.type&&e.isStatic,ue=(e,t)=>e===t||e===Object(s["n"])(t);function he(e){return ue(e,"Teleport")?u:ue(e,"Suspense")?h:ue(e,"KeepAlive")?d:ue(e,"BaseTransition")?p:void 0}const de=/^\d|[^\$\w]/,pe=e=>!de.test(e),fe=/[A-Za-z_$\xA0-\uFFFF]/,me=/[\.\?\w$\xA0-\uFFFF]/,ge=/\s+[.[]\s*|\s*[.[]\s+/g,ve=e=>{e=e.trim().replace(ge,e=>e.trim());let t=0,n=[],r=0,i=0,s=null;for(let o=0;o<e.length;o++){const a=e.charAt(o);switch(t){case 0:if("["===a)n.push(t),t=1,r++;else if("("===a)n.push(t),t=2,i++;else if(!(0===o?fe:me).test(a))return!1;break;case 1:"'"===a||'"'===a||"`"===a?(n.push(t),t=3,s=a):"["===a?r++:"]"===a&&(--r||(t=n.pop()));break;case 2:if("'"===a||'"'===a||"`"===a)n.push(t),t=3,s=a;else if("("===a)i++;else if(")"===a){if(o===e.length-1)return!1;--i||(t=n.pop())}break;case 3:a===s&&(t=n.pop(),s=null);break}}return!r&&!i},ye=(s["d"],ve);function _e(e,t,n){const r=e.source.slice(t,t+n),i={source:r,start:xe(e.start,e.source,t),end:e.end};return null!=n&&(i.end=xe(e.start,e.source,t+n)),i}function xe(e,t,n=t.length){return be(Object(s["i"])({},e),t,n)}function be(e,t,n=t.length){let r=0,i=-1;for(let s=0;s<n;s++)10===t.charCodeAt(s)&&(r++,i=s);return e.offset+=n,e.line+=r,e.column=-1===i?e.column+n:n-i,e}function we(e,t,n=!1){for(let r=0;r<e.props.length;r++){const i=e.props[r];if(7===i.type&&(n||i.exp)&&(Object(s["G"])(t)?i.name===t:t.test(i.name)))return i}}function Me(e,t,n=!1,r=!1){for(let i=0;i<e.props.length;i++){const s=e.props[i];if(6===s.type){if(n)continue;if(s.name===t&&(s.value||r))return s}else if("bind"===s.name&&(s.exp||r)&&Se(s.arg,t))return s}}function Se(e,t){return!(!e||!le(e)||e.content!==t)}function Te(e){return e.props.some(e=>7===e.type&&"bind"===e.name&&(!e.arg||4!==e.arg.type||!e.arg.isStatic))}function Ee(e){return 5===e.type||2===e.type}function Ae(e){return 7===e.type&&"slot"===e.name}function Re(e){return 1===e.type&&3===e.tagType}function Ce(e){return 1===e.type&&2===e.tagType}function Le(e,t){return e||t?v:y}function Oe(e,t){return e||t?m:g}const Pe=new Set([D,N]);function Ie(e,t=[]){if(e&&!Object(s["G"])(e)&&14===e.type){const n=e.callee;if(!Object(s["G"])(n)&&Pe.has(n))return Ie(e.arguments[0],t.concat(e))}return[e,t]}function De(e,t,n){let r,i,o=13===e.type?e.props:e.arguments[2],a=[];if(o&&!Object(s["G"])(o)&&14===o.type){const e=Ie(o);o=e[0],a=e[1],i=a[a.length-1]}if(null==o||Object(s["G"])(o))r=ee([t]);else if(14===o.type){const e=o.arguments[0];Object(s["G"])(e)||15!==e.type?o.callee===k?r=ie(n.helper(O),[ee([t]),o]):o.arguments.unshift(ee([t])):e.properties.unshift(t),!r&&(r=o)}else if(15===o.type){let e=!1;if(4===t.key.type){const n=t.key.content;e=o.properties.some(e=>4===e.key.type&&e.key.content===n)}e||o.properties.unshift(t),r=o}else r=ie(n.helper(O),[ee([t]),o]),i&&i.callee===N&&(i=a[a.length-2]);13===e.type?i?i.arguments[0]=r:e.props=r:i?i.arguments[0]=r:e.arguments[2]=r}function Ne(e,t){return`_${t}_${e.replace(/[^\w]/g,(t,n)=>"-"===t?"_":e.charCodeAt(n).toString())}`}function ke(e){return 14===e.type&&e.callee===q?e.arguments[1].returns:e}function Fe(e,{helper:t,removeHelper:n,inSSR:r}){e.isBlock||(e.isBlock=!0,n(Le(r,e.isComponent)),t(f),t(Oe(r,e.isComponent)))}function Ue(e,t){const n=t.options?t.options.compatConfig:t.compatConfig,r=n&&n[e];return"MODE"===e?r||3:r}function Be(e,t){const n=Ue("MODE",t),r=Ue(e,t);return 3===n?!0===r:!1!==r}function ze(e,t,n,...r){const i=Be(e,t);return i}const He=/&(gt|lt|amp|apos|quot);/g,je={gt:">",lt:"<",amp:"&",apos:"'",quot:'"'},Ve={delimiters:["{{","}}"],getNamespace:()=>0,getTextMode:()=>0,isVoidTag:s["c"],isPreTag:s["c"],isCustomElement:s["c"],decodeEntities:e=>e.replace(He,(e,t)=>je[t]),onError:o,onWarn:a,comments:!1};function Ge(e,t={}){const n=We(e,t),r=at(n);return Z(qe(n,0,[]),ct(n,r))}function We(e,t){const n=Object(s["i"])({},Ve);let r;for(r in t)n[r]=void 0===t[r]?Ve[r]:t[r];return{options:n,column:1,line:1,offset:0,originalSource:e,source:e,inPre:!1,inVPre:!1,onWarn:n.onWarn}}function qe(e,t,n){const r=lt(n),i=r?r.ns:0,o=[];while(!mt(e,t,n)){const a=e.source;let c=void 0;if(0===t||1===t)if(!e.inVPre&&ut(a,e.options.delimiters[0]))c=it(e,t);else if(0===t&&"<"===a[0])if(1===a.length)ft(e,5,1);else if("!"===a[1])ut(a,"\x3c!--")?c=Ke(e):ut(a,"<!DOCTYPE")?c=Je(e):ut(a,"<![CDATA[")?0!==i?c=Ye(e,n):(ft(e,1),c=Je(e)):(ft(e,11),c=Je(e));else if("/"===a[1])if(2===a.length)ft(e,5,2);else{if(">"===a[2]){ft(e,14,2),ht(e,3);continue}if(/[a-z]/i.test(a[2])){ft(e,23),Qe(e,1,r);continue}ft(e,12,2),c=Je(e)}else/[a-z]/i.test(a[1])?(c=Ze(e,n),Be("COMPILER_NATIVE_TEMPLATE",e)&&c&&"template"===c.tag&&!c.props.some(e=>7===e.type&&$e(e.name))&&(c=c.children)):"?"===a[1]?(ft(e,21,1),c=Je(e)):ft(e,12,1);if(c||(c=st(e,t)),Object(s["q"])(c))for(let e=0;e<c.length;e++)Xe(o,c[e]);else Xe(o,c)}let a=!1;if(2!==t&&1!==t){const t="preserve"!==e.options.whitespace;for(let n=0;n<o.length;n++){const r=o[n];if(e.inPre||2!==r.type)3!==r.type||e.options.comments||(a=!0,o[n]=null);else if(/[^\t\r\n\f ]/.test(r.content))t&&(r.content=r.content.replace(/[\t\r\n\f ]+/g," "));else{const e=o[n-1],i=o[n+1];!e||!i||t&&(3===e.type||3===i.type||1===e.type&&1===i.type&&/[\r\n]/.test(r.content))?(a=!0,o[n]=null):r.content=" "}}if(e.inPre&&r&&e.options.isPreTag(r.tag)){const e=o[0];e&&2===e.type&&(e.content=e.content.replace(/^\r?\n/,""))}}return a?o.filter(Boolean):o}function Xe(e,t){if(2===t.type){const n=lt(e);if(n&&2===n.type&&n.loc.end.offset===t.loc.start.offset)return n.content+=t.content,n.loc.end=t.loc.end,void(n.loc.source+=t.loc.source)}e.push(t)}function Ye(e,t){ht(e,9);const n=qe(e,3,t);return 0===e.source.length?ft(e,6):ht(e,3),n}function Ke(e){const t=at(e);let n;const r=/--(\!)?>/.exec(e.source);if(r){r.index<=3&&ft(e,0),r[1]&&ft(e,10),n=e.source.slice(4,r.index);const t=e.source.slice(0,r.index);let i=1,s=0;while(-1!==(s=t.indexOf("\x3c!--",i)))ht(e,s-i+1),s+4<t.length&&ft(e,16),i=s+1;ht(e,r.index+r[0].length-i+1)}else n=e.source.slice(4),ht(e,e.source.length),ft(e,7);return{type:3,content:n,loc:ct(e,t)}}function Je(e){const t=at(e),n="?"===e.source[1]?1:2;let r;const i=e.source.indexOf(">");return-1===i?(r=e.source.slice(n),ht(e,e.source.length)):(r=e.source.slice(n,i),ht(e,i+1)),{type:3,content:r,loc:ct(e,t)}}function Ze(e,t){const n=e.inPre,r=e.inVPre,i=lt(t),s=Qe(e,0,i),o=e.inPre&&!n,a=e.inVPre&&!r;if(s.isSelfClosing||e.options.isVoidTag(s.tag))return o&&(e.inPre=!1),a&&(e.inVPre=!1),s;t.push(s);const c=e.options.getTextMode(s,i),l=qe(e,c,t);t.pop();{const t=s.props.find(e=>6===e.type&&"inline-template"===e.name);if(t&&ze("COMPILER_INLINE_TEMPLATE",e,t.loc)){const n=ct(e,s.loc.end);t.value={type:2,content:n.source,loc:n}}}if(s.children=l,gt(e.source,s.tag))Qe(e,1,i);else if(ft(e,24,0,s.loc.start),0===e.source.length&&"script"===s.tag.toLowerCase()){const t=l[0];t&&ut(t.loc.source,"\x3c!--")&&ft(e,8)}return s.loc=ct(e,s.loc.start),o&&(e.inPre=!1),a&&(e.inVPre=!1),s}const $e=Object(s["L"])("if,else,else-if,for,slot");function Qe(e,t,n){const r=at(e),i=/^<\/?([a-z][^\t\r\n\f />]*)/i.exec(e.source),o=i[1],a=e.options.getNamespace(o,n);ht(e,i[0].length),dt(e);const c=at(e),l=e.source;e.options.isPreTag(o)&&(e.inPre=!0);let u=tt(e,t);0===t&&!e.inVPre&&u.some(e=>7===e.type&&"pre"===e.name)&&(e.inVPre=!0,Object(s["i"])(e,c),e.source=l,u=tt(e,t).filter(e=>"v-pre"!==e.name));let h=!1;if(0===e.source.length?ft(e,9):(h=ut(e.source,"/>"),1===t&&h&&ft(e,4),ht(e,h?2:1)),1===t)return;let d=0;return e.inVPre||("slot"===o?d=2:"template"===o?u.some(e=>7===e.type&&$e(e.name))&&(d=3):et(o,u,e)&&(d=1)),{type:1,ns:a,tag:o,tagType:d,props:u,isSelfClosing:h,children:[],loc:ct(e,r),codegenNode:void 0}}function et(e,t,n){const r=n.options;if(r.isCustomElement(e))return!1;if("component"===e||/^[A-Z]/.test(e)||he(e)||r.isBuiltInComponent&&r.isBuiltInComponent(e)||r.isNativeTag&&!r.isNativeTag(e))return!0;for(let i=0;i<t.length;i++){const e=t[i];if(6===e.type){if("is"===e.name&&e.value){if(e.value.content.startsWith("vue:"))return!0;if(ze("COMPILER_IS_ON_ELEMENT",n,e.loc))return!0}}else{if("is"===e.name)return!0;if("bind"===e.name&&Se(e.arg,"is")&&ze("COMPILER_IS_ON_ELEMENT",n,e.loc))return!0}}}function tt(e,t){const n=[],r=new Set;while(e.source.length>0&&!ut(e.source,">")&&!ut(e.source,"/>")){if(ut(e.source,"/")){ft(e,22),ht(e,1),dt(e);continue}1===t&&ft(e,3);const i=nt(e,r);6===i.type&&i.value&&"class"===i.name&&(i.value.content=i.value.content.replace(/\s+/g," ").trim()),0===t&&n.push(i),/^[^\t\r\n\f />]/.test(e.source)&&ft(e,15),dt(e)}return n}function nt(e,t){const n=at(e),r=/^[^\t\r\n\f />][^\t\r\n\f />=]*/.exec(e.source),i=r[0];t.has(i)&&ft(e,2),t.add(i),"="===i[0]&&ft(e,19);{const t=/["'<]/g;let n;while(n=t.exec(i))ft(e,17,n.index)}ht(e,i.length);let s=void 0;/^[\t\r\n\f ]*=/.test(e.source)&&(dt(e),ht(e,1),dt(e),s=rt(e),s||ft(e,13));const o=ct(e,n);if(!e.inVPre&&/^(v-[A-Za-z0-9-]|:|\.|@|#)/.test(i)){const t=/(?:^v-([a-z0-9-]+))?(?:(?::|^\.|^@|^#)(\[[^\]]+\]|[^\.]+))?(.+)?$/i.exec(i);let r,a=ut(i,"."),c=t[1]||(a||ut(i,":")?"bind":ut(i,"@")?"on":"slot");if(t[2]){const s="slot"===c,o=i.lastIndexOf(t[2]),a=ct(e,pt(e,n,o),pt(e,n,o+t[2].length+(s&&t[3]||"").length));let l=t[2],u=!0;l.startsWith("[")?(u=!1,l.endsWith("]")?l=l.slice(1,l.length-1):(ft(e,27),l=l.slice(1))):s&&(l+=t[3]||""),r={type:4,content:l,isStatic:u,constType:u?3:0,loc:a}}if(s&&s.isQuoted){const e=s.loc;e.start.offset++,e.start.column++,e.end=xe(e.start,s.content),e.source=e.source.slice(1,-1)}const l=t[3]?t[3].slice(1).split("."):[];return a&&l.push("prop"),"bind"===c&&r&&l.includes("sync")&&ze("COMPILER_V_BIND_SYNC",e,o,r.loc.source)&&(c="model",l.splice(l.indexOf("sync"),1)),{type:7,name:c,exp:s&&{type:4,content:s.content,isStatic:!1,constType:0,loc:s.loc},arg:r,modifiers:l,loc:o}}return!e.inVPre&&ut(i,"v-")&&ft(e,26),{type:6,name:i,value:s&&{type:2,content:s.content,loc:s.loc},loc:o}}function rt(e){const t=at(e);let n;const r=e.source[0],i='"'===r||"'"===r;if(i){ht(e,1);const t=e.source.indexOf(r);-1===t?n=ot(e,e.source.length,4):(n=ot(e,t,4),ht(e,1))}else{const t=/^[^\t\r\n\f >]+/.exec(e.source);if(!t)return;const r=/["'<=`]/g;let i;while(i=r.exec(t[0]))ft(e,18,i.index);n=ot(e,t[0].length,4)}return{content:n,isQuoted:i,loc:ct(e,t)}}function it(e,t){const[n,r]=e.options.delimiters,i=e.source.indexOf(r,n.length);if(-1===i)return void ft(e,25);const s=at(e);ht(e,n.length);const o=at(e),a=at(e),c=i-n.length,l=e.source.slice(0,c),u=ot(e,c,t),h=u.trim(),d=u.indexOf(h);d>0&&be(o,l,d);const p=c-(u.length-h.length-d);return be(a,l,p),ht(e,r.length),{type:5,content:{type:4,isStatic:!1,constType:0,content:h,loc:ct(e,o,a)},loc:ct(e,s)}}function st(e,t){const n=3===t?["]]>"]:["<",e.options.delimiters[0]];let r=e.source.length;for(let o=0;o<n.length;o++){const t=e.source.indexOf(n[o],1);-1!==t&&r>t&&(r=t)}const i=at(e),s=ot(e,r,t);return{type:2,content:s,loc:ct(e,i)}}function ot(e,t,n){const r=e.source.slice(0,t);return ht(e,t),2!==n&&3!==n&&r.includes("&")?e.options.decodeEntities(r,4===n):r}function at(e){const{column:t,line:n,offset:r}=e;return{column:t,line:n,offset:r}}function ct(e,t,n){return n=n||at(e),{start:t,end:n,source:e.originalSource.slice(t.offset,n.offset)}}function lt(e){return e[e.length-1]}function ut(e,t){return e.startsWith(t)}function ht(e,t){const{source:n}=e;be(e,n,t),e.source=n.slice(t)}function dt(e){const t=/^[\t\r\n\f ]+/.exec(e.source);t&&ht(e,t[0].length)}function pt(e,t,n){return xe(t,e.originalSource.slice(t.offset,n),n)}function ft(e,t,n,r=at(e)){n&&(r.offset+=n,r.column+=n),e.options.onError(c(t,{start:r,end:r,source:""}))}function mt(e,t,n){const r=e.source;switch(t){case 0:if(ut(r,"</"))for(let e=n.length-1;e>=0;--e)if(gt(r,n[e].tag))return!0;break;case 1:case 2:{const e=lt(n);if(e&&gt(r,e.tag))return!0;break}case 3:if(ut(r,"]]>"))return!0;break}return!r}function gt(e,t){return ut(e,"</")&&e.slice(2,2+t.length).toLowerCase()===t.toLowerCase()&&/[\t\r\n\f />]/.test(e[2+t.length]||">")}function vt(e,t){_t(e,t,yt(e,e.children[0]))}function yt(e,t){const{children:n}=e;return 1===n.length&&1===t.type&&!Ce(t)}function _t(e,t,n=!1){const{children:r}=e,i=r.length;let o=0;for(let s=0;s<r.length;s++){const e=r[s];if(1===e.type&&0===e.tagType){const r=n?0:xt(e,t);if(r>0){if(r>=2){e.codegenNode.patchFlag="-1",e.codegenNode=t.hoist(e.codegenNode),o++;continue}}else{const n=e.codegenNode;if(13===n.type){const r=Tt(n);if((!r||512===r||1===r)&&Mt(e,t)>=2){const r=St(e);r&&(n.props=t.hoist(r))}n.dynamicProps&&(n.dynamicProps=t.hoist(n.dynamicProps))}}}else 12===e.type&&xt(e.content,t)>=2&&(e.codegenNode=t.hoist(e.codegenNode),o++);if(1===e.type){const n=1===e.tagType;n&&t.scopes.vSlot++,_t(e,t),n&&t.scopes.vSlot--}else if(11===e.type)_t(e,t,1===e.children.length);else if(9===e.type)for(let n=0;n<e.branches.length;n++)_t(e.branches[n],t,1===e.branches[n].children.length)}o&&t.transformHoist&&t.transformHoist(r,t,e),o&&o===i&&1===e.type&&0===e.tagType&&e.codegenNode&&13===e.codegenNode.type&&Object(s["q"])(e.codegenNode.children)&&(e.codegenNode.children=t.hoist(Q(e.codegenNode.children)))}function xt(e,t){const{constantCache:n}=t;switch(e.type){case 1:if(0!==e.tagType)return 0;const r=n.get(e);if(void 0!==r)return r;const i=e.codegenNode;if(13!==i.type)return 0;if(i.isBlock&&"svg"!==e.tag&&"foreignObject"!==e.tag)return 0;const o=Tt(i);if(o)return n.set(e,0),0;{let r=3;const s=Mt(e,t);if(0===s)return n.set(e,0),0;s<r&&(r=s);for(let i=0;i<e.children.length;i++){const s=xt(e.children[i],t);if(0===s)return n.set(e,0),0;s<r&&(r=s)}if(r>1)for(let i=0;i<e.props.length;i++){const s=e.props[i];if(7===s.type&&"bind"===s.name&&s.exp){const i=xt(s.exp,t);if(0===i)return n.set(e,0),0;i<r&&(r=i)}}return i.isBlock&&(t.removeHelper(f),t.removeHelper(Oe(t.inSSR,i.isComponent)),i.isBlock=!1,t.helper(Le(t.inSSR,i.isComponent))),n.set(e,r),r}case 2:case 3:return 3;case 9:case 11:case 10:return 0;case 5:case 12:return xt(e.content,t);case 4:return e.constType;case 8:let a=3;for(let n=0;n<e.children.length;n++){const r=e.children[n];if(Object(s["G"])(r)||Object(s["H"])(r))continue;const i=xt(r,t);if(0===i)return 0;i<a&&(a=i)}return a;default:return 0}}const bt=new Set([P,I,D,N]);function wt(e,t){if(14===e.type&&!Object(s["G"])(e.callee)&&bt.has(e.callee)){const n=e.arguments[0];if(4===n.type)return xt(n,t);if(14===n.type)return wt(n,t)}return 0}function Mt(e,t){let n=3;const r=St(e);if(r&&15===r.type){const{properties:e}=r;for(let r=0;r<e.length;r++){const{key:i,value:s}=e[r],o=xt(i,t);if(0===o)return o;let a;if(o<n&&(n=o),a=4===s.type?xt(s,t):14===s.type?wt(s,t):0,0===a)return a;a<n&&(n=a)}}return n}function St(e){const t=e.codegenNode;if(13===t.type)return t.props}function Tt(e){const t=e.patchFlag;return t?parseInt(t,10):void 0}function Et(e,{filename:t="",prefixIdentifiers:n=!1,hoistStatic:r=!1,cacheHandlers:i=!1,nodeTransforms:c=[],directiveTransforms:l={},transformHoist:u=null,isBuiltInComponent:h=s["d"],isCustomElement:d=s["d"],expressionPlugins:p=[],scopeId:f=null,slotted:m=!0,ssr:g=!1,inSSR:v=!1,ssrCssVars:y="",bindingMetadata:_=s["b"],inline:x=!1,isTS:b=!1,onError:w=o,onWarn:M=a,compatConfig:S}){const T=t.replace(/\?.*$/,"").match(/([^/\\]+)\.\w+$/),E={selfName:T&&Object(s["g"])(Object(s["f"])(T[1])),prefixIdentifiers:n,hoistStatic:r,cacheHandlers:i,nodeTransforms:c,directiveTransforms:l,transformHoist:u,isBuiltInComponent:h,isCustomElement:d,expressionPlugins:p,scopeId:f,slotted:m,ssr:g,inSSR:v,ssrCssVars:y,bindingMetadata:_,inline:x,isTS:b,onError:w,onWarn:M,compatConfig:S,root:e,helpers:new Map,components:new Set,directives:new Set,hoists:[],imports:[],constantCache:new Map,temps:0,cached:0,identifiers:Object.create(null),scopes:{vFor:0,vSlot:0,vPre:0,vOnce:0},parent:null,currentNode:e,childIndex:0,inVOnce:!1,helper(e){const t=E.helpers.get(e)||0;return E.helpers.set(e,t+1),e},removeHelper(e){const t=E.helpers.get(e);if(t){const n=t-1;n?E.helpers.set(e,n):E.helpers.delete(e)}},helperString(e){return"_"+Y[E.helper(e)]},replaceNode(e){E.parent.children[E.childIndex]=E.currentNode=e},removeNode(e){const t=E.parent.children,n=e?t.indexOf(e):E.currentNode?E.childIndex:-1;e&&e!==E.currentNode?E.childIndex>n&&(E.childIndex--,E.onNodeRemoved()):(E.currentNode=null,E.onNodeRemoved()),E.parent.children.splice(n,1)},onNodeRemoved:()=>{},addIdentifiers(e){},removeIdentifiers(e){},hoist(e){Object(s["G"])(e)&&(e=ne(e)),E.hoists.push(e);const t=ne("_hoisted_"+E.hoists.length,!1,e.loc,2);return t.hoisted=e,t},cache(e,t=!1){return ae(E.cached++,e,t)}};return E.filters=new Set,E}function At(e,t){const n=Et(e,t);Lt(e,n),t.hoistStatic&&vt(e,n),t.ssr||Rt(e,n),e.helpers=[...n.helpers.keys()],e.components=[...n.components],e.directives=[...n.directives],e.imports=n.imports,e.hoists=n.hoists,e.temps=n.temps,e.cached=n.cached,e.filters=[...n.filters]}function Rt(e,t){const{helper:n}=t,{children:r}=e;if(1===r.length){const n=r[0];if(yt(e,n)&&n.codegenNode){const r=n.codegenNode;13===r.type&&Fe(r,t),e.codegenNode=r}else e.codegenNode=n}else if(r.length>1){let r=64;s["e"][64];0,e.codegenNode=$(t,n(l),void 0,e.children,r+"",void 0,void 0,!0,void 0,!1)}}function Ct(e,t){let n=0;const r=()=>{n--};for(;n<e.children.length;n++){const i=e.children[n];Object(s["G"])(i)||(t.parent=e,t.childIndex=n,t.onNodeRemoved=r,Lt(i,t))}}function Lt(e,t){t.currentNode=e;const{nodeTransforms:n}=t,r=[];for(let o=0;o<n.length;o++){const i=n[o](e,t);if(i&&(Object(s["q"])(i)?r.push(...i):r.push(i)),!t.currentNode)return;e=t.currentNode}switch(e.type){case 3:t.ssr||t.helper(_);break;case 5:t.ssr||t.helper(L);break;case 9:for(let n=0;n<e.branches.length;n++)Lt(e.branches[n],t);break;case 10:case 11:case 1:case 0:Ct(e,t);break}t.currentNode=e;let i=r.length;while(i--)r[i]()}function Ot(e,t){const n=Object(s["G"])(e)?t=>t===e:t=>e.test(t);return(e,r)=>{if(1===e.type){const{props:i}=e;if(3===e.tagType&&i.some(Ae))return;const s=[];for(let o=0;o<i.length;o++){const a=i[o];if(7===a.type&&n(a.name)){i.splice(o,1),o--;const n=t(e,a,r);n&&s.push(n)}}return s}}}const Pt="/*#__PURE__*/";function It(e,{mode:t="function",prefixIdentifiers:n="module"===t,sourceMap:r=!1,filename:i="template.vue.html",scopeId:s=null,optimizeImports:o=!1,runtimeGlobalName:a="Vue",runtimeModuleName:c="vue",ssrRuntimeModuleName:l="vue/server-renderer",ssr:u=!1,isTS:h=!1,inSSR:d=!1}){const p={mode:t,prefixIdentifiers:n,sourceMap:r,filename:i,scopeId:s,optimizeImports:o,runtimeGlobalName:a,runtimeModuleName:c,ssrRuntimeModuleName:l,ssr:u,isTS:h,inSSR:d,source:e.loc.source,code:"",column:1,line:1,offset:0,indentLevel:0,pure:!1,map:void 0,helper(e){return"_"+Y[e]},push(e,t){p.code+=e},indent(){f(++p.indentLevel)},deindent(e=!1){e?--p.indentLevel:f(--p.indentLevel)},newline(){f(p.indentLevel)}};function f(e){p.push("\n"+"  ".repeat(e))}return p}function Dt(e,t={}){const n=It(e,t);t.onContextCreated&&t.onContextCreated(n);const{mode:r,push:i,prefixIdentifiers:s,indent:o,deindent:a,newline:c,scopeId:l,ssr:u}=n,h=e.helpers.length>0,d=!s&&"module"!==r,p=n;Nt(e,p);const f=u?"ssrRender":"render",m=u?["_ctx","_push","_parent","_attrs"]:["_ctx","_cache"],g=m.join(", ");if(i(`function ${f}(${g}) {`),o(),d&&(i("with (_ctx) {"),o(),h&&(i(`const { ${e.helpers.map(e=>`${Y[e]}: _${Y[e]}`).join(", ")} } = _Vue`),i("\n"),c())),e.components.length&&(kt(e.components,"component",n),(e.directives.length||e.temps>0)&&c()),e.directives.length&&(kt(e.directives,"directive",n),e.temps>0&&c()),e.filters&&e.filters.length&&(c(),kt(e.filters,"filter",n),c()),e.temps>0){i("let ");for(let t=0;t<e.temps;t++)i(`${t>0?", ":""}_temp${t}`)}return(e.components.length||e.directives.length||e.temps)&&(i("\n"),c()),u||i("return "),e.codegenNode?zt(e.codegenNode,n):i("null"),d&&(a(),i("}")),a(),i("}"),{ast:e,code:n.code,preamble:"",map:n.map?n.map.toJSON():void 0}}function Nt(e,t){const{ssr:n,prefixIdentifiers:r,push:i,newline:s,runtimeModuleName:o,runtimeGlobalName:a,ssrRuntimeModuleName:c}=t,l=a,u=e=>`${Y[e]}: _${Y[e]}`;if(e.helpers.length>0&&(i(`const _Vue = ${l}\n`),e.hoists.length)){const t=[v,y,_,x,b].filter(t=>e.helpers.includes(t)).map(u).join(", ");i(`const { ${t} } = _Vue\n`)}Ft(e.hoists,t),s(),i("return ")}function kt(e,t,{helper:n,push:r,newline:i,isTS:s}){const o=n("filter"===t?T:"component"===t?w:S);for(let a=0;a<e.length;a++){let n=e[a];const c=n.endsWith("__self");c&&(n=n.slice(0,-6)),r(`const ${Ne(n,t)} = ${o}(${JSON.stringify(n)}${c?", true":""})${s?"!":""}`),a<e.length-1&&i()}}function Ft(e,t){if(!e.length)return;t.pure=!0;const{push:n,newline:r,helper:i,scopeId:s,mode:o}=t;r();for(let a=0;a<e.length;a++){const i=e[a];i&&(n(`const _hoisted_${a+1} = `),zt(i,t),r())}t.pure=!1}function Ut(e,t){const n=e.length>3||!1;t.push("["),n&&t.indent(),Bt(e,t,n),n&&t.deindent(),t.push("]")}function Bt(e,t,n=!1,r=!0){const{push:i,newline:o}=t;for(let a=0;a<e.length;a++){const c=e[a];Object(s["G"])(c)?i(c):Object(s["q"])(c)?Ut(c,t):zt(c,t),a<e.length-1&&(n?(r&&i(","),o()):r&&i(", "))}}function zt(e,t){if(Object(s["G"])(e))t.push(e);else if(Object(s["H"])(e))t.push(t.helper(e));else switch(e.type){case 1:case 9:case 11:zt(e.codegenNode,t);break;case 2:Ht(e,t);break;case 4:jt(e,t);break;case 5:Vt(e,t);break;case 12:zt(e.codegenNode,t);break;case 8:Gt(e,t);break;case 3:qt(e,t);break;case 13:Xt(e,t);break;case 14:Kt(e,t);break;case 15:Jt(e,t);break;case 17:Zt(e,t);break;case 18:$t(e,t);break;case 19:Qt(e,t);break;case 20:en(e,t);break;case 21:Bt(e.body,t,!0,!1);break;case 22:break;case 23:break;case 24:break;case 25:break;case 26:break;case 10:break;default:0}}function Ht(e,t){t.push(JSON.stringify(e.content),e)}function jt(e,t){const{content:n,isStatic:r}=e;t.push(r?JSON.stringify(n):n,e)}function Vt(e,t){const{push:n,helper:r,pure:i}=t;i&&n(Pt),n(r(L)+"("),zt(e.content,t),n(")")}function Gt(e,t){for(let n=0;n<e.children.length;n++){const r=e.children[n];Object(s["G"])(r)?t.push(r):zt(r,t)}}function Wt(e,t){const{push:n}=t;if(8===e.type)n("["),Gt(e,t),n("]");else if(e.isStatic){const t=pe(e.content)?e.content:JSON.stringify(e.content);n(t,e)}else n(`[${e.content}]`,e)}function qt(e,t){const{push:n,helper:r,pure:i}=t;i&&n(Pt),n(`${r(_)}(${JSON.stringify(e.content)})`,e)}function Xt(e,t){const{push:n,helper:r,pure:i}=t,{tag:s,props:o,children:a,patchFlag:c,dynamicProps:l,directives:u,isBlock:h,disableTracking:d,isComponent:p}=e;u&&n(r(E)+"("),h&&n(`(${r(f)}(${d?"true":""}), `),i&&n(Pt);const m=h?Oe(t.inSSR,p):Le(t.inSSR,p);n(r(m)+"(",e),Bt(Yt([s,o,a,c,l]),t),n(")"),h&&n(")"),u&&(n(", "),zt(u,t),n(")"))}function Yt(e){let t=e.length;while(t--)if(null!=e[t])break;return e.slice(0,t+1).map(e=>e||"null")}function Kt(e,t){const{push:n,helper:r,pure:i}=t,o=Object(s["G"])(e.callee)?e.callee:r(e.callee);i&&n(Pt),n(o+"(",e),Bt(e.arguments,t),n(")")}function Jt(e,t){const{push:n,indent:r,deindent:i,newline:s}=t,{properties:o}=e;if(!o.length)return void n("{}",e);const a=o.length>1||!1;n(a?"{":"{ "),a&&r();for(let c=0;c<o.length;c++){const{key:e,value:r}=o[c];Wt(e,t),n(": "),zt(r,t),c<o.length-1&&(n(","),s())}a&&i(),n(a?"}":" }")}function Zt(e,t){Ut(e.elements,t)}function $t(e,t){const{push:n,indent:r,deindent:i}=t,{params:o,returns:a,body:c,newline:l,isSlot:u}=e;u&&n(`_${Y[V]}(`),n("(",e),Object(s["q"])(o)?Bt(o,t):o&&zt(o,t),n(") => "),(l||c)&&(n("{"),r()),a?(l&&n("return "),Object(s["q"])(a)?Ut(a,t):zt(a,t)):c&&zt(c,t),(l||c)&&(i(),n("}")),u&&(e.isNonScopedSlot&&n(", undefined, true"),n(")"))}function Qt(e,t){const{test:n,consequent:r,alternate:i,newline:s}=e,{push:o,indent:a,deindent:c,newline:l}=t;if(4===n.type){const e=!pe(n.content);e&&o("("),jt(n,t),e&&o(")")}else o("("),zt(n,t),o(")");s&&a(),t.indentLevel++,s||o(" "),o("? "),zt(r,t),t.indentLevel--,s&&l(),s||o(" "),o(": ");const u=19===i.type;u||t.indentLevel++,zt(i,t),u||t.indentLevel--,s&&c(!0)}function en(e,t){const{push:n,helper:r,indent:i,deindent:s,newline:o}=t;n(`_cache[${e.index}] || (`),e.isVNode&&(i(),n(r(z)+"(-1),"),o()),n(`_cache[${e.index}] = `),zt(e.value,t),e.isVNode&&(n(","),o(),n(r(z)+"(1),"),o(),n(`_cache[${e.index}]`),s()),n(")")}new RegExp("\\b"+"do,if,for,let,new,try,var,case,else,with,await,break,catch,class,const,super,throw,while,yield,delete,export,import,return,switch,default,extends,finally,continue,debugger,function,arguments,typeof,void".split(",").join("\\b|\\b")+"\\b");const tn=Ot(/^(if|else|else-if)$/,(e,t,n)=>nn(e,t,n,(e,t,r)=>{const i=n.parent.children;let s=i.indexOf(e),o=0;while(s-- >=0){const e=i[s];e&&9===e.type&&(o+=e.branches.length)}return()=>{if(r)e.codegenNode=sn(t,o,n);else{const r=an(e.codegenNode);r.alternate=sn(t,o+e.branches.length-1,n)}}}));function nn(e,t,n,r){if("else"!==t.name&&(!t.exp||!t.exp.content.trim())){const r=t.exp?t.exp.loc:e.loc;n.onError(c(28,t.loc)),t.exp=ne("true",!1,r)}if("if"===t.name){const i=rn(e,t),s={type:9,loc:e.loc,branches:[i]};if(n.replaceNode(s),r)return r(s,i,!0)}else{const i=n.parent.children;let s=i.indexOf(e);while(s-- >=-1){const o=i[s];if(!o||2!==o.type||o.content.trim().length){if(o&&9===o.type){"else-if"===t.name&&void 0===o.branches[o.branches.length-1].condition&&n.onError(c(30,e.loc)),n.removeNode();const i=rn(e,t);0,o.branches.push(i);const s=r&&r(o,i,!1);Lt(i,n),s&&s(),n.currentNode=null}else n.onError(c(30,e.loc));break}n.removeNode(o)}}}function rn(e,t){return{type:10,loc:e.loc,condition:"else"===t.name?void 0:t.exp,children:3!==e.tagType||we(e,"for")?[e]:e.children,userKey:Me(e,"key")}}function sn(e,t,n){return e.condition?oe(e.condition,on(e,t,n),ie(n.helper(_),['""',"true"])):on(e,t,n)}function on(e,t,n){const{helper:r}=n,i=te("key",ne(""+t,!1,J,2)),{children:o}=e,a=o[0],c=1!==o.length||1!==a.type;if(c){if(1===o.length&&11===a.type){const e=a.codegenNode;return De(e,i,n),e}{let t=64;s["e"][64];return $(n,r(l),ee([i]),o,t+"",void 0,void 0,!0,!1,!1,e.loc)}}{const e=a.codegenNode,t=ke(e);return 13===t.type&&Fe(t,n),De(t,i,n),e}}function an(e){while(1)if(19===e.type){if(19!==e.alternate.type)return e;e=e.alternate}else 20===e.type&&(e=e.value)}const cn=Ot("for",(e,t,n)=>{const{helper:r,removeHelper:i}=n;return ln(e,t,n,t=>{const s=ie(r(A),[t.source]),o=Re(e),a=we(e,"memo"),c=Me(e,"key"),u=c&&(6===c.type?ne(c.value.content,!0):c.exp),h=c?te("key",u):null,d=4===t.source.type&&t.source.constType>0,p=d?64:c?128:256;return t.codegenNode=$(n,r(l),void 0,s,p+"",void 0,void 0,!0,!d,!1,e.loc),()=>{let c;const{children:p}=t;const m=1!==p.length||1!==p[0].type,g=Ce(e)?e:o&&1===e.children.length&&Ce(e.children[0])?e.children[0]:null;if(g?(c=g.codegenNode,o&&h&&De(c,h,n)):m?c=$(n,r(l),h?ee([h]):void 0,e.children,"64",void 0,void 0,!0,void 0,!1):(c=p[0].codegenNode,o&&h&&De(c,h,n),c.isBlock!==!d&&(c.isBlock?(i(f),i(Oe(n.inSSR,c.isComponent))):i(Le(n.inSSR,c.isComponent))),c.isBlock=!d,c.isBlock?(r(f),r(Oe(n.inSSR,c.isComponent))):r(Le(n.inSSR,c.isComponent))),a){const e=se(mn(t.parseResult,[ne("_cached")]));e.body=ce([re(["const _memo = (",a.exp,")"]),re(["if (_cached",...u?[" && _cached.key === ",u]:[],` && ${n.helperString(X)}(_cached, _memo)) return _cached`]),re(["const _item = ",c]),ne("_item.memo = _memo"),ne("return _item")]),s.arguments.push(e,ne("_cache"),ne(String(n.cached++)))}else s.arguments.push(se(mn(t.parseResult),c,!0))}})});function ln(e,t,n,r){if(!t.exp)return void n.onError(c(31,t.loc));const i=pn(t.exp,n);if(!i)return void n.onError(c(32,t.loc));const{addIdentifiers:s,removeIdentifiers:o,scopes:a}=n,{source:l,value:u,key:h,index:d}=i,p={type:11,loc:t.loc,source:l,valueAlias:u,keyAlias:h,objectIndexAlias:d,parseResult:i,children:Re(e)?e.children:[e]};n.replaceNode(p),a.vFor++;const f=r&&r(p);return()=>{a.vFor--,f&&f()}}const un=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,hn=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,dn=/^\(|\)$/g;function pn(e,t){const n=e.loc,r=e.content,i=r.match(un);if(!i)return;const[,s,o]=i,a={source:fn(n,o.trim(),r.indexOf(o,s.length)),value:void 0,key:void 0,index:void 0};let c=s.trim().replace(dn,"").trim();const l=s.indexOf(c),u=c.match(hn);if(u){c=c.replace(hn,"").trim();const e=u[1].trim();let t;if(e&&(t=r.indexOf(e,l+c.length),a.key=fn(n,e,t)),u[2]){const i=u[2].trim();i&&(a.index=fn(n,i,r.indexOf(i,a.key?t+e.length:l+c.length)))}}return c&&(a.value=fn(n,c,l)),a}function fn(e,t,n){return ne(t,!1,_e(e,n,t.length))}function mn({value:e,key:t,index:n},r=[]){return gn([e,t,n,...r])}function gn(e){let t=e.length;while(t--)if(e[t])break;return e.slice(0,t+1).map((e,t)=>e||ne("_".repeat(t+1),!1))}const vn=ne("undefined",!1),yn=(e,t)=>{if(1===e.type&&(1===e.tagType||3===e.tagType)){const n=we(e,"slot");if(n)return n.exp,t.scopes.vSlot++,()=>{t.scopes.vSlot--}}},_n=(e,t,n)=>se(e,t,!1,!0,t.length?t[0].loc:n);function xn(e,t,n=_n){t.helper(V);const{children:r,loc:i}=e,s=[],o=[];let a=t.scopes.vSlot>0||t.scopes.vFor>0;const l=we(e,"slot",!0);if(l){const{arg:e,exp:t}=l;e&&!le(e)&&(a=!0),s.push(te(e||ne("default",!0),n(t,r,i)))}let u=!1,h=!1;const d=[],p=new Set;for(let g=0;g<r.length;g++){const e=r[g];let i;if(!Re(e)||!(i=we(e,"slot",!0))){3!==e.type&&d.push(e);continue}if(l){t.onError(c(37,i.loc));break}u=!0;const{children:f,loc:m}=e,{arg:v=ne("default",!0),exp:y,loc:_}=i;let x;le(v)?x=v?v.content:"default":a=!0;const b=n(y,f,m);let w,M,S;if(w=we(e,"if"))a=!0,o.push(oe(w.exp,bn(v,b),vn));else if(M=we(e,/^else(-if)?$/,!0)){let e,n=g;while(n--)if(e=r[n],3!==e.type)break;if(e&&Re(e)&&we(e,"if")){r.splice(g,1),g--;let e=o[o.length-1];while(19===e.alternate.type)e=e.alternate;e.alternate=M.exp?oe(M.exp,bn(v,b),vn):bn(v,b)}else t.onError(c(30,M.loc))}else if(S=we(e,"for")){a=!0;const e=S.parseResult||pn(S.exp,t);e?o.push(ie(t.helper(A),[e.source,se(mn(e),bn(v,b),!0)])):t.onError(c(32,S.loc))}else{if(x){if(p.has(x)){t.onError(c(38,_));continue}p.add(x),"default"===x&&(h=!0)}s.push(te(v,b))}}if(!l){const e=(e,r)=>{const s=n(e,r,i);return t.compatConfig&&(s.isNonScopedSlot=!0),te("default",s)};u?d.length&&d.some(e=>Mn(e))&&(h?t.onError(c(39,d[0].loc)):s.push(e(void 0,d))):s.push(e(void 0,r))}const f=a?2:wn(e.children)?3:1;let m=ee(s.concat(te("_",ne(f+"",!1))),i);return o.length&&(m=ie(t.helper(C),[m,Q(o)])),{slots:m,hasDynamicSlots:a}}function bn(e,t){return ee([te("name",e),te("fn",t)])}function wn(e){for(let t=0;t<e.length;t++){const n=e[t];switch(n.type){case 1:if(2===n.tagType||wn(n.children))return!0;break;case 9:if(wn(n.branches))return!0;break;case 10:case 11:if(wn(n.children))return!0;break}}return!1}function Mn(e){return 2!==e.type&&12!==e.type||(2===e.type?!!e.content.trim():Mn(e.content))}const Sn=new WeakMap,Tn=(e,t)=>function(){if(e=t.currentNode,1!==e.type||0!==e.tagType&&1!==e.tagType)return;const{tag:n,props:r}=e,i=1===e.tagType;let o=i?En(e,t):`"${n}"`;const a=Object(s["y"])(o)&&o.callee===M;let c,l,p,f,m,g,v=0,y=a||o===u||o===h||!i&&("svg"===n||"foreignObject"===n);if(r.length>0){const n=An(e,t);c=n.props,v=n.patchFlag,m=n.dynamicPropNames;const r=n.directives;g=r&&r.length?Q(r.map(e=>Ln(e,t))):void 0,n.shouldUseBlock&&(y=!0)}if(e.children.length>0){o===d&&(y=!0,v|=1024);const n=i&&o!==u&&o!==d;if(n){const{slots:n,hasDynamicSlots:r}=xn(e,t);l=n,r&&(v|=1024)}else if(1===e.children.length&&o!==u){const n=e.children[0],r=n.type,i=5===r||8===r;i&&0===xt(n,t)&&(v|=1),l=i||2===r?n:e.children}else l=e.children}0!==v&&(p=String(v),m&&m.length&&(f=On(m))),e.codegenNode=$(t,o,c,l,p,f,g,!!y,!1,i,e.loc)};function En(e,t,n=!1){let{tag:r}=e;const i=Pn(r),s=Me(e,"is");if(s)if(i||Be("COMPILER_IS_ON_ELEMENT",t)){const e=6===s.type?s.value&&ne(s.value.content,!0):s.exp;if(e)return ie(t.helper(M),[e])}else 6===s.type&&s.value.content.startsWith("vue:")&&(r=s.value.content.slice(4));const o=!i&&we(e,"is");if(o&&o.exp)return ie(t.helper(M),[o.exp]);const a=he(r)||t.isBuiltInComponent(r);return a?(n||t.helper(a),a):(t.helper(w),t.components.add(r),Ne(r,"component"))}function An(e,t,n=e.props,r=!1){const{tag:i,loc:o,children:a}=e,l=1===e.tagType;let u=[];const h=[],d=[],p=a.length>0;let f=!1,m=0,g=!1,v=!1,y=!1,_=!1,x=!1,b=!1;const w=[],M=({key:e,value:n})=>{if(le(e)){const r=e.content,i=Object(s["z"])(r);if(l||!i||"onclick"===r.toLowerCase()||"onUpdate:modelValue"===r||Object(s["C"])(r)||(_=!0),i&&Object(s["C"])(r)&&(b=!0),20===n.type||(4===n.type||8===n.type)&&xt(n,t)>0)return;"ref"===r?g=!0:"class"===r?v=!0:"style"===r?y=!0:"key"===r||w.includes(r)||w.push(r),!l||"class"!==r&&"style"!==r||w.includes(r)||w.push(r)}else x=!0};for(let T=0;T<n.length;T++){const a=n[T];if(6===a.type){const{loc:e,name:n,value:r}=a;let s=!0;if("ref"===n&&(g=!0,t.scopes.vFor>0&&u.push(te(ne("ref_for",!0),ne("true")))),"is"===n&&(Pn(i)||r&&r.content.startsWith("vue:")||Be("COMPILER_IS_ON_ELEMENT",t)))continue;u.push(te(ne(n,!0,_e(e,0,n.length)),ne(r?r.content:"",s,r?r.loc:e)))}else{const{name:n,arg:m,exp:g,loc:v}=a,y="bind"===n,_="on"===n;if("slot"===n){l||t.onError(c(40,v));continue}if("once"===n||"memo"===n)continue;if("is"===n||y&&Se(m,"is")&&(Pn(i)||Be("COMPILER_IS_ON_ELEMENT",t)))continue;if(_&&r)continue;if((y&&Se(m,"key")||_&&p&&Se(m,"vue:before-update"))&&(f=!0),y&&Se(m,"ref")&&t.scopes.vFor>0&&u.push(te(ne("ref_for",!0),ne("true"))),!m&&(y||_)){if(x=!0,g)if(u.length&&(h.push(ee(Rn(u),o)),u=[]),y){if(Be("COMPILER_V_BIND_OBJECT_ORDER",t)){h.unshift(g);continue}h.push(g)}else h.push({type:14,loc:v,callee:t.helper(k),arguments:[g]});else t.onError(c(y?34:35,v));continue}const b=t.directiveTransforms[n];if(b){const{props:n,needRuntime:i}=b(a,e,t);!r&&n.forEach(M),u.push(...n),i&&(d.push(a),Object(s["H"])(i)&&Sn.set(a,i))}else Object(s["r"])(n)||(d.push(a),p&&(f=!0))}}let S=void 0;if(h.length?(u.length&&h.push(ee(Rn(u),o)),S=h.length>1?ie(t.helper(O),h,o):h[0]):u.length&&(S=ee(Rn(u),o)),x?m|=16:(v&&!l&&(m|=2),y&&!l&&(m|=4),w.length&&(m|=8),_&&(m|=32)),f||0!==m&&32!==m||!(g||b||d.length>0)||(m|=512),!t.inSSR&&S)switch(S.type){case 15:let e=-1,n=-1,r=!1;for(let t=0;t<S.properties.length;t++){const i=S.properties[t].key;le(i)?"class"===i.content?e=t:"style"===i.content&&(n=t):i.isHandlerKey||(r=!0)}const i=S.properties[e],s=S.properties[n];r?S=ie(t.helper(D),[S]):(i&&!le(i.value)&&(i.value=ie(t.helper(P),[i.value])),!s||le(s.value)||!y&&17!==s.value.type||(s.value=ie(t.helper(I),[s.value])));break;case 14:break;default:S=ie(t.helper(D),[ie(t.helper(N),[S])]);break}return{props:S,directives:d,patchFlag:m,dynamicPropNames:w,shouldUseBlock:f}}function Rn(e){const t=new Map,n=[];for(let r=0;r<e.length;r++){const i=e[r];if(8===i.key.type||!i.key.isStatic){n.push(i);continue}const o=i.key.content,a=t.get(o);a?("style"===o||"class"===o||Object(s["z"])(o))&&Cn(a,i):(t.set(o,i),n.push(i))}return n}function Cn(e,t){17===e.value.type?e.value.elements.push(t.value):e.value=Q([e.value,t.value],e.loc)}function Ln(e,t){const n=[],r=Sn.get(e);r?n.push(t.helperString(r)):(t.helper(S),t.directives.add(e.name),n.push(Ne(e.name,"directive")));const{loc:i}=e;if(e.exp&&n.push(e.exp),e.arg&&(e.exp||n.push("void 0"),n.push(e.arg)),Object.keys(e.modifiers).length){e.arg||(e.exp||n.push("void 0"),n.push("void 0"));const t=ne("true",!1,i);n.push(ee(e.modifiers.map(e=>te(e,t)),i))}return Q(n,e.loc)}function On(e){let t="[";for(let n=0,r=e.length;n<r;n++)t+=JSON.stringify(e[n]),n<r-1&&(t+=", ");return t+"]"}function Pn(e){return"component"===e||"Component"===e}const In=e=>{const t=Object.create(null);return n=>{const r=t[n];return r||(t[n]=e(n))}},Dn=/-(\w)/g,Nn=In(e=>e.replace(Dn,(e,t)=>t?t.toUpperCase():"")),kn=(e,t)=>{if(Ce(e)){const{children:n,loc:r}=e,{slotName:i,slotProps:s}=Fn(e,t),o=[t.prefixIdentifiers?"_ctx.$slots":"$slots",i,"{}","undefined","true"];let a=2;s&&(o[2]=s,a=3),n.length&&(o[3]=se([],n,!1,!1,r),a=4),t.scopeId&&!t.slotted&&(a=5),o.splice(a),e.codegenNode=ie(t.helper(R),o,r)}};function Fn(e,t){let n='"default"',r=void 0;const i=[];for(let s=0;s<e.props.length;s++){const t=e.props[s];6===t.type?t.value&&("name"===t.name?n=JSON.stringify(t.value.content):(t.name=Nn(t.name),i.push(t))):"bind"===t.name&&Se(t.arg,"name")?t.exp&&(n=t.exp):("bind"===t.name&&t.arg&&le(t.arg)&&(t.arg.content=Nn(t.arg.content)),i.push(t))}if(i.length>0){const{props:n,directives:s}=An(e,t,i);r=n,s.length&&t.onError(c(36,s[0].loc))}return{slotName:n,slotProps:r}}const Un=/^\s*([\w$_]+|(async\s*)?\([^)]*?\))\s*=>|^\s*(async\s+)?function(?:\s+[\w$]+)?\s*\(/,Bn=(e,t,n,r)=>{const{loc:i,modifiers:o,arg:a}=e;let l;if(e.exp||o.length||n.onError(c(35,i)),4===a.type)if(a.isStatic){let e=a.content;e.startsWith("vue:")&&(e="vnode-"+e.slice(4)),l=ne(Object(s["S"])(Object(s["f"])(e)),!0,a.loc)}else l=re([n.helperString(B)+"(",a,")"]);else l=a,l.children.unshift(n.helperString(B)+"("),l.children.push(")");let u=e.exp;u&&!u.content.trim()&&(u=void 0);let h=n.cacheHandlers&&!u&&!n.inVOnce;if(u){const e=ye(u.content),t=!(e||Un.test(u.content)),n=u.content.includes(";");0,(t||h&&e)&&(u=re([`${t?"$event":"(...args)"} => ${n?"{":"("}`,u,n?"}":")"]))}let d={props:[te(l,u||ne("() => {}",!1,i))]};return r&&(d=r(d)),h&&(d.props[0].value=n.cache(d.props[0].value)),d.props.forEach(e=>e.key.isHandlerKey=!0),d},zn=(e,t,n)=>{const{exp:r,modifiers:i,loc:o}=e,a=e.arg;return 4!==a.type?(a.children.unshift("("),a.children.push(') || ""')):a.isStatic||(a.content=a.content+' || ""'),i.includes("camel")&&(4===a.type?a.isStatic?a.content=Object(s["f"])(a.content):a.content=`${n.helperString(F)}(${a.content})`:(a.children.unshift(n.helperString(F)+"("),a.children.push(")"))),n.inSSR||(i.includes("prop")&&Hn(a,"."),i.includes("attr")&&Hn(a,"^")),!r||4===r.type&&!r.content.trim()?(n.onError(c(34,o)),{props:[te(a,ne("",!0,o))]}):{props:[te(a,r)]}},Hn=(e,t)=>{4===e.type?e.isStatic?e.content=t+e.content:e.content=`\`${t}\${${e.content}}\``:(e.children.unshift(`'${t}' + (`),e.children.push(")"))},jn=(e,t)=>{if(0===e.type||1===e.type||11===e.type||10===e.type)return()=>{const n=e.children;let r=void 0,i=!1;for(let e=0;e<n.length;e++){const t=n[e];if(Ee(t)){i=!0;for(let i=e+1;i<n.length;i++){const s=n[i];if(!Ee(s)){r=void 0;break}r||(r=n[e]={type:8,loc:t.loc,children:[t]}),r.children.push(" + ",s),n.splice(i,1),i--}}}if(i&&(1!==n.length||0!==e.type&&(1!==e.type||0!==e.tagType||e.props.find(e=>7===e.type&&!t.directiveTransforms[e.name])||"template"===e.tag)))for(let e=0;e<n.length;e++){const r=n[e];if(Ee(r)||8===r.type){const i=[];2===r.type&&" "===r.content||i.push(r),t.ssr||0!==xt(r,t)||i.push("1"),n[e]={type:12,content:r,loc:r.loc,codegenNode:ie(t.helper(x),i)}}}}},Vn=new WeakSet,Gn=(e,t)=>{if(1===e.type&&we(e,"once",!0)){if(Vn.has(e)||t.inVOnce)return;return Vn.add(e),t.inVOnce=!0,t.helper(z),()=>{t.inVOnce=!1;const e=t.currentNode;e.codegenNode&&(e.codegenNode=t.cache(e.codegenNode,!0))}}},Wn=(e,t,n)=>{const{exp:r,arg:i}=e;if(!r)return n.onError(c(41,e.loc)),qn();const s=r.loc.source,o=4===r.type?r.content:s;n.bindingMetadata[s];const a=!1;if(!o.trim()||!ye(o)&&!a)return n.onError(c(42,r.loc)),qn();const l=i||ne("modelValue",!0),u=i?le(i)?"onUpdate:"+i.content:re(['"onUpdate:" + ',i]):"onUpdate:modelValue";let h;const d=n.isTS?"($event: any)":"$event";h=re([d+" => ((",r,") = $event)"]);const p=[te(l,e.exp),te(u,h)];if(e.modifiers.length&&1===t.tagType){const t=e.modifiers.map(e=>(pe(e)?e:JSON.stringify(e))+": true").join(", "),n=i?le(i)?i.content+"Modifiers":re([i,' + "Modifiers"']):"modelModifiers";p.push(te(n,ne(`{ ${t} }`,!1,e.loc,2)))}return qn(p)};function qn(e=[]){return{props:e}}const Xn=/[\w).+\-_$\]]/,Yn=(e,t)=>{Be("COMPILER_FILTER",t)&&(5===e.type&&Kn(e.content,t),1===e.type&&e.props.forEach(e=>{7===e.type&&"for"!==e.name&&e.exp&&Kn(e.exp,t)}))};function Kn(e,t){if(4===e.type)Jn(e,t);else for(let n=0;n<e.children.length;n++){const r=e.children[n];"object"===typeof r&&(4===r.type?Jn(r,t):8===r.type?Kn(e,t):5===r.type&&Kn(r.content,t))}}function Jn(e,t){const n=e.content;let r,i,s,o,a=!1,c=!1,l=!1,u=!1,h=0,d=0,p=0,f=0,m=[];for(s=0;s<n.length;s++)if(i=r,r=n.charCodeAt(s),a)39===r&&92!==i&&(a=!1);else if(c)34===r&&92!==i&&(c=!1);else if(l)96===r&&92!==i&&(l=!1);else if(u)47===r&&92!==i&&(u=!1);else if(124!==r||124===n.charCodeAt(s+1)||124===n.charCodeAt(s-1)||h||d||p){switch(r){case 34:c=!0;break;case 39:a=!0;break;case 96:l=!0;break;case 40:p++;break;case 41:p--;break;case 91:d++;break;case 93:d--;break;case 123:h++;break;case 125:h--;break}if(47===r){let e,t=s-1;for(;t>=0;t--)if(e=n.charAt(t)," "!==e)break;e&&Xn.test(e)||(u=!0)}}else void 0===o?(f=s+1,o=n.slice(0,s).trim()):g();function g(){m.push(n.slice(f,s).trim()),f=s+1}if(void 0===o?o=n.slice(0,s).trim():0!==f&&g(),m.length){for(s=0;s<m.length;s++)o=Zn(o,m[s],t);e.content=o}}function Zn(e,t,n){n.helper(T);const r=t.indexOf("(");if(r<0)return n.filters.add(t),`${Ne(t,"filter")}(${e})`;{const i=t.slice(0,r),s=t.slice(r+1);return n.filters.add(i),`${Ne(i,"filter")}(${e}${")"!==s?","+s:s}`}}const $n=new WeakSet,Qn=(e,t)=>{if(1===e.type){const n=we(e,"memo");if(!n||$n.has(e))return;return $n.add(e),()=>{const r=e.codegenNode||t.currentNode.codegenNode;r&&13===r.type&&(1!==e.tagType&&Fe(r,t),e.codegenNode=ie(t.helper(q),[n.exp,se(void 0,r),"_cache",String(t.cached++)]))}}};function er(e){return[[Gn,tn,Qn,cn,Yn,kn,Tn,yn,jn],{on:Bn,bind:zn,model:Wn}]}function tr(e,t={}){const n=t.onError||o,r="module"===t.mode;!0===t.prefixIdentifiers?n(c(46)):r&&n(c(47));const i=!1;t.cacheHandlers&&n(c(48)),t.scopeId&&!r&&n(c(49));const a=Object(s["G"])(e)?Ge(e,t):e,[l,u]=er();return At(a,Object(s["i"])({},t,{prefixIdentifiers:i,nodeTransforms:[...l,...t.nodeTransforms||[]],directiveTransforms:Object(s["i"])({},u,t.directiveTransforms||{})})),Dt(a,Object(s["i"])({},t,{prefixIdentifiers:i}))}const nr=()=>({props:[]}),rr=Symbol(""),ir=Symbol(""),sr=Symbol(""),or=Symbol(""),ar=Symbol(""),cr=Symbol(""),lr=Symbol(""),ur=Symbol(""),hr=Symbol(""),dr=Symbol("");let pr;function fr(e,t=!1){return pr||(pr=document.createElement("div")),t?(pr.innerHTML=`<div foo="${e.replace(/"/g,"&quot;")}">`,pr.children[0].getAttribute("foo")):(pr.innerHTML=e,pr.textContent)}K({[rr]:"vModelRadio",[ir]:"vModelCheckbox",[sr]:"vModelText",[or]:"vModelSelect",[ar]:"vModelDynamic",[cr]:"withModifiers",[lr]:"withKeys",[ur]:"vShow",[hr]:"Transition",[dr]:"TransitionGroup"});const mr=Object(s["L"])("style,iframe,script,noscript",!0),gr={isVoidTag:s["I"],isNativeTag:e=>Object(s["u"])(e)||Object(s["D"])(e),isPreTag:e=>"pre"===e,decodeEntities:fr,isBuiltInComponent:e=>ue(e,"Transition")?hr:ue(e,"TransitionGroup")?dr:void 0,getNamespace(e,t){let n=t?t.ns:0;if(t&&2===n)if("annotation-xml"===t.tag){if("svg"===e)return 1;t.props.some(e=>6===e.type&&"encoding"===e.name&&null!=e.value&&("text/html"===e.value.content||"application/xhtml+xml"===e.value.content))&&(n=0)}else/^m(?:[ions]|text)$/.test(t.tag)&&"mglyph"!==e&&"malignmark"!==e&&(n=0);else t&&1===n&&("foreignObject"!==t.tag&&"desc"!==t.tag&&"title"!==t.tag||(n=0));if(0===n){if("svg"===e)return 1;if("math"===e)return 2}return n},getTextMode({tag:e,ns:t}){if(0===t){if("textarea"===e||"title"===e)return 1;if(mr(e))return 2}return 0}},vr=e=>{1===e.type&&e.props.forEach((t,n)=>{6===t.type&&"style"===t.name&&t.value&&(e.props[n]={type:7,name:"bind",arg:ne("style",!0,t.loc),exp:yr(t.value.content,t.loc),modifiers:[],loc:t.loc})})},yr=(e,t)=>{const n=Object(s["P"])(e);return ne(JSON.stringify(n),!1,t,3)};function _r(e,t){return c(e,t,void 0)}const xr=(e,t,n)=>{const{exp:r,loc:i}=e;return r||n.onError(_r(50,i)),t.children.length&&(n.onError(_r(51,i)),t.children.length=0),{props:[te(ne("innerHTML",!0,i),r||ne("",!0))]}},br=(e,t,n)=>{const{exp:r,loc:i}=e;return r||n.onError(_r(52,i)),t.children.length&&(n.onError(_r(53,i)),t.children.length=0),{props:[te(ne("textContent",!0),r?ie(n.helperString(L),[r],i):ne("",!0))]}},wr=(e,t,n)=>{const r=Wn(e,t,n);if(!r.props.length||1===t.tagType)return r;e.arg&&n.onError(_r(55,e.arg.loc));const{tag:i}=t,s=n.isCustomElement(i);if("input"===i||"textarea"===i||"select"===i||s){let o=sr,a=!1;if("input"===i||s){const r=Me(t,"type");if(r){if(7===r.type)o=ar;else if(r.value)switch(r.value.content){case"radio":o=rr;break;case"checkbox":o=ir;break;case"file":a=!0,n.onError(_r(56,e.loc));break;default:break}}else Te(t)&&(o=ar)}else"select"===i&&(o=or);a||(r.needRuntime=n.helper(o))}else n.onError(_r(54,e.loc));return r.props=r.props.filter(e=>!(4===e.key.type&&"modelValue"===e.key.content)),r},Mr=Object(s["L"])("passive,once,capture"),Sr=Object(s["L"])("stop,prevent,self,ctrl,shift,alt,meta,exact,middle"),Tr=Object(s["L"])("left,right"),Er=Object(s["L"])("onkeyup,onkeydown,onkeypress",!0),Ar=(e,t,n,r)=>{const i=[],s=[],o=[];for(let a=0;a<t.length;a++){const c=t[a];"native"===c&&ze("COMPILER_V_ON_NATIVE",n,r)||Mr(c)?o.push(c):Tr(c)?le(e)?Er(e.content)?i.push(c):s.push(c):(i.push(c),s.push(c)):Sr(c)?s.push(c):i.push(c)}return{keyModifiers:i,nonKeyModifiers:s,eventOptionModifiers:o}},Rr=(e,t)=>{const n=le(e)&&"onclick"===e.content.toLowerCase();return n?ne(t,!0):4!==e.type?re(["(",e,`) === "onClick" ? "${t}" : (`,e,")"]):e},Cr=(e,t,n)=>Bn(e,t,n,t=>{const{modifiers:r}=e;if(!r.length)return t;let{key:i,value:o}=t.props[0];const{keyModifiers:a,nonKeyModifiers:c,eventOptionModifiers:l}=Ar(i,r,n,e.loc);if(c.includes("right")&&(i=Rr(i,"onContextmenu")),c.includes("middle")&&(i=Rr(i,"onMouseup")),c.length&&(o=ie(n.helper(cr),[o,JSON.stringify(c)])),!a.length||le(i)&&!Er(i.content)||(o=ie(n.helper(lr),[o,JSON.stringify(a)])),l.length){const e=l.map(s["g"]).join("");i=le(i)?ne(`${i.content}${e}`,!0):re(["(",i,`) + "${e}"`])}return{props:[te(i,o)]}}),Lr=(e,t,n)=>{const{exp:r,loc:i}=e;return r||n.onError(_r(58,i)),{props:[],needRuntime:n.helper(ur)}};const Or=(e,t)=>{1!==e.type||0!==e.tagType||"script"!==e.tag&&"style"!==e.tag||(t.onError(_r(60,e.loc)),t.removeNode())},Pr=[vr],Ir={cloak:nr,html:xr,text:br,model:wr,on:Cr,show:Lr};function Dr(e,t={}){return tr(e,Object(s["i"])({},gr,t,{nodeTransforms:[Or,...Pr,...t.nodeTransforms||[]],directiveTransforms:Object(s["i"])({},Ir,t.directiveTransforms||{}),transformHoist:null}))}const Nr=Object.create(null);function kr(e,t){if(!Object(s["G"])(e)){if(!e.nodeType)return s["d"];e=e.innerHTML}const n=e,i=Nr[n];if(i)return i;if("#"===e[0]){const t=document.querySelector(e);0,e=t?t.innerHTML:""}const{code:o}=Dr(e,Object(s["i"])({hoistStatic:!0,onError:void 0,onWarn:s["d"]},t));const a=new Function("Vue",o)(r);return a._rc=!0,Nr[n]=a}Object(i["Eb"])(kr)},"0997":function(e,t,n){var r,i,s,o,a=n("0a26"),c=n("c10c"),l=n("8d88"),u=n("87b4"),h=n("46ec"),d=n("f42c"),p=n("7cff"),f=n("9bf1"),m=n("69d4"),g=n("51a4"),v=n("f516"),y=n("d0a7"),_=a.setImmediate,x=a.clearImmediate,b=a.process,w=a.Dispatch,M=a.Function,S=a.MessageChannel,T=a.String,E=0,A={},R="onreadystatechange";try{r=a.location}catch(I){}var C=function(e){if(h(A,e)){var t=A[e];delete A[e],t()}},L=function(e){return function(){C(e)}},O=function(e){C(e.data)},P=function(e){a.postMessage(T(e),r.protocol+"//"+r.host)};_&&x||(_=function(e){g(arguments.length,1);var t=u(e)?e:M(e),n=f(arguments,1);return A[++E]=function(){c(t,void 0,n)},i(E),E},x=function(e){delete A[e]},y?i=function(e){b.nextTick(L(e))}:w&&w.now?i=function(e){w.now(L(e))}:S&&!v?(s=new S,o=s.port2,s.port1.onmessage=O,i=l(o.postMessage,o)):a.addEventListener&&u(a.postMessage)&&!a.importScripts&&r&&"file:"!==r.protocol&&!d(P)?(i=P,a.addEventListener("message",O,!1)):i=R in m("script")?function(e){p.appendChild(m("script"))[R]=function(){p.removeChild(this),C(e)}}:function(e){setTimeout(L(e),0)}),e.exports={set:_,clear:x}},"09eb":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("b90d");const i={type:"change"};class s extends r["q"]{constructor(e,t){super(),void 0===t&&(console.warn('THREE.FlyControls: The second parameter "domElement" is now mandatory.'),t=document),this.object=e,this.domElement=t,this.movementSpeed=1,this.rollSpeed=.005,this.dragToLook=!1,this.autoForward=!1;const n=this,s=1e-6,a=new r["lb"],c=new r["Ib"];this.tmpQuaternion=new r["lb"],this.mouseStatus=0,this.moveState={up:0,down:0,left:0,right:0,forward:0,back:0,pitchUp:0,pitchDown:0,yawLeft:0,yawRight:0,rollLeft:0,rollRight:0},this.moveVector=new r["Ib"](0,0,0),this.rotationVector=new r["Ib"](0,0,0),this.keydown=function(e){if(!e.altKey){switch(e.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=.1;break;case"KeyW":this.moveState.forward=1;break;case"KeyS":this.moveState.back=1;break;case"KeyA":this.moveState.left=1;break;case"KeyD":this.moveState.right=1;break;case"KeyR":this.moveState.up=1;break;case"KeyF":this.moveState.down=1;break;case"ArrowUp":this.moveState.pitchUp=1;break;case"ArrowDown":this.moveState.pitchDown=1;break;case"ArrowLeft":this.moveState.yawLeft=1;break;case"ArrowRight":this.moveState.yawRight=1;break;case"KeyQ":this.moveState.rollLeft=1;break;case"KeyE":this.moveState.rollRight=1;break}this.updateMovementVector(),this.updateRotationVector()}},this.keyup=function(e){switch(e.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=1;break;case"KeyW":this.moveState.forward=0;break;case"KeyS":this.moveState.back=0;break;case"KeyA":this.moveState.left=0;break;case"KeyD":this.moveState.right=0;break;case"KeyR":this.moveState.up=0;break;case"KeyF":this.moveState.down=0;break;case"ArrowUp":this.moveState.pitchUp=0;break;case"ArrowDown":this.moveState.pitchDown=0;break;case"ArrowLeft":this.moveState.yawLeft=0;break;case"ArrowRight":this.moveState.yawRight=0;break;case"KeyQ":this.moveState.rollLeft=0;break;case"KeyE":this.moveState.rollRight=0;break}this.updateMovementVector(),this.updateRotationVector()},this.mousedown=function(e){if(this.dragToLook)this.mouseStatus++;else{switch(e.button){case 0:this.moveState.forward=1;break;case 2:this.moveState.back=1;break}this.updateMovementVector()}},this.mousemove=function(e){if(!this.dragToLook||this.mouseStatus>0){const t=this.getContainerDimensions(),n=t.size[0]/2,r=t.size[1]/2;this.moveState.yawLeft=-(e.pageX-t.offset[0]-n)/n,this.moveState.pitchDown=(e.pageY-t.offset[1]-r)/r,this.updateRotationVector()}},this.mouseup=function(e){if(this.dragToLook)this.mouseStatus--,this.moveState.yawLeft=this.moveState.pitchDown=0;else{switch(e.button){case 0:this.moveState.forward=0;break;case 2:this.moveState.back=0;break}this.updateMovementVector()}this.updateRotationVector()},this.update=function(e){const t=e*n.movementSpeed,r=e*n.rollSpeed;n.object.translateX(n.moveVector.x*t),n.object.translateY(n.moveVector.y*t),n.object.translateZ(n.moveVector.z*t),n.tmpQuaternion.set(n.rotationVector.x*r,n.rotationVector.y*r,n.rotationVector.z*r,1).normalize(),n.object.quaternion.multiply(n.tmpQuaternion),(c.distanceToSquared(n.object.position)>s||8*(1-a.dot(n.object.quaternion))>s)&&(n.dispatchEvent(i),a.copy(n.object.quaternion),c.copy(n.object.position))},this.updateMovementVector=function(){const e=this.moveState.forward||this.autoForward&&!this.moveState.back?1:0;this.moveVector.x=-this.moveState.left+this.moveState.right,this.moveVector.y=-this.moveState.down+this.moveState.up,this.moveVector.z=-e+this.moveState.back},this.updateRotationVector=function(){this.rotationVector.x=-this.moveState.pitchDown+this.moveState.pitchUp,this.rotationVector.y=-this.moveState.yawRight+this.moveState.yawLeft,this.rotationVector.z=-this.moveState.rollRight+this.moveState.rollLeft},this.getContainerDimensions=function(){return this.domElement!=document?{size:[this.domElement.offsetWidth,this.domElement.offsetHeight],offset:[this.domElement.offsetLeft,this.domElement.offsetTop]}:{size:[window.innerWidth,window.innerHeight],offset:[0,0]}},this.dispose=function(){this.domElement.removeEventListener("contextmenu",o),this.domElement.removeEventListener("mousedown",u),this.domElement.removeEventListener("mousemove",l),this.domElement.removeEventListener("mouseup",h),window.removeEventListener("keydown",d),window.removeEventListener("keyup",p)};const l=this.mousemove.bind(this),u=this.mousedown.bind(this),h=this.mouseup.bind(this),d=this.keydown.bind(this),p=this.keyup.bind(this);this.domElement.addEventListener("contextmenu",o),this.domElement.addEventListener("mousemove",l),this.domElement.addEventListener("mousedown",u),this.domElement.addEventListener("mouseup",h),window.addEventListener("keydown",d),window.addEventListener("keyup",p),this.updateMovementVector(),this.updateRotationVector()}}function o(e){e.preventDefault()}},"0a26":function(e,t,n){(function(t){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||function(){return this}()||Function("return this")()}).call(this,n("d8fc"))},"0aaf":function(e,t,n){var r=n("69d4"),i=r("span").classList,s=i&&i.constructor&&i.constructor.prototype;e.exports=s===Object.prototype?void 0:s},"0b78":function(e,t,n){var r=n("53f4"),i=r("iterator"),s=!1;try{var o=0,a={next:function(){return{done:!!o++}},return:function(){s=!0}};a[i]=function(){return this},Array.from(a,(function(){throw 2}))}catch(c){}e.exports=function(e,t){if(!t&&!s)return!1;var n=!1;try{var r={};r[i]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(c){}return n}},"0b91":function(e,t,n){var r=n("0a26"),i=n("20a4"),s=n("1459"),o=r.TypeError;e.exports=function(e){if(i(e))return e;throw o(s(e)+" is not a constructor")}},"0d0a":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("b90d");const i={type:"change"},s={type:"start"},o={type:"end"};class a extends r["q"]{constructor(e,t){super(),void 0===t&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new r["Ib"],this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:r["L"].ROTATE,MIDDLE:r["L"].DOLLY,RIGHT:r["L"].PAN},this.touches={ONE:r["yb"].ROTATE,TWO:r["yb"].DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return u.phi},this.getAzimuthalAngle=function(){return u.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(e){e.addEventListener("keydown",oe),this._domElementKeyEvents=e},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(i),n.update(),c=a.NONE},this.update=function(){const t=new r["Ib"],s=(new r["lb"]).setFromUnitVectors(e.up,new r["Ib"](0,1,0)),o=s.clone().invert(),m=new r["Ib"],g=new r["lb"],v=2*Math.PI;return function(){const e=n.object.position;t.copy(e).sub(n.target),t.applyQuaternion(s),u.setFromVector3(t),n.autoRotate&&c===a.NONE&&R(E()),n.enableDamping?(u.theta+=h.theta*n.dampingFactor,u.phi+=h.phi*n.dampingFactor):(u.theta+=h.theta,u.phi+=h.phi);let r=n.minAzimuthAngle,y=n.maxAzimuthAngle;return isFinite(r)&&isFinite(y)&&(r<-Math.PI?r+=v:r>Math.PI&&(r-=v),y<-Math.PI?y+=v:y>Math.PI&&(y-=v),u.theta=r<=y?Math.max(r,Math.min(y,u.theta)):u.theta>(r+y)/2?Math.max(r,u.theta):Math.min(y,u.theta)),u.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,u.phi)),u.makeSafe(),u.radius*=d,u.radius=Math.max(n.minDistance,Math.min(n.maxDistance,u.radius)),!0===n.enableDamping?n.target.addScaledVector(p,n.dampingFactor):n.target.add(p),t.setFromSpherical(u),t.applyQuaternion(o),e.copy(n.target).add(t),n.object.lookAt(n.target),!0===n.enableDamping?(h.theta*=1-n.dampingFactor,h.phi*=1-n.dampingFactor,p.multiplyScalar(1-n.dampingFactor)):(h.set(0,0,0),p.set(0,0,0)),d=1,!!(f||m.distanceToSquared(n.object.position)>l||8*(1-g.dot(n.object.quaternion))>l)&&(n.dispatchEvent(i),m.copy(n.object.position),g.copy(n.object.quaternion),f=!1,!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",le),n.domElement.removeEventListener("pointerdown",Q),n.domElement.removeEventListener("pointercancel",ne),n.domElement.removeEventListener("wheel",se),n.domElement.removeEventListener("pointermove",ee),n.domElement.removeEventListener("pointerup",te),null!==n._domElementKeyEvents&&n._domElementKeyEvents.removeEventListener("keydown",oe)};const n=this,a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let c=a.NONE;const l=1e-6,u=new r["wb"],h=new r["wb"];let d=1;const p=new r["Ib"];let f=!1;const m=new r["Hb"],g=new r["Hb"],v=new r["Hb"],y=new r["Hb"],_=new r["Hb"],x=new r["Hb"],b=new r["Hb"],w=new r["Hb"],M=new r["Hb"],S=[],T={};function E(){return 2*Math.PI/60/60*n.autoRotateSpeed}function A(){return Math.pow(.95,n.zoomSpeed)}function R(e){h.theta-=e}function C(e){h.phi-=e}const L=function(){const e=new r["Ib"];return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),p.add(e)}}(),O=function(){const e=new r["Ib"];return function(t,r){!0===n.screenSpacePanning?e.setFromMatrixColumn(r,1):(e.setFromMatrixColumn(r,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),p.add(e)}}(),P=function(){const e=new r["Ib"];return function(t,r){const i=n.domElement;if(n.object.isPerspectiveCamera){const s=n.object.position;e.copy(s).sub(n.target);let o=e.length();o*=Math.tan(n.object.fov/2*Math.PI/180),L(2*t*o/i.clientHeight,n.object.matrix),O(2*r*o/i.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(L(t*(n.object.right-n.object.left)/n.object.zoom/i.clientWidth,n.object.matrix),O(r*(n.object.top-n.object.bottom)/n.object.zoom/i.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function I(e){n.object.isPerspectiveCamera?d/=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*e)),n.object.updateProjectionMatrix(),f=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function D(e){n.object.isPerspectiveCamera?d*=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/e)),n.object.updateProjectionMatrix(),f=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function N(e){m.set(e.clientX,e.clientY)}function k(e){b.set(e.clientX,e.clientY)}function F(e){y.set(e.clientX,e.clientY)}function U(e){g.set(e.clientX,e.clientY),v.subVectors(g,m).multiplyScalar(n.rotateSpeed);const t=n.domElement;R(2*Math.PI*v.x/t.clientHeight),C(2*Math.PI*v.y/t.clientHeight),m.copy(g),n.update()}function B(e){w.set(e.clientX,e.clientY),M.subVectors(w,b),M.y>0?I(A()):M.y<0&&D(A()),b.copy(w),n.update()}function z(e){_.set(e.clientX,e.clientY),x.subVectors(_,y).multiplyScalar(n.panSpeed),P(x.x,x.y),y.copy(_),n.update()}function H(e){e.deltaY<0?D(A()):e.deltaY>0&&I(A()),n.update()}function j(e){let t=!1;switch(e.code){case n.keys.UP:P(0,n.keyPanSpeed),t=!0;break;case n.keys.BOTTOM:P(0,-n.keyPanSpeed),t=!0;break;case n.keys.LEFT:P(n.keyPanSpeed,0),t=!0;break;case n.keys.RIGHT:P(-n.keyPanSpeed,0),t=!0;break}t&&(e.preventDefault(),n.update())}function V(){if(1===S.length)m.set(S[0].pageX,S[0].pageY);else{const e=.5*(S[0].pageX+S[1].pageX),t=.5*(S[0].pageY+S[1].pageY);m.set(e,t)}}function G(){if(1===S.length)y.set(S[0].pageX,S[0].pageY);else{const e=.5*(S[0].pageX+S[1].pageX),t=.5*(S[0].pageY+S[1].pageY);y.set(e,t)}}function W(){const e=S[0].pageX-S[1].pageX,t=S[0].pageY-S[1].pageY,n=Math.sqrt(e*e+t*t);b.set(0,n)}function q(){n.enableZoom&&W(),n.enablePan&&G()}function X(){n.enableZoom&&W(),n.enableRotate&&V()}function Y(e){if(1==S.length)g.set(e.pageX,e.pageY);else{const t=pe(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);g.set(n,r)}v.subVectors(g,m).multiplyScalar(n.rotateSpeed);const t=n.domElement;R(2*Math.PI*v.x/t.clientHeight),C(2*Math.PI*v.y/t.clientHeight),m.copy(g)}function K(e){if(1===S.length)_.set(e.pageX,e.pageY);else{const t=pe(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);_.set(n,r)}x.subVectors(_,y).multiplyScalar(n.panSpeed),P(x.x,x.y),y.copy(_)}function J(e){const t=pe(e),r=e.pageX-t.x,i=e.pageY-t.y,s=Math.sqrt(r*r+i*i);w.set(0,s),M.set(0,Math.pow(w.y/b.y,n.zoomSpeed)),I(M.y),b.copy(w)}function Z(e){n.enableZoom&&J(e),n.enablePan&&K(e)}function $(e){n.enableZoom&&J(e),n.enableRotate&&Y(e)}function Q(e){!1!==n.enabled&&(0===S.length&&(n.domElement.setPointerCapture(e.pointerId),n.domElement.addEventListener("pointermove",ee),n.domElement.addEventListener("pointerup",te)),ue(e),"touch"===e.pointerType?ae(e):re(e))}function ee(e){!1!==n.enabled&&("touch"===e.pointerType?ce(e):ie(e))}function te(e){he(e),0===S.length&&(n.domElement.releasePointerCapture(e.pointerId),n.domElement.removeEventListener("pointermove",ee),n.domElement.removeEventListener("pointerup",te)),n.dispatchEvent(o),c=a.NONE}function ne(e){he(e)}function re(e){let t;switch(e.button){case 0:t=n.mouseButtons.LEFT;break;case 1:t=n.mouseButtons.MIDDLE;break;case 2:t=n.mouseButtons.RIGHT;break;default:t=-1}switch(t){case r["L"].DOLLY:if(!1===n.enableZoom)return;k(e),c=a.DOLLY;break;case r["L"].ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enablePan)return;F(e),c=a.PAN}else{if(!1===n.enableRotate)return;N(e),c=a.ROTATE}break;case r["L"].PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enableRotate)return;N(e),c=a.ROTATE}else{if(!1===n.enablePan)return;F(e),c=a.PAN}break;default:c=a.NONE}c!==a.NONE&&n.dispatchEvent(s)}function ie(e){if(!1!==n.enabled)switch(c){case a.ROTATE:if(!1===n.enableRotate)return;U(e);break;case a.DOLLY:if(!1===n.enableZoom)return;B(e);break;case a.PAN:if(!1===n.enablePan)return;z(e);break}}function se(e){!1!==n.enabled&&!1!==n.enableZoom&&c===a.NONE&&(e.preventDefault(),n.dispatchEvent(s),H(e),n.dispatchEvent(o))}function oe(e){!1!==n.enabled&&!1!==n.enablePan&&j(e)}function ae(e){switch(de(e),S.length){case 1:switch(n.touches.ONE){case r["yb"].ROTATE:if(!1===n.enableRotate)return;V(),c=a.TOUCH_ROTATE;break;case r["yb"].PAN:if(!1===n.enablePan)return;G(),c=a.TOUCH_PAN;break;default:c=a.NONE}break;case 2:switch(n.touches.TWO){case r["yb"].DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;q(),c=a.TOUCH_DOLLY_PAN;break;case r["yb"].DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;X(),c=a.TOUCH_DOLLY_ROTATE;break;default:c=a.NONE}break;default:c=a.NONE}c!==a.NONE&&n.dispatchEvent(s)}function ce(e){switch(de(e),c){case a.TOUCH_ROTATE:if(!1===n.enableRotate)return;Y(e),n.update();break;case a.TOUCH_PAN:if(!1===n.enablePan)return;K(e),n.update();break;case a.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;Z(e),n.update();break;case a.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;$(e),n.update();break;default:c=a.NONE}}function le(e){!1!==n.enabled&&e.preventDefault()}function ue(e){S.push(e)}function he(e){delete T[e.pointerId];for(let t=0;t<S.length;t++)if(S[t].pointerId==e.pointerId)return void S.splice(t,1)}function de(e){let t=T[e.pointerId];void 0===t&&(t=new r["Hb"],T[e.pointerId]=t),t.set(e.pageX,e.pageY)}function pe(e){const t=e.pointerId===S[0].pointerId?S[1]:S[0];return T[t.pointerId]}n.domElement.addEventListener("contextmenu",le),n.domElement.addEventListener("pointerdown",Q),n.domElement.addEventListener("pointercancel",ne),n.domElement.addEventListener("wheel",se,{passive:!1}),this.update()}}},"0e71":function(e,t,n){var r=n("0a26"),i=n("30b8"),s=n("668f"),o=n("9b1d"),a=n("23a2"),c=n("457c"),l=n("53f4"),u=r.TypeError,h=l("toPrimitive");e.exports=function(e,t){if(!s(e)||o(e))return e;var n,r=a(e,h);if(r){if(void 0===t&&(t="default"),n=i(r,e,t),!s(n)||o(n))return n;throw u("Can't convert object to primitive value")}return void 0===t&&(t="number"),c(e,t)}},"0fa0":function(e,t,n){"use strict";var r,i,s,o=n("f42c"),a=n("87b4"),c=n("1209"),l=n("d921"),u=n("f11a"),h=n("53f4"),d=n("b10f"),p=h("iterator"),f=!1;[].keys&&(s=[].keys(),"next"in s?(i=l(l(s)),i!==Object.prototype&&(r=i)):f=!0);var m=void 0==r||o((function(){var e={};return r[p].call(e)!==e}));m?r={}:d&&(r=c(r)),a(r[p])||u(r,p,(function(){return this})),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:f}},"10ec":function(e,t,n){var r=n("e36c").f,i=n("46ec"),s=n("53f4"),o=s("toStringTag");e.exports=function(e,t,n){e&&!n&&(e=e.prototype),e&&!i(e,o)&&r(e,o,{configurable:!0,value:t})}},"11ba":function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a}));var r=n("b90d");class i{constructor(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}const s=new r["fb"](-1,1,1,-1,0,1),o=new r["h"];o.setAttribute("position",new r["s"]([-1,3,0,-1,-1,0,3,-1,0],3)),o.setAttribute("uv",new r["s"]([0,2,0,0,2,0],2));class a{constructor(e){this._mesh=new r["P"](o,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,s)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}},1209:function(e,t,n){var r,i=n("0361"),s=n("f6a3"),o=n("f5d9"),a=n("cad4"),c=n("7cff"),l=n("69d4"),u=n("52ab"),h=">",d="<",p="prototype",f="script",m=u("IE_PROTO"),g=function(){},v=function(e){return d+f+h+e+d+"/"+f+h},y=function(e){e.write(v("")),e.close();var t=e.parentWindow.Object;return e=null,t},_=function(){var e,t=l("iframe"),n="java"+f+":";return t.style.display="none",c.appendChild(t),t.src=String(n),e=t.contentWindow.document,e.open(),e.write(v("document.F=Object")),e.close(),e.F},x=function(){try{r=new ActiveXObject("htmlfile")}catch(t){}x="undefined"!=typeof document?document.domain&&r?y(r):_():y(r);var e=o.length;while(e--)delete x[p][o[e]];return x()};a[m]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(g[p]=i(e),n=new g,g[p]=null,n[m]=e):n=x(),void 0===t?n:s.f(n,t)}},1459:function(e,t,n){var r=n("0a26"),i=r.String;e.exports=function(e){try{return i(e)}catch(t){return"Object"}}},1672:function(e,t,n){var r=n("0a26"),i=n("2f5b").f,s=n("6035"),o=n("f11a"),a=n("3016"),c=n("a714"),l=n("262d");e.exports=function(e,t){var n,u,h,d,p,f,m=e.target,g=e.global,v=e.stat;if(u=g?r:v?r[m]||a(m,{}):(r[m]||{}).prototype,u)for(h in t){if(p=t[h],e.noTargetGet?(f=i(u,h),d=f&&f.value):d=u[h],n=l(g?h:m+(v?".":"#")+h,e.forced),!n&&void 0!==d){if(typeof p==typeof d)continue;c(p,d)}(e.sham||d&&d.sham)&&s(p,"sham",!0),o(u,h,p,e)}}},1850:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor = opacity * texel;\n\n\t\t}"}},"191b":function(e,t,n){var r=n("0a26"),i=n("87b4"),s=function(e){return i(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?s(r[e]):r[e]&&r[e][t]}},"1c65":function(e,t,n){var r=n("0a26"),i=n("6508"),s=n("20a4"),o=n("668f"),a=n("53f4"),c=a("species"),l=r.Array;e.exports=function(e){var t;return i(e)&&(t=e.constructor,s(t)&&(t===l||i(t.prototype))?t=void 0:o(t)&&(t=t[c],null===t&&(t=void 0))),void 0===t?l:t}},"20a4":function(e,t,n){var r=n("858e"),i=n("f42c"),s=n("87b4"),o=n("2d0e"),a=n("191b"),c=n("7c29"),l=function(){},u=[],h=a("Reflect","construct"),d=/^\s*(?:class|function)\b/,p=r(d.exec),f=!d.exec(l),m=function(e){if(!s(e))return!1;try{return h(l,u,e),!0}catch(t){return!1}},g=function(e){if(!s(e))return!1;switch(o(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return f||!!p(d,c(e))}catch(t){return!0}};g.sham=!0,e.exports=!h||i((function(){var e;return m(m.call)||!m(Object)||!m((function(){e=!0}))||e}))?g:m},"20d5":function(e,t,n){var r=n("191b");e.exports=r("navigator","userAgent")||""},"23a2":function(e,t,n){var r=n("6d5d");e.exports=function(e,t){var n=e[t];return null==n?void 0:r(n)}},2490:function(e,t,n){var r=n("dd09"),i=n("46ec"),s=Function.prototype,o=r&&Object.getOwnPropertyDescriptor,a=i(s,"name"),c=a&&"something"===function(){}.name,l=a&&(!r||r&&o(s,"name").configurable);e.exports={EXISTS:a,PROPER:c,CONFIGURABLE:l}},"262d":function(e,t,n){var r=n("f42c"),i=n("87b4"),s=/#|\.prototype\./,o=function(e,t){var n=c[a(e)];return n==u||n!=l&&(i(t)?r(t):!!t)},a=o.normalize=function(e){return String(e).replace(s,".").toLowerCase()},c=o.data={},l=o.NATIVE="N",u=o.POLYFILL="P";e.exports=o},"277e":function(e,t,n){"use strict";n("8143");var r=n("cca5");n.d(t,"a",(function(){return r["Fragment"]})),n.d(t,"b",(function(){return r["KeepAlive"]})),n.d(t,"c",(function(){return r["Transition"]})),n.d(t,"d",(function(){return r["computed"]})),n.d(t,"e",(function(){return r["createBlock"]})),n.d(t,"f",(function(){return r["createCommentVNode"]})),n.d(t,"g",(function(){return r["createElementBlock"]})),n.d(t,"h",(function(){return r["createElementVNode"]})),n.d(t,"i",(function(){return r["createStaticVNode"]})),n.d(t,"j",(function(){return r["createTextVNode"]})),n.d(t,"k",(function(){return r["createVNode"]})),n.d(t,"l",(function(){return r["defineComponent"]})),n.d(t,"m",(function(){return r["getCurrentInstance"]})),n.d(t,"n",(function(){return r["h"]})),n.d(t,"o",(function(){return r["inject"]})),n.d(t,"p",(function(){return r["nextTick"]})),n.d(t,"q",(function(){return r["normalizeClass"]})),n.d(t,"r",(function(){return r["normalizeStyle"]})),n.d(t,"s",(function(){return r["onActivated"]})),n.d(t,"t",(function(){return r["onDeactivated"]})),n.d(t,"u",(function(){return r["onUnmounted"]})),n.d(t,"v",(function(){return r["openBlock"]})),n.d(t,"w",(function(){return r["popScopeId"]})),n.d(t,"x",(function(){return r["provide"]})),n.d(t,"y",(function(){return r["pushScopeId"]})),n.d(t,"z",(function(){return r["reactive"]})),n.d(t,"A",(function(){return r["ref"]})),n.d(t,"B",(function(){return r["resolveComponent"]})),n.d(t,"C",(function(){return r["resolveDynamicComponent"]})),n.d(t,"D",(function(){return r["shallowRef"]})),n.d(t,"E",(function(){return r["toDisplayString"]})),n.d(t,"F",(function(){return r["unref"]})),n.d(t,"G",(function(){return r["useCssVars"]})),n.d(t,"H",(function(){return r["watch"]})),n.d(t,"I",(function(){return r["withCtx"]}))},"27d7":function(e,t,n){var r=n("a431");e.exports=function(e){return r(e.length)}},"2bba":function(e,t,n){var r=n("0a26"),i=r.TypeError;e.exports=function(e){if(void 0==e)throw i("Can't call method on "+e);return e}},"2c8a":function(e,t,n){"use strict";var r=n("0fa0").IteratorPrototype,i=n("1209"),s=n("eda1"),o=n("10ec"),a=n("7f1e"),c=function(){return this};e.exports=function(e,t,n,l){var u=t+" Iterator";return e.prototype=i(r,{next:s(+!l,n)}),o(e,u,!1,!0),a[u]=c,e}},"2d0e":function(e,t,n){var r=n("0a26"),i=n("9a00"),s=n("87b4"),o=n("def2"),a=n("53f4"),c=a("toStringTag"),l=r.Object,u="Arguments"==o(function(){return arguments}()),h=function(e,t){try{return e[t]}catch(n){}};e.exports=i?o:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=h(t=l(e),c))?n:u?o(t):"Object"==(r=o(t))&&s(t.callee)?"Arguments":r}},"2ec3":function(e,t,n){"use strict";var r=n("2f6c").forEach,i=n("9f28"),s=i("forEach");e.exports=s?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}},"2f5b":function(e,t,n){var r=n("dd09"),i=n("30b8"),s=n("ed30"),o=n("eda1"),a=n("65e2"),c=n("5cfa"),l=n("46ec"),u=n("c0eb"),h=Object.getOwnPropertyDescriptor;t.f=r?h:function(e,t){if(e=a(e),t=c(t),u)try{return h(e,t)}catch(n){}if(l(e,t))return o(!i(s.f,e,t),e[t])}},"2f6c":function(e,t,n){var r=n("8d88"),i=n("858e"),s=n("b55a"),o=n("b211"),a=n("27d7"),c=n("3729"),l=i([].push),u=function(e){var t=1==e,n=2==e,i=3==e,u=4==e,h=6==e,d=7==e,p=5==e||h;return function(f,m,g,v){for(var y,_,x=o(f),b=s(x),w=r(m,g),M=a(b),S=0,T=v||c,E=t?T(f,M):n||d?T(f,0):void 0;M>S;S++)if((p||S in b)&&(y=b[S],_=w(y,S,x),e))if(t)E[S]=_;else if(_)switch(e){case 3:return!0;case 5:return y;case 6:return S;case 2:l(E,y)}else switch(e){case 4:return!1;case 7:l(E,y)}return h?-1:i||u?u:E}};e.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterReject:u(7)}},3016:function(e,t,n){var r=n("0a26"),i=Object.defineProperty;e.exports=function(e,t){try{i(r,e,{value:t,configurable:!0,writable:!0})}catch(n){r[e]=t}return t}},"30b8":function(e,t,n){var r=n("9caf"),i=Function.prototype.call;e.exports=r?i.bind(i):function(){return i.apply(i,arguments)}},3729:function(e,t,n){var r=n("1c65");e.exports=function(e,t){return new(r(e))(0===t?0:t)}},"39be":function(e,t){t.f=Object.getOwnPropertySymbols},"39c2":function(e,t,n){var r=n("f42c");e.exports=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},"3a29":function(e,t,n){"use strict";var r=n("dd09"),i=n("858e"),s=n("30b8"),o=n("f42c"),a=n("54bd"),c=n("39be"),l=n("ed30"),u=n("b211"),h=n("b55a"),d=Object.assign,p=Object.defineProperty,f=i([].concat);e.exports=!d||o((function(){if(r&&1!==d({b:1},d(p({},"a",{enumerable:!0,get:function(){p(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach((function(e){t[e]=e})),7!=d({},e)[n]||a(d({},t)).join("")!=i}))?function(e,t){var n=u(e),i=arguments.length,o=1,d=c.f,p=l.f;while(i>o){var m,g=h(arguments[o++]),v=d?f(a(g),d(g)):a(g),y=v.length,_=0;while(y>_)m=v[_++],r&&!s(p,g,m)||(n[m]=g[m])}return n}:d},"3bd2":function(e,t,n){var r=n("0361"),i=n("0b91"),s=n("53f4"),o=s("species");e.exports=function(e,t){var n,s=r(e).constructor;return void 0===s||void 0==(n=r(s)[o])?t:i(n)}},"3c93":function(e,t,n){"use strict";var r=n("1672"),i=n("b0d9"),s=n("8ace");r({target:"String",proto:!0,forced:s("small")},{small:function(){return i(this,"small","","")}})},"3d1e":function(e,t,n){var r=n("858e");e.exports=r({}.isPrototypeOf)},"3e3e":function(e,t,n){"use strict";var r=n("1672"),i=n("b10f"),s=n("04aa"),o=n("f42c"),a=n("191b"),c=n("87b4"),l=n("3bd2"),u=n("4dde"),h=n("f11a"),d=!!s&&o((function(){s.prototype["finally"].call({then:function(){}},(function(){}))}));if(r({target:"Promise",proto:!0,real:!0,forced:d},{finally:function(e){var t=l(this,a("Promise")),n=c(e);return this.then(n?function(n){return u(t,e()).then((function(){return n}))}:e,n?function(n){return u(t,e()).then((function(){throw n}))}:e)}}),!i&&c(s)){var p=a("Promise").prototype["finally"];s.prototype["finally"]!==p&&h(s.prototype,"finally",p,{unsafe:!0})}},"41db":function(e,t,n){var r=n("b10f"),i=n("8d6b");(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.21.1",mode:r?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.21.1/LICENSE",source:"https://github.com/zloirock/core-js"})},4521:function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){var t=+e;return t!==t||0===t?0:(t>0?r:n)(t)}},"457c":function(e,t,n){var r=n("0a26"),i=n("30b8"),s=n("87b4"),o=n("668f"),a=r.TypeError;e.exports=function(e,t){var n,r;if("string"===t&&s(n=e.toString)&&!o(r=i(n,e)))return r;if(s(n=e.valueOf)&&!o(r=i(n,e)))return r;if("string"!==t&&s(n=e.toString)&&!o(r=i(n,e)))return r;throw a("Can't convert object to primitive value")}},"46ec":function(e,t,n){var r=n("858e"),i=n("b211"),s=r({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return s(i(e),t)}},"49d9":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("b90d"),i=n("1850"),s=n("db6e"),o=n("11ba");class a extends o["b"]{constructor(e,t){super(),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,t,n){const r=e.getContext(),i=e.state;let s,o;i.buffers.color.setMask(!1),i.buffers.depth.setMask(!1),i.buffers.color.setLocked(!0),i.buffers.depth.setLocked(!0),this.inverse?(s=0,o=1):(s=1,o=0),i.buffers.stencil.setTest(!0),i.buffers.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),i.buffers.stencil.setFunc(r.ALWAYS,s,4294967295),i.buffers.stencil.setClear(o),i.buffers.stencil.setLocked(!0),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),i.buffers.color.setLocked(!1),i.buffers.depth.setLocked(!1),i.buffers.stencil.setLocked(!1),i.buffers.stencil.setFunc(r.EQUAL,1,4294967295),i.buffers.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),i.buffers.stencil.setLocked(!0)}}class c extends o["b"]{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class l{constructor(e,t){if(this.renderer=e,void 0===t){const n={minFilter:r["G"],magFilter:r["G"],format:r["nb"]},i=e.getSize(new r["Hb"]);this._pixelRatio=e.getPixelRatio(),this._width=i.width,this._height=i.height,t=new r["Kb"](this._width*this._pixelRatio,this._height*this._pixelRatio,n),t.texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],void 0===i["a"]&&console.error("THREE.EffectComposer relies on CopyShader"),void 0===s["a"]&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new s["a"](i["a"]),this.clock=new r["k"]}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const t=this.passes.indexOf(e);-1!==t&&this.passes.splice(t,1)}isLastEnabledPass(e){for(let t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0}render(e){void 0===e&&(e=this.clock.getDelta());const t=this.renderer.getRenderTarget();let n=!1;for(let r=0,i=this.passes.length;r<i;r++){const t=this.passes[r];if(!1!==t.enabled){if(t.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(r),t.render(this.renderer,this.writeBuffer,this.readBuffer,e,n),t.needsSwap){if(n){const t=this.renderer.getContext(),n=this.renderer.state.buffers.stencil;n.setFunc(t.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),n.setFunc(t.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==a&&(t instanceof a?n=!0:t instanceof c&&(n=!1))}}this.renderer.setRenderTarget(t)}reset(e){if(void 0===e){const t=this.renderer.getSize(new r["Hb"]);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,t){this._width=e,this._height=t;const n=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(n,r),this.renderTarget2.setSize(n,r);for(let i=0;i<this.passes.length;i++)this.passes[i].setSize(n,r)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}}new r["fb"](-1,1,1,-1,0,1);const u=new r["h"];u.setAttribute("position",new r["s"]([-1,3,0,-1,-1,0,3,-1,0],3)),u.setAttribute("uv",new r["s"]([0,2,0,0,2,0],2))},"4c60":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("b90d"),i=n("11ba");class s extends i["b"]{constructor(e,t,n,i,s){super(),this.scene=e,this.camera=t,this.overrideMaterial=n,this.clearColor=i,this.clearAlpha=void 0!==s?s:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new r["l"]}render(e,t,n){const r=e.autoClear;let i,s;e.autoClear=!1,void 0!==this.overrideMaterial&&(s=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(e.getClearColor(this._oldClearColor),i=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:n),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor&&e.setClearColor(this._oldClearColor,i),void 0!==this.overrideMaterial&&(this.scene.overrideMaterial=s),e.autoClear=r}}},"4dde":function(e,t,n){var r=n("0361"),i=n("668f"),s=n("e2ae");e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=s.f(e),o=n.resolve;return o(t),n.promise}},"505a":function(e,t,n){"use strict";var r=n("9a00"),i=n("2d0e");e.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},"50e8":function(e,t,n){},"51a4":function(e,t,n){var r=n("0a26"),i=r.TypeError;e.exports=function(e,t){if(e<t)throw i("Not enough arguments");return e}},"52ab":function(e,t,n){var r=n("41db"),i=n("5900"),s=r("keys");e.exports=function(e){return s[e]||(s[e]=i(e))}},"53f4":function(e,t,n){var r=n("0a26"),i=n("41db"),s=n("46ec"),o=n("5900"),a=n("7d68"),c=n("d6e0"),l=i("wks"),u=r.Symbol,h=u&&u["for"],d=c?u:u&&u.withoutSetter||o;e.exports=function(e){if(!s(l,e)||!a&&"string"!=typeof l[e]){var t="Symbol."+e;a&&s(u,e)?l[e]=u[e]:l[e]=c&&h?h(t):d(t)}return l[e]}},"54bd":function(e,t,n){var r=n("983e"),i=n("f5d9");e.exports=Object.keys||function(e){return r(e,i)}},5675:function(e,t,n){"use strict";var r=n("65e2"),i=n("70e9"),s=n("7f1e"),o=n("5faf"),a=n("e36c").f,c=n("67ca"),l=n("b10f"),u=n("dd09"),h="Array Iterator",d=o.set,p=o.getterFor(h);e.exports=c(Array,"Array",(function(e,t){d(this,{type:h,target:r(e),index:0,kind:t})}),(function(){var e=p(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values");var f=s.Arguments=s.Array;if(i("keys"),i("values"),i("entries"),!l&&u&&"values"!==f.name)try{a(f,"name",{value:"values"})}catch(m){}},"56e6":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("b90d");class i extends r["J"]{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register((function(e){return new l(e)})),this.register((function(e){return new m(e)})),this.register((function(e){return new g(e)})),this.register((function(e){return new u(e)})),this.register((function(e){return new h(e)})),this.register((function(e){return new d(e)})),this.register((function(e){return new p(e)})),this.register((function(e){return new f(e)})),this.register((function(e){return new a(e)})),this.register((function(e){return new v(e)}))}load(e,t,n,i){const s=this;let o;o=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:r["K"].extractUrlBase(e),this.manager.itemStart(e);const a=function(t){i?i(t):console.error(t),s.manager.itemError(e),s.manager.itemEnd(e)},c=new r["r"](this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,(function(n){try{s.parse(n,o,(function(n){t(n),s.manager.itemEnd(e)}),a)}catch(r){a(r)}}),n,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,i){let s;const a={},l={};if("string"===typeof e)s=e;else{const t=r["K"].decodeText(new Uint8Array(e,0,4));if(t===y){try{a[o.KHR_BINARY_GLTF]=new b(e)}catch(d){return void(i&&i(d))}s=a[o.KHR_BINARY_GLTF].content}else s=r["K"].decodeText(new Uint8Array(e))}const u=JSON.parse(s);if(void 0===u.asset||u.asset.version[0]<2)return void(i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const h=new Y(u,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});h.fileLoader.setRequestHeader(this.requestHeader);for(let r=0;r<this.pluginCallbacks.length;r++){const e=this.pluginCallbacks[r](h);l[e.name]=e,a[e.name]=!0}if(u.extensionsUsed)for(let r=0;r<u.extensionsUsed.length;++r){const e=u.extensionsUsed[r],t=u.extensionsRequired||[];switch(e){case o.KHR_MATERIALS_UNLIT:a[e]=new c;break;case o.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:a[e]=new T;break;case o.KHR_DRACO_MESH_COMPRESSION:a[e]=new w(u,this.dracoLoader);break;case o.KHR_TEXTURE_TRANSFORM:a[e]=new M;break;case o.KHR_MESH_QUANTIZATION:a[e]=new E;break;default:t.indexOf(e)>=0&&void 0===l[e]&&console.warn('THREE.GLTFLoader: Unknown extension "'+e+'".')}}h.setExtensions(a),h.setPlugins(l),h.parse(n,i)}parseAsync(e,t){const n=this;return new Promise((function(r,i){n.parse(e,t,r,i)}))}}function s(){let e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}const o={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class a{constructor(e){this.parser=e,this.name=o.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,r=t.length;n<r;n++){const r=t[n];r.extensions&&r.extensions[this.name]&&void 0!==r.extensions[this.name].light&&e._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let i=t.cache.get(n);if(i)return i;const s=t.json,o=s.extensions&&s.extensions[this.name]||{},a=o.lights||[],c=a[e];let l;const u=new r["l"](16777215);void 0!==c.color&&u.fromArray(c.color);const h=void 0!==c.range?c.range:0;switch(c.type){case"directional":l=new r["o"](u),l.target.position.set(0,0,-1),l.add(l.target);break;case"point":l=new r["hb"](u),l.distance=h;break;case"spot":l=new r["xb"](u),l.distance=h,c.spot=c.spot||{},c.spot.innerConeAngle=void 0!==c.spot.innerConeAngle?c.spot.innerConeAngle:0,c.spot.outerConeAngle=void 0!==c.spot.outerConeAngle?c.spot.outerConeAngle:Math.PI/4,l.angle=c.spot.outerConeAngle,l.penumbra=1-c.spot.innerConeAngle/c.spot.outerConeAngle,l.target.position.set(0,0,-1),l.add(l.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+c.type)}return l.position.set(0,0,0),l.decay=2,void 0!==c.intensity&&(l.intensity=c.intensity),l.name=t.createUniqueName(c.name||"light_"+e),i=Promise.resolve(l),t.cache.add(n,i),i}createNodeAttachment(e){const t=this,n=this.parser,r=n.json,i=r.nodes[e],s=i.extensions&&i.extensions[this.name]||{},o=s.light;return void 0===o?null:this._loadLight(o).then((function(e){return n._getNodeRef(t.cache,o,e)}))}}class c{constructor(){this.name=o.KHR_MATERIALS_UNLIT}getMaterialType(){return r["Q"]}extendParams(e,t,n){const i=[];e.color=new r["l"](1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const t=s.baseColorFactor;e.color.fromArray(t),e.opacity=t[3]}void 0!==s.baseColorTexture&&i.push(n.assignTexture(e,"map",s.baseColorTexture))}return Promise.all(i)}}class l{constructor(e){this.parser=e,this.name=o.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const t=this.parser,n=t.json.materials[e];return n.extensions&&n.extensions[this.name]?r["U"]:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];if(void 0!==o.clearcoatFactor&&(t.clearcoat=o.clearcoatFactor),void 0!==o.clearcoatTexture&&s.push(n.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),void 0!==o.clearcoatRoughnessFactor&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),void 0!==o.clearcoatRoughnessTexture&&s.push(n.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),void 0!==o.clearcoatNormalTexture&&(s.push(n.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),void 0!==o.clearcoatNormalTexture.scale)){const e=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new r["Hb"](e,e)}return Promise.all(s)}}class u{constructor(e){this.parser=e,this.name=o.KHR_MATERIALS_SHEEN}getMaterialType(e){const t=this.parser,n=t.json.materials[e];return n.extensions&&n.extensions[this.name]?r["U"]:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new r["l"](0,0,0),t.sheenRoughness=0,t.sheen=1;const o=i.extensions[this.name];return void 0!==o.sheenColorFactor&&t.sheenColor.fromArray(o.sheenColorFactor),void 0!==o.sheenRoughnessFactor&&(t.sheenRoughness=o.sheenRoughnessFactor),void 0!==o.sheenColorTexture&&s.push(n.assignTexture(t,"sheenColorMap",o.sheenColorTexture)),void 0!==o.sheenRoughnessTexture&&s.push(n.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class h{constructor(e){this.parser=e,this.name=o.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const t=this.parser,n=t.json.materials[e];return n.extensions&&n.extensions[this.name]?r["U"]:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],s=r.extensions[this.name];return void 0!==s.transmissionFactor&&(t.transmission=s.transmissionFactor),void 0!==s.transmissionTexture&&i.push(n.assignTexture(t,"transmissionMap",s.transmissionTexture)),Promise.all(i)}}class d{constructor(e){this.parser=e,this.name=o.KHR_MATERIALS_VOLUME}getMaterialType(e){const t=this.parser,n=t.json.materials[e];return n.extensions&&n.extensions[this.name]?r["U"]:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.thickness=void 0!==o.thicknessFactor?o.thicknessFactor:0,void 0!==o.thicknessTexture&&s.push(n.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new r["l"](a[0],a[1],a[2]),Promise.all(s)}}class p{constructor(e){this.parser=e,this.name=o.KHR_MATERIALS_IOR}getMaterialType(e){const t=this.parser,n=t.json.materials[e];return n.extensions&&n.extensions[this.name]?r["U"]:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=r.extensions[this.name];return t.ior=void 0!==i.ior?i.ior:1.5,Promise.resolve()}}class f{constructor(e){this.parser=e,this.name=o.KHR_MATERIALS_SPECULAR}getMaterialType(e){const t=this.parser,n=t.json.materials[e];return n.extensions&&n.extensions[this.name]?r["U"]:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.specularIntensity=void 0!==o.specularFactor?o.specularFactor:1,void 0!==o.specularTexture&&s.push(n.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new r["l"](a[0],a[1],a[2]),void 0!==o.specularColorTexture&&s.push(n.assignTexture(t,"specularColorMap",o.specularColorTexture).then((function(e){e.encoding=r["Mb"]}))),Promise.all(s)}}class m{constructor(e){this.parser=e,this.name=o.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const i=r.extensions[this.name],s=t.options.ktx2Loader;if(!s){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,i.source,s)}}class g{constructor(e){this.parser=e,this.name=o.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[t])return null;const s=i.extensions[t],o=r.images[s.source];let a=n.textureLoader;if(o.uri){const e=n.options.manager.getHandler(o.uri);null!==e&&(a=e)}return this.detectSupport().then((function(i){if(i)return n.loadTextureImage(e,o,a);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}class v{constructor(e){this.name=o.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const e=n.extensions[this.name],r=this.parser.getDependency("buffer",e.buffer),i=this.parser.options.meshoptDecoder;if(!i||!i.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([r,i.ready]).then((function(t){const n=e.byteOffset||0,r=e.byteLength||0,s=e.count,o=e.byteStride,a=new ArrayBuffer(s*o),c=new Uint8Array(t[0],n,r);return i.decodeGltfBuffer(new Uint8Array(a),s,o,c,e.mode,e.filter),a}))}return null}}const y="glTF",_=12,x={JSON:1313821514,BIN:5130562};class b{constructor(e){this.name=o.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,_);if(this.header={magic:r["K"].decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==y)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-_,i=new DataView(e,_);let s=0;while(s<n){const t=i.getUint32(s,!0);s+=4;const n=i.getUint32(s,!0);if(s+=4,n===x.JSON){const n=new Uint8Array(e,_+s,t);this.content=r["K"].decodeText(n)}else if(n===x.BIN){const n=_+s;this.body=e.slice(n,n+t)}s+=t}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class w{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=o.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,r=this.dracoLoader,i=e.extensions[this.name].bufferView,s=e.extensions[this.name].attributes,o={},a={},c={};for(const l in s){const e=N[l]||l.toLowerCase();o[e]=s[l]}for(const l in e.attributes){const t=N[l]||l.toLowerCase();if(void 0!==s[l]){const r=n.accessors[e.attributes[l]],i=O[r.componentType];c[t]=i,a[t]=!0===r.normalized}}return t.getDependency("bufferView",i).then((function(e){return new Promise((function(t){r.decodeDracoFile(e,(function(e){for(const t in e.attributes){const n=e.attributes[t],r=a[t];void 0!==r&&(n.normalized=r)}t(e)}),o,c)}))}))}}class M{constructor(){this.name=o.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class S extends r["V"]{constructor(e){super(),this.isGLTFSpecularGlossinessMaterial=!0;const t=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),n=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),i=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),s=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),o=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),a={specular:{value:(new r["l"]).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=a,this.onBeforeCompile=function(e){for(const t in a)e.uniforms[t]=a[t];e.fragmentShader=e.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",n).replace("#include <roughnessmap_fragment>",i).replace("#include <metalnessmap_fragment>",s).replace("#include <lights_physical_fragment>",o)},Object.defineProperties(this,{specular:{get:function(){return a.specular.value},set:function(e){a.specular.value=e}},specularMap:{get:function(){return a.specularMap.value},set:function(e){a.specularMap.value=e,e?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return a.glossiness.value},set:function(e){a.glossiness.value=e}},glossinessMap:{get:function(){return a.glossinessMap.value},set:function(e){a.glossinessMap.value=e,e?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class T{constructor(){this.name=o.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"]}getMaterialType(){return S}extendParams(e,t,n){const i=t.extensions[this.name];e.color=new r["l"](1,1,1),e.opacity=1;const s=[];if(Array.isArray(i.diffuseFactor)){const t=i.diffuseFactor;e.color.fromArray(t),e.opacity=t[3]}if(void 0!==i.diffuseTexture&&s.push(n.assignTexture(e,"map",i.diffuseTexture)),e.emissive=new r["l"](0,0,0),e.glossiness=void 0!==i.glossinessFactor?i.glossinessFactor:1,e.specular=new r["l"](1,1,1),Array.isArray(i.specularFactor)&&e.specular.fromArray(i.specularFactor),void 0!==i.specularGlossinessTexture){const t=i.specularGlossinessTexture;s.push(n.assignTexture(e,"glossinessMap",t)),s.push(n.assignTexture(e,"specularMap",t))}return Promise.all(s)}createMaterial(e){const t=new S(e);return t.fog=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,t.normalMapType=r["zb"],e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t}}class E{constructor(){this.name=o.KHR_MESH_QUANTIZATION}}class A extends r["z"]{constructor(e,t,n,r){super(e,t,n,r)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r*3+r;for(let s=0;s!==r;s++)t[s]=n[i+s];return t}}A.prototype.beforeStart_=A.prototype.copySampleValue_,A.prototype.afterEnd_=A.prototype.copySampleValue_,A.prototype.interpolate_=function(e,t,n,r){const i=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=2*o,c=3*o,l=r-t,u=(n-t)/l,h=u*u,d=h*u,p=e*c,f=p-c,m=-2*d+3*h,g=d-h,v=1-m,y=g-h+u;for(let _=0;_!==o;_++){const e=s[f+_+o],t=s[f+_+a]*l,n=s[p+_+o],r=s[p+_]*l;i[_]=v*e+y*t+m*n+g*r}return i};const R=new r["lb"];class C extends A{interpolate_(e,t,n,r){const i=super.interpolate_(e,t,n,r);return R.fromArray(i).normalize().toArray(i),i}}const L={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},O={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},P={9728:r["Y"],9729:r["G"],9984:r["ab"],9985:r["I"],9986:r["Z"],9987:r["H"]},I={33071:r["j"],33648:r["W"],10497:r["ob"]},D={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},N={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},k={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},F={CUBICSPLINE:void 0,LINEAR:r["B"],STEP:r["A"]},U={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function B(e){return void 0===e["DefaultMaterial"]&&(e["DefaultMaterial"]=new r["V"]({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:r["u"]})),e["DefaultMaterial"]}function z(e,t,n){for(const r in n.extensions)void 0===e[r]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[r]=n.extensions[r])}function H(e,t){void 0!==t.extras&&("object"===typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function j(e,t,n){let r=!1,i=!1,s=!1;for(let l=0,u=t.length;l<u;l++){const e=t[l];if(void 0!==e.POSITION&&(r=!0),void 0!==e.NORMAL&&(i=!0),void 0!==e.COLOR_0&&(s=!0),r&&i&&s)break}if(!r&&!i&&!s)return Promise.resolve(e);const o=[],a=[],c=[];for(let l=0,u=t.length;l<u;l++){const u=t[l];if(r){const t=void 0!==u.POSITION?n.getDependency("accessor",u.POSITION):e.attributes.position;o.push(t)}if(i){const t=void 0!==u.NORMAL?n.getDependency("accessor",u.NORMAL):e.attributes.normal;a.push(t)}if(s){const t=void 0!==u.COLOR_0?n.getDependency("accessor",u.COLOR_0):e.attributes.color;c.push(t)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(c)]).then((function(t){const n=t[0],o=t[1],a=t[2];return r&&(e.morphAttributes.position=n),i&&(e.morphAttributes.normal=o),s&&(e.morphAttributes.color=a),e.morphTargetsRelative=!0,e}))}function V(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(let n=0,r=t.weights.length;n<r;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){const n=t.extras.targetNames;if(e.morphTargetInfluences.length===n.length){e.morphTargetDictionary={};for(let t=0,r=n.length;t<r;t++)e.morphTargetDictionary[n[t]]=t}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function G(e){const t=e.extensions&&e.extensions[o.KHR_DRACO_MESH_COMPRESSION];let n;return n=t?"draco:"+t.bufferView+":"+t.indices+":"+W(t.attributes):e.indices+":"+W(e.attributes)+":"+e.mode,n}function W(e){let t="";const n=Object.keys(e).sort();for(let r=0,i=n.length;r<i;r++)t+=n[r]+":"+e[n[r]]+";";return t}function q(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function X(e){return e.search(/\.jpe?g($|\?)/i)>0||0===e.search(/^data\:image\/jpeg/)?"image/jpeg":e.search(/\.webp($|\?)/i)>0||0===e.search(/^data\:image\/webp/)?"image/webp":"image/png"}class Y{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new s,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={},"undefined"!==typeof createImageBitmap&&!1===/Firefox|^((?!chrome|android).)*safari/i.test(navigator.userAgent)?this.textureLoader=new r["w"](this.options.manager):this.textureLoader=new r["Bb"](this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new r["r"](this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,r=this.json,i=this.extensions;this.cache.removeAll(),this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all(this._invokeAll((function(e){return e.beforeRoot&&e.beforeRoot()}))).then((function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])})).then((function(t){const s={scene:t[0][r.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:r.asset,parser:n,userData:{}};z(i,s,r),H(s,r),Promise.all(n._invokeAll((function(e){return e.afterRoot&&e.afterRoot(s)}))).then((function(){e(s)}))})).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let r=0,i=t.length;r<i;r++){const n=t[r].joints;for(let t=0,r=n.length;t<r;t++)e[n[t]].isBone=!0}for(let r=0,i=e.length;r<i;r++){const t=e[r];void 0!==t.mesh&&(this._addNodeRef(this.meshCache,t.mesh),void 0!==t.skin&&(n[t.mesh].isSkinnedMesh=!0)),void 0!==t.camera&&this._addNodeRef(this.cameraCache,t.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const r=n.clone(),i=(e,t)=>{const n=this.associations.get(e);null!=n&&this.associations.set(t,n);for(const[r,s]of e.children.entries())i(s,t.children[r])};return i(n,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const r=e(t[n]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let r=0;r<t.length;r++){const i=e(t[r]);i&&n.push(i)}return n}getDependency(e,t){const n=e+":"+t;let r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this.loadNode(t);break;case"mesh":r=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":r=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":r=this.loadSkin(t);break;case"animation":r=this.loadAnimation(t);break;case"camera":r=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(n,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,r=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(r.map((function(t,r){return n.getDependency(e,r)}))),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[o.KHR_BINARY_GLTF].body);const i=this.options;return new Promise((function(e,s){n.load(r["K"].resolveURL(t.uri,i.path),e,void 0,(function(){s(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){const n=t.byteLength||0,r=t.byteOffset||0;return e.slice(r,r+n)}))}loadAccessor(e){const t=this,n=this.json,i=this.json.accessors[e];if(void 0===i.bufferView&&void 0===i.sparse)return Promise.resolve(null);const s=[];return void 0!==i.bufferView?s.push(this.getDependency("bufferView",i.bufferView)):s.push(null),void 0!==i.sparse&&(s.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(s).then((function(e){const s=e[0],o=D[i.type],a=O[i.componentType],c=a.BYTES_PER_ELEMENT,l=c*o,u=i.byteOffset||0,h=void 0!==i.bufferView?n.bufferViews[i.bufferView].byteStride:void 0,d=!0===i.normalized;let p,f;if(h&&h!==l){const e=Math.floor(u/h),n="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+e+":"+i.count;let l=t.cache.get(n);l||(p=new a(s,e*h,i.count*h/c),l=new r["x"](p,h/c),t.cache.add(n,l)),f=new r["y"](l,o,u%h/c,d)}else p=null===s?new a(i.count*o):new a(s,u,i.count*o),f=new r["g"](p,o,d);if(void 0!==i.sparse){const t=D.SCALAR,n=O[i.sparse.indices.componentType],c=i.sparse.indices.byteOffset||0,l=i.sparse.values.byteOffset||0,u=new n(e[1],c,i.sparse.count*t),h=new a(e[2],l,i.sparse.count*o);null!==s&&(f=new r["g"](f.array.slice(),f.itemSize,f.normalized));for(let e=0,r=u.length;e<r;e++){const t=u[e];if(f.setX(t,h[e*o]),o>=2&&f.setY(t,h[e*o+1]),o>=3&&f.setZ(t,h[e*o+2]),o>=4&&f.setW(t,h[e*o+3]),o>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return f}))}loadTexture(e){const t=this.json,n=this.options,r=t.textures[e],i=r.source,s=t.images[i];let o=this.textureLoader;if(s.uri){const e=n.manager.getHandler(s.uri);null!==e&&(o=e)}return this.loadTextureImage(e,i,o)}loadTextureImage(e,t,n){const i=this,s=this.json,o=s.textures[e],a=s.images[t],c=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[c])return this.textureCache[c];const l=this.loadImageSource(t,n).then((function(t){t.flipY=!1,o.name&&(t.name=o.name);const n=s.samplers||{},a=n[o.sampler]||{};return t.magFilter=P[a.magFilter]||r["G"],t.minFilter=P[a.minFilter]||r["H"],t.wrapS=I[a.wrapS]||r["ob"],t.wrapT=I[a.wrapT]||r["ob"],i.associations.set(t,{textures:e}),t})).catch((function(){return null}));return this.textureCache[c]=l,l}loadImageSource(e,t){const n=this,i=this.json,s=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then((function(e){return e.clone()})).catch((function(e){throw e}));const o=i.images[e],a=self.URL||self.webkitURL;let c=o.uri||"",l=!1;if(void 0!==o.bufferView)c=n.getDependency("bufferView",o.bufferView).then((function(e){l=!0;const t=new Blob([e],{type:o.mimeType});return c=a.createObjectURL(t),c}));else if(void 0===o.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(c).then((function(e){return new Promise((function(n,i){let o=n;!0===t.isImageBitmapLoader&&(o=function(e){const t=new r["Ab"](e);t.needsUpdate=!0,n(t)}),t.load(r["K"].resolveURL(e,s.path),o,void 0,i)}))})).then((function(e){return!0===l&&a.revokeObjectURL(c),e.userData.mimeType=o.mimeType||X(o.uri),e})).catch((function(e){throw console.error("THREE.GLTFLoader: Couldn't load texture",c),e}));return this.sourceCache[e]=u,u}assignTexture(e,t,n){const r=this;return this.getDependency("texture",n.index).then((function(i){if(void 0===n.texCoord||0==n.texCoord||"aoMap"===t&&1==n.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+n.texCoord+" for texture "+t+" not yet supported."),r.extensions[o.KHR_TEXTURE_TRANSFORM]){const e=void 0!==n.extensions?n.extensions[o.KHR_TEXTURE_TRANSFORM]:void 0;if(e){const t=r.associations.get(i);i=r.extensions[o.KHR_TEXTURE_TRANSFORM].extendTexture(i,e),r.associations.set(i,t)}}return e[t]=i,i}))}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const i=void 0===t.attributes.tangent,s=void 0!==t.attributes.color,o=void 0===t.attributes.normal;if(e.isPoints){const e="PointsMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new r["jb"],r["M"].prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,t.sizeAttenuation=!1,this.cache.add(e,t)),n=t}else if(e.isLine){const e="LineBasicMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new r["D"],r["M"].prototype.copy.call(t,n),t.color.copy(n.color),this.cache.add(e,t)),n=t}if(i||s||o){let e="ClonedMaterial:"+n.uuid+":";n.isGLTFSpecularGlossinessMaterial&&(e+="specular-glossiness:"),i&&(e+="derivative-tangents:"),s&&(e+="vertex-colors:"),o&&(e+="flat-shading:");let t=this.cache.get(e);t||(t=n.clone(),s&&(t.vertexColors=!0),o&&(t.flatShading=!0),i&&(t.normalScale&&(t.normalScale.y*=-1),t.clearcoatNormalScale&&(t.clearcoatNormalScale.y*=-1)),this.cache.add(e,t),this.associations.set(t,this.associations.get(n))),n=t}n.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.setAttribute("uv2",t.attributes.uv),e.material=n}getMaterialType(){return r["V"]}loadMaterial(e){const t=this,n=this.json,i=this.extensions,s=n.materials[e];let a;const c={},l=s.extensions||{},u=[];if(l[o.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const e=i[o.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];a=e.getMaterialType(),u.push(e.extendParams(c,s,t))}else if(l[o.KHR_MATERIALS_UNLIT]){const e=i[o.KHR_MATERIALS_UNLIT];a=e.getMaterialType(),u.push(e.extendParams(c,s,t))}else{const n=s.pbrMetallicRoughness||{};if(c.color=new r["l"](1,1,1),c.opacity=1,Array.isArray(n.baseColorFactor)){const e=n.baseColorFactor;c.color.fromArray(e),c.opacity=e[3]}void 0!==n.baseColorTexture&&u.push(t.assignTexture(c,"map",n.baseColorTexture)),c.metalness=void 0!==n.metallicFactor?n.metallicFactor:1,c.roughness=void 0!==n.roughnessFactor?n.roughnessFactor:1,void 0!==n.metallicRoughnessTexture&&(u.push(t.assignTexture(c,"metalnessMap",n.metallicRoughnessTexture)),u.push(t.assignTexture(c,"roughnessMap",n.metallicRoughnessTexture))),a=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),u.push(Promise.all(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,c)}))))}!0===s.doubleSided&&(c.side=r["p"]);const h=s.alphaMode||U.OPAQUE;if(h===U.BLEND?(c.transparent=!0,c.depthWrite=!1):(c.transparent=!1,h===U.MASK&&(c.alphaTest=void 0!==s.alphaCutoff?s.alphaCutoff:.5)),void 0!==s.normalTexture&&a!==r["Q"]&&(u.push(t.assignTexture(c,"normalMap",s.normalTexture)),c.normalScale=new r["Hb"](1,1),void 0!==s.normalTexture.scale)){const e=s.normalTexture.scale;c.normalScale.set(e,e)}return void 0!==s.occlusionTexture&&a!==r["Q"]&&(u.push(t.assignTexture(c,"aoMap",s.occlusionTexture)),void 0!==s.occlusionTexture.strength&&(c.aoMapIntensity=s.occlusionTexture.strength)),void 0!==s.emissiveFactor&&a!==r["Q"]&&(c.emissive=(new r["l"]).fromArray(s.emissiveFactor)),void 0!==s.emissiveTexture&&a!==r["Q"]&&u.push(t.assignTexture(c,"emissiveMap",s.emissiveTexture)),Promise.all(u).then((function(){let n;return n=a===S?i[o.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(c):new a(c),s.name&&(n.name=s.name),n.map&&(n.map.encoding=r["Mb"]),n.emissiveMap&&(n.emissiveMap.encoding=r["Mb"]),n.sheenColorMap&&(n.sheenColorMap.encoding=r["Mb"]),n.specularColorMap&&(n.specularColorMap.encoding=r["Mb"]),n.specularMap&&(n.specularMap.encoding=r["Mb"]),H(n,s),t.associations.set(n,{materials:e}),s.extensions&&z(i,n,s),n}))}createUniqueName(e){const t=r["kb"].sanitizeNodeName(e||"");let n=t;for(let r=1;this.nodeNamesUsed[n];++r)n=t+"_"+r;return this.nodeNamesUsed[n]=!0,n}loadGeometries(e){const t=this,n=this.extensions,i=this.primitiveCache;function s(e){return n[o.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(n){return Z(n,e,t)}))}const a=[];for(let c=0,l=e.length;c<l;c++){const n=e[c],l=G(n),u=i[l];if(u)a.push(u.promise);else{let e;e=n.extensions&&n.extensions[o.KHR_DRACO_MESH_COMPRESSION]?s(n):Z(new r["h"],n,t),i[l]={primitive:n,promise:e},a.push(e)}}return Promise.all(a)}loadMesh(e){const t=this,n=this.json,i=this.extensions,s=n.meshes[e],o=s.primitives,a=[];for(let r=0,c=o.length;r<c;r++){const e=void 0===o[r].material?B(this.cache):this.getDependency("material",o[r].material);a.push(e)}return a.push(t.loadGeometries(o)),Promise.all(a).then((function(n){const a=n.slice(0,n.length-1),c=n[n.length-1],l=[];for(let h=0,d=c.length;h<d;h++){const n=c[h],u=o[h];let d;const p=a[h];if(u.mode===L.TRIANGLES||u.mode===L.TRIANGLE_STRIP||u.mode===L.TRIANGLE_FAN||void 0===u.mode)d=!0===s.isSkinnedMesh?new r["tb"](n,p):new r["P"](n,p),!0!==d.isSkinnedMesh||d.geometry.attributes.skinWeight.normalized||d.normalizeSkinWeights(),u.mode===L.TRIANGLE_STRIP?d.geometry=$(d.geometry,r["Eb"]):u.mode===L.TRIANGLE_FAN&&(d.geometry=$(d.geometry,r["Db"]));else if(u.mode===L.LINES)d=new r["F"](n,p);else if(u.mode===L.LINE_STRIP)d=new r["C"](n,p);else if(u.mode===L.LINE_LOOP)d=new r["E"](n,p);else{if(u.mode!==L.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+u.mode);d=new r["ib"](n,p)}Object.keys(d.geometry.morphAttributes).length>0&&V(d,s),d.name=t.createUniqueName(s.name||"mesh_"+e),H(d,s),u.extensions&&z(i,d,u),t.assignFinalMaterial(d),l.push(d)}for(let r=0,i=l.length;r<i;r++)t.associations.set(l[r],{meshes:e,primitives:r});if(1===l.length)return l[0];const u=new r["v"];t.associations.set(u,{meshes:e});for(let e=0,t=l.length;e<t;e++)u.add(l[e]);return u}))}loadCamera(e){let t;const n=this.json.cameras[e],i=n[n.type];if(i)return"perspective"===n.type?t=new r["gb"](r["N"].radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):"orthographic"===n.type&&(t=new r["fb"](-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),H(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],n={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",t.inverseBindMatrices).then((function(e){return n.inverseBindMatrices=e,n}))}loadAnimation(e){const t=this.json,n=t.animations[e],i=[],s=[],o=[],a=[],c=[];for(let r=0,l=n.channels.length;r<l;r++){const e=n.channels[r],t=n.samplers[e.sampler],l=e.target,u=void 0!==l.node?l.node:l.id,h=void 0!==n.parameters?n.parameters[t.input]:t.input,d=void 0!==n.parameters?n.parameters[t.output]:t.output;i.push(this.getDependency("node",u)),s.push(this.getDependency("accessor",h)),o.push(this.getDependency("accessor",d)),a.push(t),c.push(l)}return Promise.all([Promise.all(i),Promise.all(s),Promise.all(o),Promise.all(a),Promise.all(c)]).then((function(t){const i=t[0],s=t[1],o=t[2],a=t[3],c=t[4],l=[];for(let e=0,n=i.length;e<n;e++){const t=i[e],n=s[e],u=o[e],h=a[e],d=c[e];if(void 0===t)continue;let p;switch(t.updateMatrix(),t.matrixAutoUpdate=!0,k[d.path]){case k.weights:p=r["db"];break;case k.rotation:p=r["mb"];break;case k.position:case k.scale:default:p=r["Jb"];break}const f=t.name?t.name:t.uuid,m=void 0!==h.interpolation?F[h.interpolation]:r["B"],g=[];k[d.path]===k.weights?t.traverse((function(e){e.morphTargetInfluences&&g.push(e.name?e.name:e.uuid)})):g.push(f);let v=u.array;if(u.normalized){const e=q(v.constructor),t=new Float32Array(v.length);for(let n=0,r=v.length;n<r;n++)t[n]=v[n]*e;v=t}for(let e=0,i=g.length;e<i;e++){const t=new p(g[e]+"."+k[d.path],n.array,v,m);"CUBICSPLINE"===h.interpolation&&(t.createInterpolant=function(e){const t=this instanceof r["mb"]?C:A;return new t(this.times,this.values,this.getValueSize()/3,e)},t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),l.push(t)}}const u=n.name?n.name:"animation_"+e;return new r["c"](u,void 0,l)}))}createNodeMesh(e){const t=this.json,n=this,r=t.nodes[e];return void 0===r.mesh?null:n.getDependency("mesh",r.mesh).then((function(e){const t=n._getNodeRef(n.meshCache,r.mesh,e);return void 0!==r.weights&&t.traverse((function(e){if(e.isMesh)for(let t=0,n=r.weights.length;t<n;t++)e.morphTargetInfluences[t]=r.weights[t]})),t}))}loadNode(e){const t=this.json,n=this.extensions,i=this,s=t.nodes[e],o=s.name?i.createUniqueName(s.name):"";return function(){const t=[],n=i._invokeOne((function(t){return t.createNodeMesh&&t.createNodeMesh(e)}));return n&&t.push(n),void 0!==s.camera&&t.push(i.getDependency("camera",s.camera).then((function(e){return i._getNodeRef(i.cameraCache,s.camera,e)}))),i._invokeAll((function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)})).forEach((function(e){t.push(e)})),Promise.all(t)}().then((function(t){let a;if(a=!0===s.isBone?new r["e"]:t.length>1?new r["v"]:1===t.length?t[0]:new r["eb"],a!==t[0])for(let e=0,n=t.length;e<n;e++)a.add(t[e]);if(s.name&&(a.userData.name=s.name,a.name=o),H(a,s),s.extensions&&z(n,a,s),void 0!==s.matrix){const e=new r["O"];e.fromArray(s.matrix),a.applyMatrix4(e)}else void 0!==s.translation&&a.position.fromArray(s.translation),void 0!==s.rotation&&a.quaternion.fromArray(s.rotation),void 0!==s.scale&&a.scale.fromArray(s.scale);return i.associations.has(a)||i.associations.set(a,{}),i.associations.get(a).nodes=e,a}))}loadScene(e){const t=this.json,n=this.extensions,i=this.json.scenes[e],s=this,o=new r["v"];i.name&&(o.name=s.createUniqueName(i.name)),H(o,i),i.extensions&&z(n,o,i);const a=i.nodes||[],c=[];for(let r=0,l=a.length;r<l;r++)c.push(K(a[r],o,t,s));return Promise.all(c).then((function(){const e=e=>{const t=new Map;for(const[n,i]of s.associations)(n instanceof r["M"]||n instanceof r["Ab"])&&t.set(n,i);return e.traverse(e=>{const n=s.associations.get(e);null!=n&&t.set(e,n)}),t};return s.associations=e(o),o}))}}function K(e,t,n,i){const s=n.nodes[e];return i.getDependency("node",e).then((function(e){if(void 0===s.skin)return e;let t;return i.getDependency("skin",s.skin).then((function(e){t=e;const n=[];for(let r=0,s=t.joints.length;r<s;r++)n.push(i.getDependency("node",t.joints[r]));return Promise.all(n)})).then((function(n){return e.traverse((function(e){if(!e.isMesh)return;const i=[],s=[];for(let o=0,a=n.length;o<a;o++){const e=n[o];if(e){i.push(e);const n=new r["O"];void 0!==t.inverseBindMatrices&&n.fromArray(t.inverseBindMatrices.array,16*o),s.push(n)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[o])}e.bind(new r["sb"](i,s),e.matrixWorld)})),e}))})).then((function(e){t.add(e);const r=[];if(s.children){const t=s.children;for(let s=0,o=t.length;s<o;s++){const o=t[s];r.push(K(o,e,n,i))}}return Promise.all(r)}))}function J(e,t,n){const i=t.attributes,s=new r["f"];if(void 0===i.POSITION)return;{const e=n.json.accessors[i.POSITION],t=e.min,o=e.max;if(void 0===t||void 0===o)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(s.set(new r["Ib"](t[0],t[1],t[2]),new r["Ib"](o[0],o[1],o[2])),e.normalized){const t=q(O[e.componentType]);s.min.multiplyScalar(t),s.max.multiplyScalar(t)}}const o=t.targets;if(void 0!==o){const e=new r["Ib"],t=new r["Ib"];for(let r=0,i=o.length;r<i;r++){const i=o[r];if(void 0!==i.POSITION){const r=n.json.accessors[i.POSITION],s=r.min,o=r.max;if(void 0!==s&&void 0!==o){if(t.setX(Math.max(Math.abs(s[0]),Math.abs(o[0]))),t.setY(Math.max(Math.abs(s[1]),Math.abs(o[1]))),t.setZ(Math.max(Math.abs(s[2]),Math.abs(o[2]))),r.normalized){const e=q(O[r.componentType]);t.multiplyScalar(e)}e.max(t)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}s.expandByVector(e)}e.boundingBox=s;const a=new r["ub"];s.getCenter(a.center),a.radius=s.min.distanceTo(s.max)/2,e.boundingSphere=a}function Z(e,t,n){const r=t.attributes,i=[];function s(t,r){return n.getDependency("accessor",t).then((function(t){e.setAttribute(r,t)}))}for(const o in r){const t=N[o]||o.toLowerCase();t in e.attributes||i.push(s(r[o],t))}if(void 0!==t.indices&&!e.index){const r=n.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));i.push(r)}return H(e,t),J(e,t,n),Promise.all(i).then((function(){return void 0!==t.targets?j(e,t.targets,n):e}))}function $(e,t){let n=e.getIndex();if(null===n){const t=[],r=e.getAttribute("position");if(void 0===r)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(let e=0;e<r.count;e++)t.push(e);e.setIndex(t),n=e.getIndex()}const i=n.count-2,s=[];if(t===r["Db"])for(let r=1;r<=i;r++)s.push(n.getX(0)),s.push(n.getX(r)),s.push(n.getX(r+1));else for(let r=0;r<i;r++)r%2===0?(s.push(n.getX(r)),s.push(n.getX(r+1)),s.push(n.getX(r+2))):(s.push(n.getX(r+2)),s.push(n.getX(r+1)),s.push(n.getX(r)));s.length/3!==i&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const o=e.clone();return o.setIndex(s),o}},"58c3":function(e,t,n){"use strict";var r,i,s,o,a=n("1672"),c=n("b10f"),l=n("0a26"),u=n("191b"),h=n("30b8"),d=n("04aa"),p=n("f11a"),f=n("eb5c"),m=n("d031"),g=n("10ec"),v=n("9b61"),y=n("6d5d"),_=n("87b4"),x=n("668f"),b=n("9349"),w=n("7c29"),M=n("98f5"),S=n("0b78"),T=n("3bd2"),E=n("0997").set,A=n("06f4"),R=n("4dde"),C=n("6c47"),L=n("e2ae"),O=n("fc9b"),P=n("d3a6"),I=n("5faf"),D=n("262d"),N=n("53f4"),k=n("7416"),F=n("d0a7"),U=n("b618"),B=N("species"),z="Promise",H=I.getterFor(z),j=I.set,V=I.getterFor(z),G=d&&d.prototype,W=d,q=G,X=l.TypeError,Y=l.document,K=l.process,J=L.f,Z=J,$=!!(Y&&Y.createEvent&&l.dispatchEvent),Q=_(l.PromiseRejectionEvent),ee="unhandledrejection",te="rejectionhandled",ne=0,re=1,ie=2,se=1,oe=2,ae=!1,ce=D(z,(function(){var e=w(W),t=e!==String(W);if(!t&&66===U)return!0;if(c&&!q["finally"])return!0;if(U>=51&&/native code/.test(e))return!1;var n=new W((function(e){e(1)})),r=function(e){e((function(){}),(function(){}))},i=n.constructor={};return i[B]=r,ae=n.then((function(){}))instanceof r,!ae||!t&&k&&!Q})),le=ce||!S((function(e){W.all(e)["catch"]((function(){}))})),ue=function(e){var t;return!(!x(e)||!_(t=e.then))&&t},he=function(e,t){var n,r,i,s=t.value,o=t.state==re,a=o?e.ok:e.fail,c=e.resolve,l=e.reject,u=e.domain;try{a?(o||(t.rejection===oe&&ge(t),t.rejection=se),!0===a?n=s:(u&&u.enter(),n=a(s),u&&(u.exit(),i=!0)),n===e.promise?l(X("Promise-chain cycle")):(r=ue(n))?h(r,n,c,l):c(n)):l(s)}catch(d){u&&!i&&u.exit(),l(d)}},de=function(e,t){e.notified||(e.notified=!0,A((function(){var n,r=e.reactions;while(n=r.get())he(n,e);e.notified=!1,t&&!e.rejection&&fe(e)})))},pe=function(e,t,n){var r,i;$?(r=Y.createEvent("Event"),r.promise=t,r.reason=n,r.initEvent(e,!1,!0),l.dispatchEvent(r)):r={promise:t,reason:n},!Q&&(i=l["on"+e])?i(r):e===ee&&C("Unhandled promise rejection",n)},fe=function(e){h(E,l,(function(){var t,n=e.facade,r=e.value,i=me(e);if(i&&(t=O((function(){F?K.emit("unhandledRejection",r,n):pe(ee,n,r)})),e.rejection=F||me(e)?oe:se,t.error))throw t.value}))},me=function(e){return e.rejection!==se&&!e.parent},ge=function(e){h(E,l,(function(){var t=e.facade;F?K.emit("rejectionHandled",t):pe(te,t,e.value)}))},ve=function(e,t,n){return function(r){e(t,r,n)}},ye=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=ie,de(e,!0))},_e=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw X("Promise can't be resolved itself");var r=ue(t);r?A((function(){var n={done:!1};try{h(r,t,ve(_e,n,e),ve(ye,n,e))}catch(i){ye(n,i,e)}})):(e.value=t,e.state=re,de(e,!1))}catch(i){ye({done:!1},i,e)}}};if(ce&&(W=function(e){b(this,q),y(e),h(r,this);var t=H(this);try{e(ve(_e,t),ve(ye,t))}catch(n){ye(t,n)}},q=W.prototype,r=function(e){j(this,{type:z,done:!1,notified:!1,parent:!1,reactions:new P,rejection:!1,state:ne,value:void 0})},r.prototype=f(q,{then:function(e,t){var n=V(this),r=J(T(this,W));return n.parent=!0,r.ok=!_(e)||e,r.fail=_(t)&&t,r.domain=F?K.domain:void 0,n.state==ne?n.reactions.add(r):A((function(){he(r,n)})),r.promise},catch:function(e){return this.then(void 0,e)}}),i=function(){var e=new r,t=H(e);this.promise=e,this.resolve=ve(_e,t),this.reject=ve(ye,t)},L.f=J=function(e){return e===W||e===s?new i(e):Z(e)},!c&&_(d)&&G!==Object.prototype)){o=G.then,ae||(p(G,"then",(function(e,t){var n=this;return new W((function(e,t){h(o,n,e,t)})).then(e,t)}),{unsafe:!0}),p(G,"catch",q["catch"],{unsafe:!0}));try{delete G.constructor}catch(xe){}m&&m(G,q)}a({global:!0,wrap:!0,forced:ce},{Promise:W}),g(W,z,!1,!0),v(z),s=u(z),a({target:z,stat:!0,forced:ce},{reject:function(e){var t=J(this);return h(t.reject,void 0,e),t.promise}}),a({target:z,stat:!0,forced:c||ce},{resolve:function(e){return R(c&&this===s?W:this,e)}}),a({target:z,stat:!0,forced:le},{all:function(e){var t=this,n=J(t),r=n.resolve,i=n.reject,s=O((function(){var n=y(t.resolve),s=[],o=0,a=1;M(e,(function(e){var c=o++,l=!1;a++,h(n,t,e).then((function(e){l||(l=!0,s[c]=e,--a||r(s))}),i)})),--a||r(s)}));return s.error&&i(s.value),n.promise},race:function(e){var t=this,n=J(t),r=n.reject,i=O((function(){var i=y(t.resolve);M(e,(function(e){h(i,t,e).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}})},5900:function(e,t,n){var r=n("858e"),i=0,s=Math.random(),o=r(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+o(++i+s,36)}},"59f3":function(e,t,n){var r=n("1672"),i=n("3a29");r({target:"Object",stat:!0,forced:Object.assign!==i},{assign:i})},"5cfa":function(e,t,n){var r=n("0e71"),i=n("9b1d");e.exports=function(e){var t=r(e,"string");return i(t)?t:t+""}},"5eda":function(e,t,n){"use strict";n.d(t,"a",(function(){return et})),n.d(t,"b",(function(){return G}));var r=n("277e");n("8b78");n("8e04");
/*!
  * vue-router v4.0.14
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */
const i="function"===typeof Symbol&&"symbol"===typeof Symbol.toStringTag,s=e=>i?Symbol(e):"_vr_"+e,o=s("rvlm"),a=s("rvd"),c=s("r"),l=s("rl"),u=s("rvl"),h="undefined"!==typeof window;function d(e){return e.__esModule||i&&"Module"===e[Symbol.toStringTag]}const p=Object.assign;function f(e,t){const n={};for(const r in t){const i=t[r];n[r]=Array.isArray(i)?i.map(e):e(i)}return n}const m=()=>{};const g=/\/$/,v=e=>e.replace(g,"");function y(e,t,n="/"){let r,i={},s="",o="";const a=t.indexOf("?"),c=t.indexOf("#",a>-1?a:0);return a>-1&&(r=t.slice(0,a),s=t.slice(a+1,c>-1?c:t.length),i=e(s)),c>-1&&(r=r||t.slice(0,c),o=t.slice(c,t.length)),r=E(null!=r?r:t,n),{fullPath:r+(s&&"?")+s+o,path:r,query:i,hash:o}}function _(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function x(e,t){return t&&e.toLowerCase().startsWith(t.toLowerCase())?e.slice(t.length)||"/":e}function b(e,t,n){const r=t.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&w(t.matched[r],n.matched[i])&&M(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function w(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function M(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!S(e[n],t[n]))return!1;return!0}function S(e,t){return Array.isArray(e)?T(e,t):Array.isArray(t)?T(t,e):e===t}function T(e,t){return Array.isArray(t)?e.length===t.length&&e.every((e,n)=>e===t[n]):1===e.length&&e[0]===t}function E(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/");let i,s,o=n.length-1;for(i=0;i<r.length;i++)if(s=r[i],1!==o&&"."!==s){if(".."!==s)break;o--}return n.slice(0,o).join("/")+"/"+r.slice(i-(i===r.length?1:0)).join("/")}var A,R;(function(e){e["pop"]="pop",e["push"]="push"})(A||(A={})),function(e){e["back"]="back",e["forward"]="forward",e["unknown"]=""}(R||(R={}));function C(e){if(!e)if(h){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return"/"!==e[0]&&"#"!==e[0]&&(e="/"+e),v(e)}const L=/^[^#]+#/;function O(e,t){return e.replace(L,"#")+t}function P(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const I=()=>({left:window.pageXOffset,top:window.pageYOffset});function D(e){let t;if("el"in e){const n=e.el,r="string"===typeof n&&n.startsWith("#");0;const i="string"===typeof n?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;t=P(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(null!=t.left?t.left:window.pageXOffset,null!=t.top?t.top:window.pageYOffset)}function N(e,t){const n=history.state?history.state.position-t:-1;return n+e}const k=new Map;function F(e,t){k.set(e,t)}function U(e){const t=k.get(e);return k.delete(e),t}let B=()=>location.protocol+"//"+location.host;function z(e,t){const{pathname:n,search:r,hash:i}=t,s=e.indexOf("#");if(s>-1){let t=i.includes(e.slice(s))?e.slice(s).length:1,n=i.slice(t);return"/"!==n[0]&&(n="/"+n),x(n,"")}const o=x(n,e);return o+r+i}function H(e,t,n,r){let i=[],s=[],o=null;const a=({state:s})=>{const a=z(e,location),c=n.value,l=t.value;let u=0;if(s){if(n.value=a,t.value=s,o&&o===c)return void(o=null);u=l?s.position-l.position:0}else r(a);i.forEach(e=>{e(n.value,c,{delta:u,type:A.pop,direction:u?u>0?R.forward:R.back:R.unknown})})};function c(){o=n.value}function l(e){i.push(e);const t=()=>{const t=i.indexOf(e);t>-1&&i.splice(t,1)};return s.push(t),t}function u(){const{history:e}=window;e.state&&e.replaceState(p({},e.state,{scroll:I()}),"")}function h(){for(const e of s)e();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u),{pauseListeners:c,listen:l,destroy:h}}function j(e,t,n,r=!1,i=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:i?I():null}}function V(e){const{history:t,location:n}=window,r={value:z(e,n)},i={value:t.state};function s(r,s,o){const a=e.indexOf("#"),c=a>-1?(n.host&&document.querySelector("base")?e:e.slice(a))+r:B()+e+r;try{t[o?"replaceState":"pushState"](s,"",c),i.value=s}catch(l){console.error(l),n[o?"replace":"assign"](c)}}function o(e,n){const o=p({},t.state,j(i.value.back,e,i.value.forward,!0),n,{position:i.value.position});s(e,o,!0),r.value=e}function a(e,n){const o=p({},i.value,t.state,{forward:e,scroll:I()});s(o.current,o,!0);const a=p({},j(r.value,e,null),{position:o.position+1},n);s(e,a,!1),r.value=e}return i.value||s(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0),{location:r,state:i,push:a,replace:o}}function G(e){e=C(e);const t=V(e),n=H(e,t.state,t.location,t.replace);function r(e,t=!0){t||n.pauseListeners(),history.go(e)}const i=p({location:"",base:e,go:r,createHref:O.bind(null,e)},t,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function W(e){return"string"===typeof e||e&&"object"===typeof e}function q(e){return"string"===typeof e||"symbol"===typeof e}const X={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Y=s("nf");var K;(function(e){e[e["aborted"]=4]="aborted",e[e["cancelled"]=8]="cancelled",e[e["duplicated"]=16]="duplicated"})(K||(K={}));function J(e,t){return p(new Error,{type:e,[Y]:!0},t)}function Z(e,t){return e instanceof Error&&Y in e&&(null==t||!!(e.type&t))}const $="[^/]+?",Q={sensitive:!1,strict:!1,start:!0,end:!0},ee=/[.+*?^${}()[\]/\\]/g;function te(e,t){const n=p({},Q,t),r=[];let i=n.start?"^":"";const s=[];for(const u of e){const e=u.length?[]:[90];n.strict&&!u.length&&(i+="/");for(let t=0;t<u.length;t++){const r=u[t];let o=40+(n.sensitive?.25:0);if(0===r.type)t||(i+="/"),i+=r.value.replace(ee,"\\$&"),o+=40;else if(1===r.type){const{value:e,repeatable:n,optional:a,regexp:c}=r;s.push({name:e,repeatable:n,optional:a});const h=c||$;if(h!==$){o+=10;try{new RegExp(`(${h})`)}catch(l){throw new Error(`Invalid custom RegExp for param "${e}" (${h}): `+l.message)}}let d=n?`((?:${h})(?:/(?:${h}))*)`:`(${h})`;t||(d=a&&u.length<2?`(?:/${d})`:"/"+d),a&&(d+="?"),i+=d,o+=20,a&&(o+=-8),n&&(o+=-20),".*"===h&&(o+=-50)}e.push(o)}r.push(e)}if(n.strict&&n.end){const e=r.length-1;r[e][r[e].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function a(e){const t=e.match(o),n={};if(!t)return null;for(let r=1;r<t.length;r++){const e=t[r]||"",i=s[r-1];n[i.name]=e&&i.repeatable?e.split("/"):e}return n}function c(t){let n="",r=!1;for(const i of e){r&&n.endsWith("/")||(n+="/"),r=!1;for(const e of i)if(0===e.type)n+=e.value;else if(1===e.type){const{value:s,repeatable:o,optional:a}=e,c=s in t?t[s]:"";if(Array.isArray(c)&&!o)throw new Error(`Provided param "${s}" is an array but it is not repeatable (* or + modifiers)`);const l=Array.isArray(c)?c.join("/"):c;if(!l){if(!a)throw new Error(`Missing required param "${s}"`);i.length<2&&(n.endsWith("/")?n=n.slice(0,-1):r=!0)}n+=l}}return n}return{re:o,score:r,keys:s,parse:a,stringify:c}}function ne(e,t){let n=0;while(n<e.length&&n<t.length){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?1===e.length&&80===e[0]?-1:1:e.length>t.length?1===t.length&&80===t[0]?1:-1:0}function re(e,t){let n=0;const r=e.score,i=t.score;while(n<r.length&&n<i.length){const e=ne(r[n],i[n]);if(e)return e;n++}return i.length-r.length}const ie={type:0,value:""},se=/[a-zA-Z0-9_]/;function oe(e){if(!e)return[[]];if("/"===e)return[[ie]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(e){throw new Error(`ERR (${n})/"${l}": ${e}`)}let n=0,r=n;const i=[];let s;function o(){s&&i.push(s),s=[]}let a,c=0,l="",u="";function h(){l&&(0===n?s.push({type:0,value:l}):1===n||2===n||3===n?(s.length>1&&("*"===a||"+"===a)&&t(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:l,regexp:u,repeatable:"*"===a||"+"===a,optional:"*"===a||"?"===a})):t("Invalid state to consume buffer"),l="")}function d(){l+=a}while(c<e.length)if(a=e[c++],"\\"!==a||2===n)switch(n){case 0:"/"===a?(l&&h(),o()):":"===a?(h(),n=1):d();break;case 4:d(),n=r;break;case 1:"("===a?n=2:se.test(a)?d():(h(),n=0,"*"!==a&&"?"!==a&&"+"!==a&&c--);break;case 2:")"===a?"\\"==u[u.length-1]?u=u.slice(0,-1)+a:n=3:u+=a;break;case 3:h(),n=0,"*"!==a&&"?"!==a&&"+"!==a&&c--,u="";break;default:t("Unknown state");break}else r=n,n=4;return 2===n&&t(`Unfinished custom RegExp for param "${l}"`),h(),o(),i}function ae(e,t,n){const r=te(oe(e.path),n);const i=p(r,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf===!t.record.aliasOf&&t.children.push(i),i}function ce(e,t){const n=[],r=new Map;function i(e){return r.get(e)}function s(e,n,r){const i=!r,a=ue(e);a.aliasOf=r&&r.record;const l=fe(t,e),u=[a];if("alias"in e){const t="string"===typeof e.alias?[e.alias]:e.alias;for(const e of t)u.push(p({},a,{components:r?r.record.components:a.components,path:e,aliasOf:r?r.record:a}))}let h,d;for(const t of u){const{path:u}=t;if(n&&"/"!==u[0]){const e=n.record.path,r="/"===e[e.length-1]?"":"/";t.path=n.record.path+(u&&r+u)}if(h=ae(t,n,l),r?r.alias.push(h):(d=d||h,d!==h&&d.alias.push(h),i&&e.name&&!de(h)&&o(e.name)),"children"in a){const e=a.children;for(let t=0;t<e.length;t++)s(e[t],h,r&&r.children[t])}r=r||h,c(h)}return d?()=>{o(d)}:m}function o(e){if(q(e)){const t=r.get(e);t&&(r.delete(e),n.splice(n.indexOf(t),1),t.children.forEach(o),t.alias.forEach(o))}else{const t=n.indexOf(e);t>-1&&(n.splice(t,1),e.record.name&&r.delete(e.record.name),e.children.forEach(o),e.alias.forEach(o))}}function a(){return n}function c(e){let t=0;while(t<n.length&&re(e,n[t])>=0&&(e.record.path!==n[t].record.path||!me(e,n[t])))t++;n.splice(t,0,e),e.record.name&&!de(e)&&r.set(e.record.name,e)}function l(e,t){let i,s,o,a={};if("name"in e&&e.name){if(i=r.get(e.name),!i)throw J(1,{location:e});o=i.record.name,a=p(le(t.params,i.keys.filter(e=>!e.optional).map(e=>e.name)),e.params),s=i.stringify(a)}else if("path"in e)s=e.path,i=n.find(e=>e.re.test(s)),i&&(a=i.parse(s),o=i.record.name);else{if(i=t.name?r.get(t.name):n.find(e=>e.re.test(t.path)),!i)throw J(1,{location:e,currentLocation:t});o=i.record.name,a=p({},t.params,e.params),s=i.stringify(a)}const c=[];let l=i;while(l)c.unshift(l.record),l=l.parent;return{name:o,path:s,params:a,matched:c,meta:pe(c)}}return t=fe({strict:!1,end:!0,sensitive:!1},t),e.forEach(e=>s(e)),{addRoute:s,resolve:l,removeRoute:o,getRoutes:a,getRecordMatcher:i}}function le(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function ue(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:he(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||{}:{default:e.component}}}function he(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]="boolean"===typeof n?n:n[r];return t}function de(e){while(e){if(e.record.aliasOf)return!0;e=e.parent}return!1}function pe(e){return e.reduce((e,t)=>p(e,t.meta),{})}function fe(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function me(e,t){return t.children.some(t=>t===e||me(e,t))}const ge=/#/g,ve=/&/g,ye=/\//g,_e=/=/g,xe=/\?/g,be=/\+/g,we=/%5B/g,Me=/%5D/g,Se=/%5E/g,Te=/%60/g,Ee=/%7B/g,Ae=/%7C/g,Re=/%7D/g,Ce=/%20/g;function Le(e){return encodeURI(""+e).replace(Ae,"|").replace(we,"[").replace(Me,"]")}function Oe(e){return Le(e).replace(Ee,"{").replace(Re,"}").replace(Se,"^")}function Pe(e){return Le(e).replace(be,"%2B").replace(Ce,"+").replace(ge,"%23").replace(ve,"%26").replace(Te,"`").replace(Ee,"{").replace(Re,"}").replace(Se,"^")}function Ie(e){return Pe(e).replace(_e,"%3D")}function De(e){return Le(e).replace(ge,"%23").replace(xe,"%3F")}function Ne(e){return null==e?"":De(e).replace(ye,"%2F")}function ke(e){try{return decodeURIComponent(""+e)}catch(t){}return""+e}function Fe(e){const t={};if(""===e||"?"===e)return t;const n="?"===e[0],r=(n?e.slice(1):e).split("&");for(let i=0;i<r.length;++i){const e=r[i].replace(be," "),n=e.indexOf("="),s=ke(n<0?e:e.slice(0,n)),o=n<0?null:ke(e.slice(n+1));if(s in t){let e=t[s];Array.isArray(e)||(e=t[s]=[e]),e.push(o)}else t[s]=o}return t}function Ue(e){let t="";for(let n in e){const r=e[n];if(n=Ie(n),null==r){void 0!==r&&(t+=(t.length?"&":"")+n);continue}const i=Array.isArray(r)?r.map(e=>e&&Pe(e)):[r&&Pe(r)];i.forEach(e=>{void 0!==e&&(t+=(t.length?"&":"")+n,null!=e&&(t+="="+e))})}return t}function Be(e){const t={};for(const n in e){const r=e[n];void 0!==r&&(t[n]=Array.isArray(r)?r.map(e=>null==e?null:""+e):null==r?r:""+r)}return t}function ze(){let e=[];function t(t){return e.push(t),()=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)}}function n(){e=[]}return{add:t,list:()=>e,reset:n}}function He(e,t,n,r,i){const s=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((o,a)=>{const c=e=>{!1===e?a(J(4,{from:n,to:t})):e instanceof Error?a(e):W(e)?a(J(2,{from:t,to:e})):(s&&r.enterCallbacks[i]===s&&"function"===typeof e&&s.push(e),o())},l=e.call(r&&r.instances[i],t,n,c);let u=Promise.resolve(l);e.length<3&&(u=u.then(c)),u.catch(e=>a(e))})}function je(e,t,n,r){const i=[];for(const s of e)for(const e in s.components){let o=s.components[e];if("beforeRouteEnter"===t||s.instances[e])if(Ve(o)){const a=o.__vccOpts||o,c=a[t];c&&i.push(He(c,n,r,s,e))}else{let a=o();0,i.push(()=>a.then(i=>{if(!i)return Promise.reject(new Error(`Couldn't resolve component "${e}" at "${s.path}"`));const o=d(i)?i.default:i;s.components[e]=o;const a=o.__vccOpts||o,c=a[t];return c&&He(c,n,r,s,e)()}))}}return i}function Ve(e){return"object"===typeof e||"displayName"in e||"props"in e||"__vccOpts"in e}function Ge(e){const t=Object(r["o"])(c),n=Object(r["o"])(l),i=Object(r["d"])(()=>t.resolve(Object(r["F"])(e.to))),s=Object(r["d"])(()=>{const{matched:e}=i.value,{length:t}=e,r=e[t-1],s=n.matched;if(!r||!s.length)return-1;const o=s.findIndex(w.bind(null,r));if(o>-1)return o;const a=Ke(e[t-2]);return t>1&&Ke(r)===a&&s[s.length-1].path!==a?s.findIndex(w.bind(null,e[t-2])):o}),o=Object(r["d"])(()=>s.value>-1&&Ye(n.params,i.value.params)),a=Object(r["d"])(()=>s.value>-1&&s.value===n.matched.length-1&&M(n.params,i.value.params));function u(n={}){return Xe(n)?t[Object(r["F"])(e.replace)?"replace":"push"](Object(r["F"])(e.to)).catch(m):Promise.resolve()}return{route:i,href:Object(r["d"])(()=>i.value.href),isActive:o,isExactActive:a,navigate:u}}const We=Object(r["l"])({name:"RouterLink",props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Ge,setup(e,{slots:t}){const n=Object(r["z"])(Ge(e)),{options:i}=Object(r["o"])(c),s=Object(r["d"])(()=>({[Je(e.activeClass,i.linkActiveClass,"router-link-active")]:n.isActive,[Je(e.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=t.default&&t.default(n);return e.custom?i:Object(r["n"])("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),qe=We;function Xe(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&(void 0===e.button||0===e.button)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Ye(e,t){for(const n in t){const r=t[n],i=e[n];if("string"===typeof r){if(r!==i)return!1}else if(!Array.isArray(i)||i.length!==r.length||r.some((e,t)=>e!==i[t]))return!1}return!0}function Ke(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Je=(e,t,n)=>null!=e?e:null!=t?t:n,Ze=Object(r["l"])({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},setup(e,{attrs:t,slots:n}){const i=Object(r["o"])(u),s=Object(r["d"])(()=>e.route||i.value),c=Object(r["o"])(a,0),l=Object(r["d"])(()=>s.value.matched[c]);Object(r["x"])(a,c+1),Object(r["x"])(o,l),Object(r["x"])(u,s);const h=Object(r["A"])();return Object(r["H"])(()=>[h.value,l.value,e.name],([e,t,n],[r,i,s])=>{t&&(t.instances[n]=e,i&&i!==t&&e&&e===r&&(t.leaveGuards.size||(t.leaveGuards=i.leaveGuards),t.updateGuards.size||(t.updateGuards=i.updateGuards))),!e||!t||i&&w(t,i)&&r||(t.enterCallbacks[n]||[]).forEach(t=>t(e))},{flush:"post"}),()=>{const i=s.value,o=l.value,a=o&&o.components[e.name],c=e.name;if(!a)return $e(n.default,{Component:a,route:i});const u=o.props[e.name],d=u?!0===u?i.params:"function"===typeof u?u(i):u:null,f=e=>{e.component.isUnmounted&&(o.instances[c]=null)},m=Object(r["n"])(a,p({},d,t,{onVnodeUnmounted:f,ref:h}));return $e(n.default,{Component:m,route:i})||m}}});function $e(e,t){if(!e)return null;const n=e(t);return 1===n.length?n[0]:n}const Qe=Ze;function et(e){const t=ce(e.routes,e),n=e.parseQuery||Fe,i=e.stringifyQuery||Ue,s=e.history;const o=ze(),a=ze(),d=ze(),g=Object(r["D"])(X);let v=X;h&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const x=f.bind(null,e=>""+e),w=f.bind(null,Ne),M=f.bind(null,ke);function S(e,n){let r,i;return q(e)?(r=t.getRecordMatcher(e),i=n):i=e,t.addRoute(i,r)}function T(e){const n=t.getRecordMatcher(e);n&&t.removeRoute(n)}function E(){return t.getRoutes().map(e=>e.record)}function R(e){return!!t.getRecordMatcher(e)}function C(e,r){if(r=p({},r||g.value),"string"===typeof e){const i=y(n,e,r.path),o=t.resolve({path:i.path},r),a=s.createHref(i.fullPath);return p(i,o,{params:M(o.params),hash:ke(i.hash),redirectedFrom:void 0,href:a})}let o;if("path"in e)o=p({},e,{path:y(n,e.path,r.path).path});else{const t=p({},e.params);for(const e in t)null==t[e]&&delete t[e];o=p({},e,{params:w(e.params)}),r.params=w(r.params)}const a=t.resolve(o,r),c=e.hash||"";a.params=x(M(a.params));const l=_(i,p({},e,{hash:Oe(c),path:a.path})),u=s.createHref(l);return p({fullPath:l,hash:c,query:i===Ue?Be(e.query):e.query||{}},a,{redirectedFrom:void 0,href:u})}function L(e){return"string"===typeof e?y(n,e,g.value.path):p({},e)}function O(e,t){if(v!==e)return J(8,{from:t,to:e})}function P(e){return z(e)}function k(e){return P(p(L(e),{replace:!0}))}function B(e){const t=e.matched[e.matched.length-1];if(t&&t.redirect){const{redirect:n}=t;let r="function"===typeof n?n(e):n;return"string"===typeof r&&(r=r.includes("?")||r.includes("#")?r=L(r):{path:r},r.params={}),p({query:e.query,hash:e.hash,params:e.params},r)}}function z(e,t){const n=v=C(e),r=g.value,s=e.state,o=e.force,a=!0===e.replace,c=B(n);if(c)return z(p(L(c),{state:s,force:o,replace:a}),t||n);const l=n;let u;return l.redirectedFrom=t,!o&&b(i,r,n)&&(u=J(16,{to:l,from:r}),re(r,r,!0,!1)),(u?Promise.resolve(u):j(l,r)).catch(e=>Z(e)?Z(e,2)?e:ne(e):ee(e,l,r)).then(e=>{if(e){if(Z(e,2))return z(p(L(e.to),{state:s,force:o,replace:a}),t||l)}else e=G(l,r,!0,a,s);return V(l,r,e),e})}function H(e,t){const n=O(e,t);return n?Promise.reject(n):Promise.resolve()}function j(e,t){let n;const[r,i,s]=nt(e,t);n=je(r.reverse(),"beforeRouteLeave",e,t);for(const o of r)o.leaveGuards.forEach(r=>{n.push(He(r,e,t))});const c=H.bind(null,e,t);return n.push(c),tt(n).then(()=>{n=[];for(const r of o.list())n.push(He(r,e,t));return n.push(c),tt(n)}).then(()=>{n=je(i,"beforeRouteUpdate",e,t);for(const r of i)r.updateGuards.forEach(r=>{n.push(He(r,e,t))});return n.push(c),tt(n)}).then(()=>{n=[];for(const r of e.matched)if(r.beforeEnter&&!t.matched.includes(r))if(Array.isArray(r.beforeEnter))for(const i of r.beforeEnter)n.push(He(i,e,t));else n.push(He(r.beforeEnter,e,t));return n.push(c),tt(n)}).then(()=>(e.matched.forEach(e=>e.enterCallbacks={}),n=je(s,"beforeRouteEnter",e,t),n.push(c),tt(n))).then(()=>{n=[];for(const r of a.list())n.push(He(r,e,t));return n.push(c),tt(n)}).catch(e=>Z(e,8)?e:Promise.reject(e))}function V(e,t,n){for(const r of d.list())r(e,t,n)}function G(e,t,n,r,i){const o=O(e,t);if(o)return o;const a=t===X,c=h?history.state:{};n&&(r||a?s.replace(e.fullPath,p({scroll:a&&c&&c.scroll},i)):s.push(e.fullPath,i)),g.value=e,re(e,t,n,a),ne()}let W;function Y(){W=s.listen((e,t,n)=>{const r=C(e),i=B(r);if(i)return void z(p(i,{replace:!0}),r).catch(m);v=r;const o=g.value;h&&F(N(o.fullPath,n.delta),I()),j(r,o).catch(e=>Z(e,12)?e:Z(e,2)?(z(e.to,r).then(e=>{Z(e,20)&&!n.delta&&n.type===A.pop&&s.go(-1,!1)}).catch(m),Promise.reject()):(n.delta&&s.go(-n.delta,!1),ee(e,r,o))).then(e=>{e=e||G(r,o,!1),e&&(n.delta?s.go(-n.delta,!1):n.type===A.pop&&Z(e,20)&&s.go(-1,!1)),V(r,o,e)}).catch(m)})}let K,$=ze(),Q=ze();function ee(e,t,n){ne(e);const r=Q.list();return r.length?r.forEach(r=>r(e,t,n)):console.error(e),Promise.reject(e)}function te(){return K&&g.value!==X?Promise.resolve():new Promise((e,t)=>{$.add([e,t])})}function ne(e){return K||(K=!e,Y(),$.list().forEach(([t,n])=>e?n(e):t()),$.reset()),e}function re(t,n,i,s){const{scrollBehavior:o}=e;if(!h||!o)return Promise.resolve();const a=!i&&U(N(t.fullPath,0))||(s||!i)&&history.state&&history.state.scroll||null;return Object(r["p"])().then(()=>o(t,n,a)).then(e=>e&&D(e)).catch(e=>ee(e,t,n))}const ie=e=>s.go(e);let se;const oe=new Set,ae={currentRoute:g,addRoute:S,removeRoute:T,hasRoute:R,getRoutes:E,resolve:C,options:e,push:P,replace:k,go:ie,back:()=>ie(-1),forward:()=>ie(1),beforeEach:o.add,beforeResolve:a.add,afterEach:d.add,onError:Q.add,isReady:te,install(e){const t=this;e.component("RouterLink",qe),e.component("RouterView",Qe),e.config.globalProperties.$router=t,Object.defineProperty(e.config.globalProperties,"$route",{enumerable:!0,get:()=>Object(r["F"])(g)}),h&&!se&&g.value===X&&(se=!0,P(s.location).catch(e=>{0}));const n={};for(const s in X)n[s]=Object(r["d"])(()=>g.value[s]);e.provide(c,t),e.provide(l,Object(r["z"])(n)),e.provide(u,g);const i=e.unmount;oe.add(e),e.unmount=function(){oe.delete(e),oe.size<1&&(v=X,W&&W(),g.value=X,se=!1,K=!1),i()}}};return ae}function tt(e){return e.reduce((e,t)=>e.then(()=>t()),Promise.resolve())}function nt(e,t){const n=[],r=[],i=[],s=Math.max(t.matched.length,e.matched.length);for(let o=0;o<s;o++){const s=t.matched[o];s&&(e.matched.find(e=>w(e,s))?r.push(s):n.push(s));const a=e.matched[o];a&&(t.matched.find(e=>w(e,a))||i.push(a))}return[n,r,i]}},"5faf":function(e,t,n){var r,i,s,o=n("6f0e"),a=n("0a26"),c=n("858e"),l=n("668f"),u=n("6035"),h=n("46ec"),d=n("8d6b"),p=n("52ab"),f=n("cad4"),m="Object already initialized",g=a.TypeError,v=a.WeakMap,y=function(e){return s(e)?i(e):r(e,{})},_=function(e){return function(t){var n;if(!l(t)||(n=i(t)).type!==e)throw g("Incompatible receiver, "+e+" required");return n}};if(o||d.state){var x=d.state||(d.state=new v),b=c(x.get),w=c(x.has),M=c(x.set);r=function(e,t){if(w(x,e))throw new g(m);return t.facade=e,M(x,e,t),t},i=function(e){return b(x,e)||{}},s=function(e){return w(x,e)}}else{var S=p("state");f[S]=!0,r=function(e,t){if(h(e,S))throw new g(m);return t.facade=e,u(e,S,t),t},i=function(e){return h(e,S)?e[S]:{}},s=function(e){return h(e,S)}}e.exports={set:r,get:i,has:s,enforce:y,getterFor:_}},6035:function(e,t,n){var r=n("dd09"),i=n("e36c"),s=n("eda1");e.exports=r?function(e,t,n){return i.f(e,t,s(1,n))}:function(e,t,n){return e[t]=n,e}},6508:function(e,t,n){var r=n("def2");e.exports=Array.isArray||function(e){return"Array"==r(e)}},"65e2":function(e,t,n){var r=n("b55a"),i=n("2bba");e.exports=function(e){return r(i(e))}},"668f":function(e,t,n){var r=n("87b4");e.exports=function(e){return"object"==typeof e?null!==e:r(e)}},"67ca":function(e,t,n){"use strict";var r=n("1672"),i=n("30b8"),s=n("b10f"),o=n("2490"),a=n("87b4"),c=n("2c8a"),l=n("d921"),u=n("d031"),h=n("10ec"),d=n("6035"),p=n("f11a"),f=n("53f4"),m=n("7f1e"),g=n("0fa0"),v=o.PROPER,y=o.CONFIGURABLE,_=g.IteratorPrototype,x=g.BUGGY_SAFARI_ITERATORS,b=f("iterator"),w="keys",M="values",S="entries",T=function(){return this};e.exports=function(e,t,n,o,f,g,E){c(n,t,o);var A,R,C,L=function(e){if(e===f&&N)return N;if(!x&&e in I)return I[e];switch(e){case w:return function(){return new n(this,e)};case M:return function(){return new n(this,e)};case S:return function(){return new n(this,e)}}return function(){return new n(this)}},O=t+" Iterator",P=!1,I=e.prototype,D=I[b]||I["@@iterator"]||f&&I[f],N=!x&&D||L(f),k="Array"==t&&I.entries||D;if(k&&(A=l(k.call(new e)),A!==Object.prototype&&A.next&&(s||l(A)===_||(u?u(A,_):a(A[b])||p(A,b,T)),h(A,O,!0,!0),s&&(m[O]=T))),v&&f==M&&D&&D.name!==M&&(!s&&y?d(I,"name",M):(P=!0,N=function(){return i(D,this)})),f)if(R={values:L(M),keys:g?N:L(w),entries:L(S)},E)for(C in R)(x||P||!(C in I))&&p(I,C,R[C]);else r({target:t,proto:!0,forced:x||P},R);return s&&!E||I[b]===N||p(I,b,N,{name:f}),m[t]=N,R}},6947:function(e,t,n){var r=n("65e2"),i=n("c5ee"),s=n("27d7"),o=function(e){return function(t,n,o){var a,c=r(t),l=s(c),u=i(o,l);if(e&&n!=n){while(l>u)if(a=c[u++],a!=a)return!0}else for(;l>u;u++)if((e||u in c)&&c[u]===n)return e||u||0;return!e&&-1}};e.exports={includes:o(!0),indexOf:o(!1)}},"69d4":function(e,t,n){var r=n("0a26"),i=n("668f"),s=r.document,o=i(s)&&i(s.createElement);e.exports=function(e){return o?s.createElement(e):{}}},"6bef":function(e,t,n){var r=n("2d0e"),i=n("23a2"),s=n("7f1e"),o=n("53f4"),a=o("iterator");e.exports=function(e){if(void 0!=e)return i(e,a)||i(e,"@@iterator")||s[r(e)]}},"6c47":function(e,t,n){var r=n("0a26");e.exports=function(e,t){var n=r.console;n&&n.error&&(1==arguments.length?n.error(e):n.error(e,t))}},"6d5d":function(e,t,n){var r=n("0a26"),i=n("87b4"),s=n("1459"),o=r.TypeError;e.exports=function(e){if(i(e))return e;throw o(s(e)+" is not a function")}},"6f0e":function(e,t,n){var r=n("0a26"),i=n("87b4"),s=n("7c29"),o=r.WeakMap;e.exports=i(o)&&/native code/.test(s(o))},"70e9":function(e,t,n){var r=n("53f4"),i=n("1209"),s=n("e36c"),o=r("unscopables"),a=Array.prototype;void 0==a[o]&&s.f(a,o,{configurable:!0,value:i(null)}),e.exports=function(e){a[o][e]=!0}},7416:function(e,t){e.exports="object"==typeof window},"78ad":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("b90d"),i=n("11ba"),s=n("1850");const o={defines:{KERNEL_SIZE_FLOAT:"25.0",KERNEL_SIZE_INT:"25"},uniforms:{tDiffuse:{value:null},uImageIncrement:{value:new r["Hb"](.001953125,0)},cKernel:{value:[]}},vertexShader:"\n\n\t\tuniform vec2 uImageIncrement;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv - ( ( KERNEL_SIZE_FLOAT - 1.0 ) / 2.0 ) * uImageIncrement;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float cKernel[ KERNEL_SIZE_INT ];\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform vec2 uImageIncrement;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec2 imageCoord = vUv;\n\t\t\tvec4 sum = vec4( 0.0, 0.0, 0.0, 0.0 );\n\n\t\t\tfor( int i = 0; i < KERNEL_SIZE_INT; i ++ ) {\n\n\t\t\t\tsum += texture2D( tDiffuse, imageCoord ) * cKernel[ i ];\n\t\t\t\timageCoord += uImageIncrement;\n\n\t\t\t}\n\n\t\t\tgl_FragColor = sum;\n\n\t\t}",buildKernel:function(e){const t=25;let n=2*Math.ceil(3*e)+1;n>t&&(n=t);const r=.5*(n-1),i=new Array(n);let s=0;for(let o=0;o<n;++o)i[o]=a(o-r,e),s+=i[o];for(let o=0;o<n;++o)i[o]/=s;return i}};function a(e,t){return Math.exp(-e*e/(2*t*t))}class c extends i["b"]{constructor(e=1,t=25,n=4,a=256){super();const l={minFilter:r["G"],magFilter:r["G"],format:r["nb"]};this.renderTargetX=new r["Kb"](a,a,l),this.renderTargetX.texture.name="BloomPass.x",this.renderTargetY=new r["Kb"](a,a,l),this.renderTargetY.texture.name="BloomPass.y",void 0===s["a"]&&console.error("THREE.BloomPass relies on CopyShader");const u=s["a"];this.copyUniforms=r["Gb"].clone(u.uniforms),this.copyUniforms["opacity"].value=e,this.materialCopy=new r["rb"]({uniforms:this.copyUniforms,vertexShader:u.vertexShader,fragmentShader:u.fragmentShader,blending:r["a"],transparent:!0}),void 0===o&&console.error("THREE.BloomPass relies on ConvolutionShader");const h=o;this.convolutionUniforms=r["Gb"].clone(h.uniforms),this.convolutionUniforms["uImageIncrement"].value=c.blurX,this.convolutionUniforms["cKernel"].value=o.buildKernel(n),this.materialConvolution=new r["rb"]({uniforms:this.convolutionUniforms,vertexShader:h.vertexShader,fragmentShader:h.fragmentShader,defines:{KERNEL_SIZE_FLOAT:t.toFixed(1),KERNEL_SIZE_INT:t.toFixed(0)}}),this.needsSwap=!1,this.fsQuad=new i["a"](null)}render(e,t,n,r,i){i&&e.state.buffers.stencil.setTest(!1),this.fsQuad.material=this.materialConvolution,this.convolutionUniforms["tDiffuse"].value=n.texture,this.convolutionUniforms["uImageIncrement"].value=c.blurX,e.setRenderTarget(this.renderTargetX),e.clear(),this.fsQuad.render(e),this.convolutionUniforms["tDiffuse"].value=this.renderTargetX.texture,this.convolutionUniforms["uImageIncrement"].value=c.blurY,e.setRenderTarget(this.renderTargetY),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.materialCopy,this.copyUniforms["tDiffuse"].value=this.renderTargetY.texture,i&&e.state.buffers.stencil.setTest(!0),e.setRenderTarget(n),this.clear&&e.clear(),this.fsQuad.render(e)}}c.blurX=new r["Hb"](.001953125,0),c.blurY=new r["Hb"](0,.001953125)},"7c29":function(e,t,n){var r=n("858e"),i=n("87b4"),s=n("8d6b"),o=r(Function.toString);i(s.inspectSource)||(s.inspectSource=function(e){return o(e)}),e.exports=s.inspectSource},"7cff":function(e,t,n){var r=n("191b");e.exports=r("document","documentElement")},"7d68":function(e,t,n){var r=n("b618"),i=n("f42c");e.exports=!!Object.getOwnPropertySymbols&&!i((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},"7f1e":function(e,t){e.exports={}},8143:function(e,t,n){"use strict";n.d(t,"a",(function(){return De})),n.d(t,"b",(function(){return En})),n.d(t,"d",(function(){return Sn})),n.d(t,"e",(function(){return Xe})),n.d(t,"g",(function(){return An})),n.d(t,"h",(function(){return ue})),n.d(t,"i",(function(){return mn})),n.d(t,"j",(function(){return Tn})),n.d(t,"k",(function(){return p})),n.d(t,"l",(function(){return d})),n.d(t,"o",(function(){return Yn})),n.d(t,"p",(function(){return ii})),n.d(t,"q",(function(){return Fr})),n.d(t,"r",(function(){return Fn})),n.d(t,"s",(function(){return Zn})),n.d(t,"t",(function(){return kn})),n.d(t,"u",(function(){return Gn})),n.d(t,"v",(function(){return nn})),n.d(t,"w",(function(){return qr})),n.d(t,"x",(function(){return tn})),n.d(t,"y",(function(){return ir})),n.d(t,"z",(function(){return Jn})),n.d(t,"A",(function(){return Kn})),n.d(t,"B",(function(){return Wn})),n.d(t,"D",(function(){return Ve})),n.d(t,"E",(function(){return He})),n.d(t,"F",(function(){return Br})),n.d(t,"G",(function(){return zr})),n.d(t,"H",(function(){return Ur})),n.d(t,"I",(function(){return H})),n.d(t,"L",(function(){return gr})),n.d(t,"N",(function(){return ze})),n.d(t,"O",(function(){return Xn})),n.d(t,"P",(function(){return Yr})),n.d(t,"Q",(function(){return f})),n.d(t,"R",(function(){return Zr})),n.d(t,"S",(function(){return be})),n.d(t,"T",(function(){return Qr})),n.d(t,"Y",(function(){return Ar})),n.d(t,"ab",(function(){return Un})),n.d(t,"cb",(function(){return Wr})),n.d(t,"db",(function(){return tr})),n.d(t,"eb",(function(){return C})),n.d(t,"ib",(function(){return Ke})),n.d(t,"jb",(function(){return rt})),n.d(t,"kb",(function(){return at})),n.d(t,"lb",(function(){return st})),n.d(t,"mb",(function(){return Je})),n.d(t,"nb",(function(){return dt})),n.d(t,"ob",(function(){return it})),n.d(t,"pb",(function(){return ht})),n.d(t,"qb",(function(){return ut})),n.d(t,"sb",(function(){return lt})),n.d(t,"tb",(function(){return ct})),n.d(t,"ub",(function(){return ot})),n.d(t,"vb",(function(){return Ln})),n.d(t,"wb",(function(){return $})),n.d(t,"xb",(function(){return xe})),n.d(t,"zb",(function(){return Z})),n.d(t,"Ab",(function(){return k})),n.d(t,"Eb",(function(){return Er})),n.d(t,"Fb",(function(){return rr})),n.d(t,"Gb",(function(){return sr})),n.d(t,"Hb",(function(){return yn})),n.d(t,"Ib",(function(){return bn})),n.d(t,"Jb",(function(){return xn})),n.d(t,"Kb",(function(){return ri})),n.d(t,"Lb",(function(){return ke})),n.d(t,"Mb",(function(){return Dn})),n.d(t,"Nb",(function(){return G})),n.d(t,"Ob",(function(){return Be})),n.d(t,"Sb",(function(){return Kr})),n.d(t,"Tb",(function(){return ni})),n.d(t,"Xb",(function(){return ar})),n.d(t,"bc",(function(){return zn})),n.d(t,"ec",(function(){return Vr})),n.d(t,"fc",(function(){return Jr})),n.d(t,"gc",(function(){return jr})),n.d(t,"hc",(function(){return Oe})),n.d(t,"ic",(function(){return ei})),n.d(t,"jc",(function(){return o})),n.d(t,"kc",(function(){return Ee})),n.d(t,"lc",(function(){return we})),n.d(t,"mc",(function(){return Me})),n.d(t,"nc",(function(){return Se})),n.d(t,"oc",(function(){return Xr})),n.d(t,"pc",(function(){return ee})),n.d(t,"qc",(function(){return Hr})),n.d(t,"rc",(function(){return Vt})),n.d(t,"sc",(function(){return $r})),n.d(t,"tc",(function(){return Q}));var r=n("87be");n.d(t,"c",(function(){return r["a"]})),n.d(t,"f",(function(){return r["b"]})),n.d(t,"C",(function(){return r["d"]})),n.d(t,"J",(function(){return r["e"]})),n.d(t,"K",(function(){return r["f"]})),n.d(t,"M",(function(){return r["g"]})),n.d(t,"U",(function(){return r["h"]})),n.d(t,"V",(function(){return r["i"]})),n.d(t,"W",(function(){return r["j"]})),n.d(t,"X",(function(){return r["k"]})),n.d(t,"Z",(function(){return r["l"]})),n.d(t,"bb",(function(){return r["m"]})),n.d(t,"rb",(function(){return r["n"]})),n.d(t,"yb",(function(){return r["p"]})),n.d(t,"Bb",(function(){return r["q"]})),n.d(t,"Cb",(function(){return r["r"]})),n.d(t,"Db",(function(){return r["s"]})),n.d(t,"Pb",(function(){return r["u"]})),n.d(t,"Qb",(function(){return r["v"]})),n.d(t,"Rb",(function(){return r["w"]})),n.d(t,"Ub",(function(){return r["x"]})),n.d(t,"Yb",(function(){return r["y"]})),n.d(t,"Zb",(function(){return r["z"]})),n.d(t,"ac",(function(){return r["A"]})),n.d(t,"cc",(function(){return r["D"]})),n.d(t,"dc",(function(){return r["E"]}));var i=n("ea1f");n.d(t,"m",(function(){return i["f"]})),n.d(t,"n",(function(){return i["g"]})),n.d(t,"fb",(function(){return i["M"]})),n.d(t,"gb",(function(){return i["N"]})),n.d(t,"hb",(function(){return i["O"]})),n.d(t,"Vb",(function(){return i["R"]})),n.d(t,"Wb",(function(){return i["S"]}));const s=[];function o(e,...t){Object(r["o"])();const n=s.length?s[s.length-1].component:null,i=n&&n.appContext.config.warnHandler,o=a();if(i)d(i,n,11,[e+t.join(""),n&&n.proxy,o.map(({vnode:e})=>`at <${Nr(n,e.type)}>`).join("\n"),o]);else{const n=["[Vue warn]: "+e,...t];o.length&&n.push("\n",...c(o)),console.warn(...n)}Object(r["t"])()}function a(){let e=s[s.length-1];if(!e)return[];const t=[];while(e){const n=t[0];n&&n.vnode===e?n.recurseCount++:t.push({vnode:e,recurseCount:0});const r=e.component&&e.component.parent;e=r&&r.vnode}return t}function c(e){const t=[];return e.forEach((e,n)=>{t.push(...0===n?[]:["\n"],...l(e))}),t}function l({vnode:e,recurseCount:t}){const n=t>0?`... (${t} recursive calls)`:"",r=!!e.component&&null==e.component.parent,i=" at <"+Nr(e.component,e.type,r),s=">"+n;return e.props?[i,...u(e.props),s]:[i+s]}function u(e){const t=[],n=Object.keys(e);return n.slice(0,3).forEach(n=>{t.push(...h(n,e[n]))}),n.length>3&&t.push(" ..."),t}function h(e,t,n){return Object(i["G"])(t)?(t=JSON.stringify(t),n?t:[`${e}=${t}`]):"number"===typeof t||"boolean"===typeof t||null==t?n?t:[`${e}=${t}`]:Object(r["k"])(t)?(t=h(e,Object(r["y"])(t.value),!0),n?t:[e+"=Ref<",t,">"]):Object(i["s"])(t)?[`${e}=fn${t.name?`<${t.name}>`:""}`]:(t=Object(r["y"])(t),n?t:[e+"=",t])}function d(e,t,n,r){let i;try{i=r?e(...r):e()}catch(s){f(s,t,n)}return i}function p(e,t,n,r){if(Object(i["s"])(e)){const s=d(e,t,n,r);return s&&Object(i["B"])(s)&&s.catch(e=>{f(e,t,n)}),s}const s=[];for(let i=0;i<e.length;i++)s.push(p(e[i],t,n,r));return s}function f(e,t,n,r=!0){const i=t?t.vnode:null;if(t){let r=t.parent;const i=t.proxy,s=n;while(r){const t=r.ec;if(t)for(let n=0;n<t.length;n++)if(!1===t[n](e,i,s))return;r=r.parent}const o=t.appContext.config.errorHandler;if(o)return void d(o,null,10,[e,i,s])}m(e,n,i,r)}function m(e,t,n,r=!0){console.error(e)}let g=!1,v=!1;const y=[];let _=0;const x=[];let b=null,w=0;const M=[];let S=null,T=0;const E=Promise.resolve();let A=null,R=null;function C(e){const t=A||E;return e?t.then(this?e.bind(this):e):t}function L(e){let t=_+1,n=y.length;while(t<n){const r=t+n>>>1,i=B(y[r]);i<e?t=r+1:n=r}return t}function O(e){y.length&&y.includes(e,g&&e.allowRecurse?_+1:_)||e===R||(null==e.id?y.push(e):y.splice(L(e.id),0,e),P())}function P(){g||v||(v=!0,A=E.then(z))}function I(e){const t=y.indexOf(e);t>_&&y.splice(t,1)}function D(e,t,n,r){Object(i["q"])(e)?n.push(...e):t&&t.includes(e,e.allowRecurse?r+1:r)||n.push(e),P()}function N(e){D(e,b,x,w)}function k(e){D(e,S,M,T)}function F(e,t=null){if(x.length){for(R=t,b=[...new Set(x)],x.length=0,w=0;w<b.length;w++)b[w]();b=null,w=0,R=null,F(e,t)}}function U(e){if(M.length){const e=[...new Set(M)];if(M.length=0,S)return void S.push(...e);for(S=e,S.sort((e,t)=>B(e)-B(t)),T=0;T<S.length;T++)S[T]();S=null,T=0}}const B=e=>null==e.id?1/0:e.id;function z(e){v=!1,g=!0,F(e),y.sort((e,t)=>B(e)-B(t));i["d"];try{for(_=0;_<y.length;_++){const e=y[_];e&&!1!==e.active&&d(e,null,14)}}finally{_=0,y.length=0,U(e),g=!1,A=null,(y.length||x.length||M.length)&&z(e)}}new Set;new Map;let H,j=[],V=!1;function G(e,t){var n,r;if(H=e,H)H.enabled=!0,j.forEach(({event:e,args:t})=>H.emit(e,...t)),j=[];else if("undefined"!==typeof window&&window.HTMLElement&&!(null===(r=null===(n=window.navigator)||void 0===n?void 0:n.userAgent)||void 0===r?void 0:r.includes("jsdom"))){const e=t.__VUE_DEVTOOLS_HOOK_REPLAY__=t.__VUE_DEVTOOLS_HOOK_REPLAY__||[];e.push(e=>{G(e,t)}),setTimeout(()=>{H||(t.__VUE_DEVTOOLS_HOOK_REPLAY__=null,V=!0,j=[])},3e3)}else V=!0,j=[]}function W(e,t,...n){const r=e.vnode.props||i["b"];let s=n;const o=t.startsWith("update:"),a=o&&t.slice(7);if(a&&a in r){const e=("modelValue"===a?"model":a)+"Modifiers",{number:t,trim:o}=r[e]||i["b"];o?s=n.map(e=>e.trim()):t&&(s=n.map(i["T"]))}let c;let l=r[c=Object(i["S"])(t)]||r[c=Object(i["S"])(Object(i["f"])(t))];!l&&o&&(l=r[c=Object(i["S"])(Object(i["n"])(t))]),l&&p(l,e,6,s);const u=r[c+"Once"];if(u){if(e.emitted){if(e.emitted[c])return}else e.emitted={};e.emitted[c]=!0,p(u,e,6,s)}}function q(e,t,n=!1){const r=t.emitsCache,s=r.get(e);if(void 0!==s)return s;const o=e.emits;let a={},c=!1;if(!Object(i["s"])(e)){const r=e=>{const n=q(e,t,!0);n&&(c=!0,Object(i["i"])(a,n))};!n&&t.mixins.length&&t.mixins.forEach(r),e.extends&&r(e.extends),e.mixins&&e.mixins.forEach(r)}return o||c?(Object(i["q"])(o)?o.forEach(e=>a[e]=null):Object(i["i"])(a,o),r.set(e,a),a):(r.set(e,null),null)}function X(e,t){return!(!e||!Object(i["z"])(t))&&(t=t.slice(2).replace(/Once$/,""),Object(i["m"])(e,t[0].toLowerCase()+t.slice(1))||Object(i["m"])(e,Object(i["n"])(t))||Object(i["m"])(e,t))}let Y=null,K=null;function J(e){const t=Y;return Y=e,K=e&&e.type.__scopeId||null,t}function Z(e){K=e}function $(){K=null}const Q=e=>ee;function ee(e,t=Y,n){if(!t)return e;if(e._n)return e;const r=(...n)=>{r._d&&Dn(-1);const i=J(t),s=e(...n);return J(i),r._d&&Dn(1),s};return r._n=!0,r._c=!0,r._d=!0,r}function te(e){const{type:t,vnode:n,proxy:r,withProxy:s,props:o,propsOptions:[a],slots:c,attrs:l,emit:u,render:h,renderCache:d,data:p,setupState:m,ctx:g,inheritAttrs:v}=e;let y,_;const x=J(e);try{if(4&n.shapeFlag){const e=s||r;y=$n(h.call(e,e,d,o,m,p,g)),_=l}else{const e=t;0,y=$n(e.length>1?e(o,{attrs:l,slots:c,emit:u}):e(o,null)),_=t.props?l:re(l)}}catch(w){Rn.length=0,f(w,e,1),y=Wn(En)}let b=y;if(_&&!1!==v){const e=Object.keys(_),{shapeFlag:t}=b;e.length&&7&t&&(a&&e.some(i["x"])&&(_=ie(_,a)),b=Yn(b,_))}return n.dirs&&(b.dirs=b.dirs?b.dirs.concat(n.dirs):n.dirs),n.transition&&(b.transition=n.transition),y=b,J(x),y}function ne(e){let t;for(let n=0;n<e.length;n++){const r=e[n];if(!Un(r))return;if(r.type!==En||"v-if"===r.children){if(t)return;t=r}}return t}const re=e=>{let t;for(const n in e)("class"===n||"style"===n||Object(i["z"])(n))&&((t||(t={}))[n]=e[n]);return t},ie=(e,t)=>{const n={};for(const r in e)Object(i["x"])(r)&&r.slice(9)in t||(n[r]=e[r]);return n};function se(e,t,n){const{props:r,children:i,component:s}=e,{props:o,children:a,patchFlag:c}=t,l=s.emitsOptions;if(t.dirs||t.transition)return!0;if(!(n&&c>=0))return!(!i&&!a||a&&a.$stable)||r!==o&&(r?!o||oe(r,o,l):!!o);if(1024&c)return!0;if(16&c)return r?oe(r,o,l):!!o;if(8&c){const e=t.dynamicProps;for(let t=0;t<e.length;t++){const n=e[t];if(o[n]!==r[n]&&!X(l,n))return!0}}return!1}function oe(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(t[s]!==e[s]&&!X(n,s))return!0}return!1}function ae({vnode:e,parent:t},n){while(t&&t.subTree===e)(e=t.vnode).el=n,t=t.parent}const ce=e=>e.__isSuspense,le={name:"Suspense",__isSuspense:!0,process(e,t,n,r,i,s,o,a,c,l){null==e?de(t,n,r,i,s,o,a,c,l):pe(e,t,n,r,i,o,a,c,l)},hydrate:me,create:fe,normalize:ge},ue=le;function he(e,t){const n=e.props&&e.props[t];Object(i["s"])(n)&&n()}function de(e,t,n,r,i,s,o,a,c){const{p:l,o:{createElement:u}}=c,h=u("div"),d=e.suspense=fe(e,i,r,t,h,n,s,o,a,c);l(null,d.pendingBranch=e.ssContent,h,null,r,d,s,o),d.deps>0?(he(e,"onPending"),he(e,"onFallback"),l(null,e.ssFallback,t,n,r,null,s,o),_e(d,e.ssFallback)):d.resolve()}function pe(e,t,n,r,i,s,o,a,{p:c,um:l,o:{createElement:u}}){const h=t.suspense=e.suspense;h.vnode=t,t.el=e.el;const d=t.ssContent,p=t.ssFallback,{activeBranch:f,pendingBranch:m,isInFallback:g,isHydrating:v}=h;if(m)h.pendingBranch=d,Bn(d,m)?(c(m,d,h.hiddenContainer,null,i,h,s,o,a),h.deps<=0?h.resolve():g&&(c(f,p,n,r,i,null,s,o,a),_e(h,p))):(h.pendingId++,v?(h.isHydrating=!1,h.activeBranch=m):l(m,i,h),h.deps=0,h.effects.length=0,h.hiddenContainer=u("div"),g?(c(null,d,h.hiddenContainer,null,i,h,s,o,a),h.deps<=0?h.resolve():(c(f,p,n,r,i,null,s,o,a),_e(h,p))):f&&Bn(d,f)?(c(f,d,n,r,i,h,s,o,a),h.resolve(!0)):(c(null,d,h.hiddenContainer,null,i,h,s,o,a),h.deps<=0&&h.resolve()));else if(f&&Bn(d,f))c(f,d,n,r,i,h,s,o,a),_e(h,d);else if(he(t,"onPending"),h.pendingBranch=d,h.pendingId++,c(null,d,h.hiddenContainer,null,i,h,s,o,a),h.deps<=0)h.resolve();else{const{timeout:e,pendingId:t}=h;e>0?setTimeout(()=>{h.pendingId===t&&h.fallback(p)},e):0===e&&h.fallback(p)}}function fe(e,t,n,r,s,o,a,c,l,u,h=!1){const{p:d,m:p,um:m,n:g,o:{parentNode:v,remove:y}}=u,_=Object(i["T"])(e.props&&e.props.timeout),x={vnode:e,parent:t,parentComponent:n,isSVG:a,container:r,hiddenContainer:s,anchor:o,deps:0,pendingId:0,timeout:"number"===typeof _?_:-1,activeBranch:null,pendingBranch:null,isInFallback:!0,isHydrating:h,isUnmounted:!1,effects:[],resolve(e=!1){const{vnode:t,activeBranch:n,pendingBranch:r,pendingId:i,effects:s,parentComponent:o,container:a}=x;if(x.isHydrating)x.isHydrating=!1;else if(!e){const e=n&&r.transition&&"out-in"===r.transition.mode;e&&(n.transition.afterLeave=()=>{i===x.pendingId&&p(r,a,t,0)});let{anchor:t}=x;n&&(t=g(n),m(n,o,x,!0)),e||p(r,a,t,0)}_e(x,r),x.pendingBranch=null,x.isInFallback=!1;let c=x.parent,l=!1;while(c){if(c.pendingBranch){c.effects.push(...s),l=!0;break}c=c.parent}l||k(s),x.effects=[],he(t,"onResolve")},fallback(e){if(!x.pendingBranch)return;const{vnode:t,activeBranch:n,parentComponent:r,container:i,isSVG:s}=x;he(t,"onFallback");const o=g(n),a=()=>{x.isInFallback&&(d(null,e,i,o,r,null,s,c,l),_e(x,e))},u=e.transition&&"out-in"===e.transition.mode;u&&(n.transition.afterLeave=a),x.isInFallback=!0,m(n,r,null,!0),u||a()},move(e,t,n){x.activeBranch&&p(x.activeBranch,e,t,n),x.container=e},next(){return x.activeBranch&&g(x.activeBranch)},registerDep(e,t){const n=!!x.pendingBranch;n&&x.deps++;const r=e.vnode.el;e.asyncDep.catch(t=>{f(t,e,0)}).then(i=>{if(e.isUnmounted||x.isUnmounted||x.pendingId!==e.suspenseId)return;e.asyncResolved=!0;const{vnode:s}=e;Tr(e,i,!1),r&&(s.el=r);const o=!r&&e.subTree.el;t(e,s,v(r||e.subTree.el),r?null:g(e.subTree),x,a,l),o&&y(o),ae(e,s.el),n&&0===--x.deps&&x.resolve()})},unmount(e,t){x.isUnmounted=!0,x.activeBranch&&m(x.activeBranch,n,e,t),x.pendingBranch&&m(x.pendingBranch,n,e,t)}};return x}function me(e,t,n,r,i,s,o,a,c){const l=t.suspense=fe(t,r,n,e.parentNode,document.createElement("div"),null,i,s,o,a,!0),u=c(e,l.pendingBranch=t.ssContent,n,l,s,o);return 0===l.deps&&l.resolve(),u}function ge(e){const{shapeFlag:t,children:n}=e,r=32&t;e.ssContent=ve(r?n.default:n),e.ssFallback=r?ve(n.fallback):Wn(En)}function ve(e){let t;if(Object(i["s"])(e)){const n=In&&e._c;n&&(e._d=!1,Ln()),e=e(),n&&(e._d=!0,t=Cn,On())}if(Object(i["q"])(e)){const t=ne(e);0,e=t}return e=$n(e),t&&!e.dynamicChildren&&(e.dynamicChildren=t.filter(t=>t!==e)),e}function ye(e,t){t&&t.pendingBranch?Object(i["q"])(e)?t.effects.push(...e):t.effects.push(e):k(e)}function _e(e,t){e.activeBranch=t;const{vnode:n,parentComponent:r}=e,i=n.el=t.el;r&&r.subTree===n&&(r.vnode.el=i,ae(r,i))}function xe(e,t){if(mr){let n=mr.provides;const r=mr.parent&&mr.parent.provides;r===n&&(n=mr.provides=Object.create(r)),n[e]=t}else 0}function be(e,t,n=!1){const r=mr||Y;if(r){const s=null==r.parent?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(s&&e in s)return s[e];if(arguments.length>1)return n&&Object(i["s"])(t)?t.call(r.proxy):t}else 0}function we(e,t){return Ae(e,null,t)}function Me(e,t){return Ae(e,null,{flush:"post"})}function Se(e,t){return Ae(e,null,{flush:"sync"})}const Te={};function Ee(e,t,n){return Ae(e,t,n)}function Ae(e,t,{immediate:n,deep:s,flush:o,onTrack:a,onTrigger:c}=i["b"]){const l=mr;let u,h,f=!1,m=!1;if(Object(r["k"])(e)?(u=()=>e.value,f=Object(r["l"])(e)):Object(r["i"])(e)?(u=()=>e,s=!0):Object(i["q"])(e)?(m=!0,f=e.some(r["i"]),u=()=>e.map(e=>Object(r["k"])(e)?e.value:Object(r["i"])(e)?Le(e):Object(i["s"])(e)?d(e,l,2):void 0)):u=Object(i["s"])(e)?t?()=>d(e,l,2):()=>{if(!l||!l.isUnmounted)return h&&h(),p(e,l,3,[g])}:i["d"],t&&s){const e=u;u=()=>Le(e())}let g=e=>{h=x.onStop=()=>{d(e,l,4)}};if(wr)return g=i["d"],t?n&&p(t,l,3,[u(),m?[]:void 0,g]):u(),i["d"];let v=m?[]:Te;const y=()=>{if(x.active)if(t){const e=x.run();(s||f||(m?e.some((e,t)=>Object(i["l"])(e,v[t])):Object(i["l"])(e,v)))&&(h&&h(),p(t,l,3,[e,v===Te?void 0:v,g]),v=e)}else x.run()};let _;y.allowRecurse=!!t,_="sync"===o?y:"post"===o?()=>en(y,l&&l.suspense):()=>{!l||l.isMounted?N(y):y()};const x=new r["b"](u,_);return t?n?y():v=x.run():"post"===o?en(x.run.bind(x),l&&l.suspense):x.run(),()=>{x.stop(),l&&l.scope&&Object(i["Q"])(l.scope.effects,x)}}function Re(e,t,n){const r=this.proxy,s=Object(i["G"])(e)?e.includes(".")?Ce(r,e):()=>r[e]:e.bind(r,r);let o;Object(i["s"])(t)?o=t:(o=t.handler,n=t);const a=mr;vr(this);const c=Ae(s,o.bind(r),n);return a?vr(a):yr(),c}function Ce(e,t){const n=t.split(".");return()=>{let t=e;for(let e=0;e<n.length&&t;e++)t=t[n[e]];return t}}function Le(e,t){if(!Object(i["y"])(e)||e["__v_skip"])return e;if(t=t||new Set,t.has(e))return e;if(t.add(e),Object(r["k"])(e))Le(e.value,t);else if(Object(i["q"])(e))for(let n=0;n<e.length;n++)Le(e[n],t);else if(Object(i["E"])(e)||Object(i["w"])(e))e.forEach(e=>{Le(e,t)});else if(Object(i["A"])(e))for(const n in e)Le(e[n],t);return e}function Oe(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return it(()=>{e.isMounted=!0}),at(()=>{e.isUnmounting=!0}),e}const Pe=[Function,Array],Ie={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Pe,onEnter:Pe,onAfterEnter:Pe,onEnterCancelled:Pe,onBeforeLeave:Pe,onLeave:Pe,onAfterLeave:Pe,onLeaveCancelled:Pe,onBeforeAppear:Pe,onAppear:Pe,onAfterAppear:Pe,onAppearCancelled:Pe},setup(e,{slots:t}){const n=gr(),i=Oe();let s;return()=>{const o=t.default&&ze(t.default(),!0);if(!o||!o.length)return;const a=Object(r["y"])(e),{mode:c}=a;const l=o[0];if(i.isLeaving)return Fe(l);const u=Ue(l);if(!u)return Fe(l);const h=ke(u,a,i,n);Be(u,h);const d=n.subTree,p=d&&Ue(d);let f=!1;const{getTransitionKey:m}=u.type;if(m){const e=m();void 0===s?s=e:e!==s&&(s=e,f=!0)}if(p&&p.type!==En&&(!Bn(u,p)||f)){const e=ke(p,a,i,n);if(Be(p,e),"out-in"===c)return i.isLeaving=!0,e.afterLeave=()=>{i.isLeaving=!1,n.update()},Fe(l);"in-out"===c&&u.type!==En&&(e.delayLeave=(e,t,n)=>{const r=Ne(i,p);r[String(p.key)]=p,e._leaveCb=()=>{t(),e._leaveCb=void 0,delete h.delayedLeave},h.delayedLeave=n})}return l}}},De=Ie;function Ne(e,t){const{leavingVNodes:n}=e;let r=n.get(t.type);return r||(r=Object.create(null),n.set(t.type,r)),r}function ke(e,t,n,r){const{appear:i,mode:s,persisted:o=!1,onBeforeEnter:a,onEnter:c,onAfterEnter:l,onEnterCancelled:u,onBeforeLeave:h,onLeave:d,onAfterLeave:f,onLeaveCancelled:m,onBeforeAppear:g,onAppear:v,onAfterAppear:y,onAppearCancelled:_}=t,x=String(e.key),b=Ne(n,e),w=(e,t)=>{e&&p(e,r,9,t)},M={mode:s,persisted:o,beforeEnter(t){let r=a;if(!n.isMounted){if(!i)return;r=g||a}t._leaveCb&&t._leaveCb(!0);const s=b[x];s&&Bn(e,s)&&s.el._leaveCb&&s.el._leaveCb(),w(r,[t])},enter(e){let t=c,r=l,s=u;if(!n.isMounted){if(!i)return;t=v||c,r=y||l,s=_||u}let o=!1;const a=e._enterCb=t=>{o||(o=!0,w(t?s:r,[e]),M.delayedLeave&&M.delayedLeave(),e._enterCb=void 0)};t?(t(e,a),t.length<=1&&a()):a()},leave(t,r){const i=String(e.key);if(t._enterCb&&t._enterCb(!0),n.isUnmounting)return r();w(h,[t]);let s=!1;const o=t._leaveCb=n=>{s||(s=!0,r(),w(n?m:f,[t]),t._leaveCb=void 0,b[i]===e&&delete b[i])};b[i]=e,d?(d(t,o),d.length<=1&&o()):o()},clone(e){return ke(e,t,n,r)}};return M}function Fe(e){if(We(e))return e=Yn(e),e.children=null,e}function Ue(e){return We(e)?e.children?e.children[0]:void 0:e}function Be(e,t){6&e.shapeFlag&&e.component?Be(e.component.subTree,t):128&e.shapeFlag?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function ze(e,t=!1){let n=[],r=0;for(let i=0;i<e.length;i++){const s=e[i];s.type===Sn?(128&s.patchFlag&&r++,n=n.concat(ze(s.children,t))):(t||s.type!==En)&&n.push(s)}if(r>1)for(let i=0;i<n.length;i++)n[i].patchFlag=-2;return n}function He(e){return Object(i["s"])(e)?{setup:e,name:e.name}:e}const je=e=>!!e.type.__asyncLoader;function Ve(e){Object(i["s"])(e)&&(e={loader:e});const{loader:t,loadingComponent:n,errorComponent:s,delay:o=200,timeout:a,suspensible:c=!0,onError:l}=e;let u,h=null,d=0;const p=()=>(d++,h=null,m()),m=()=>{let e;return h||(e=h=t().catch(e=>{if(e=e instanceof Error?e:new Error(String(e)),l)return new Promise((t,n)=>{const r=()=>t(p()),i=()=>n(e);l(e,r,i,d+1)});throw e}).then(t=>e!==h&&h?h:(t&&(t.__esModule||"Module"===t[Symbol.toStringTag])&&(t=t.default),u=t,t)))};return He({name:"AsyncComponentWrapper",__asyncLoader:m,get __asyncResolved(){return u},setup(){const e=mr;if(u)return()=>Ge(u,e);const t=t=>{h=null,f(t,e,13,!s)};if(c&&e.suspense||wr)return m().then(t=>()=>Ge(t,e)).catch(e=>(t(e),()=>s?Wn(s,{error:e}):null));const i=Object(r["s"])(!1),l=Object(r["s"])(),d=Object(r["s"])(!!o);return o&&setTimeout(()=>{d.value=!1},o),null!=a&&setTimeout(()=>{if(!i.value&&!l.value){const e=new Error(`Async component timed out after ${a}ms.`);t(e),l.value=e}},a),m().then(()=>{i.value=!0,e.parent&&We(e.parent.vnode)&&O(e.parent.update)}).catch(e=>{t(e),l.value=e}),()=>i.value&&u?Ge(u,e):l.value&&s?Wn(s,{error:l.value}):n&&!d.value?Wn(n):void 0}})}function Ge(e,{vnode:{ref:t,props:n,children:r}}){const i=Wn(e,n,r);return i.ref=t,i}const We=e=>e.type.__isKeepAlive,qe={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:t}){const n=gr(),r=n.ctx;if(!r.renderer)return t.default;const s=new Map,o=new Set;let a=null;const c=n.suspense,{renderer:{p:l,m:u,um:h,o:{createElement:d}}}=r,p=d("div");function f(e){Qe(e),h(e,n,c,!0)}function m(e){s.forEach((t,n)=>{const r=Dr(t.type);!r||e&&e(r)||g(n)})}function g(e){const t=s.get(e);a&&t.type===a.type?a&&Qe(a):f(t),s.delete(e),o.delete(e)}r.activate=(e,t,n,r,s)=>{const o=e.component;u(e,t,n,0,c),l(o.vnode,e,t,n,o,c,r,e.slotScopeIds,s),en(()=>{o.isDeactivated=!1,o.a&&Object(i["p"])(o.a);const t=e.props&&e.props.onVnodeMounted;t&&nr(t,o.parent,e)},c)},r.deactivate=e=>{const t=e.component;u(e,p,null,1,c),en(()=>{t.da&&Object(i["p"])(t.da);const n=e.props&&e.props.onVnodeUnmounted;n&&nr(n,t.parent,e),t.isDeactivated=!0},c)},Ee(()=>[e.include,e.exclude],([e,t])=>{e&&m(t=>Ye(e,t)),t&&m(e=>!Ye(t,e))},{flush:"post",deep:!0});let v=null;const y=()=>{null!=v&&s.set(v,et(n.subTree))};return it(y),ot(y),at(()=>{s.forEach(e=>{const{subTree:t,suspense:r}=n,i=et(t);if(e.type!==i.type)f(e);else{Qe(i);const e=i.component.da;e&&en(e,r)}})}),()=>{if(v=null,!t.default)return null;const n=t.default(),r=n[0];if(n.length>1)return a=null,n;if(!Un(r)||!(4&r.shapeFlag)&&!(128&r.shapeFlag))return a=null,r;let i=et(r);const c=i.type,l=Dr(je(i)?i.type.__asyncResolved||{}:c),{include:u,exclude:h,max:d}=e;if(u&&(!l||!Ye(u,l))||h&&l&&Ye(h,l))return a=i,r;const p=null==i.key?c:i.key,f=s.get(p);return i.el&&(i=Yn(i),128&r.shapeFlag&&(r.ssContent=i)),v=p,f?(i.el=f.el,i.component=f.component,i.transition&&Be(i,i.transition),i.shapeFlag|=512,o.delete(p),o.add(p)):(o.add(p),d&&o.size>parseInt(d,10)&&g(o.values().next().value)),i.shapeFlag|=256,a=i,r}}},Xe=qe;function Ye(e,t){return Object(i["q"])(e)?e.some(e=>Ye(e,t)):Object(i["G"])(e)?e.split(",").includes(t):!!e.test&&e.test(t)}function Ke(e,t){Ze(e,"a",t)}function Je(e,t){Ze(e,"da",t)}function Ze(e,t,n=mr){const r=e.__wdc||(e.__wdc=()=>{let t=n;while(t){if(t.isDeactivated)return;t=t.parent}return e()});if(tt(t,r,n),n){let e=n.parent;while(e&&e.parent)We(e.parent.vnode)&&$e(r,t,n,e),e=e.parent}}function $e(e,t,n,r){const s=tt(t,e,r,!0);ct(()=>{Object(i["Q"])(r[t],s)},n)}function Qe(e){let t=e.shapeFlag;256&t&&(t-=256),512&t&&(t-=512),e.shapeFlag=t}function et(e){return 128&e.shapeFlag?e.ssContent:e}function tt(e,t,n=mr,i=!1){if(n){const s=n[e]||(n[e]=[]),o=t.__weh||(t.__weh=(...i)=>{if(n.isUnmounted)return;Object(r["o"])(),vr(n);const s=p(t,n,e,i);return yr(),Object(r["t"])(),s});return i?s.unshift(o):s.push(o),o}}const nt=e=>(t,n=mr)=>(!wr||"sp"===e)&&tt(e,t,n),rt=nt("bm"),it=nt("m"),st=nt("bu"),ot=nt("u"),at=nt("bum"),ct=nt("um"),lt=nt("sp"),ut=nt("rtg"),ht=nt("rtc");function dt(e,t=mr){tt("ec",e,t)}let pt=!0;function ft(e){const t=yt(e),n=e.proxy,s=e.ctx;pt=!1,t.beforeCreate&&gt(t.beforeCreate,e,"bc");const{data:o,computed:a,methods:c,watch:l,provide:u,inject:h,created:d,beforeMount:p,mounted:f,beforeUpdate:m,updated:g,activated:v,deactivated:y,beforeDestroy:_,beforeUnmount:x,destroyed:b,unmounted:w,render:M,renderTracked:S,renderTriggered:T,errorCaptured:E,serverPrefetch:A,expose:R,inheritAttrs:C,components:L,directives:O,filters:P}=t,I=null;if(h&&mt(h,s,I,e.appContext.config.unwrapInjectedRef),c)for(const r in c){const e=c[r];Object(i["s"])(e)&&(s[r]=e.bind(n))}if(o){0;const t=o.call(n,n);0,Object(i["y"])(t)&&(e.data=Object(r["q"])(t))}if(pt=!0,a)for(const r in a){const e=a[r],t=Object(i["s"])(e)?e.bind(n,n):Object(i["s"])(e.get)?e.get.bind(n,n):i["d"];0;const o=!Object(i["s"])(e)&&Object(i["s"])(e.set)?e.set.bind(n):i["d"],c=Fr({get:t,set:o});Object.defineProperty(s,r,{enumerable:!0,configurable:!0,get:()=>c.value,set:e=>c.value=e})}if(l)for(const r in l)vt(l[r],s,n,r);if(u){const e=Object(i["s"])(u)?u.call(n):u;Reflect.ownKeys(e).forEach(t=>{xe(t,e[t])})}function D(e,t){Object(i["q"])(t)?t.forEach(t=>e(t.bind(n))):t&&e(t.bind(n))}if(d&&gt(d,e,"c"),D(rt,p),D(it,f),D(st,m),D(ot,g),D(Ke,v),D(Je,y),D(dt,E),D(ht,S),D(ut,T),D(at,x),D(ct,w),D(lt,A),Object(i["q"])(R))if(R.length){const t=e.exposed||(e.exposed={});R.forEach(e=>{Object.defineProperty(t,e,{get:()=>n[e],set:t=>n[e]=t})})}else e.exposed||(e.exposed={});M&&e.render===i["d"]&&(e.render=M),null!=C&&(e.inheritAttrs=C),L&&(e.components=L),O&&(e.directives=O)}function mt(e,t,n=i["d"],s=!1){Object(i["q"])(e)&&(e=Mt(e));for(const o in e){const n=e[o];let a;a=Object(i["y"])(n)?"default"in n?be(n.from||o,n.default,!0):be(n.from||o):be(n),Object(r["k"])(a)&&s?Object.defineProperty(t,o,{enumerable:!0,configurable:!0,get:()=>a.value,set:e=>a.value=e}):t[o]=a}}function gt(e,t,n){p(Object(i["q"])(e)?e.map(e=>e.bind(t.proxy)):e.bind(t.proxy),t,n)}function vt(e,t,n,r){const s=r.includes(".")?Ce(n,r):()=>n[r];if(Object(i["G"])(e)){const n=t[e];Object(i["s"])(n)&&Ee(s,n)}else if(Object(i["s"])(e))Ee(s,e.bind(n));else if(Object(i["y"])(e))if(Object(i["q"])(e))e.forEach(e=>vt(e,t,n,r));else{const r=Object(i["s"])(e.handler)?e.handler.bind(n):t[e.handler];Object(i["s"])(r)&&Ee(s,r,e)}else 0}function yt(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=e.appContext,a=s.get(t);let c;return a?c=a:i.length||n||r?(c={},i.length&&i.forEach(e=>_t(c,e,o,!0)),_t(c,t,o)):c=t,s.set(t,c),c}function _t(e,t,n,r=!1){const{mixins:i,extends:s}=t;s&&_t(e,s,n,!0),i&&i.forEach(t=>_t(e,t,n,!0));for(const o in t)if(r&&"expose"===o);else{const r=xt[o]||n&&n[o];e[o]=r?r(e[o],t[o]):t[o]}return e}const xt={data:bt,props:Tt,emits:Tt,methods:Tt,computed:Tt,beforeCreate:St,created:St,beforeMount:St,mounted:St,beforeUpdate:St,updated:St,beforeDestroy:St,beforeUnmount:St,destroyed:St,unmounted:St,activated:St,deactivated:St,errorCaptured:St,serverPrefetch:St,components:Tt,directives:Tt,watch:Et,provide:bt,inject:wt};function bt(e,t){return t?e?function(){return Object(i["i"])(Object(i["s"])(e)?e.call(this,this):e,Object(i["s"])(t)?t.call(this,this):t)}:t:e}function wt(e,t){return Tt(Mt(e),Mt(t))}function Mt(e){if(Object(i["q"])(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function St(e,t){return e?[...new Set([].concat(e,t))]:t}function Tt(e,t){return e?Object(i["i"])(Object(i["i"])(Object.create(null),e),t):t}function Et(e,t){if(!e)return t;if(!t)return e;const n=Object(i["i"])(Object.create(null),e);for(const r in t)n[r]=St(e[r],t[r]);return n}function At(e,t,n,s=!1){const o={},a={};Object(i["h"])(a,Hn,1),e.propsDefaults=Object.create(null),Ct(e,t,o,a);for(const r in e.propsOptions[0])r in o||(o[r]=void 0);n?e.props=s?o:Object(r["u"])(o):e.type.props?e.props=o:e.props=a,e.attrs=a}function Rt(e,t,n,s){const{props:o,attrs:a,vnode:{patchFlag:c}}=e,l=Object(r["y"])(o),[u]=e.propsOptions;let h=!1;if(!(s||c>0)||16&c){let r;Ct(e,t,o,a)&&(h=!0);for(const s in l)t&&(Object(i["m"])(t,s)||(r=Object(i["n"])(s))!==s&&Object(i["m"])(t,r))||(u?!n||void 0===n[s]&&void 0===n[r]||(o[s]=Lt(u,l,s,void 0,e,!0)):delete o[s]);if(a!==l)for(const e in a)t&&Object(i["m"])(t,e)||(delete a[e],h=!0)}else if(8&c){const n=e.vnode.dynamicProps;for(let r=0;r<n.length;r++){let s=n[r];const c=t[s];if(u)if(Object(i["m"])(a,s))c!==a[s]&&(a[s]=c,h=!0);else{const t=Object(i["f"])(s);o[t]=Lt(u,l,t,c,e,!1)}else c!==a[s]&&(a[s]=c,h=!0)}}h&&Object(r["C"])(e,"set","$attrs")}function Ct(e,t,n,s){const[o,a]=e.propsOptions;let c,l=!1;if(t)for(let r in t){if(Object(i["C"])(r))continue;const u=t[r];let h;o&&Object(i["m"])(o,h=Object(i["f"])(r))?a&&a.includes(h)?(c||(c={}))[h]=u:n[h]=u:X(e.emitsOptions,r)||r in s&&u===s[r]||(s[r]=u,l=!0)}if(a){const t=Object(r["y"])(n),s=c||i["b"];for(let r=0;r<a.length;r++){const c=a[r];n[c]=Lt(o,t,c,s[c],e,!Object(i["m"])(s,c))}}return l}function Lt(e,t,n,r,s,o){const a=e[n];if(null!=a){const e=Object(i["m"])(a,"default");if(e&&void 0===r){const e=a.default;if(a.type!==Function&&Object(i["s"])(e)){const{propsDefaults:i}=s;n in i?r=i[n]:(vr(s),r=i[n]=e.call(null,t),yr())}else r=e}a[0]&&(o&&!e?r=!1:!a[1]||""!==r&&r!==Object(i["n"])(n)||(r=!0))}return r}function Ot(e,t,n=!1){const r=t.propsCache,s=r.get(e);if(s)return s;const o=e.props,a={},c=[];let l=!1;if(!Object(i["s"])(e)){const r=e=>{l=!0;const[n,r]=Ot(e,t,!0);Object(i["i"])(a,n),r&&c.push(...r)};!n&&t.mixins.length&&t.mixins.forEach(r),e.extends&&r(e.extends),e.mixins&&e.mixins.forEach(r)}if(!o&&!l)return r.set(e,i["a"]),i["a"];if(Object(i["q"])(o))for(let h=0;h<o.length;h++){0;const e=Object(i["f"])(o[h]);Pt(e)&&(a[e]=i["b"])}else if(o){0;for(const e in o){const t=Object(i["f"])(e);if(Pt(t)){const n=o[e],r=a[t]=Object(i["q"])(n)||Object(i["s"])(n)?{type:n}:n;if(r){const e=Nt(Boolean,r.type),n=Nt(String,r.type);r[0]=e>-1,r[1]=n<0||e<n,(e>-1||Object(i["m"])(r,"default"))&&c.push(t)}}}}const u=[a,c];return r.set(e,u),u}function Pt(e){return"$"!==e[0]}function It(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:null===e?"null":""}function Dt(e,t){return It(e)===It(t)}function Nt(e,t){return Object(i["q"])(t)?t.findIndex(t=>Dt(t,e)):Object(i["s"])(t)&&Dt(t,e)?0:-1}const kt=e=>"_"===e[0]||"$stable"===e,Ft=e=>Object(i["q"])(e)?e.map($n):[$n(e)],Ut=(e,t,n)=>{const r=ee((...e)=>Ft(t(...e)),n);return r._c=!1,r},Bt=(e,t,n)=>{const r=e._ctx;for(const s in e){if(kt(s))continue;const n=e[s];if(Object(i["s"])(n))t[s]=Ut(s,n,r);else if(null!=n){0;const e=Ft(n);t[s]=()=>e}}},zt=(e,t)=>{const n=Ft(t);e.slots.default=()=>n},Ht=(e,t)=>{if(32&e.vnode.shapeFlag){const n=t._;n?(e.slots=Object(r["y"])(t),Object(i["h"])(t,"_",n)):Bt(t,e.slots={})}else e.slots={},t&&zt(e,t);Object(i["h"])(e.slots,Hn,1)},jt=(e,t,n)=>{const{vnode:r,slots:s}=e;let o=!0,a=i["b"];if(32&r.shapeFlag){const e=t._;e?n&&1===e?o=!1:(Object(i["i"])(s,t),n||1!==e||delete s._):(o=!t.$stable,Bt(t,s)),a=t}else t&&(zt(e,t),a={default:1});if(o)for(const i in s)kt(i)||i in a||delete s[i]};function Vt(e,t){const n=Y;if(null===n)return e;const r=n.proxy,s=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[e,n,a,c=i["b"]]=t[o];Object(i["s"])(e)&&(e={mounted:e,updated:e}),e.deep&&Le(n),s.push({dir:e,instance:r,value:n,oldValue:void 0,arg:a,modifiers:c})}return e}function Gt(e,t,n,i){const s=e.dirs,o=t&&t.dirs;for(let a=0;a<s.length;a++){const c=s[a];o&&(c.oldValue=o[a].value);let l=c.dir[i];l&&(Object(r["o"])(),p(l,n,8,[e.el,c,e,t]),Object(r["t"])())}}function Wt(){return{app:null,config:{isNativeTag:i["c"],performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let qt=0;function Xt(e,t){return function(n,r=null){null==r||Object(i["y"])(r)||(r=null);const s=Wt(),o=new Set;let a=!1;const c=s.app={_uid:qt++,_component:n,_props:r,_container:null,_context:s,_instance:null,version:ei,get config(){return s.config},set config(e){0},use(e,...t){return o.has(e)||(e&&Object(i["s"])(e.install)?(o.add(e),e.install(c,...t)):Object(i["s"])(e)&&(o.add(e),e(c,...t))),c},mixin(e){return s.mixins.includes(e)||s.mixins.push(e),c},component(e,t){return t?(s.components[e]=t,c):s.components[e]},directive(e,t){return t?(s.directives[e]=t,c):s.directives[e]},mount(i,o,l){if(!a){const u=Wn(n,r);return u.appContext=s,o&&t?t(u,i):e(u,i,l),a=!0,c._container=i,i.__vue_app__=c,Or(u.component)||u.component.proxy}},unmount(){a&&(e(null,c._container),delete c._container.__vue_app__)},provide(e,t){return s.provides[e]=t,c}};return c}}function Yt(e,t,n,s,o=!1){if(Object(i["q"])(e))return void e.forEach((e,r)=>Yt(e,t&&(Object(i["q"])(t)?t[r]:t),n,s,o));if(je(s)&&!o)return;const a=4&s.shapeFlag?Or(s.component)||s.component.proxy:s.el,c=o?null:a,{i:l,r:u}=e;const h=t&&t.r,p=l.refs===i["b"]?l.refs={}:l.refs,f=l.setupState;if(null!=h&&h!==u&&(Object(i["G"])(h)?(p[h]=null,Object(i["m"])(f,h)&&(f[h]=null)):Object(r["k"])(h)&&(h.value=null)),Object(i["s"])(u))d(u,l,12,[c,p]);else{const t=Object(i["G"])(u),s=Object(r["k"])(u);if(t||s){const s=()=>{if(e.f){const n=t?p[u]:u.value;o?Object(i["q"])(n)&&Object(i["Q"])(n,a):Object(i["q"])(n)?n.includes(a)||n.push(a):t?p[u]=[a]:(u.value=[a],e.k&&(p[e.k]=u.value))}else t?(p[u]=c,Object(i["m"])(f,u)&&(f[u]=c)):Object(r["k"])(u)&&(u.value=c,e.k&&(p[e.k]=c))};c?(s.id=-1,en(s,n)):s()}else 0}}let Kt=!1;const Jt=e=>/svg/.test(e.namespaceURI)&&"foreignObject"!==e.tagName,Zt=e=>8===e.nodeType;function $t(e){const{mt:t,p:n,o:{patchProp:r,nextSibling:s,parentNode:o,remove:a,insert:c,createComment:l}}=e,u=(e,t)=>{if(!t.hasChildNodes())return n(null,e,t),void U();Kt=!1,h(t.firstChild,e,null,null,null),U(),Kt&&console.error("Hydration completed but contains mismatches.")},h=(n,r,i,a,c,l=!1)=>{const u=Zt(n)&&"["===n.data,v=()=>m(n,r,i,a,c,u),{type:y,ref:_,shapeFlag:x}=r,b=n.nodeType;r.el=n;let w=null;switch(y){case Tn:3!==b?w=v():(n.data!==r.children&&(Kt=!0,n.data=r.children),w=s(n));break;case En:w=8!==b||u?v():s(n);break;case An:if(1===b){w=n;const e=!r.children.length;for(let t=0;t<r.staticCount;t++)e&&(r.children+=w.outerHTML),t===r.staticCount-1&&(r.anchor=w),w=s(w);return w}w=v();break;case Sn:w=u?f(n,r,i,a,c,l):v();break;default:if(1&x)w=1!==b||r.type.toLowerCase()!==n.tagName.toLowerCase()?v():d(n,r,i,a,c,l);else if(6&x){r.slotScopeIds=c;const e=o(n);if(t(r,e,null,i,a,Jt(e),l),w=u?g(n):s(n),je(r)){let t;u?(t=Wn(Sn),t.anchor=w?w.previousSibling:e.lastChild):t=3===n.nodeType?Kn(""):Wn("div"),t.el=n,r.component.subTree=t}}else 64&x?w=8!==b?v():r.type.hydrate(n,r,i,a,c,l,e,p):128&x&&(w=r.type.hydrate(n,r,i,a,Jt(o(n)),c,l,e,h))}return null!=_&&Yt(_,null,a,r),w},d=(e,t,n,s,o,c)=>{c=c||!!t.dynamicChildren;const{type:l,props:u,patchFlag:h,shapeFlag:d,dirs:f}=t,m="input"===l&&f||"option"===l;if(m||-1!==h){if(f&&Gt(t,null,n,"created"),u)if(m||!c||48&h)for(const t in u)(m&&t.endsWith("value")||Object(i["z"])(t)&&!Object(i["C"])(t))&&r(e,t,null,u[t],!1,void 0,n);else u.onClick&&r(e,"onClick",null,u.onClick,!1,void 0,n);let l;if((l=u&&u.onVnodeBeforeMount)&&nr(l,n,t),f&&Gt(t,null,n,"beforeMount"),((l=u&&u.onVnodeMounted)||f)&&ye(()=>{l&&nr(l,n,t),f&&Gt(t,null,n,"mounted")},s),16&d&&(!u||!u.innerHTML&&!u.textContent)){let r=p(e.firstChild,t,e,n,s,o,c);while(r){Kt=!0;const e=r;r=r.nextSibling,a(e)}}else 8&d&&e.textContent!==t.children&&(Kt=!0,e.textContent=t.children)}return e.nextSibling},p=(e,t,r,i,s,o,a)=>{a=a||!!t.dynamicChildren;const c=t.children,l=c.length;for(let u=0;u<l;u++){const t=a?c[u]:c[u]=$n(c[u]);if(e)e=h(e,t,i,s,o,a);else{if(t.type===Tn&&!t.children)continue;Kt=!0,n(null,t,r,null,i,s,Jt(r),o)}}return e},f=(e,t,n,r,i,a)=>{const{slotScopeIds:u}=t;u&&(i=i?i.concat(u):u);const h=o(e),d=p(s(e),t,h,n,r,i,a);return d&&Zt(d)&&"]"===d.data?s(t.anchor=d):(Kt=!0,c(t.anchor=l("]"),h,d),d)},m=(e,t,r,i,c,l)=>{if(Kt=!0,t.el=null,l){const t=g(e);while(1){const n=s(e);if(!n||n===t)break;a(n)}}const u=s(e),h=o(e);return a(e),n(null,t,h,u,r,i,Jt(h),c),u},g=e=>{let t=0;while(e)if(e=s(e),e&&Zt(e)&&("["===e.data&&t++,"]"===e.data)){if(0===t)return s(e);t--}return e};return[u,h]}function Qt(){}const en=ye;function tn(e){return rn(e)}function nn(e){return rn(e,$t)}function rn(e,t){Qt();const n=Object(i["k"])();n.__VUE__=!0;const{insert:s,remove:o,patchProp:a,createElement:c,createText:l,createComment:u,setText:h,setElementText:d,parentNode:p,nextSibling:f,setScopeId:m=i["d"],cloneNode:g,insertStaticContent:v}=e,y=(e,t,n,r=null,i=null,s=null,o=!1,a=null,c=!!t.dynamicChildren)=>{if(e===t)return;e&&!Bn(e,t)&&(r=J(e),W(e,i,s,!0),e=null),-2===t.patchFlag&&(c=!1,t.dynamicChildren=null);const{type:l,ref:u,shapeFlag:h}=t;switch(l){case Tn:_(e,t,n,r);break;case En:x(e,t,n,r);break;case An:null==e&&b(t,n,r,o);break;case Sn:P(e,t,n,r,i,s,o,a,c);break;default:1&h?S(e,t,n,r,i,s,o,a,c):6&h?D(e,t,n,r,i,s,o,a,c):(64&h||128&h)&&l.process(e,t,n,r,i,s,o,a,c,$)}null!=u&&i&&Yt(u,e&&e.ref,s,t||e,!t)},_=(e,t,n,r)=>{if(null==e)s(t.el=l(t.children),n,r);else{const n=t.el=e.el;t.children!==e.children&&h(n,t.children)}},x=(e,t,n,r)=>{null==e?s(t.el=u(t.children||""),n,r):t.el=e.el},b=(e,t,n,r)=>{[e.el,e.anchor]=v(e.children,t,n,r,e.el,e.anchor)},w=({el:e,anchor:t},n,r)=>{let i;while(e&&e!==t)i=f(e),s(e,n,r),e=i;s(t,n,r)},M=({el:e,anchor:t})=>{let n;while(e&&e!==t)n=f(e),o(e),e=n;o(t)},S=(e,t,n,r,i,s,o,a,c)=>{o=o||"svg"===t.type,null==e?T(t,n,r,i,s,o,a,c):R(e,t,i,s,o,a,c)},T=(e,t,n,r,o,l,u,h)=>{let p,f;const{type:m,props:v,shapeFlag:y,transition:_,patchFlag:x,dirs:b}=e;if(e.el&&void 0!==g&&-1===x)p=e.el=g(e.el);else{if(p=e.el=c(e.type,l,v&&v.is,v),8&y?d(p,e.children):16&y&&A(e.children,p,null,r,o,l&&"foreignObject"!==m,u,h),b&&Gt(e,null,r,"created"),v){for(const t in v)"value"===t||Object(i["C"])(t)||a(p,t,null,v[t],l,e.children,r,o,K);"value"in v&&a(p,"value",null,v.value),(f=v.onVnodeBeforeMount)&&nr(f,r,e)}E(p,e,e.scopeId,u,r)}b&&Gt(e,null,r,"beforeMount");const w=(!o||o&&!o.pendingBranch)&&_&&!_.persisted;w&&_.beforeEnter(p),s(p,t,n),((f=v&&v.onVnodeMounted)||w||b)&&en(()=>{f&&nr(f,r,e),w&&_.enter(p),b&&Gt(e,null,r,"mounted")},o)},E=(e,t,n,r,i)=>{if(n&&m(e,n),r)for(let s=0;s<r.length;s++)m(e,r[s]);if(i){let n=i.subTree;if(t===n){const t=i.vnode;E(e,t,t.scopeId,t.slotScopeIds,i.parent)}}},A=(e,t,n,r,i,s,o,a,c=0)=>{for(let l=c;l<e.length;l++){const c=e[l]=a?Qn(e[l]):$n(e[l]);y(null,c,t,n,r,i,s,o,a)}},R=(e,t,n,r,s,o,c)=>{const l=t.el=e.el;let{patchFlag:u,dynamicChildren:h,dirs:p}=t;u|=16&e.patchFlag;const f=e.props||i["b"],m=t.props||i["b"];let g;n&&sn(n,!1),(g=m.onVnodeBeforeUpdate)&&nr(g,n,t,e),p&&Gt(t,e,n,"beforeUpdate"),n&&sn(n,!0);const v=s&&"foreignObject"!==t.type;if(h?C(e.dynamicChildren,h,l,n,r,v,o):c||H(e,t,l,null,n,r,v,o,!1),u>0){if(16&u)L(l,t,f,m,n,r,s);else if(2&u&&f.class!==m.class&&a(l,"class",null,m.class,s),4&u&&a(l,"style",f.style,m.style,s),8&u){const i=t.dynamicProps;for(let t=0;t<i.length;t++){const o=i[t],c=f[o],u=m[o];u===c&&"value"!==o||a(l,o,c,u,s,e.children,n,r,K)}}1&u&&e.children!==t.children&&d(l,t.children)}else c||null!=h||L(l,t,f,m,n,r,s);((g=m.onVnodeUpdated)||p)&&en(()=>{g&&nr(g,n,t,e),p&&Gt(t,e,n,"updated")},r)},C=(e,t,n,r,i,s,o)=>{for(let a=0;a<t.length;a++){const c=e[a],l=t[a],u=c.el&&(c.type===Sn||!Bn(c,l)||70&c.shapeFlag)?p(c.el):n;y(c,l,u,null,r,i,s,o,!0)}},L=(e,t,n,r,s,o,c)=>{if(n!==r){for(const l in r){if(Object(i["C"])(l))continue;const u=r[l],h=n[l];u!==h&&"value"!==l&&a(e,l,h,u,c,t.children,s,o,K)}if(n!==i["b"])for(const l in n)Object(i["C"])(l)||l in r||a(e,l,n[l],null,c,t.children,s,o,K);"value"in r&&a(e,"value",n.value,r.value)}},P=(e,t,n,r,i,o,a,c,u)=>{const h=t.el=e?e.el:l(""),d=t.anchor=e?e.anchor:l("");let{patchFlag:p,dynamicChildren:f,slotScopeIds:m}=t;m&&(c=c?c.concat(m):m),null==e?(s(h,n,r),s(d,n,r),A(t.children,n,d,i,o,a,c,u)):p>0&&64&p&&f&&e.dynamicChildren?(C(e.dynamicChildren,f,n,i,o,a,c),(null!=t.key||i&&t===i.subTree)&&on(e,t,!0)):H(e,t,n,d,i,o,a,c,u)},D=(e,t,n,r,i,s,o,a,c)=>{t.slotScopeIds=a,null==e?512&t.shapeFlag?i.ctx.activate(t,n,r,o,c):N(t,n,r,i,s,o,c):k(e,t,c)},N=(e,t,n,r,i,s,o)=>{const a=e.component=fr(e,r,i);if(We(e)&&(a.ctx.renderer=$),Mr(a),a.asyncDep){if(i&&i.registerDep(a,B),!e.el){const e=a.subTree=Wn(En);x(null,e,t,n)}}else B(a,e,t,n,i,s,o)},k=(e,t,n)=>{const r=t.component=e.component;if(se(e,t,n)){if(r.asyncDep&&!r.asyncResolved)return void z(r,t,n);r.next=t,I(r.update),r.update()}else t.component=e.component,t.el=e.el,r.vnode=t},B=(e,t,n,s,o,a,c)=>{const l=()=>{if(e.isMounted){let t,{next:n,bu:r,u:s,parent:l,vnode:u}=e,h=n;0,sn(e,!1),n?(n.el=u.el,z(e,n,c)):n=u,r&&Object(i["p"])(r),(t=n.props&&n.props.onVnodeBeforeUpdate)&&nr(t,l,n,u),sn(e,!0);const d=te(e);0;const f=e.subTree;e.subTree=d,y(f,d,p(f.el),J(f),e,o,a),n.el=d.el,null===h&&ae(e,d.el),s&&en(s,o),(t=n.props&&n.props.onVnodeUpdated)&&en(()=>nr(t,l,n,u),o)}else{let r;const{el:c,props:l}=t,{bm:u,m:h,parent:d}=e,p=je(t);if(sn(e,!1),u&&Object(i["p"])(u),!p&&(r=l&&l.onVnodeBeforeMount)&&nr(r,d,t),sn(e,!0),c&&ee){const n=()=>{e.subTree=te(e),ee(c,e.subTree,e,o,null)};p?t.type.__asyncLoader().then(()=>!e.isUnmounted&&n()):n()}else{0;const r=e.subTree=te(e);0,y(null,r,n,s,e,o,a),t.el=r.el}if(h&&en(h,o),!p&&(r=l&&l.onVnodeMounted)){const e=t;en(()=>nr(r,d,e),o)}256&t.shapeFlag&&e.a&&en(e.a,o),e.isMounted=!0,t=n=s=null}},u=e.effect=new r["b"](l,()=>O(e.update),e.scope),h=e.update=u.run.bind(u);h.id=e.uid,sn(e,!0),h()},z=(e,t,n)=>{t.component=e;const i=e.vnode.props;e.vnode=t,e.next=null,Rt(e,t.props,i,n),jt(e,t.children,n),Object(r["o"])(),F(void 0,e.update),Object(r["t"])()},H=(e,t,n,r,i,s,o,a,c=!1)=>{const l=e&&e.children,u=e?e.shapeFlag:0,h=t.children,{patchFlag:p,shapeFlag:f}=t;if(p>0){if(128&p)return void V(l,h,n,r,i,s,o,a,c);if(256&p)return void j(l,h,n,r,i,s,o,a,c)}8&f?(16&u&&K(l,i,s),h!==l&&d(n,h)):16&u?16&f?V(l,h,n,r,i,s,o,a,c):K(l,i,s,!0):(8&u&&d(n,""),16&f&&A(h,n,r,i,s,o,a,c))},j=(e,t,n,r,s,o,a,c,l)=>{e=e||i["a"],t=t||i["a"];const u=e.length,h=t.length,d=Math.min(u,h);let p;for(p=0;p<d;p++){const r=t[p]=l?Qn(t[p]):$n(t[p]);y(e[p],r,n,null,s,o,a,c,l)}u>h?K(e,s,o,!0,!1,d):A(t,n,r,s,o,a,c,l,d)},V=(e,t,n,r,s,o,a,c,l)=>{let u=0;const h=t.length;let d=e.length-1,p=h-1;while(u<=d&&u<=p){const r=e[u],i=t[u]=l?Qn(t[u]):$n(t[u]);if(!Bn(r,i))break;y(r,i,n,null,s,o,a,c,l),u++}while(u<=d&&u<=p){const r=e[d],i=t[p]=l?Qn(t[p]):$n(t[p]);if(!Bn(r,i))break;y(r,i,n,null,s,o,a,c,l),d--,p--}if(u>d){if(u<=p){const e=p+1,i=e<h?t[e].el:r;while(u<=p)y(null,t[u]=l?Qn(t[u]):$n(t[u]),n,i,s,o,a,c,l),u++}}else if(u>p)while(u<=d)W(e[u],s,o,!0),u++;else{const f=u,m=u,g=new Map;for(u=m;u<=p;u++){const e=t[u]=l?Qn(t[u]):$n(t[u]);null!=e.key&&g.set(e.key,u)}let v,_=0;const x=p-m+1;let b=!1,w=0;const M=new Array(x);for(u=0;u<x;u++)M[u]=0;for(u=f;u<=d;u++){const r=e[u];if(_>=x){W(r,s,o,!0);continue}let i;if(null!=r.key)i=g.get(r.key);else for(v=m;v<=p;v++)if(0===M[v-m]&&Bn(r,t[v])){i=v;break}void 0===i?W(r,s,o,!0):(M[i-m]=u+1,i>=w?w=i:b=!0,y(r,t[i],n,null,s,o,a,c,l),_++)}const S=b?an(M):i["a"];for(v=S.length-1,u=x-1;u>=0;u--){const e=m+u,i=t[e],d=e+1<h?t[e+1].el:r;0===M[u]?y(null,i,n,d,s,o,a,c,l):b&&(v<0||u!==S[v]?G(i,n,d,2):v--)}}},G=(e,t,n,r,i=null)=>{const{el:o,type:a,transition:c,children:l,shapeFlag:u}=e;if(6&u)return void G(e.component.subTree,t,n,r);if(128&u)return void e.suspense.move(t,n,r);if(64&u)return void a.move(e,t,n,$);if(a===Sn){s(o,t,n);for(let e=0;e<l.length;e++)G(l[e],t,n,r);return void s(e.anchor,t,n)}if(a===An)return void w(e,t,n);const h=2!==r&&1&u&&c;if(h)if(0===r)c.beforeEnter(o),s(o,t,n),en(()=>c.enter(o),i);else{const{leave:e,delayLeave:r,afterLeave:i}=c,a=()=>s(o,t,n),l=()=>{e(o,()=>{a(),i&&i()})};r?r(o,a,l):l()}else s(o,t,n)},W=(e,t,n,r=!1,i=!1)=>{const{type:s,props:o,ref:a,children:c,dynamicChildren:l,shapeFlag:u,patchFlag:h,dirs:d}=e;if(null!=a&&Yt(a,null,n,e,!0),256&u)return void t.ctx.deactivate(e);const p=1&u&&d,f=!je(e);let m;if(f&&(m=o&&o.onVnodeBeforeUnmount)&&nr(m,t,e),6&u)Y(e.component,n,r);else{if(128&u)return void e.suspense.unmount(n,r);p&&Gt(e,null,t,"beforeUnmount"),64&u?e.type.remove(e,t,n,i,$,r):l&&(s!==Sn||h>0&&64&h)?K(l,t,n,!1,!0):(s===Sn&&384&h||!i&&16&u)&&K(c,t,n),r&&q(e)}(f&&(m=o&&o.onVnodeUnmounted)||p)&&en(()=>{m&&nr(m,t,e),p&&Gt(e,null,t,"unmounted")},n)},q=e=>{const{type:t,el:n,anchor:r,transition:i}=e;if(t===Sn)return void X(n,r);if(t===An)return void M(e);const s=()=>{o(n),i&&!i.persisted&&i.afterLeave&&i.afterLeave()};if(1&e.shapeFlag&&i&&!i.persisted){const{leave:t,delayLeave:r}=i,o=()=>t(n,s);r?r(e.el,s,o):o()}else s()},X=(e,t)=>{let n;while(e!==t)n=f(e),o(e),e=n;o(t)},Y=(e,t,n)=>{const{bum:r,scope:s,update:o,subTree:a,um:c}=e;r&&Object(i["p"])(r),s.stop(),o&&(o.active=!1,W(a,e,t,n)),c&&en(c,t),en(()=>{e.isUnmounted=!0},t),t&&t.pendingBranch&&!t.isUnmounted&&e.asyncDep&&!e.asyncResolved&&e.suspenseId===t.pendingId&&(t.deps--,0===t.deps&&t.resolve())},K=(e,t,n,r=!1,i=!1,s=0)=>{for(let o=s;o<e.length;o++)W(e[o],t,n,r,i)},J=e=>6&e.shapeFlag?J(e.component.subTree):128&e.shapeFlag?e.suspense.next():f(e.anchor||e.el),Z=(e,t,n)=>{null==e?t._vnode&&W(t._vnode,null,null,!0):y(t._vnode||null,e,t,null,null,null,n),U(),t._vnode=e},$={p:y,um:W,m:G,r:q,mt:N,mc:A,pc:H,pbc:C,n:J,o:e};let Q,ee;return t&&([Q,ee]=t($)),{render:Z,hydrate:Q,createApp:Xt(Z,Q)}}function sn({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function on(e,t,n=!1){const r=e.children,s=t.children;if(Object(i["q"])(r)&&Object(i["q"])(s))for(let i=0;i<r.length;i++){const e=r[i];let t=s[i];1&t.shapeFlag&&!t.dynamicChildren&&((t.patchFlag<=0||32===t.patchFlag)&&(t=s[i]=Qn(s[i]),t.el=e.el),n||on(e,t))}}function an(e){const t=e.slice(),n=[0];let r,i,s,o,a;const c=e.length;for(r=0;r<c;r++){const c=e[r];if(0!==c){if(i=n[n.length-1],e[i]<c){t[r]=i,n.push(r);continue}s=0,o=n.length-1;while(s<o)a=s+o>>1,e[n[a]]<c?s=a+1:o=a;c<e[n[s]]&&(s>0&&(t[r]=n[s-1]),n[s]=r)}}s=n.length,o=n[s-1];while(s-- >0)n[s]=o,o=t[o];return n}const cn=e=>e.__isTeleport,ln=e=>e&&(e.disabled||""===e.disabled),un=e=>"undefined"!==typeof SVGElement&&e instanceof SVGElement,hn=(e,t)=>{const n=e&&e.to;if(Object(i["G"])(n)){if(t){const e=t(n);return e}return null}return n},dn={__isTeleport:!0,process(e,t,n,r,i,s,o,a,c,l){const{mc:u,pc:h,pbc:d,o:{insert:p,querySelector:f,createText:m,createComment:g}}=l,v=ln(t.props);let{shapeFlag:y,children:_,dynamicChildren:x}=t;if(null==e){const e=t.el=m(""),l=t.anchor=m("");p(e,n,r),p(l,n,r);const h=t.target=hn(t.props,f),d=t.targetAnchor=m("");h&&(p(d,h),o=o||un(h));const g=(e,t)=>{16&y&&u(_,e,t,i,s,o,a,c)};v?g(n,l):h&&g(h,d)}else{t.el=e.el;const r=t.anchor=e.anchor,u=t.target=e.target,p=t.targetAnchor=e.targetAnchor,m=ln(e.props),g=m?n:u,y=m?r:p;if(o=o||un(u),x?(d(e.dynamicChildren,x,g,i,s,o,a),on(e,t,!0)):c||h(e,t,g,y,i,s,o,a,!1),v)m||pn(t,n,r,l,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const e=t.target=hn(t.props,f);e&&pn(t,e,null,l,0)}else m&&pn(t,u,p,l,1)}},remove(e,t,n,r,{um:i,o:{remove:s}},o){const{shapeFlag:a,children:c,anchor:l,targetAnchor:u,target:h,props:d}=e;if(h&&s(u),(o||!ln(d))&&(s(l),16&a))for(let p=0;p<c.length;p++){const e=c[p];i(e,t,n,!0,!!e.dynamicChildren)}},move:pn,hydrate:fn};function pn(e,t,n,{o:{insert:r},m:i},s=2){0===s&&r(e.targetAnchor,t,n);const{el:o,anchor:a,shapeFlag:c,children:l,props:u}=e,h=2===s;if(h&&r(o,t,n),(!h||ln(u))&&16&c)for(let d=0;d<l.length;d++)i(l[d],t,n,2);h&&r(a,t,n)}function fn(e,t,n,r,i,s,{o:{nextSibling:o,parentNode:a,querySelector:c}},l){const u=t.target=hn(t.props,c);if(u){const c=u._lpa||u.firstChild;16&t.shapeFlag&&(ln(t.props)?(t.anchor=l(o(e),t,a(e),n,r,i,s),t.targetAnchor=c):(t.anchor=o(e),t.targetAnchor=l(c,t,u,n,r,i,s)),u._lpa=t.targetAnchor&&o(t.targetAnchor))}return t.anchor&&o(t.anchor)}const mn=dn,gn="components",vn="directives";function yn(e,t){return wn(gn,e,!0,t)||e}const _n=Symbol();function xn(e){return Object(i["G"])(e)?wn(gn,e,!1)||e:e||_n}function bn(e){return wn(vn,e)}function wn(e,t,n=!0,r=!1){const s=Y||mr;if(s){const n=s.type;if(e===gn){const e=Dr(n);if(e&&(e===t||e===Object(i["f"])(t)||e===Object(i["g"])(Object(i["f"])(t))))return n}const o=Mn(s[e]||n[e],t)||Mn(s.appContext[e],t);return!o&&r?n:o}}function Mn(e,t){return e&&(e[t]||e[Object(i["f"])(t)]||e[Object(i["g"])(Object(i["f"])(t))])}const Sn=Symbol(void 0),Tn=Symbol(void 0),En=Symbol(void 0),An=Symbol(void 0),Rn=[];let Cn=null;function Ln(e=!1){Rn.push(Cn=e?null:[])}function On(){Rn.pop(),Cn=Rn[Rn.length-1]||null}let Pn,In=1;function Dn(e){In+=e}function Nn(e){return e.dynamicChildren=In>0?Cn||i["a"]:null,On(),In>0&&Cn&&Cn.push(e),e}function kn(e,t,n,r,i,s){return Nn(Gn(e,t,n,r,i,s,!0))}function Fn(e,t,n,r,i){return Nn(Wn(e,t,n,r,i,!0))}function Un(e){return!!e&&!0===e.__v_isVNode}function Bn(e,t){return e.type===t.type&&e.key===t.key}function zn(e){Pn=e}const Hn="__vInternal",jn=({key:e})=>null!=e?e:null,Vn=({ref:e,ref_key:t,ref_for:n})=>null!=e?Object(i["G"])(e)||Object(r["k"])(e)||Object(i["s"])(e)?{i:Y,r:e,k:t,f:!!n}:e:null;function Gn(e,t=null,n=null,r=0,s=null,o=(e===Sn?0:1),a=!1,c=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&jn(t),ref:t&&Vn(t),scopeId:K,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null};return c?(er(l,n),128&o&&e.normalize(l)):n&&(l.shapeFlag|=Object(i["G"])(n)?8:16),In>0&&!a&&Cn&&(l.patchFlag>0||6&o)&&32!==l.patchFlag&&Cn.push(l),l}const Wn=qn;function qn(e,t=null,n=null,s=0,o=null,a=!1){if(e&&e!==_n||(e=En),Un(e)){const r=Yn(e,t,!0);return n&&er(r,n),r}if(kr(e)&&(e=e.__vccOpts),t){t=Xn(t);let{class:e,style:n}=t;e&&!Object(i["G"])(e)&&(t.class=Object(i["M"])(e)),Object(i["y"])(n)&&(Object(r["h"])(n)&&!Object(i["q"])(n)&&(n=Object(i["i"])({},n)),t.style=Object(i["O"])(n))}const c=Object(i["G"])(e)?1:ce(e)?128:cn(e)?64:Object(i["y"])(e)?4:Object(i["s"])(e)?2:0;return Gn(e,t,n,s,o,c,a,!0)}function Xn(e){return e?Object(r["h"])(e)||Hn in e?Object(i["i"])({},e):e:null}function Yn(e,t,n=!1){const{props:r,ref:s,patchFlag:o,children:a}=e,c=t?tr(r||{},t):r,l={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&jn(c),ref:t&&t.ref?n&&s?Object(i["q"])(s)?s.concat(Vn(t)):[s,Vn(t)]:Vn(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Sn?-1===o?16:16|o:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Yn(e.ssContent),ssFallback:e.ssFallback&&Yn(e.ssFallback),el:e.el,anchor:e.anchor};return l}function Kn(e=" ",t=0){return Wn(Tn,null,e,t)}function Jn(e,t){const n=Wn(An,null,e);return n.staticCount=t,n}function Zn(e="",t=!1){return t?(Ln(),Fn(En,null,e)):Wn(En,null,e)}function $n(e){return null==e||"boolean"===typeof e?Wn(En):Object(i["q"])(e)?Wn(Sn,null,e.slice()):"object"===typeof e?Qn(e):Wn(Tn,null,String(e))}function Qn(e){return null===e.el||e.memo?e:Yn(e)}function er(e,t){let n=0;const{shapeFlag:r}=e;if(null==t)t=null;else if(Object(i["q"])(t))n=16;else if("object"===typeof t){if(65&r){const n=t.default;return void(n&&(n._c&&(n._d=!1),er(e,n()),n._c&&(n._d=!0)))}{n=32;const r=t._;r||Hn in t?3===r&&Y&&(1===Y.slots._?t._=1:(t._=2,e.patchFlag|=1024)):t._ctx=Y}}else Object(i["s"])(t)?(t={default:t,_ctx:Y},n=32):(t=String(t),64&r?(n=16,t=[Kn(t)]):n=8);e.children=t,e.shapeFlag|=n}function tr(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const e in r)if("class"===e)t.class!==r.class&&(t.class=Object(i["M"])([t.class,r.class]));else if("style"===e)t.style=Object(i["O"])([t.style,r.style]);else if(Object(i["z"])(e)){const n=t[e],s=r[e];!s||n===s||Object(i["q"])(n)&&n.includes(s)||(t[e]=n?[].concat(n,s):s)}else""!==e&&(t[e]=r[e])}return t}function nr(e,t,n,r=null){p(e,t,7,[n,r])}function rr(e,t,n,r){let s;const o=n&&n[r];if(Object(i["q"])(e)||Object(i["G"])(e)){s=new Array(e.length);for(let n=0,r=e.length;n<r;n++)s[n]=t(e[n],n,void 0,o&&o[n])}else if("number"===typeof e){0,s=new Array(e);for(let n=0;n<e;n++)s[n]=t(n+1,n,void 0,o&&o[n])}else if(Object(i["y"])(e))if(e[Symbol.iterator])s=Array.from(e,(e,n)=>t(e,n,void 0,o&&o[n]));else{const n=Object.keys(e);s=new Array(n.length);for(let r=0,i=n.length;r<i;r++){const i=n[r];s[r]=t(e[i],i,r,o&&o[r])}}else s=[];return n&&(n[r]=s),s}function ir(e,t){for(let n=0;n<t.length;n++){const r=t[n];if(Object(i["q"])(r))for(let t=0;t<r.length;t++)e[r[t].name]=r[t].fn;else r&&(e[r.name]=r.fn)}return e}function sr(e,t,n={},r,i){if(Y.isCE)return Wn("slot","default"===t?null:{name:t},r&&r());let s=e[t];s&&s._c&&(s._d=!1),Ln();const o=s&&or(s(n)),a=Fn(Sn,{key:n.key||"_"+t},o||(r?r():[]),o&&1===e._?64:-2);return!i&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),s&&s._c&&(s._d=!0),a}function or(e){return e.some(e=>!Un(e)||e.type!==En&&!(e.type===Sn&&!or(e.children)))?e:null}function ar(e){const t={};for(const n in e)t[Object(i["S"])(n)]=e[n];return t}const cr=e=>e?_r(e)?Or(e)||e.proxy:cr(e.parent):null,lr=Object(i["i"])(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>cr(e.parent),$root:e=>cr(e.root),$emit:e=>e.emit,$options:e=>yt(e),$forceUpdate:e=>()=>O(e.update),$nextTick:e=>C.bind(e.proxy),$watch:e=>Re.bind(e)}),ur={get({_:e},t){const{ctx:n,setupState:s,data:o,props:a,accessCache:c,type:l,appContext:u}=e;let h;if("$"!==t[0]){const r=c[t];if(void 0!==r)switch(r){case 1:return s[t];case 2:return o[t];case 4:return n[t];case 3:return a[t]}else{if(s!==i["b"]&&Object(i["m"])(s,t))return c[t]=1,s[t];if(o!==i["b"]&&Object(i["m"])(o,t))return c[t]=2,o[t];if((h=e.propsOptions[0])&&Object(i["m"])(h,t))return c[t]=3,a[t];if(n!==i["b"]&&Object(i["m"])(n,t))return c[t]=4,n[t];pt&&(c[t]=0)}}const d=lr[t];let p,f;return d?("$attrs"===t&&Object(r["B"])(e,"get",t),d(e)):(p=l.__cssModules)&&(p=p[t])?p:n!==i["b"]&&Object(i["m"])(n,t)?(c[t]=4,n[t]):(f=u.config.globalProperties,Object(i["m"])(f,t)?f[t]:void 0)},set({_:e},t,n){const{data:r,setupState:s,ctx:o}=e;return s!==i["b"]&&Object(i["m"])(s,t)?(s[t]=n,!0):r!==i["b"]&&Object(i["m"])(r,t)?(r[t]=n,!0):!Object(i["m"])(e.props,t)&&(("$"!==t[0]||!(t.slice(1)in e))&&(o[t]=n,!0))},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:s,propsOptions:o}},a){let c;return!!n[a]||e!==i["b"]&&Object(i["m"])(e,a)||t!==i["b"]&&Object(i["m"])(t,a)||(c=o[0])&&Object(i["m"])(c,a)||Object(i["m"])(r,a)||Object(i["m"])(lr,a)||Object(i["m"])(s.config.globalProperties,a)},defineProperty(e,t,n){return null!=n.get?this.set(e,t,n.get(),null):null!=n.value&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};const hr=Object(i["i"])({},ur,{get(e,t){if(t!==Symbol.unscopables)return ur.get(e,t,e)},has(e,t){const n="_"!==t[0]&&!Object(i["t"])(t);return n}});const dr=Wt();let pr=0;function fr(e,t,n){const s=e.type,o=(t?t.appContext:e.appContext)||dr,a={uid:pr++,vnode:e,type:s,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,scope:new r["a"](!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ot(s,o),emitsOptions:q(s,o),emit:null,emitted:null,propsDefaults:i["b"],inheritAttrs:s.inheritAttrs,ctx:i["b"],data:i["b"],props:i["b"],attrs:i["b"],slots:i["b"],refs:i["b"],setupState:i["b"],setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=W.bind(null,a),e.ce&&e.ce(a),a}let mr=null;const gr=()=>mr||Y,vr=e=>{mr=e,e.scope.on()},yr=()=>{mr&&mr.scope.off(),mr=null};function _r(e){return 4&e.vnode.shapeFlag}let xr,br,wr=!1;function Mr(e,t=!1){wr=t;const{props:n,children:r}=e.vnode,i=_r(e);At(e,n,i,t),Ht(e,r);const s=i?Sr(e,t):void 0;return wr=!1,s}function Sr(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=Object(r["m"])(new Proxy(e.ctx,ur));const{setup:s}=n;if(s){const n=e.setupContext=s.length>1?Lr(e):null;vr(e),Object(r["o"])();const o=d(s,e,0,[e.props,n]);if(Object(r["t"])(),yr(),Object(i["B"])(o)){if(o.then(yr,yr),t)return o.then(n=>{Tr(e,n,t)}).catch(t=>{f(t,e,0)});e.asyncDep=o}else Tr(e,o,t)}else Rr(e,t)}function Tr(e,t,n){Object(i["s"])(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Object(i["y"])(t)&&(e.setupState=Object(r["p"])(t)),Rr(e,n)}function Er(e){xr=e,br=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,hr))}}const Ar=()=>!xr;function Rr(e,t,n){const s=e.type;if(!e.render){if(!t&&xr&&!s.render){const t=s.template;if(t){0;const{isCustomElement:n,compilerOptions:r}=e.appContext.config,{delimiters:o,compilerOptions:a}=s,c=Object(i["i"])(Object(i["i"])({isCustomElement:n,delimiters:o},r),a);s.render=xr(t,c)}}e.render=s.render||i["d"],br&&br(e)}vr(e),Object(r["o"])(),ft(e),Object(r["t"])(),yr()}function Cr(e){return new Proxy(e.attrs,{get(t,n){return Object(r["B"])(e,"get","$attrs"),t[n]}})}function Lr(e){const t=t=>{e.exposed=t||{}};let n;return{get attrs(){return n||(n=Cr(e))},slots:e.slots,emit:e.emit,expose:t}}function Or(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(Object(r["p"])(Object(r["m"])(e.exposed)),{get(t,n){return n in t?t[n]:n in lr?lr[n](e):void 0}}))}const Pr=/(?:^|[-_])(\w)/g,Ir=e=>e.replace(Pr,e=>e.toUpperCase()).replace(/[-_]/g,"");function Dr(e){return Object(i["s"])(e)&&e.displayName||e.name}function Nr(e,t,n=!1){let r=Dr(t);if(!r&&t.__file){const e=t.__file.match(/([^/\\]+)\.\w+$/);e&&(r=e[1])}if(!r&&e&&e.parent){const n=e=>{for(const n in e)if(e[n]===t)return n};r=n(e.components||e.parent.type.components)||n(e.appContext.components)}return r?Ir(r):n?"App":"Anonymous"}function kr(e){return Object(i["s"])(e)&&"__vccOpts"in e}const Fr=(e,t)=>Object(r["c"])(e,t,wr);function Ur(){return null}function Br(){return null}function zr(e){0}function Hr(e,t){return null}function jr(){return Gr().slots}function Vr(){return Gr().attrs}function Gr(){const e=gr();return e.setupContext||(e.setupContext=Lr(e))}function Wr(e,t){const n=Object(i["q"])(e)?e.reduce((e,t)=>(e[t]={},e),{}):e;for(const r in t){const e=n[r];e?Object(i["q"])(e)||Object(i["s"])(e)?n[r]={type:e,default:t[r]}:e.default=t[r]:null===e&&(n[r]={default:t[r]})}return n}function qr(e,t){const n={};for(const r in e)t.includes(r)||Object.defineProperty(n,r,{enumerable:!0,get:()=>e[r]});return n}function Xr(e){const t=gr();let n=e();return yr(),Object(i["B"])(n)&&(n=n.catch(e=>{throw vr(t),e})),[n,()=>vr(t)]}function Yr(e,t,n){const r=arguments.length;return 2===r?Object(i["y"])(t)&&!Object(i["q"])(t)?Un(t)?Wn(e,null,[t]):Wn(e,t):Wn(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):3===r&&Un(n)&&(n=[n]),Wn(e,t,n))}const Kr=Symbol(""),Jr=()=>{{const e=be(Kr);return e||o("Server rendering context not provided. Make sure to only call useSSRContext() conditionally in the server build."),e}};function Zr(){return void 0}function $r(e,t,n,r){const i=n[r];if(i&&Qr(i,e))return i;const s=t();return s.memo=e.slice(),n[r]=s}function Qr(e,t){const n=e.memo;if(n.length!=t.length)return!1;for(let r=0;r<n.length;r++)if(n[r]!==t[r])return!1;return In>0&&Cn&&Cn.push(e),!0}const ei="3.2.31",ti={createComponentInstance:fr,setupComponent:Mr,renderComponentRoot:te,setCurrentRenderingInstance:J,isVNode:Un,normalizeVNode:$n},ni=ti,ri=null,ii=null},"83ec":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("b90d"),i=n("11ba"),s=n("1850");const o={uniforms:{tDiffuse:{value:null}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\t#include <common>\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\n\t\t\tfloat l = linearToRelativeLuminance( texel.rgb );\n\n\t\t\tgl_FragColor = vec4( l, l, l, texel.w );\n\n\t\t}"},a={uniforms:{tDiffuse:{value:null},averageLuminance:{value:1},luminanceMap:{value:null},maxLuminance:{value:16},minLuminance:{value:.01},middleGrey:{value:.6}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\t#include <common>\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tuniform float middleGrey;\n\t\tuniform float minLuminance;\n\t\tuniform float maxLuminance;\n\t\t#ifdef ADAPTED_LUMINANCE\n\t\t\tuniform sampler2D luminanceMap;\n\t\t#else\n\t\t\tuniform float averageLuminance;\n\t\t#endif\n\n\t\tvec3 ToneMap( vec3 vColor ) {\n\t\t\t#ifdef ADAPTED_LUMINANCE\n\t\t\t\t// Get the calculated average luminance\n\t\t\t\tfloat fLumAvg = texture2D(luminanceMap, vec2(0.5, 0.5)).r;\n\t\t\t#else\n\t\t\t\tfloat fLumAvg = averageLuminance;\n\t\t\t#endif\n\n\t\t\t// Calculate the luminance of the current pixel\n\t\t\tfloat fLumPixel = linearToRelativeLuminance( vColor );\n\n\t\t\t// Apply the modified operator (Eq. 4)\n\t\t\tfloat fLumScaled = (fLumPixel * middleGrey) / max( minLuminance, fLumAvg );\n\n\t\t\tfloat fLumCompressed = (fLumScaled * (1.0 + (fLumScaled / (maxLuminance * maxLuminance)))) / (1.0 + fLumScaled);\n\t\t\treturn fLumCompressed * vColor;\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\n\t\t\tgl_FragColor = vec4( ToneMap( texel.xyz ), texel.w );\n\n\t\t}"};class c extends i["b"]{constructor(e,t){super(),this.resolution=void 0!==t?t:256,this.needsInit=!0,this.adaptive=void 0===e||!!e,this.luminanceRT=null,this.previousLuminanceRT=null,this.currentLuminanceRT=null,void 0===s["a"]&&console.error("THREE.AdaptiveToneMappingPass relies on CopyShader");const n=s["a"];this.copyUniforms=r["Gb"].clone(n.uniforms),this.materialCopy=new r["rb"]({uniforms:this.copyUniforms,vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,blending:r["bb"],depthTest:!1}),void 0===o&&console.error("THREE.AdaptiveToneMappingPass relies on LuminosityShader"),this.materialLuminance=new r["rb"]({uniforms:r["Gb"].clone(o.uniforms),vertexShader:o.vertexShader,fragmentShader:o.fragmentShader,blending:r["bb"]}),this.adaptLuminanceShader={defines:{MIP_LEVEL_1X1:(Math.log(this.resolution)/Math.log(2)).toFixed(1)},uniforms:{lastLum:{value:null},currentLum:{value:null},minLuminance:{value:.01},delta:{value:.016},tau:{value:1}},vertexShader:"varying vec2 vUv;\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\n\n\t\t\t\tuniform sampler2D lastLum;\n\t\t\t\tuniform sampler2D currentLum;\n\t\t\t\tuniform float minLuminance;\n\t\t\t\tuniform float delta;\n\t\t\t\tuniform float tau;\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec4 lastLum = texture2D( lastLum, vUv, MIP_LEVEL_1X1 );\n\t\t\t\t\tvec4 currentLum = texture2D( currentLum, vUv, MIP_LEVEL_1X1 );\n\n\t\t\t\t\tfloat fLastLum = max( minLuminance, lastLum.r );\n\t\t\t\t\tfloat fCurrentLum = max( minLuminance, currentLum.r );\n\n\t\t\t\t\t//The adaption seems to work better in extreme lighting differences\n\t\t\t\t\t//if the input luminance is squared.\n\t\t\t\t\tfCurrentLum *= fCurrentLum;\n\n\t\t\t\t\t// Adapt the luminance using Pattanaik's technique\n\t\t\t\t\tfloat fAdaptedLum = fLastLum + (fCurrentLum - fLastLum) * (1.0 - exp(-delta * tau));\n\t\t\t\t\t// \"fAdaptedLum = sqrt(fAdaptedLum);\n\t\t\t\t\tgl_FragColor.r = fAdaptedLum;\n\t\t\t\t}"},this.materialAdaptiveLum=new r["rb"]({uniforms:r["Gb"].clone(this.adaptLuminanceShader.uniforms),vertexShader:this.adaptLuminanceShader.vertexShader,fragmentShader:this.adaptLuminanceShader.fragmentShader,defines:Object.assign({},this.adaptLuminanceShader.defines),blending:r["bb"]}),void 0===a&&console.error("THREE.AdaptiveToneMappingPass relies on ToneMapShader"),this.materialToneMap=new r["rb"]({uniforms:r["Gb"].clone(a.uniforms),vertexShader:a.vertexShader,fragmentShader:a.fragmentShader,blending:r["bb"]}),this.fsQuad=new i["a"](null)}render(e,t,n,r){this.needsInit&&(this.reset(e),this.luminanceRT.texture.type=n.texture.type,this.previousLuminanceRT.texture.type=n.texture.type,this.currentLuminanceRT.texture.type=n.texture.type,this.needsInit=!1),this.adaptive&&(this.fsQuad.material=this.materialLuminance,this.materialLuminance.uniforms.tDiffuse.value=n.texture,e.setRenderTarget(this.currentLuminanceRT),this.fsQuad.render(e),this.fsQuad.material=this.materialAdaptiveLum,this.materialAdaptiveLum.uniforms.delta.value=r,this.materialAdaptiveLum.uniforms.lastLum.value=this.previousLuminanceRT.texture,this.materialAdaptiveLum.uniforms.currentLum.value=this.currentLuminanceRT.texture,e.setRenderTarget(this.luminanceRT),this.fsQuad.render(e),this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.luminanceRT.texture,e.setRenderTarget(this.previousLuminanceRT),this.fsQuad.render(e)),this.fsQuad.material=this.materialToneMap,this.materialToneMap.uniforms.tDiffuse.value=n.texture,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(),this.fsQuad.render(e))}reset(){this.luminanceRT&&this.luminanceRT.dispose(),this.currentLuminanceRT&&this.currentLuminanceRT.dispose(),this.previousLuminanceRT&&this.previousLuminanceRT.dispose();const e={minFilter:r["G"],magFilter:r["G"],format:r["nb"]};this.luminanceRT=new r["Kb"](this.resolution,this.resolution,e),this.luminanceRT.texture.name="AdaptiveToneMappingPass.l",this.luminanceRT.texture.generateMipmaps=!1,this.previousLuminanceRT=new r["Kb"](this.resolution,this.resolution,e),this.previousLuminanceRT.texture.name="AdaptiveToneMappingPass.pl",this.previousLuminanceRT.texture.generateMipmaps=!1,e.minFilter=r["H"],e.generateMipmaps=!0,this.currentLuminanceRT=new r["Kb"](this.resolution,this.resolution,e),this.currentLuminanceRT.texture.name="AdaptiveToneMappingPass.cl",this.adaptive&&(this.materialToneMap.defines["ADAPTED_LUMINANCE"]="",this.materialToneMap.uniforms.luminanceMap.value=this.luminanceRT.texture),this.fsQuad.material=new r["Q"]({color:7829367}),this.materialLuminance.needsUpdate=!0,this.materialAdaptiveLum.needsUpdate=!0,this.materialToneMap.needsUpdate=!0}setAdaptive(e){e?(this.adaptive=!0,this.materialToneMap.defines["ADAPTED_LUMINANCE"]="",this.materialToneMap.uniforms.luminanceMap.value=this.luminanceRT.texture):(this.adaptive=!1,delete this.materialToneMap.defines["ADAPTED_LUMINANCE"],this.materialToneMap.uniforms.luminanceMap.value=null),this.materialToneMap.needsUpdate=!0}setAdaptionRate(e){e&&(this.materialAdaptiveLum.uniforms.tau.value=Math.abs(e))}setMinLuminance(e){e&&(this.materialToneMap.uniforms.minLuminance.value=e,this.materialAdaptiveLum.uniforms.minLuminance.value=e)}setMaxLuminance(e){e&&(this.materialToneMap.uniforms.maxLuminance.value=e)}setAverageLuminance(e){e&&(this.materialToneMap.uniforms.averageLuminance.value=e)}setMiddleGrey(e){e&&(this.materialToneMap.uniforms.middleGrey.value=e)}dispose(){this.luminanceRT&&this.luminanceRT.dispose(),this.previousLuminanceRT&&this.previousLuminanceRT.dispose(),this.currentLuminanceRT&&this.currentLuminanceRT.dispose(),this.materialLuminance&&this.materialLuminance.dispose(),this.materialAdaptiveLum&&this.materialAdaptiveLum.dispose(),this.materialCopy&&this.materialCopy.dispose(),this.materialToneMap&&this.materialToneMap.dispose()}}},"858e":function(e,t,n){var r=n("9caf"),i=Function.prototype,s=i.bind,o=i.call,a=r&&s.bind(o,o);e.exports=r?function(e){return e&&a(e)}:function(e){return e&&function(){return o.apply(e,arguments)}}},"85dd":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n}},"87b4":function(e,t){e.exports=function(e){return"function"==typeof e}},"87be":function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return w})),n.d(t,"c",(function(){return rt})),n.d(t,"d",(function(){return $e})),n.d(t,"e",(function(){return S})),n.d(t,"f",(function(){return o})),n.d(t,"g",(function(){return c})),n.d(t,"h",(function(){return Ne})),n.d(t,"i",(function(){return Pe})),n.d(t,"j",(function(){return Ie})),n.d(t,"k",(function(){return je})),n.d(t,"l",(function(){return De})),n.d(t,"m",(function(){return Fe})),n.d(t,"n",(function(){return l})),n.d(t,"o",(function(){return R})),n.d(t,"p",(function(){return Je})),n.d(t,"q",(function(){return Ae})),n.d(t,"r",(function(){return Ce})),n.d(t,"s",(function(){return Ve})),n.d(t,"t",(function(){return C})),n.d(t,"u",(function(){return Re})),n.d(t,"v",(function(){return Le})),n.d(t,"w",(function(){return Ge})),n.d(t,"x",(function(){return T})),n.d(t,"y",(function(){return ke})),n.d(t,"z",(function(){return tt})),n.d(t,"A",(function(){return Qe})),n.d(t,"B",(function(){return L})),n.d(t,"C",(function(){return P})),n.d(t,"D",(function(){return Xe})),n.d(t,"E",(function(){return Ye}));var r=n("ea1f");let i;class s{constructor(e=!1){this.active=!0,this.effects=[],this.cleanups=[],!e&&i&&(this.parent=i,this.index=(i.scopes||(i.scopes=[])).push(this)-1)}run(e){if(this.active)try{return i=this,e()}finally{i=this.parent}else 0}on(){i=this}off(){i=this.parent}stop(e){if(this.active){let t,n;for(t=0,n=this.effects.length;t<n;t++)this.effects[t].stop();for(t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);if(this.parent&&!e){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.active=!1}}}function o(e){return new s(e)}function a(e,t=i){t&&t.active&&t.effects.push(e)}function c(){return i}function l(e){i&&i.cleanups.push(e)}const u=e=>{const t=new Set(e);return t.w=0,t.n=0,t},h=e=>(e.w&v)>0,d=e=>(e.n&v)>0,p=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=v},f=e=>{const{deps:t}=e;if(t.length){let n=0;for(let r=0;r<t.length;r++){const i=t[r];h(i)&&!d(i)?i.delete(e):t[n++]=i,i.w&=~v,i.n&=~v}t.length=n}},m=new WeakMap;let g=0,v=1;const y=30;let _;const x=Symbol(""),b=Symbol("");class w{constructor(e,t=null,n){this.fn=e,this.scheduler=t,this.active=!0,this.deps=[],this.parent=void 0,a(this,n)}run(){if(!this.active)return this.fn();let e=_,t=E;while(e){if(e===this)return;e=e.parent}try{return this.parent=_,_=this,E=!0,v=1<<++g,g<=y?p(this):M(this),this.fn()}finally{g<=y&&f(this),v=1<<--g,_=this.parent,E=t,this.parent=void 0}}stop(){this.active&&(M(this),this.onStop&&this.onStop(),this.active=!1)}}function M(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}function S(e,t){e.effect&&(e=e.effect.fn);const n=new w(e);t&&(Object(r["i"])(n,t),t.scope&&a(n,t.scope)),t&&t.lazy||n.run();const i=n.run.bind(n);return i.effect=n,i}function T(e){e.effect.stop()}let E=!0;const A=[];function R(){A.push(E),E=!1}function C(){const e=A.pop();E=void 0===e||e}function L(e,t,n){if(E&&_){let t=m.get(e);t||m.set(e,t=new Map);let r=t.get(n);r||t.set(n,r=u());const i=void 0;O(r,i)}}function O(e,t){let n=!1;g<=y?d(e)||(e.n|=v,n=!h(e)):n=!e.has(_),n&&(e.add(_),_.deps.push(e))}function P(e,t,n,i,s,o){const a=m.get(e);if(!a)return;let c=[];if("clear"===t)c=[...a.values()];else if("length"===n&&Object(r["q"])(e))a.forEach((e,t)=>{("length"===t||t>=i)&&c.push(e)});else switch(void 0!==n&&c.push(a.get(n)),t){case"add":Object(r["q"])(e)?Object(r["v"])(n)&&c.push(a.get("length")):(c.push(a.get(x)),Object(r["w"])(e)&&c.push(a.get(b)));break;case"delete":Object(r["q"])(e)||(c.push(a.get(x)),Object(r["w"])(e)&&c.push(a.get(b)));break;case"set":Object(r["w"])(e)&&c.push(a.get(x));break}if(1===c.length)c[0]&&I(c[0]);else{const e=[];for(const t of c)t&&e.push(...t);I(u(e))}}function I(e,t){for(const n of Object(r["q"])(e)?e:[...e])(n!==_||n.allowRecurse)&&(n.scheduler?n.scheduler():n.run())}const D=Object(r["L"])("__proto__,__v_isRef,__isVue"),N=new Set(Object.getOwnPropertyNames(Symbol).map(e=>Symbol[e]).filter(r["H"])),k=j(),F=j(!1,!0),U=j(!0),B=j(!0,!0),z=H();function H(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...e){const n=ke(this);for(let t=0,i=this.length;t<i;t++)L(n,"get",t+"");const r=n[t](...e);return-1===r||!1===r?n[t](...e.map(ke)):r}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...e){R();const n=ke(this)[t].apply(this,e);return C(),n}}),e}function j(e=!1,t=!1){return function(n,i,s){if("__v_isReactive"===i)return!e;if("__v_isReadonly"===i)return e;if("__v_isShallow"===i)return t;if("__v_raw"===i&&s===(e?t?Se:Me:t?we:be).get(n))return n;const o=Object(r["q"])(n);if(!e&&o&&Object(r["m"])(z,i))return Reflect.get(z,i,s);const a=Reflect.get(n,i,s);if(Object(r["H"])(i)?N.has(i):D(i))return a;if(e||L(n,"get",i),t)return a;if(je(a)){const e=!o||!Object(r["v"])(i);return e?a.value:a}return Object(r["y"])(a)?e?Ce(a):Ae(a):a}}const V=W(),G=W(!0);function W(e=!1){return function(t,n,i,s){let o=t[n];if(Ie(o)&&je(o)&&!je(i))return!1;if(!e&&!Ie(i)&&(De(i)||(i=ke(i),o=ke(o)),!Object(r["q"])(t)&&je(o)&&!je(i)))return o.value=i,!0;const a=Object(r["q"])(t)&&Object(r["v"])(n)?Number(n)<t.length:Object(r["m"])(t,n),c=Reflect.set(t,n,i,s);return t===ke(s)&&(a?Object(r["l"])(i,o)&&P(t,"set",n,i,o):P(t,"add",n,i)),c}}function q(e,t){const n=Object(r["m"])(e,t),i=e[t],s=Reflect.deleteProperty(e,t);return s&&n&&P(e,"delete",t,void 0,i),s}function X(e,t){const n=Reflect.has(e,t);return Object(r["H"])(t)&&N.has(t)||L(e,"has",t),n}function Y(e){return L(e,"iterate",Object(r["q"])(e)?"length":x),Reflect.ownKeys(e)}const K={get:k,set:V,deleteProperty:q,has:X,ownKeys:Y},J={get:U,set(e,t){return!0},deleteProperty(e,t){return!0}},Z=Object(r["i"])({},K,{get:F,set:G}),$=Object(r["i"])({},J,{get:B}),Q=e=>e,ee=e=>Reflect.getPrototypeOf(e);function te(e,t,n=!1,r=!1){e=e["__v_raw"];const i=ke(e),s=ke(t);t!==s&&!n&&L(i,"get",t),!n&&L(i,"get",s);const{has:o}=ee(i),a=r?Q:n?Be:Ue;return o.call(i,t)?a(e.get(t)):o.call(i,s)?a(e.get(s)):void(e!==i&&e.get(t))}function ne(e,t=!1){const n=this["__v_raw"],r=ke(n),i=ke(e);return e!==i&&!t&&L(r,"has",e),!t&&L(r,"has",i),e===i?n.has(e):n.has(e)||n.has(i)}function re(e,t=!1){return e=e["__v_raw"],!t&&L(ke(e),"iterate",x),Reflect.get(e,"size",e)}function ie(e){e=ke(e);const t=ke(this),n=ee(t),r=n.has.call(t,e);return r||(t.add(e),P(t,"add",e,e)),this}function se(e,t){t=ke(t);const n=ke(this),{has:i,get:s}=ee(n);let o=i.call(n,e);o||(e=ke(e),o=i.call(n,e));const a=s.call(n,e);return n.set(e,t),o?Object(r["l"])(t,a)&&P(n,"set",e,t,a):P(n,"add",e,t),this}function oe(e){const t=ke(this),{has:n,get:r}=ee(t);let i=n.call(t,e);i||(e=ke(e),i=n.call(t,e));const s=r?r.call(t,e):void 0,o=t.delete(e);return i&&P(t,"delete",e,void 0,s),o}function ae(){const e=ke(this),t=0!==e.size,n=void 0,r=e.clear();return t&&P(e,"clear",void 0,void 0,n),r}function ce(e,t){return function(n,r){const i=this,s=i["__v_raw"],o=ke(s),a=t?Q:e?Be:Ue;return!e&&L(o,"iterate",x),s.forEach((e,t)=>n.call(r,a(e),a(t),i))}}function le(e,t,n){return function(...i){const s=this["__v_raw"],o=ke(s),a=Object(r["w"])(o),c="entries"===e||e===Symbol.iterator&&a,l="keys"===e&&a,u=s[e](...i),h=n?Q:t?Be:Ue;return!t&&L(o,"iterate",l?b:x),{next(){const{value:e,done:t}=u.next();return t?{value:e,done:t}:{value:c?[h(e[0]),h(e[1])]:h(e),done:t}},[Symbol.iterator](){return this}}}}function ue(e){return function(...t){return"delete"!==e&&this}}function he(){const e={get(e){return te(this,e)},get size(){return re(this)},has:ne,add:ie,set:se,delete:oe,clear:ae,forEach:ce(!1,!1)},t={get(e){return te(this,e,!1,!0)},get size(){return re(this)},has:ne,add:ie,set:se,delete:oe,clear:ae,forEach:ce(!1,!0)},n={get(e){return te(this,e,!0)},get size(){return re(this,!0)},has(e){return ne.call(this,e,!0)},add:ue("add"),set:ue("set"),delete:ue("delete"),clear:ue("clear"),forEach:ce(!0,!1)},r={get(e){return te(this,e,!0,!0)},get size(){return re(this,!0)},has(e){return ne.call(this,e,!0)},add:ue("add"),set:ue("set"),delete:ue("delete"),clear:ue("clear"),forEach:ce(!0,!0)},i=["keys","values","entries",Symbol.iterator];return i.forEach(i=>{e[i]=le(i,!1,!1),n[i]=le(i,!0,!1),t[i]=le(i,!1,!0),r[i]=le(i,!0,!0)}),[e,n,t,r]}const[de,pe,fe,me]=he();function ge(e,t){const n=t?e?me:fe:e?pe:de;return(t,i,s)=>"__v_isReactive"===i?!e:"__v_isReadonly"===i?e:"__v_raw"===i?t:Reflect.get(Object(r["m"])(n,i)&&i in t?n:t,i,s)}const ve={get:ge(!1,!1)},ye={get:ge(!1,!0)},_e={get:ge(!0,!1)},xe={get:ge(!0,!0)};const be=new WeakMap,we=new WeakMap,Me=new WeakMap,Se=new WeakMap;function Te(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Ee(e){return e["__v_skip"]||!Object.isExtensible(e)?0:Te(Object(r["U"])(e))}function Ae(e){return Ie(e)?e:Oe(e,!1,K,ve,be)}function Re(e){return Oe(e,!1,Z,ye,we)}function Ce(e){return Oe(e,!0,J,_e,Me)}function Le(e){return Oe(e,!0,$,xe,Se)}function Oe(e,t,n,i,s){if(!Object(r["y"])(e))return e;if(e["__v_raw"]&&(!t||!e["__v_isReactive"]))return e;const o=s.get(e);if(o)return o;const a=Ee(e);if(0===a)return e;const c=new Proxy(e,2===a?i:n);return s.set(e,c),c}function Pe(e){return Ie(e)?Pe(e["__v_raw"]):!(!e||!e["__v_isReactive"])}function Ie(e){return!(!e||!e["__v_isReadonly"])}function De(e){return!(!e||!e["__v_isShallow"])}function Ne(e){return Pe(e)||Ie(e)}function ke(e){const t=e&&e["__v_raw"];return t?ke(t):e}function Fe(e){return Object(r["h"])(e,"__v_skip",!0),e}const Ue=e=>Object(r["y"])(e)?Ae(e):e,Be=e=>Object(r["y"])(e)?Ce(e):e;function ze(e){E&&_&&(e=ke(e),O(e.dep||(e.dep=u())))}function He(e,t){e=ke(e),e.dep&&I(e.dep)}function je(e){return!(!e||!0!==e.__v_isRef)}function Ve(e){return We(e,!1)}function Ge(e){return We(e,!0)}function We(e,t){return je(e)?e:new qe(e,t)}class qe{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:ke(e),this._value=t?e:Ue(e)}get value(){return ze(this),this._value}set value(e){e=this.__v_isShallow?e:ke(e),Object(r["l"])(e,this._rawValue)&&(this._rawValue=e,this._value=this.__v_isShallow?e:Ue(e),He(this,e))}}function Xe(e){He(e,void 0)}function Ye(e){return je(e)?e.value:e}const Ke={get:(e,t,n)=>Ye(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const i=e[t];return je(i)&&!je(n)?(i.value=n,!0):Reflect.set(e,t,n,r)}};function Je(e){return Pe(e)?e:new Proxy(e,Ke)}class Ze{constructor(e){this.dep=void 0,this.__v_isRef=!0;const{get:t,set:n}=e(()=>ze(this),()=>He(this));this._get=t,this._set=n}get value(){return this._get()}set value(e){this._set(e)}}function $e(e){return new Ze(e)}function Qe(e){const t=Object(r["q"])(e)?new Array(e.length):{};for(const n in e)t[n]=tt(e,n);return t}class et{constructor(e,t,n){this._object=e,this._key=t,this._defaultValue=n,this.__v_isRef=!0}get value(){const e=this._object[this._key];return void 0===e?this._defaultValue:e}set value(e){this._object[this._key]=e}}function tt(e,t,n){const r=e[t];return je(r)?r:new et(e,t,n)}class nt{constructor(e,t,n,r){this._setter=t,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new w(e,()=>{this._dirty||(this._dirty=!0,He(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!r,this["__v_isReadonly"]=n}get value(){const e=ke(this);return ze(e),!e._dirty&&e._cacheable||(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function rt(e,t,n=!1){let i,s;const o=Object(r["s"])(e);o?(i=e,s=r["d"]):(i=e.get,s=e.set);const a=new nt(i,s,o||!s,n);return a}Promise.resolve()},"8a87":function(e,t,n){"use strict";var r=n("30b8"),i=n("858e"),s=n("f656"),o=n("9664"),a=n("96a7"),c=n("41db"),l=n("1209"),u=n("5faf").get,h=n("8bf9"),d=n("a44a"),p=c("native-string-replace",String.prototype.replace),f=RegExp.prototype.exec,m=f,g=i("".charAt),v=i("".indexOf),y=i("".replace),_=i("".slice),x=function(){var e=/a/,t=/b*/g;return r(f,e,"a"),r(f,t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),b=a.BROKEN_CARET,w=void 0!==/()??/.exec("")[1],M=x||w||b||h||d;M&&(m=function(e){var t,n,i,a,c,h,d,M=this,S=u(M),T=s(e),E=S.raw;if(E)return E.lastIndex=M.lastIndex,t=r(m,E,T),M.lastIndex=E.lastIndex,t;var A=S.groups,R=b&&M.sticky,C=r(o,M),L=M.source,O=0,P=T;if(R&&(C=y(C,"y",""),-1===v(C,"g")&&(C+="g"),P=_(T,M.lastIndex),M.lastIndex>0&&(!M.multiline||M.multiline&&"\n"!==g(T,M.lastIndex-1))&&(L="(?: "+L+")",P=" "+P,O++),n=new RegExp("^(?:"+L+")",C)),w&&(n=new RegExp("^"+L+"$(?!\\s)",C)),x&&(i=M.lastIndex),a=r(f,R?n:M,P),R?a?(a.input=_(a.input,O),a[0]=_(a[0],O),a.index=M.lastIndex,M.lastIndex+=a[0].length):M.lastIndex=0:x&&a&&(M.lastIndex=M.global?a.index+a[0].length:i),w&&a&&a.length>1&&r(p,a[0],n,(function(){for(c=1;c<arguments.length-2;c++)void 0===arguments[c]&&(a[c]=void 0)})),a&&A)for(a.groups=h=l(null),c=0;c<A.length;c++)d=A[c],h[d[0]]=a[d[1]];return a}),e.exports=m},"8ace":function(e,t,n){var r=n("f42c");e.exports=function(e){return r((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))}},"8b78":function(e,t,n){"use strict";(function(e){function r(){return i().__VUE_DEVTOOLS_GLOBAL_HOOK__}function i(){return"undefined"!==typeof navigator&&"undefined"!==typeof window?window:"undefined"!==typeof e?e:{}}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return s}));const s="function"===typeof Proxy}).call(this,n("d8fc"))},"8bf9":function(e,t,n){var r=n("f42c"),i=n("0a26"),s=i.RegExp;e.exports=r((function(){var e=s(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))},"8d6b":function(e,t,n){var r=n("0a26"),i=n("3016"),s="__core-js_shared__",o=r[s]||i(s,{});e.exports=o},"8d88":function(e,t,n){var r=n("858e"),i=n("6d5d"),s=n("9caf"),o=r(r.bind);e.exports=function(e,t){return i(e),void 0===t?e:s?o(e,t):function(){return e.apply(t,arguments)}}},"8e04":function(e,t,n){"use strict";(function(e){let r,i;function s(){var t;return void 0!==r||("undefined"!==typeof window&&window.performance?(r=!0,i=window.performance):"undefined"!==typeof e&&(null===(t=e.perf_hooks)||void 0===t?void 0:t.performance)?(r=!0,i=e.perf_hooks.performance):r=!1),r}function o(){return s()?i.now():Date.now()}n.d(t,"a",(function(){return o}))}).call(this,n("d8fc"))},9349:function(e,t,n){var r=n("0a26"),i=n("3d1e"),s=r.TypeError;e.exports=function(e,t){if(i(t,e))return e;throw s("Incorrect invocation")}},9664:function(e,t,n){"use strict";var r=n("0361");e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},"96a7":function(e,t,n){var r=n("f42c"),i=n("0a26"),s=i.RegExp,o=r((function(){var e=s("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),a=o||r((function(){return!s("a","y").sticky})),c=o||r((function(){var e=s("^r","gy");return e.lastIndex=2,null!=e.exec("str")}));e.exports={BROKEN_CARET:c,MISSED_STICKY:a,UNSUPPORTED_Y:o}},"983e":function(e,t,n){var r=n("858e"),i=n("46ec"),s=n("65e2"),o=n("6947").indexOf,a=n("cad4"),c=r([].push);e.exports=function(e,t){var n,r=s(e),l=0,u=[];for(n in r)!i(a,n)&&i(r,n)&&c(u,n);while(t.length>l)i(r,n=t[l++])&&(~o(u,n)||c(u,n));return u}},"98f5":function(e,t,n){var r=n("0a26"),i=n("8d88"),s=n("30b8"),o=n("0361"),a=n("1459"),c=n("c246"),l=n("27d7"),u=n("3d1e"),h=n("de2e"),d=n("6bef"),p=n("e0f5"),f=r.TypeError,m=function(e,t){this.stopped=e,this.result=t},g=m.prototype;e.exports=function(e,t,n){var r,v,y,_,x,b,w,M=n&&n.that,S=!(!n||!n.AS_ENTRIES),T=!(!n||!n.IS_ITERATOR),E=!(!n||!n.INTERRUPTED),A=i(t,M),R=function(e){return r&&p(r,"normal",e),new m(!0,e)},C=function(e){return S?(o(e),E?A(e[0],e[1],R):A(e[0],e[1])):E?A(e,R):A(e)};if(T)r=e;else{if(v=d(e),!v)throw f(a(e)+" is not iterable");if(c(v)){for(y=0,_=l(e);_>y;y++)if(x=C(e[y]),x&&u(g,x))return x;return new m(!1)}r=h(e,v)}b=r.next;while(!(w=s(b,r)).done){try{x=C(w.value)}catch(L){p(r,"throw",L)}if("object"==typeof x&&x&&u(g,x))return x}return new m(!1)}},"9a00":function(e,t,n){var r=n("53f4"),i=r("toStringTag"),s={};s[i]="z",e.exports="[object z]"===String(s)},"9b1d":function(e,t,n){var r=n("0a26"),i=n("191b"),s=n("87b4"),o=n("3d1e"),a=n("d6e0"),c=r.Object;e.exports=a?function(e){return"symbol"==typeof e}:function(e){var t=i("Symbol");return s(t)&&o(t.prototype,c(e))}},"9b61":function(e,t,n){"use strict";var r=n("191b"),i=n("e36c"),s=n("53f4"),o=n("dd09"),a=s("species");e.exports=function(e){var t=r(e),n=i.f;o&&t&&!t[a]&&n(t,a,{configurable:!0,get:function(){return this}})}},"9bf1":function(e,t,n){var r=n("858e");e.exports=r([].slice)},"9caf":function(e,t,n){var r=n("f42c");e.exports=!r((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},"9f28":function(e,t,n){"use strict";var r=n("f42c");e.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){return 1},1)}))}},a2af:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r={uniforms:{tDiffuse:{value:null}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 tex = texture2D( tDiffuse, vUv );\n\n\t\t\tgl_FragColor = LinearTosRGB( tex );\n\n\t\t}"}},a431:function(e,t,n){var r=n("4521"),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},a44a:function(e,t,n){var r=n("f42c"),i=n("0a26"),s=i.RegExp;e.exports=r((function(){var e=s("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},a4db:function(e,t,n){var r=n("20d5"),i=n("0a26");e.exports=/ipad|iphone|ipod/i.test(r)&&void 0!==i.Pebble},a5e6:function(e,t,n){var r=n("983e"),i=n("f5d9"),s=i.concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,s)}},a714:function(e,t,n){var r=n("46ec"),i=n("0376"),s=n("2f5b"),o=n("e36c");e.exports=function(e,t,n){for(var a=i(t),c=o.f,l=s.f,u=0;u<a.length;u++){var h=a[u];r(e,h)||n&&r(n,h)||c(e,h,l(t,h))}}},a9c2:function(e,t,n){var r=n("0a26"),i=n("87b4"),s=r.String,o=r.TypeError;e.exports=function(e){if("object"==typeof e||i(e))return e;throw o("Can't set "+s(e)+" as a prototype")}},adc5:function(e,t,n){var r=n("0a26"),i=n("cbcb"),s=n("0aaf"),o=n("2ec3"),a=n("6035"),c=function(e){if(e&&e.forEach!==o)try{a(e,"forEach",o)}catch(t){e.forEach=o}};for(var l in i)i[l]&&c(r[l]&&r[l].prototype);c(s)},b0d9:function(e,t,n){var r=n("858e"),i=n("2bba"),s=n("f656"),o=/"/g,a=r("".replace);e.exports=function(e,t,n,r){var c=s(i(e)),l="<"+t;return""!==n&&(l+=" "+n+'="'+a(s(r),o,"&quot;")+'"'),l+">"+c+"</"+t+">"}},b10f:function(e,t){e.exports=!1},b211:function(e,t,n){var r=n("0a26"),i=n("2bba"),s=r.Object;e.exports=function(e){return s(i(e))}},b55a:function(e,t,n){var r=n("0a26"),i=n("858e"),s=n("f42c"),o=n("def2"),a=r.Object,c=i("".split);e.exports=s((function(){return!a("z").propertyIsEnumerable(0)}))?function(e){return"String"==o(e)?c(e,""):a(e)}:a},b618:function(e,t,n){var r,i,s=n("0a26"),o=n("20d5"),a=s.process,c=s.Deno,l=a&&a.versions||c&&c.version,u=l&&l.v8;u&&(r=u.split("."),i=r[0]>0&&r[0]<4?1:+(r[0]+r[1])),!i&&o&&(r=o.match(/Edge\/(\d+)/),(!r||r[1]>=74)&&(r=o.match(/Chrome\/(\d+)/),r&&(i=+r[1]))),e.exports=i},b90d:function(e,t,n){"use strict";n.d(t,"a",(function(){return y})),n.d(t,"b",(function(){return $p})),n.d(t,"c",(function(){return Tp})),n.d(t,"d",(function(){return p})),n.d(t,"e",(function(){return rh})),n.d(t,"f",(function(){return Bn})),n.d(t,"g",(function(){return ti})),n.d(t,"h",(function(){return pi})),n.d(t,"i",(function(){return Yf})),n.d(t,"j",(function(){return le})),n.d(t,"k",(function(){return hf})),n.d(t,"l",(function(){return bn})),n.d(t,"m",(function(){return Np})),n.d(t,"n",(function(){return kh})),n.d(t,"o",(function(){return Zp})),n.d(t,"p",(function(){return f})),n.d(t,"q",(function(){return Ut})),n.d(t,"r",(function(){return Ip})),n.d(t,"s",(function(){return si})),n.d(t,"t",(function(){return Cu})),n.d(t,"u",(function(){return d})),n.d(t,"v",(function(){return xu})),n.d(t,"w",(function(){return sf})),n.d(t,"x",(function(){return Pu})),n.d(t,"y",(function(){return Du})),n.d(t,"z",(function(){return pp})),n.d(t,"A",(function(){return mt})),n.d(t,"B",(function(){return gt})),n.d(t,"C",(function(){return xh})),n.d(t,"D",(function(){return fh})),n.d(t,"E",(function(){return Sh})),n.d(t,"F",(function(){return Mh})),n.d(t,"G",(function(){return fe})),n.d(t,"H",(function(){return ge})),n.d(t,"I",(function(){return me})),n.d(t,"J",(function(){return Op})),n.d(t,"K",(function(){return nf})),n.d(t,"L",(function(){return i})),n.d(t,"M",(function(){return Zr})),n.d(t,"N",(function(){return un})),n.d(t,"O",(function(){return pr})),n.d(t,"P",(function(){return Oi})),n.d(t,"Q",(function(){return $r})),n.d(t,"R",(function(){return Zf})),n.d(t,"S",(function(){return cp})),n.d(t,"T",(function(){return sp})),n.d(t,"U",(function(){return ip})),n.d(t,"V",(function(){return rp})),n.d(t,"W",(function(){return ue})),n.d(t,"X",(function(){return $f})),n.d(t,"Y",(function(){return he})),n.d(t,"Z",(function(){return pe})),n.d(t,"ab",(function(){return de})),n.d(t,"bb",(function(){return g})),n.d(t,"cb",(function(){return v})),n.d(t,"db",(function(){return xp})),n.d(t,"eb",(function(){return Ur})),n.d(t,"fb",(function(){return Ha})),n.d(t,"gb",(function(){return ji})),n.d(t,"hb",(function(){return Kp})),n.d(t,"ib",(function(){return Lh})),n.d(t,"jb",(function(){return Th})),n.d(t,"kb",(function(){return Af})),n.d(t,"lb",(function(){return Nn})),n.d(t,"mb",(function(){return wp})),n.d(t,"nb",(function(){return Le})),n.d(t,"ob",(function(){return ce})),n.d(t,"pb",(function(){return Ou})),n.d(t,"qb",(function(){return Pa})),n.d(t,"rb",(function(){return zi})),n.d(t,"sb",(function(){return ah})),n.d(t,"tb",(function(){return nh})),n.d(t,"ub",(function(){return ir})),n.d(t,"vb",(function(){return Qd})),n.d(t,"wb",(function(){return Df})),n.d(t,"xb",(function(){return Gp})),n.d(t,"yb",(function(){return s})),n.d(t,"zb",(function(){return Lt})),n.d(t,"Ab",(function(){return An})),n.d(t,"Bb",(function(){return kp})),n.d(t,"Cb",(function(){return ep})),n.d(t,"Db",(function(){return Tt})),n.d(t,"Eb",(function(){return St})),n.d(t,"Fb",(function(){return Ia})),n.d(t,"Gb",(function(){return Fi})),n.d(t,"Hb",(function(){return hn})),n.d(t,"Ib",(function(){return kn})),n.d(t,"Jb",(function(){return Sp})),n.d(t,"Kb",(function(){return Cn})),n.d(t,"Lb",(function(){return Au})),n.d(t,"Mb",(function(){return At}));
/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */
const r="138",i={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},s={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},o=0,a=1,c=2,l=1,u=2,h=3,d=0,p=1,f=2,m=1,g=0,v=1,y=2,_=3,x=4,b=5,w=100,M=101,S=102,T=103,E=104,A=200,R=201,C=202,L=203,O=204,P=205,I=206,D=207,N=208,k=209,F=210,U=0,B=1,z=2,H=3,j=4,V=5,G=6,W=7,q=0,X=1,Y=2,K=0,J=1,Z=2,$=3,Q=4,ee=5,te=300,ne=301,re=302,ie=303,se=304,oe=306,ae=307,ce=1e3,le=1001,ue=1002,he=1003,de=1004,pe=1005,fe=1006,me=1007,ge=1008,ve=1009,ye=1010,_e=1011,xe=1012,be=1013,we=1014,Me=1015,Se=1016,Te=1017,Ee=1018,Ae=1020,Re=1021,Ce=1022,Le=1023,Oe=1024,Pe=1025,Ie=1026,De=1027,Ne=1028,ke=1029,Fe=1030,Ue=1031,Be=1033,ze=33776,He=33777,je=33778,Ve=33779,Ge=35840,We=35841,qe=35842,Xe=35843,Ye=36196,Ke=37492,Je=37496,Ze=37808,$e=37809,Qe=37810,et=37811,tt=37812,nt=37813,rt=37814,it=37815,st=37816,ot=37817,at=37818,ct=37819,lt=37820,ut=37821,ht=36492,dt=2200,pt=2201,ft=2202,mt=2300,gt=2301,vt=2302,yt=2400,_t=2401,xt=2402,bt=2500,wt=2501,Mt=0,St=1,Tt=2,Et=3e3,At=3001,Rt=3200,Ct=3201,Lt=0,Ot=1,Pt=7680,It=519,Dt=35044,Nt=35048,kt="300 es",Ft=1035;class Ut{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const n=this._listeners,r=n[e];if(void 0!==r){const e=r.indexOf(t);-1!==e&&r.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners,n=t[e.type];if(void 0!==n){e.target=this;const t=n.slice(0);for(let n=0,r=t.length;n<r;n++)t[n].call(this,e);e.target=null}}}const Bt=[];for(let Qf=0;Qf<256;Qf++)Bt[Qf]=(Qf<16?"0":"")+Qf.toString(16);let zt=1234567;const Ht=Math.PI/180,jt=180/Math.PI;function Vt(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0,i=Bt[255&e]+Bt[e>>8&255]+Bt[e>>16&255]+Bt[e>>24&255]+"-"+Bt[255&t]+Bt[t>>8&255]+"-"+Bt[t>>16&15|64]+Bt[t>>24&255]+"-"+Bt[63&n|128]+Bt[n>>8&255]+"-"+Bt[n>>16&255]+Bt[n>>24&255]+Bt[255&r]+Bt[r>>8&255]+Bt[r>>16&255]+Bt[r>>24&255];return i.toUpperCase()}function Gt(e,t,n){return Math.max(t,Math.min(n,e))}function Wt(e,t){return(e%t+t)%t}function qt(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)}function Xt(e,t,n){return e!==t?(n-e)/(t-e):0}function Yt(e,t,n){return(1-n)*e+n*t}function Kt(e,t,n,r){return Yt(e,t,1-Math.exp(-n*r))}function Jt(e,t=1){return t-Math.abs(Wt(e,2*t)-t)}function Zt(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t),e*e*(3-2*e))}function $t(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t),e*e*e*(e*(6*e-15)+10))}function Qt(e,t){return e+Math.floor(Math.random()*(t-e+1))}function en(e,t){return e+Math.random()*(t-e)}function tn(e){return e*(.5-Math.random())}function nn(e){return void 0!==e&&(zt=e%2147483647),zt=16807*zt%2147483647,(zt-1)/2147483646}function rn(e){return e*Ht}function sn(e){return e*jt}function on(e){return 0===(e&e-1)&&0!==e}function an(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function cn(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function ln(e,t,n,r,i){const s=Math.cos,o=Math.sin,a=s(n/2),c=o(n/2),l=s((t+r)/2),u=o((t+r)/2),h=s((t-r)/2),d=o((t-r)/2),p=s((r-t)/2),f=o((r-t)/2);switch(i){case"XYX":e.set(a*u,c*h,c*d,a*l);break;case"YZY":e.set(c*d,a*u,c*h,a*l);break;case"ZXZ":e.set(c*h,c*d,a*u,a*l);break;case"XZX":e.set(a*u,c*f,c*p,a*l);break;case"YXY":e.set(c*p,a*u,c*f,a*l);break;case"ZYZ":e.set(c*f,c*p,a*u,a*l);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}var un=Object.freeze({__proto__:null,DEG2RAD:Ht,RAD2DEG:jt,generateUUID:Vt,clamp:Gt,euclideanModulo:Wt,mapLinear:qt,inverseLerp:Xt,lerp:Yt,damp:Kt,pingpong:Jt,smoothstep:Zt,smootherstep:$t,randInt:Qt,randFloat:en,randFloatSpread:tn,seededRandom:nn,degToRad:rn,radToDeg:sn,isPowerOfTwo:on,ceilPowerOfTwo:an,floorPowerOfTwo:cn,setQuaternionFromProperEuler:ln});class hn{constructor(e=0,t=0){this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){const e=Math.atan2(-this.y,-this.x)+Math.PI;return e}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,s=this.y-e.y;return this.x=i*n-s*r+e.x,this.y=i*r+s*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}hn.prototype.isVector2=!0;class dn{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,n,r,i,s,o,a,c){const l=this.elements;return l[0]=e,l[1]=r,l[2]=o,l[3]=t,l[4]=i,l[5]=a,l[6]=n,l[7]=s,l[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,s=n[0],o=n[3],a=n[6],c=n[1],l=n[4],u=n[7],h=n[2],d=n[5],p=n[8],f=r[0],m=r[3],g=r[6],v=r[1],y=r[4],_=r[7],x=r[2],b=r[5],w=r[8];return i[0]=s*f+o*v+a*x,i[3]=s*m+o*y+a*b,i[6]=s*g+o*_+a*w,i[1]=c*f+l*v+u*x,i[4]=c*m+l*y+u*b,i[7]=c*g+l*_+u*w,i[2]=h*f+d*v+p*x,i[5]=h*m+d*y+p*b,i[8]=h*g+d*_+p*w,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],o=e[5],a=e[6],c=e[7],l=e[8];return t*s*l-t*o*c-n*i*l+n*o*a+r*i*c-r*s*a}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],o=e[5],a=e[6],c=e[7],l=e[8],u=l*s-o*c,h=o*a-l*i,d=c*i-s*a,p=t*u+n*h+r*d;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const f=1/p;return e[0]=u*f,e[1]=(r*c-l*n)*f,e[2]=(o*n-r*s)*f,e[3]=h*f,e[4]=(l*t-r*a)*f,e[5]=(r*i-o*t)*f,e[6]=d*f,e[7]=(n*a-c*t)*f,e[8]=(s*t-n*i)*f,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,i,s,o){const a=Math.cos(i),c=Math.sin(i);return this.set(n*a,n*c,-n*(a*s+c*o)+s+e,-r*c,r*a,-r*(-c*s+a*o)+o+t,0,0,1),this}scale(e,t){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this}rotate(e){const t=Math.cos(e),n=Math.sin(e),r=this.elements,i=r[0],s=r[3],o=r[6],a=r[1],c=r[4],l=r[7];return r[0]=t*i+n*a,r[3]=t*s+n*c,r[6]=t*o+n*l,r[1]=-n*i+t*a,r[4]=-n*s+t*c,r[7]=-n*o+t*l,this}translate(e,t){const n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}function pn(e){for(let t=e.length-1;t>=0;--t)if(e[t]>65535)return!0;return!1}dn.prototype.isMatrix3=!0;Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;function fn(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}const mn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},gn={h:0,s:0,l:0},vn={h:0,s:0,l:0};function yn(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function _n(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function xn(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}class bn{constructor(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}set(e){return e&&e.isColor?this.copy(e):"number"===typeof e?this.setHex(e):"string"===typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this}setRGB(e,t,n){return this.r=e,this.g=t,this.b=n,this}setHSL(e,t,n){if(e=Wt(e,1),t=Gt(t,0,1),n=Gt(n,0,1),0===t)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=yn(i,r,e+1/3),this.g=yn(i,r,e),this.b=yn(i,r,e-1/3)}return this}setStyle(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let n;if(n=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let e;const r=n[1],i=n[2];switch(r){case"rgb":case"rgba":if(e=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i))return this.r=Math.min(255,parseInt(e[1],10))/255,this.g=Math.min(255,parseInt(e[2],10))/255,this.b=Math.min(255,parseInt(e[3],10))/255,t(e[4]),this;if(e=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i))return this.r=Math.min(100,parseInt(e[1],10))/100,this.g=Math.min(100,parseInt(e[2],10))/100,this.b=Math.min(100,parseInt(e[3],10))/100,t(e[4]),this;break;case"hsl":case"hsla":if(e=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i)){const n=parseFloat(e[1])/360,r=parseInt(e[2],10)/100,i=parseInt(e[3],10)/100;return t(e[4]),this.setHSL(n,r,i)}break}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(e)){const e=n[1],t=e.length;if(3===t)return this.r=parseInt(e.charAt(0)+e.charAt(0),16)/255,this.g=parseInt(e.charAt(1)+e.charAt(1),16)/255,this.b=parseInt(e.charAt(2)+e.charAt(2),16)/255,this;if(6===t)return this.r=parseInt(e.charAt(0)+e.charAt(1),16)/255,this.g=parseInt(e.charAt(2)+e.charAt(3),16)/255,this.b=parseInt(e.charAt(4)+e.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}setColorName(e){const t=mn[e.toLowerCase()];return void 0!==t?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=_n(e.r),this.g=_n(e.g),this.b=_n(e.b),this}copyLinearToSRGB(e){return this.r=xn(e.r),this.g=xn(e.g),this.b=xn(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(e){const t=this.r,n=this.g,r=this.b,i=Math.max(t,n,r),s=Math.min(t,n,r);let o,a;const c=(s+i)/2;if(s===i)o=0,a=0;else{const e=i-s;switch(a=c<=.5?e/(i+s):e/(2-i-s),i){case t:o=(n-r)/e+(n<r?6:0);break;case n:o=(r-t)/e+2;break;case r:o=(t-n)/e+4;break}o/=6}return e.h=o,e.s=a,e.l=c,e}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(e,t,n){return this.getHSL(gn),gn.h+=e,gn.s+=t,gn.l+=n,this.setHSL(gn.h,gn.s,gn.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(gn),e.getHSL(vn);const n=Yt(gn.h,vn.h,t),r=Yt(gn.s,vn.s,t),i=Yt(gn.l,vn.l,t);return this.setHSL(n,r,i),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),!0===e.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}let wn;bn.NAMES=mn,bn.prototype.isColor=!0,bn.prototype.r=1,bn.prototype.g=1,bn.prototype.b=1;class Mn{static getDataURL(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===wn&&(wn=fn("canvas")),wn.width=e.width,wn.height=e.height;const n=wn.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=wn}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){const t=fn("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height),i=r.data;for(let e=0;e<i.length;e++)i[e]=255*_n(i[e]/255);return n.putImageData(r,0,0),t}if(e.data){const t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*_n(t[e]/255)):t[e]=_n(t[e]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class Sn{constructor(e=null){this.uuid=Vt(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let e;if(Array.isArray(r)){e=[];for(let t=0,n=r.length;t<n;t++)r[t].isDataTexture?e.push(Tn(r[t].image)):e.push(Tn(r[t]))}else e=Tn(r);n.url=e}return t||(e.images[this.uuid]=n),n}}function Tn(e){return"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap?Mn.getDataURL(e):e.data?{data:Array.prototype.slice.call(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}Sn.prototype.isSource=!0;let En=0;class An extends Ut{constructor(e=An.DEFAULT_IMAGE,t=An.DEFAULT_MAPPING,n=le,r=le,i=fe,s=ge,o=Le,a=ve,c=1,l=Et){super(),Object.defineProperty(this,"id",{value:En++}),this.uuid=Vt(),this.name="",this.source=new Sn(e),this.mipmaps=[],this.mapping=t,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=s,this.anisotropy=c,this.format=o,this.internalFormat=null,this.type=a,this.offset=new hn(0,0),this.repeat=new hn(1,1),this.center=new hn(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new dn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=l,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==te)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case ce:e.x=e.x-Math.floor(e.x);break;case le:e.x=e.x<0?0:1;break;case ue:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case ce:e.y=e.y-Math.floor(e.y);break;case le:e.y=e.y<0?0:1;break;case ue:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}}An.DEFAULT_IMAGE=null,An.DEFAULT_MAPPING=te,An.prototype.isTexture=!0;class Rn{constructor(e=0,t=0,n=0,r=1){this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=this.w,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*r+s[12]*i,this.y=s[1]*t+s[5]*n+s[9]*r+s[13]*i,this.z=s[2]*t+s[6]*n+s[10]*r+s[14]*i,this.w=s[3]*t+s[7]*n+s[11]*r+s[15]*i,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,i;const s=.01,o=.1,a=e.elements,c=a[0],l=a[4],u=a[8],h=a[1],d=a[5],p=a[9],f=a[2],m=a[6],g=a[10];if(Math.abs(l-h)<s&&Math.abs(u-f)<s&&Math.abs(p-m)<s){if(Math.abs(l+h)<o&&Math.abs(u+f)<o&&Math.abs(p+m)<o&&Math.abs(c+d+g-3)<o)return this.set(1,0,0,0),this;t=Math.PI;const e=(c+1)/2,a=(d+1)/2,v=(g+1)/2,y=(l+h)/4,_=(u+f)/4,x=(p+m)/4;return e>a&&e>v?e<s?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(e),r=y/n,i=_/n):a>v?a<s?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(a),n=y/r,i=x/r):v<s?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(v),n=_/i,r=x/i),this.set(n,r,i,t),this}let v=Math.sqrt((m-p)*(m-p)+(u-f)*(u-f)+(h-l)*(h-l));return Math.abs(v)<.001&&(v=1),this.x=(m-p)/v,this.y=(u-f)/v,this.z=(h-l)/v,this.w=Math.acos((c+d+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}Rn.prototype.isVector4=!0;class Cn extends Ut{constructor(e,t,n={}){super(),this.width=e,this.height=t,this.depth=1,this.scissor=new Rn(0,0,e,t),this.scissorTest=!1,this.viewport=new Rn(0,0,e,t);const r={width:e,height:t,depth:1};this.texture=new An(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:fe,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null,this.samples=void 0!==n.samples?n.samples:0}setSize(e,t,n=1){this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.image=Object.assign({},e.texture.image),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}Cn.prototype.isWebGLRenderTarget=!0;class Ln extends An{constructor(e=null,t=1,n=1,r=1){super(null),this.image={data:e,width:t,height:n,depth:r},this.magFilter=he,this.minFilter=he,this.wrapR=le,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}Ln.prototype.isDataArrayTexture=!0;class On extends Cn{constructor(e,t,n){super(e,t),this.depth=n,this.texture=new Ln(null,e,t,n),this.texture.isRenderTargetTexture=!0}}On.prototype.isWebGLArrayRenderTarget=!0;class Pn extends An{constructor(e=null,t=1,n=1,r=1){super(null),this.image={data:e,width:t,height:n,depth:r},this.magFilter=he,this.minFilter=he,this.wrapR=le,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}Pn.prototype.isData3DTexture=!0;class In extends Cn{constructor(e,t,n){super(e,t),this.depth=n,this.texture=new Pn(null,e,t,n),this.texture.isRenderTargetTexture=!0}}In.prototype.isWebGL3DRenderTarget=!0;class Dn extends Cn{constructor(e,t,n,r={}){super(e,t,r);const i=this.texture;this.texture=[];for(let s=0;s<n;s++)this.texture[s]=i.clone(),this.texture[s].isRenderTargetTexture=!0}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,i=this.texture.length;r<i;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=n;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this.texture.length=0;for(let t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone();return this}}Dn.prototype.isWebGLMultipleRenderTargets=!0;class Nn{constructor(e=0,t=0,n=0,r=1){this._x=e,this._y=t,this._z=n,this._w=r}static slerp(e,t,n,r){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),n.slerpQuaternions(e,t,r)}static slerpFlat(e,t,n,r,i,s,o){let a=n[r+0],c=n[r+1],l=n[r+2],u=n[r+3];const h=i[s+0],d=i[s+1],p=i[s+2],f=i[s+3];if(0===o)return e[t+0]=a,e[t+1]=c,e[t+2]=l,void(e[t+3]=u);if(1===o)return e[t+0]=h,e[t+1]=d,e[t+2]=p,void(e[t+3]=f);if(u!==f||a!==h||c!==d||l!==p){let e=1-o;const t=a*h+c*d+l*p+u*f,n=t>=0?1:-1,r=1-t*t;if(r>Number.EPSILON){const i=Math.sqrt(r),s=Math.atan2(i,t*n);e=Math.sin(e*s)/i,o=Math.sin(o*s)/i}const i=o*n;if(a=a*e+h*i,c=c*e+d*i,l=l*e+p*i,u=u*e+f*i,e===1-o){const e=1/Math.sqrt(a*a+c*c+l*l+u*u);a*=e,c*=e,l*=e,u*=e}}e[t]=a,e[t+1]=c,e[t+2]=l,e[t+3]=u}static multiplyQuaternionsFlat(e,t,n,r,i,s){const o=n[r],a=n[r+1],c=n[r+2],l=n[r+3],u=i[s],h=i[s+1],d=i[s+2],p=i[s+3];return e[t]=o*p+l*u+a*d-c*h,e[t+1]=a*p+l*h+c*u-o*d,e[t+2]=c*p+l*d+o*h-a*u,e[t+3]=l*p-o*u-a*h-c*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const n=e._x,r=e._y,i=e._z,s=e._order,o=Math.cos,a=Math.sin,c=o(n/2),l=o(r/2),u=o(i/2),h=a(n/2),d=a(r/2),p=a(i/2);switch(s){case"XYZ":this._x=h*l*u+c*d*p,this._y=c*d*u-h*l*p,this._z=c*l*p+h*d*u,this._w=c*l*u-h*d*p;break;case"YXZ":this._x=h*l*u+c*d*p,this._y=c*d*u-h*l*p,this._z=c*l*p-h*d*u,this._w=c*l*u+h*d*p;break;case"ZXY":this._x=h*l*u-c*d*p,this._y=c*d*u+h*l*p,this._z=c*l*p+h*d*u,this._w=c*l*u-h*d*p;break;case"ZYX":this._x=h*l*u-c*d*p,this._y=c*d*u+h*l*p,this._z=c*l*p-h*d*u,this._w=c*l*u+h*d*p;break;case"YZX":this._x=h*l*u+c*d*p,this._y=c*d*u+h*l*p,this._z=c*l*p-h*d*u,this._w=c*l*u-h*d*p;break;case"XZY":this._x=h*l*u-c*d*p,this._y=c*d*u-h*l*p,this._z=c*l*p+h*d*u,this._w=c*l*u+h*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],i=t[8],s=t[1],o=t[5],a=t[9],c=t[2],l=t[6],u=t[10],h=n+o+u;if(h>0){const e=.5/Math.sqrt(h+1);this._w=.25/e,this._x=(l-a)*e,this._y=(i-c)*e,this._z=(s-r)*e}else if(n>o&&n>u){const e=2*Math.sqrt(1+n-o-u);this._w=(l-a)/e,this._x=.25*e,this._y=(r+s)/e,this._z=(i+c)/e}else if(o>u){const e=2*Math.sqrt(1+o-n-u);this._w=(i-c)/e,this._x=(r+s)/e,this._y=.25*e,this._z=(a+l)/e}else{const e=2*Math.sqrt(1+u-n-o);this._w=(s-r)/e,this._x=(i+c)/e,this._y=(a+l)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Gt(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,i=e._z,s=e._w,o=t._x,a=t._y,c=t._z,l=t._w;return this._x=n*l+s*o+r*c-i*a,this._y=r*l+s*a+i*o-n*c,this._z=i*l+s*c+n*a-r*o,this._w=s*l-n*o-r*a-i*c,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,r=this._y,i=this._z,s=this._w;let o=s*e._w+n*e._x+r*e._y+i*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=s,this._x=n,this._y=r,this._z=i,this;const a=1-o*o;if(a<=Number.EPSILON){const e=1-t;return this._w=e*s+t*this._w,this._x=e*n+t*this._x,this._y=e*r+t*this._y,this._z=e*i+t*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(a),l=Math.atan2(c,o),u=Math.sin((1-t)*l)/c,h=Math.sin(t*l)/c;return this._w=s*u+this._w*h,this._x=n*u+this._x*h,this._y=r*u+this._y*h,this._z=i*u+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),i=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(i),n*Math.cos(i),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}Nn.prototype.isQuaternion=!0;class kn{constructor(e=0,t=0,n=0){this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Un.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Un.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=e.elements,s=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*s,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*s,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*s,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,i=e.x,s=e.y,o=e.z,a=e.w,c=a*t+s*r-o*n,l=a*n+o*t-i*r,u=a*r+i*n-s*t,h=-i*t-s*n-o*r;return this.x=c*a+h*-i+l*-o-u*-s,this.y=l*a+h*-s+u*-i-c*-o,this.z=u*a+h*-o+c*-s-l*-i,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,i=e.z,s=t.x,o=t.y,a=t.z;return this.x=r*a-i*o,this.y=i*s-n*a,this.z=n*o-r*s,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return Fn.copy(this).projectOnVector(e),this.sub(Fn)}reflect(e){return this.sub(Fn.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Gt(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}kn.prototype.isVector3=!0;const Fn=new kn,Un=new Nn;class Bn{constructor(e=new kn(1/0,1/0,1/0),t=new kn(-1/0,-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,n=1/0,r=1/0,i=-1/0,s=-1/0,o=-1/0;for(let a=0,c=e.length;a<c;a+=3){const c=e[a],l=e[a+1],u=e[a+2];c<t&&(t=c),l<n&&(n=l),u<r&&(r=u),c>i&&(i=c),l>s&&(s=l),u>o&&(o=u)}return this.min.set(t,n,r),this.max.set(i,s,o),this}setFromBufferAttribute(e){let t=1/0,n=1/0,r=1/0,i=-1/0,s=-1/0,o=-1/0;for(let a=0,c=e.count;a<c;a++){const c=e.getX(a),l=e.getY(a),u=e.getZ(a);c<t&&(t=c),l<n&&(n=l),u<r&&(r=u),c>i&&(i=c),l>s&&(s=l),u>o&&(o=u)}return this.min.set(t,n,r),this.max.set(i,s,o),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Hn.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(void 0!==n)if(t&&void 0!=n.attributes&&void 0!==n.attributes.position){const t=n.attributes.position;for(let n=0,r=t.count;n<r;n++)Hn.fromBufferAttribute(t,n).applyMatrix4(e.matrixWorld),this.expandByPoint(Hn)}else null===n.boundingBox&&n.computeBoundingBox(),jn.copy(n.boundingBox),jn.applyMatrix4(e.matrixWorld),this.union(jn);const r=e.children;for(let i=0,s=r.length;i<s;i++)this.expandByObject(r[i],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Hn),Hn.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Kn),Jn.subVectors(this.max,Kn),Vn.subVectors(e.a,Kn),Gn.subVectors(e.b,Kn),Wn.subVectors(e.c,Kn),qn.subVectors(Gn,Vn),Xn.subVectors(Wn,Gn),Yn.subVectors(Vn,Wn);let t=[0,-qn.z,qn.y,0,-Xn.z,Xn.y,0,-Yn.z,Yn.y,qn.z,0,-qn.x,Xn.z,0,-Xn.x,Yn.z,0,-Yn.x,-qn.y,qn.x,0,-Xn.y,Xn.x,0,-Yn.y,Yn.x,0];return!!Qn(t,Vn,Gn,Wn,Jn)&&(t=[1,0,0,0,1,0,0,0,1],!!Qn(t,Vn,Gn,Wn,Jn)&&(Zn.crossVectors(qn,Xn),t=[Zn.x,Zn.y,Zn.z],Qn(t,Vn,Gn,Wn,Jn)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){const t=Hn.copy(e).clamp(this.min,this.max);return t.sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize(Hn).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(zn[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),zn[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),zn[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),zn[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),zn[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),zn[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),zn[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),zn[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(zn)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}Bn.prototype.isBox3=!0;const zn=[new kn,new kn,new kn,new kn,new kn,new kn,new kn,new kn],Hn=new kn,jn=new Bn,Vn=new kn,Gn=new kn,Wn=new kn,qn=new kn,Xn=new kn,Yn=new kn,Kn=new kn,Jn=new kn,Zn=new kn,$n=new kn;function Qn(e,t,n,r,i){for(let s=0,o=e.length-3;s<=o;s+=3){$n.fromArray(e,s);const o=i.x*Math.abs($n.x)+i.y*Math.abs($n.y)+i.z*Math.abs($n.z),a=t.dot($n),c=n.dot($n),l=r.dot($n);if(Math.max(-Math.max(a,c,l),Math.min(a,c,l))>o)return!1}return!0}const er=new Bn,tr=new kn,nr=new kn,rr=new kn;class ir{constructor(e=new kn,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):er.setFromPoints(e).getCenter(n);let r=0;for(let i=0,s=e.length;i<s;i++)r=Math.max(r,n.distanceToSquared(e[i]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){rr.subVectors(e,this.center);const t=rr.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),n=.5*(e-this.radius);this.center.add(rr.multiplyScalar(n/e)),this.radius+=n}return this}union(e){return!0===this.center.equals(e.center)?nr.set(0,0,1).multiplyScalar(e.radius):nr.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(tr.copy(e.center).add(nr)),this.expandByPoint(tr.copy(e.center).sub(nr)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const sr=new kn,or=new kn,ar=new kn,cr=new kn,lr=new kn,ur=new kn,hr=new kn;class dr{constructor(e=new kn,t=new kn(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,sr)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=sr.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(sr.copy(this.direction).multiplyScalar(t).add(this.origin),sr.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){or.copy(e).add(t).multiplyScalar(.5),ar.copy(t).sub(e).normalize(),cr.copy(this.origin).sub(or);const i=.5*e.distanceTo(t),s=-this.direction.dot(ar),o=cr.dot(this.direction),a=-cr.dot(ar),c=cr.lengthSq(),l=Math.abs(1-s*s);let u,h,d,p;if(l>0)if(u=s*a-o,h=s*o-a,p=i*l,u>=0)if(h>=-p)if(h<=p){const e=1/l;u*=e,h*=e,d=u*(u+s*h+2*o)+h*(s*u+h+2*a)+c}else h=i,u=Math.max(0,-(s*h+o)),d=-u*u+h*(h+2*a)+c;else h=-i,u=Math.max(0,-(s*h+o)),d=-u*u+h*(h+2*a)+c;else h<=-p?(u=Math.max(0,-(-s*i+o)),h=u>0?-i:Math.min(Math.max(-i,-a),i),d=-u*u+h*(h+2*a)+c):h<=p?(u=0,h=Math.min(Math.max(-i,-a),i),d=h*(h+2*a)+c):(u=Math.max(0,-(s*i+o)),h=u>0?i:Math.min(Math.max(-i,-a),i),d=-u*u+h*(h+2*a)+c);else h=s>0?-i:i,u=Math.max(0,-(s*h+o)),d=-u*u+h*(h+2*a)+c;return n&&n.copy(this.direction).multiplyScalar(u).add(this.origin),r&&r.copy(ar).multiplyScalar(h).add(or),d}intersectSphere(e,t){sr.subVectors(e.center,this.origin);const n=sr.dot(this.direction),r=sr.dot(sr)-n*n,i=e.radius*e.radius;if(r>i)return null;const s=Math.sqrt(i-r),o=n-s,a=n+s;return o<0&&a<0?null:o<0?this.at(a,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);if(0===t)return!0;const n=e.normal.dot(this.direction);return n*t<0}intersectBox(e,t){let n,r,i,s,o,a;const c=1/this.direction.x,l=1/this.direction.y,u=1/this.direction.z,h=this.origin;return c>=0?(n=(e.min.x-h.x)*c,r=(e.max.x-h.x)*c):(n=(e.max.x-h.x)*c,r=(e.min.x-h.x)*c),l>=0?(i=(e.min.y-h.y)*l,s=(e.max.y-h.y)*l):(i=(e.max.y-h.y)*l,s=(e.min.y-h.y)*l),n>s||i>r?null:((i>n||n!==n)&&(n=i),(s<r||r!==r)&&(r=s),u>=0?(o=(e.min.z-h.z)*u,a=(e.max.z-h.z)*u):(o=(e.max.z-h.z)*u,a=(e.min.z-h.z)*u),n>a||o>r?null:((o>n||n!==n)&&(n=o),(a<r||r!==r)&&(r=a),r<0?null:this.at(n>=0?n:r,t)))}intersectsBox(e){return null!==this.intersectBox(e,sr)}intersectTriangle(e,t,n,r,i){lr.subVectors(t,e),ur.subVectors(n,e),hr.crossVectors(lr,ur);let s,o=this.direction.dot(hr);if(o>0){if(r)return null;s=1}else{if(!(o<0))return null;s=-1,o=-o}cr.subVectors(this.origin,e);const a=s*this.direction.dot(ur.crossVectors(cr,ur));if(a<0)return null;const c=s*this.direction.dot(lr.cross(cr));if(c<0)return null;if(a+c>o)return null;const l=-s*cr.dot(hr);return l<0?null:this.at(l/o,i)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class pr{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,n,r,i,s,o,a,c,l,u,h,d,p,f,m){const g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=r,g[1]=i,g[5]=s,g[9]=o,g[13]=a,g[2]=c,g[6]=l,g[10]=u,g[14]=h,g[3]=d,g[7]=p,g[11]=f,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new pr).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/fr.setFromMatrixColumn(e,0).length(),i=1/fr.setFromMatrixColumn(e,1).length(),s=1/fr.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*s,t[9]=n[9]*s,t[10]=n[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,n=e.x,r=e.y,i=e.z,s=Math.cos(n),o=Math.sin(n),a=Math.cos(r),c=Math.sin(r),l=Math.cos(i),u=Math.sin(i);if("XYZ"===e.order){const e=s*l,n=s*u,r=o*l,i=o*u;t[0]=a*l,t[4]=-a*u,t[8]=c,t[1]=n+r*c,t[5]=e-i*c,t[9]=-o*a,t[2]=i-e*c,t[6]=r+n*c,t[10]=s*a}else if("YXZ"===e.order){const e=a*l,n=a*u,r=c*l,i=c*u;t[0]=e+i*o,t[4]=r*o-n,t[8]=s*c,t[1]=s*u,t[5]=s*l,t[9]=-o,t[2]=n*o-r,t[6]=i+e*o,t[10]=s*a}else if("ZXY"===e.order){const e=a*l,n=a*u,r=c*l,i=c*u;t[0]=e-i*o,t[4]=-s*u,t[8]=r+n*o,t[1]=n+r*o,t[5]=s*l,t[9]=i-e*o,t[2]=-s*c,t[6]=o,t[10]=s*a}else if("ZYX"===e.order){const e=s*l,n=s*u,r=o*l,i=o*u;t[0]=a*l,t[4]=r*c-n,t[8]=e*c+i,t[1]=a*u,t[5]=i*c+e,t[9]=n*c-r,t[2]=-c,t[6]=o*a,t[10]=s*a}else if("YZX"===e.order){const e=s*a,n=s*c,r=o*a,i=o*c;t[0]=a*l,t[4]=i-e*u,t[8]=r*u+n,t[1]=u,t[5]=s*l,t[9]=-o*l,t[2]=-c*l,t[6]=n*u+r,t[10]=e-i*u}else if("XZY"===e.order){const e=s*a,n=s*c,r=o*a,i=o*c;t[0]=a*l,t[4]=-u,t[8]=c*l,t[1]=e*u+i,t[5]=s*l,t[9]=n*u-r,t[2]=r*u-n,t[6]=o*l,t[10]=i*u+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(gr,e,vr)}lookAt(e,t,n){const r=this.elements;return xr.subVectors(e,t),0===xr.lengthSq()&&(xr.z=1),xr.normalize(),yr.crossVectors(n,xr),0===yr.lengthSq()&&(1===Math.abs(n.z)?xr.x+=1e-4:xr.z+=1e-4,xr.normalize(),yr.crossVectors(n,xr)),yr.normalize(),_r.crossVectors(xr,yr),r[0]=yr.x,r[4]=_r.x,r[8]=xr.x,r[1]=yr.y,r[5]=_r.y,r[9]=xr.y,r[2]=yr.z,r[6]=_r.z,r[10]=xr.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,s=n[0],o=n[4],a=n[8],c=n[12],l=n[1],u=n[5],h=n[9],d=n[13],p=n[2],f=n[6],m=n[10],g=n[14],v=n[3],y=n[7],_=n[11],x=n[15],b=r[0],w=r[4],M=r[8],S=r[12],T=r[1],E=r[5],A=r[9],R=r[13],C=r[2],L=r[6],O=r[10],P=r[14],I=r[3],D=r[7],N=r[11],k=r[15];return i[0]=s*b+o*T+a*C+c*I,i[4]=s*w+o*E+a*L+c*D,i[8]=s*M+o*A+a*O+c*N,i[12]=s*S+o*R+a*P+c*k,i[1]=l*b+u*T+h*C+d*I,i[5]=l*w+u*E+h*L+d*D,i[9]=l*M+u*A+h*O+d*N,i[13]=l*S+u*R+h*P+d*k,i[2]=p*b+f*T+m*C+g*I,i[6]=p*w+f*E+m*L+g*D,i[10]=p*M+f*A+m*O+g*N,i[14]=p*S+f*R+m*P+g*k,i[3]=v*b+y*T+_*C+x*I,i[7]=v*w+y*E+_*L+x*D,i[11]=v*M+y*A+_*O+x*N,i[15]=v*S+y*R+_*P+x*k,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],s=e[1],o=e[5],a=e[9],c=e[13],l=e[2],u=e[6],h=e[10],d=e[14],p=e[3],f=e[7],m=e[11],g=e[15];return p*(+i*a*u-r*c*u-i*o*h+n*c*h+r*o*d-n*a*d)+f*(+t*a*d-t*c*h+i*s*h-r*s*d+r*c*l-i*a*l)+m*(+t*c*u-t*o*d-i*s*u+n*s*d+i*o*l-n*c*l)+g*(-r*o*l-t*a*u+t*o*h+r*s*u-n*s*h+n*a*l)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],o=e[5],a=e[6],c=e[7],l=e[8],u=e[9],h=e[10],d=e[11],p=e[12],f=e[13],m=e[14],g=e[15],v=u*m*c-f*h*c+f*a*d-o*m*d-u*a*g+o*h*g,y=p*h*c-l*m*c-p*a*d+s*m*d+l*a*g-s*h*g,_=l*f*c-p*u*c+p*o*d-s*f*d-l*o*g+s*u*g,x=p*u*a-l*f*a-p*o*h+s*f*h+l*o*m-s*u*m,b=t*v+n*y+r*_+i*x;if(0===b)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/b;return e[0]=v*w,e[1]=(f*h*i-u*m*i-f*r*d+n*m*d+u*r*g-n*h*g)*w,e[2]=(o*m*i-f*a*i+f*r*c-n*m*c-o*r*g+n*a*g)*w,e[3]=(u*a*i-o*h*i-u*r*c+n*h*c+o*r*d-n*a*d)*w,e[4]=y*w,e[5]=(l*m*i-p*h*i+p*r*d-t*m*d-l*r*g+t*h*g)*w,e[6]=(p*a*i-s*m*i-p*r*c+t*m*c+s*r*g-t*a*g)*w,e[7]=(s*h*i-l*a*i+l*r*c-t*h*c-s*r*d+t*a*d)*w,e[8]=_*w,e[9]=(p*u*i-l*f*i-p*n*d+t*f*d+l*n*g-t*u*g)*w,e[10]=(s*f*i-p*o*i+p*n*c-t*f*c-s*n*g+t*o*g)*w,e[11]=(l*o*i-s*u*i-l*n*c+t*u*c+s*n*d-t*o*d)*w,e[12]=x*w,e[13]=(l*f*r-p*u*r+p*n*h-t*f*h-l*n*m+t*u*m)*w,e[14]=(p*o*r-s*f*r-p*n*a+t*f*a+s*n*m-t*o*m)*w,e[15]=(s*u*r-l*o*r+l*n*a-t*u*a-s*n*h+t*o*h)*w,this}scale(e){const t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),i=1-n,s=e.x,o=e.y,a=e.z,c=i*s,l=i*o;return this.set(c*s+n,c*o-r*a,c*a+r*o,0,c*o+r*a,l*o+n,l*a-r*s,0,c*a-r*o,l*a+r*s,i*a*a+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,i,s){return this.set(1,n,i,0,e,1,s,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,i=t._x,s=t._y,o=t._z,a=t._w,c=i+i,l=s+s,u=o+o,h=i*c,d=i*l,p=i*u,f=s*l,m=s*u,g=o*u,v=a*c,y=a*l,_=a*u,x=n.x,b=n.y,w=n.z;return r[0]=(1-(f+g))*x,r[1]=(d+_)*x,r[2]=(p-y)*x,r[3]=0,r[4]=(d-_)*b,r[5]=(1-(h+g))*b,r[6]=(m+v)*b,r[7]=0,r[8]=(p+y)*w,r[9]=(m-v)*w,r[10]=(1-(h+f))*w,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let i=fr.set(r[0],r[1],r[2]).length();const s=fr.set(r[4],r[5],r[6]).length(),o=fr.set(r[8],r[9],r[10]).length(),a=this.determinant();a<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],mr.copy(this);const c=1/i,l=1/s,u=1/o;return mr.elements[0]*=c,mr.elements[1]*=c,mr.elements[2]*=c,mr.elements[4]*=l,mr.elements[5]*=l,mr.elements[6]*=l,mr.elements[8]*=u,mr.elements[9]*=u,mr.elements[10]*=u,t.setFromRotationMatrix(mr),n.x=i,n.y=s,n.z=o,this}makePerspective(e,t,n,r,i,s){void 0===s&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const o=this.elements,a=2*i/(t-e),c=2*i/(n-r),l=(t+e)/(t-e),u=(n+r)/(n-r),h=-(s+i)/(s-i),d=-2*s*i/(s-i);return o[0]=a,o[4]=0,o[8]=l,o[12]=0,o[1]=0,o[5]=c,o[9]=u,o[13]=0,o[2]=0,o[6]=0,o[10]=h,o[14]=d,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(e,t,n,r,i,s){const o=this.elements,a=1/(t-e),c=1/(n-r),l=1/(s-i),u=(t+e)*a,h=(n+r)*c,d=(s+i)*l;return o[0]=2*a,o[4]=0,o[8]=0,o[12]=-u,o[1]=0,o[5]=2*c,o[9]=0,o[13]=-h,o[2]=0,o[6]=0,o[10]=-2*l,o[14]=-d,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}pr.prototype.isMatrix4=!0;const fr=new kn,mr=new pr,gr=new kn(0,0,0),vr=new kn(1,1,1),yr=new kn,_r=new kn,xr=new kn,br=new pr,wr=new Nn;class Mr{constructor(e=0,t=0,n=0,r=Mr.DefaultOrder){this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const r=e.elements,i=r[0],s=r[4],o=r[8],a=r[1],c=r[5],l=r[9],u=r[2],h=r[6],d=r[10];switch(t){case"XYZ":this._y=Math.asin(Gt(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-l,d),this._z=Math.atan2(-s,i)):(this._x=Math.atan2(h,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Gt(l,-1,1)),Math.abs(l)<.9999999?(this._y=Math.atan2(o,d),this._z=Math.atan2(a,c)):(this._y=Math.atan2(-u,i),this._z=0);break;case"ZXY":this._x=Math.asin(Gt(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-u,d),this._z=Math.atan2(-s,c)):(this._y=0,this._z=Math.atan2(a,i));break;case"ZYX":this._y=Math.asin(-Gt(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(a,i)):(this._x=0,this._z=Math.atan2(-s,c));break;case"YZX":this._z=Math.asin(Gt(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-l,c),this._y=Math.atan2(-u,i)):(this._x=0,this._y=Math.atan2(o,d));break;case"XZY":this._z=Math.asin(-Gt(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(h,c),this._y=Math.atan2(o,i)):(this._x=Math.atan2(-l,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return br.makeRotationFromQuaternion(e),this.setFromRotationMatrix(br,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return wr.setFromEuler(this),this.setFromQuaternion(wr,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}Mr.prototype.isEuler=!0,Mr.DefaultOrder="XYZ",Mr.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Sr{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!==(this.mask&e.mask)}isEnabled(e){return 0!==(this.mask&(1<<e|0))}}let Tr=0;const Er=new kn,Ar=new Nn,Rr=new pr,Cr=new kn,Lr=new kn,Or=new kn,Pr=new Nn,Ir=new kn(1,0,0),Dr=new kn(0,1,0),Nr=new kn(0,0,1),kr={type:"added"},Fr={type:"removed"};class Ur extends Ut{constructor(){super(),Object.defineProperty(this,"id",{value:Tr++}),this.uuid=Vt(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Ur.DefaultUp.clone();const e=new kn,t=new Mr,n=new Nn,r=new kn(1,1,1);function i(){n.setFromEuler(t,!1)}function s(){t.setFromQuaternion(n,void 0,!1)}t._onChange(i),n._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new pr},normalMatrix:{value:new dn}}),this.matrix=new pr,this.matrixWorld=new pr,this.matrixAutoUpdate=Ur.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Sr,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Ar.setFromAxisAngle(e,t),this.quaternion.multiply(Ar),this}rotateOnWorldAxis(e,t){return Ar.setFromAxisAngle(e,t),this.quaternion.premultiply(Ar),this}rotateX(e){return this.rotateOnAxis(Ir,e)}rotateY(e){return this.rotateOnAxis(Dr,e)}rotateZ(e){return this.rotateOnAxis(Nr,e)}translateOnAxis(e,t){return Er.copy(e).applyQuaternion(this.quaternion),this.position.add(Er.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(Ir,e)}translateY(e){return this.translateOnAxis(Dr,e)}translateZ(e){return this.translateOnAxis(Nr,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(Rr.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?Cr.copy(e):Cr.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),Lr.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Rr.lookAt(Lr,Cr,this.up):Rr.lookAt(Cr,Lr,this.up),this.quaternion.setFromRotationMatrix(Rr),r&&(Rr.extractRotation(r.matrixWorld),Ar.setFromRotationMatrix(Rr),this.quaternion.premultiply(Ar.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(kr)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(Fr)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(Fr)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Rr.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Rr.multiply(e.parent.matrixWorld)),e.applyMatrix4(Rr),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n],i=r.getObjectByProperty(e,t);if(void 0!==i)return i}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Lr,e,Or),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Lr,Pr,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++)e[t].updateWorldMatrix(!1,!0)}}toJSON(e){const t=void 0===e||"string"===typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const r=n[t];i(e.shapes,r)}else i(e.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,r=this.material.length;n<r;n++)t.push(i(e.materials,this.material[n]));r.material=t}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(let t=0;t<this.children.length;t++)r.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let t=0;t<this.animations.length;t++){const n=this.animations[t];r.animations.push(i(e.animations,n))}}if(t){const t=s(e.geometries),r=s(e.materials),i=s(e.textures),o=s(e.images),a=s(e.shapes),c=s(e.skeletons),l=s(e.animations),u=s(e.nodes);t.length>0&&(n.geometries=t),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),o.length>0&&(n.images=o),a.length>0&&(n.shapes=a),c.length>0&&(n.skeletons=c),l.length>0&&(n.animations=l),u.length>0&&(n.nodes=u)}return n.object=r,n;function s(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let n=0;n<e.children.length;n++){const t=e.children[n];this.add(t.clone())}return this}}Ur.DefaultUp=new kn(0,1,0),Ur.DefaultMatrixAutoUpdate=!0,Ur.prototype.isObject3D=!0;const Br=new kn,zr=new kn,Hr=new kn,jr=new kn,Vr=new kn,Gr=new kn,Wr=new kn,qr=new kn,Xr=new kn,Yr=new kn;class Kr{constructor(e=new kn,t=new kn,n=new kn){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),Br.subVectors(e,t),r.cross(Br);const i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(e,t,n,r,i){Br.subVectors(r,t),zr.subVectors(n,t),Hr.subVectors(e,t);const s=Br.dot(Br),o=Br.dot(zr),a=Br.dot(Hr),c=zr.dot(zr),l=zr.dot(Hr),u=s*c-o*o;if(0===u)return i.set(-2,-1,-1);const h=1/u,d=(c*a-o*l)*h,p=(s*l-o*a)*h;return i.set(1-d-p,p,d)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,jr),jr.x>=0&&jr.y>=0&&jr.x+jr.y<=1}static getUV(e,t,n,r,i,s,o,a){return this.getBarycoord(e,t,n,r,jr),a.set(0,0),a.addScaledVector(i,jr.x),a.addScaledVector(s,jr.y),a.addScaledVector(o,jr.z),a}static isFrontFacing(e,t,n,r){return Br.subVectors(n,t),zr.subVectors(e,t),Br.cross(zr).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Br.subVectors(this.c,this.b),zr.subVectors(this.a,this.b),.5*Br.cross(zr).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Kr.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Kr.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,r,i){return Kr.getUV(e,this.a,this.b,this.c,t,n,r,i)}containsPoint(e){return Kr.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Kr.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,i=this.c;let s,o;Vr.subVectors(r,n),Gr.subVectors(i,n),qr.subVectors(e,n);const a=Vr.dot(qr),c=Gr.dot(qr);if(a<=0&&c<=0)return t.copy(n);Xr.subVectors(e,r);const l=Vr.dot(Xr),u=Gr.dot(Xr);if(l>=0&&u<=l)return t.copy(r);const h=a*u-l*c;if(h<=0&&a>=0&&l<=0)return s=a/(a-l),t.copy(n).addScaledVector(Vr,s);Yr.subVectors(e,i);const d=Vr.dot(Yr),p=Gr.dot(Yr);if(p>=0&&d<=p)return t.copy(i);const f=d*c-a*p;if(f<=0&&c>=0&&p<=0)return o=c/(c-p),t.copy(n).addScaledVector(Gr,o);const m=l*p-d*u;if(m<=0&&u-l>=0&&d-p>=0)return Wr.subVectors(i,r),o=(u-l)/(u-l+(d-p)),t.copy(r).addScaledVector(Wr,o);const g=1/(m+f+h);return s=f*g,o=h*g,t.copy(n).addScaledVector(Vr,s).addScaledVector(Gr,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let Jr=0;class Zr extends Ut{constructor(){super(),Object.defineProperty(this,"id",{value:Jr++}),this.uuid=Vt(),this.name="",this.type="Material",this.fog=!0,this.blending=v,this.side=d,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=O,this.blendDst=P,this.blendEquation=w,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=H,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=It,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Pt,this.stencilZFail=Pt,this.stencilZPass=Pt,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!==e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if("shading"===t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===m;continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){const t=void 0===e||"string"===typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==v&&(n.blending=this.blending),this.side!==d&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){const t=r(e.textures),i=r(e.images);t.length>0&&(n.textures=t),i.length>0&&(n.images=i)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let r=0;r!==e;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}Zr.prototype.isMaterial=!0,Zr.fromType=function(){return null};class $r extends Zr{constructor(e){super(),this.type="MeshBasicMaterial",this.color=new bn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=q,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}$r.prototype.isMeshBasicMaterial=!0;const Qr=new kn,ei=new hn;class ti{constructor(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.usage=Dt,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),i=new bn),t[n++]=i.r,t[n++]=i.g,t[n++]=i.b}return this}copyVector2sArray(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),i=new hn),t[n++]=i.x,t[n++]=i.y}return this}copyVector3sArray(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),i=new kn),t[n++]=i.x,t[n++]=i.y,t[n++]=i.z}return this}copyVector4sArray(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),i=new Rn),t[n++]=i.x,t[n++]=i.y,t[n++]=i.z,t[n++]=i.w}return this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)ei.fromBufferAttribute(this,t),ei.applyMatrix3(e),this.setXY(t,ei.x,ei.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)Qr.fromBufferAttribute(this,t),Qr.applyMatrix3(e),this.setXYZ(t,Qr.x,Qr.y,Qr.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)Qr.x=this.getX(t),Qr.y=this.getY(t),Qr.z=this.getZ(t),Qr.applyMatrix4(e),this.setXYZ(t,Qr.x,Qr.y,Qr.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Qr.x=this.getX(t),Qr.y=this.getY(t),Qr.z=this.getZ(t),Qr.applyNormalMatrix(e),this.setXYZ(t,Qr.x,Qr.y,Qr.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Qr.x=this.getX(t),Qr.y=this.getY(t),Qr.z=this.getZ(t),Qr.transformDirection(e),this.setXYZ(t,Qr.x,Qr.y,Qr.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==Dt&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}}ti.prototype.isBufferAttribute=!0;class ni extends ti{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class ri extends ti{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class ii extends ti{constructor(e,t,n){super(new Uint16Array(e),t,n)}}ii.prototype.isFloat16BufferAttribute=!0;class si extends ti{constructor(e,t,n){super(new Float32Array(e),t,n)}}let oi=0;const ai=new pr,ci=new Ur,li=new kn,ui=new Bn,hi=new Bn,di=new kn;class pi extends Ut{constructor(){super(),Object.defineProperty(this,"id",{value:oi++}),this.uuid=Vt(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(pn(e)?ri:ni)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new dn).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return ai.makeRotationFromQuaternion(e),this.applyMatrix4(ai),this}rotateX(e){return ai.makeRotationX(e),this.applyMatrix4(ai),this}rotateY(e){return ai.makeRotationY(e),this.applyMatrix4(ai),this}rotateZ(e){return ai.makeRotationZ(e),this.applyMatrix4(ai),this}translate(e,t,n){return ai.makeTranslation(e,t,n),this.applyMatrix4(ai),this}scale(e,t,n){return ai.makeScale(e,t,n),this.applyMatrix4(ai),this}lookAt(e){return ci.lookAt(e),ci.updateMatrix(),this.applyMatrix4(ci.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(li).negate(),this.translate(li.x,li.y,li.z),this}setFromPoints(e){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n];t.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new si(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Bn);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new kn(-1/0,-1/0,-1/0),new kn(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,r=t.length;n<r;n++){const e=t[n];ui.setFromBufferAttribute(e),this.morphTargetsRelative?(di.addVectors(this.boundingBox.min,ui.min),this.boundingBox.expandByPoint(di),di.addVectors(this.boundingBox.max,ui.max),this.boundingBox.expandByPoint(di)):(this.boundingBox.expandByPoint(ui.min),this.boundingBox.expandByPoint(ui.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new ir);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new kn,1/0);if(e){const n=this.boundingSphere.center;if(ui.setFromBufferAttribute(e),t)for(let e=0,i=t.length;e<i;e++){const n=t[e];hi.setFromBufferAttribute(n),this.morphTargetsRelative?(di.addVectors(ui.min,hi.min),ui.expandByPoint(di),di.addVectors(ui.max,hi.max),ui.expandByPoint(di)):(ui.expandByPoint(hi.min),ui.expandByPoint(hi.max))}ui.getCenter(n);let r=0;for(let t=0,i=e.count;t<i;t++)di.fromBufferAttribute(e,t),r=Math.max(r,n.distanceToSquared(di));if(t)for(let i=0,s=t.length;i<s;i++){const s=t[i],o=this.morphTargetsRelative;for(let t=0,i=s.count;t<i;t++)di.fromBufferAttribute(s,t),o&&(li.fromBufferAttribute(e,t),di.add(li)),r=Math.max(r,n.distanceToSquared(di))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=e.array,r=t.position.array,i=t.normal.array,s=t.uv.array,o=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new ti(new Float32Array(4*o),4));const a=this.getAttribute("tangent").array,c=[],l=[];for(let T=0;T<o;T++)c[T]=new kn,l[T]=new kn;const u=new kn,h=new kn,d=new kn,p=new hn,f=new hn,m=new hn,g=new kn,v=new kn;function y(e,t,n){u.fromArray(r,3*e),h.fromArray(r,3*t),d.fromArray(r,3*n),p.fromArray(s,2*e),f.fromArray(s,2*t),m.fromArray(s,2*n),h.sub(u),d.sub(u),f.sub(p),m.sub(p);const i=1/(f.x*m.y-m.x*f.y);isFinite(i)&&(g.copy(h).multiplyScalar(m.y).addScaledVector(d,-f.y).multiplyScalar(i),v.copy(d).multiplyScalar(f.x).addScaledVector(h,-m.x).multiplyScalar(i),c[e].add(g),c[t].add(g),c[n].add(g),l[e].add(v),l[t].add(v),l[n].add(v))}let _=this.groups;0===_.length&&(_=[{start:0,count:n.length}]);for(let T=0,E=_.length;T<E;++T){const e=_[T],t=e.start,r=e.count;for(let i=t,s=t+r;i<s;i+=3)y(n[i+0],n[i+1],n[i+2])}const x=new kn,b=new kn,w=new kn,M=new kn;function S(e){w.fromArray(i,3*e),M.copy(w);const t=c[e];x.copy(t),x.sub(w.multiplyScalar(w.dot(t))).normalize(),b.crossVectors(M,t);const n=b.dot(l[e]),r=n<0?-1:1;a[4*e]=x.x,a[4*e+1]=x.y,a[4*e+2]=x.z,a[4*e+3]=r}for(let T=0,E=_.length;T<E;++T){const e=_[T],t=e.start,r=e.count;for(let i=t,s=t+r;i<s;i+=3)S(n[i+0]),S(n[i+1]),S(n[i+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new ti(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const r=new kn,i=new kn,s=new kn,o=new kn,a=new kn,c=new kn,l=new kn,u=new kn;if(e)for(let h=0,d=e.count;h<d;h+=3){const d=e.getX(h+0),p=e.getX(h+1),f=e.getX(h+2);r.fromBufferAttribute(t,d),i.fromBufferAttribute(t,p),s.fromBufferAttribute(t,f),l.subVectors(s,i),u.subVectors(r,i),l.cross(u),o.fromBufferAttribute(n,d),a.fromBufferAttribute(n,p),c.fromBufferAttribute(n,f),o.add(l),a.add(l),c.add(l),n.setXYZ(d,o.x,o.y,o.z),n.setXYZ(p,a.x,a.y,a.z),n.setXYZ(f,c.x,c.y,c.z)}else for(let e=0,h=t.count;e<h;e+=3)r.fromBufferAttribute(t,e+0),i.fromBufferAttribute(t,e+1),s.fromBufferAttribute(t,e+2),l.subVectors(s,i),u.subVectors(r,i),l.cross(u),n.setXYZ(e+0,l.x,l.y,l.z),n.setXYZ(e+1,l.x,l.y,l.z),n.setXYZ(e+2,l.x,l.y,l.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(e,t){if(!e||!e.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const n=this.attributes;for(const r in n){if(void 0===e.attributes[r])continue;const i=n[r],s=i.array,o=e.attributes[r],a=o.array,c=o.itemSize*t,l=Math.min(a.length,s.length-c);for(let e=0,t=c;e<l;e++,t++)s[t]=a[e]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)di.fromBufferAttribute(e,t),di.normalize(),e.setXYZ(t,di.x,di.y,di.z)}toNonIndexed(){function e(e,t){const n=e.array,r=e.itemSize,i=e.normalized,s=new n.constructor(t.length*r);let o=0,a=0;for(let c=0,l=t.length;c<l;c++){o=e.isInterleavedBufferAttribute?t[c]*e.data.stride+e.offset:t[c]*r;for(let e=0;e<r;e++)s[a++]=n[o++]}return new ti(s,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new pi,n=this.index.array,r=this.attributes;for(const o in r){const i=r[o],s=e(i,n);t.setAttribute(o,s)}const i=this.morphAttributes;for(const o in i){const r=[],s=i[o];for(let t=0,i=s.length;t<i;t++){const i=s[t],o=e(i,n);r.push(o)}t.morphAttributes[o]=r}t.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let o=0,a=s.length;o<a;o++){const e=s[o];t.addGroup(e.start,e.count,e.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const a in n){const t=n[a];e.data.attributes[a]=t.toJSON(e.data)}const r={};let i=!1;for(const a in this.morphAttributes){const t=this.morphAttributes[a],n=[];for(let r=0,i=t.length;r<i;r++){const i=t[r];n.push(i.toJSON(e.data))}n.length>0&&(r[a]=n,i=!0)}i&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const o=this.boundingSphere;return null!==o&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const r=e.attributes;for(const c in r){const e=r[c];this.setAttribute(c,e.clone(t))}const i=e.morphAttributes;for(const c in i){const e=[],n=i[c];for(let r=0,i=n.length;r<i;r++)e.push(n[r].clone(t));this.morphAttributes[c]=e}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let c=0,l=s.length;c<l;c++){const e=s[c];this.addGroup(e.start,e.count,e.materialIndex)}const o=e.boundingBox;null!==o&&(this.boundingBox=o.clone());const a=e.boundingSphere;return null!==a&&(this.boundingSphere=a.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}pi.prototype.isBufferGeometry=!0;const fi=new pr,mi=new dr,gi=new ir,vi=new kn,yi=new kn,_i=new kn,xi=new kn,bi=new kn,wi=new kn,Mi=new kn,Si=new kn,Ti=new kn,Ei=new hn,Ai=new hn,Ri=new hn,Ci=new kn,Li=new kn;class Oi extends Ur{constructor(e=new pi,t=new $r){super(),this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(e,t){const n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0===r)return;if(null===n.boundingSphere&&n.computeBoundingSphere(),gi.copy(n.boundingSphere),gi.applyMatrix4(i),!1===e.ray.intersectsSphere(gi))return;if(fi.copy(i).invert(),mi.copy(e.ray).applyMatrix4(fi),null!==n.boundingBox&&!1===mi.intersectsBox(n.boundingBox))return;let s;if(n.isBufferGeometry){const i=n.index,o=n.attributes.position,a=n.morphAttributes.position,c=n.morphTargetsRelative,l=n.attributes.uv,u=n.attributes.uv2,h=n.groups,d=n.drawRange;if(null!==i)if(Array.isArray(r))for(let n=0,p=h.length;n<p;n++){const p=h[n],f=r[p.materialIndex],m=Math.max(p.start,d.start),g=Math.min(i.count,Math.min(p.start+p.count,d.start+d.count));for(let n=m,r=g;n<r;n+=3){const r=i.getX(n),h=i.getX(n+1),d=i.getX(n+2);s=Ii(this,f,e,mi,o,a,c,l,u,r,h,d),s&&(s.faceIndex=Math.floor(n/3),s.face.materialIndex=p.materialIndex,t.push(s))}}else{const n=Math.max(0,d.start),h=Math.min(i.count,d.start+d.count);for(let d=n,p=h;d<p;d+=3){const n=i.getX(d),h=i.getX(d+1),p=i.getX(d+2);s=Ii(this,r,e,mi,o,a,c,l,u,n,h,p),s&&(s.faceIndex=Math.floor(d/3),t.push(s))}}else if(void 0!==o)if(Array.isArray(r))for(let n=0,p=h.length;n<p;n++){const i=h[n],p=r[i.materialIndex],f=Math.max(i.start,d.start),m=Math.min(o.count,Math.min(i.start+i.count,d.start+d.count));for(let n=f,r=m;n<r;n+=3){const r=n,h=n+1,d=n+2;s=Ii(this,p,e,mi,o,a,c,l,u,r,h,d),s&&(s.faceIndex=Math.floor(n/3),s.face.materialIndex=i.materialIndex,t.push(s))}}else{const n=Math.max(0,d.start),i=Math.min(o.count,d.start+d.count);for(let h=n,d=i;h<d;h+=3){const n=h,i=h+1,d=h+2;s=Ii(this,r,e,mi,o,a,c,l,u,n,i,d),s&&(s.faceIndex=Math.floor(h/3),t.push(s))}}}else n.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}function Pi(e,t,n,r,i,s,o,a){let c;if(c=t.side===p?r.intersectTriangle(o,s,i,!0,a):r.intersectTriangle(i,s,o,t.side!==f,a),null===c)return null;Li.copy(a),Li.applyMatrix4(e.matrixWorld);const l=n.ray.origin.distanceTo(Li);return l<n.near||l>n.far?null:{distance:l,point:Li.clone(),object:e}}function Ii(e,t,n,r,i,s,o,a,c,l,u,h){vi.fromBufferAttribute(i,l),yi.fromBufferAttribute(i,u),_i.fromBufferAttribute(i,h);const d=e.morphTargetInfluences;if(s&&d){Mi.set(0,0,0),Si.set(0,0,0),Ti.set(0,0,0);for(let e=0,t=s.length;e<t;e++){const t=d[e],n=s[e];0!==t&&(xi.fromBufferAttribute(n,l),bi.fromBufferAttribute(n,u),wi.fromBufferAttribute(n,h),o?(Mi.addScaledVector(xi,t),Si.addScaledVector(bi,t),Ti.addScaledVector(wi,t)):(Mi.addScaledVector(xi.sub(vi),t),Si.addScaledVector(bi.sub(yi),t),Ti.addScaledVector(wi.sub(_i),t)))}vi.add(Mi),yi.add(Si),_i.add(Ti)}e.isSkinnedMesh&&(e.boneTransform(l,vi),e.boneTransform(u,yi),e.boneTransform(h,_i));const p=Pi(e,t,n,r,vi,yi,_i,Ci);if(p){a&&(Ei.fromBufferAttribute(a,l),Ai.fromBufferAttribute(a,u),Ri.fromBufferAttribute(a,h),p.uv=Kr.getUV(Ci,vi,yi,_i,Ei,Ai,Ri,new hn)),c&&(Ei.fromBufferAttribute(c,l),Ai.fromBufferAttribute(c,u),Ri.fromBufferAttribute(c,h),p.uv2=Kr.getUV(Ci,vi,yi,_i,Ei,Ai,Ri,new hn));const e={a:l,b:u,c:h,normal:new kn,materialIndex:0};Kr.getNormal(vi,yi,_i,e.normal),p.face=e}return p}Oi.prototype.isMesh=!0;class Di extends pi{constructor(e=1,t=1,n=1,r=1,i=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:s};const o=this;r=Math.floor(r),i=Math.floor(i),s=Math.floor(s);const a=[],c=[],l=[],u=[];let h=0,d=0;function p(e,t,n,r,i,s,p,f,m,g,v){const y=s/m,_=p/g,x=s/2,b=p/2,w=f/2,M=m+1,S=g+1;let T=0,E=0;const A=new kn;for(let o=0;o<S;o++){const s=o*_-b;for(let a=0;a<M;a++){const h=a*y-x;A[e]=h*r,A[t]=s*i,A[n]=w,c.push(A.x,A.y,A.z),A[e]=0,A[t]=0,A[n]=f>0?1:-1,l.push(A.x,A.y,A.z),u.push(a/m),u.push(1-o/g),T+=1}}for(let o=0;o<g;o++)for(let e=0;e<m;e++){const t=h+e+M*o,n=h+e+M*(o+1),r=h+(e+1)+M*(o+1),i=h+(e+1)+M*o;a.push(t,n,i),a.push(n,r,i),E+=6}o.addGroup(d,E,v),d+=E,h+=T}p("z","y","x",-1,-1,n,t,e,s,i,0),p("z","y","x",1,-1,n,t,-e,s,i,1),p("x","z","y",1,1,e,n,t,r,s,2),p("x","z","y",1,-1,e,n,-t,r,s,3),p("x","y","z",1,-1,e,t,n,r,i,4),p("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(a),this.setAttribute("position",new si(c,3)),this.setAttribute("normal",new si(l,3)),this.setAttribute("uv",new si(u,2))}static fromJSON(e){return new Di(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Ni(e){const t={};for(const n in e){t[n]={};for(const r in e[n]){const i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}}return t}function ki(e){const t={};for(let n=0;n<e.length;n++){const r=Ni(e[n]);for(const e in r)t[e]=r[e]}return t}const Fi={clone:Ni,merge:ki};var Ui="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",Bi="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";class zi extends Zr{constructor(e){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=Ui,this.fragmentShader=Bi,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Ni(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const n=this.uniforms[r],i=n.value;i&&i.isTexture?t.uniforms[r]={type:"t",value:i.toJSON(e).uuid}:i&&i.isColor?t.uniforms[r]={type:"c",value:i.getHex()}:i&&i.isVector2?t.uniforms[r]={type:"v2",value:i.toArray()}:i&&i.isVector3?t.uniforms[r]={type:"v3",value:i.toArray()}:i&&i.isVector4?t.uniforms[r]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?t.uniforms[r]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?t.uniforms[r]={type:"m4",value:i.toArray()}:t.uniforms[r]={value:i}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const n={};for(const r in this.extensions)!0===this.extensions[r]&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}zi.prototype.isShaderMaterial=!0;class Hi extends Ur{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new pr,this.projectionMatrix=new pr,this.projectionMatrixInverse=new pr}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}Hi.prototype.isCamera=!0;class ji extends Hi{constructor(e=50,t=1,n=.1,r=2e3){super(),this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*jt*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*Ht*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*jt*Math.atan(Math.tan(.5*Ht*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,r,i,s){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*Ht*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r;const s=this.view;if(null!==this.view&&this.view.enabled){const e=s.fullWidth,o=s.fullHeight;i+=s.offsetX*r/e,t-=s.offsetY*n/o,r*=s.width/e,n*=s.height/o}const o=this.filmOffset;0!==o&&(i+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}ji.prototype.isPerspectiveCamera=!0;const Vi=90,Gi=1;class Wi extends Ur{constructor(e,t,n){if(super(),this.type="CubeCamera",!0!==n.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=n;const r=new ji(Vi,Gi,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new kn(1,0,0)),this.add(r);const i=new ji(Vi,Gi,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new kn(-1,0,0)),this.add(i);const s=new ji(Vi,Gi,e,t);s.layers=this.layers,s.up.set(0,0,1),s.lookAt(new kn(0,1,0)),this.add(s);const o=new ji(Vi,Gi,e,t);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(new kn(0,-1,0)),this.add(o);const a=new ji(Vi,Gi,e,t);a.layers=this.layers,a.up.set(0,-1,0),a.lookAt(new kn(0,0,1)),this.add(a);const c=new ji(Vi,Gi,e,t);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new kn(0,0,-1)),this.add(c)}update(e,t){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget,[r,i,s,o,a,c]=this.children,l=e.xr.enabled,u=e.getRenderTarget();e.xr.enabled=!1;const h=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,r),e.setRenderTarget(n,1),e.render(t,i),e.setRenderTarget(n,2),e.render(t,s),e.setRenderTarget(n,3),e.render(t,o),e.setRenderTarget(n,4),e.render(t,a),n.texture.generateMipmaps=h,e.setRenderTarget(n,5),e.render(t,c),e.setRenderTarget(u),e.xr.enabled=l,n.texture.needsPMREMUpdate=!0}}class qi extends An{constructor(e,t,n,r,i,s,o,a,c,l){e=void 0!==e?e:[],t=void 0!==t?t:ne,super(e,t,n,r,i,s,o,a,c,l),this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}qi.prototype.isCubeTexture=!0;class Xi extends Cn{constructor(e,t={}){super(e,e,t);const n={width:e,height:e,depth:1},r=[n,n,n,n,n,n];this.texture=new qi(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:fe}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.format=Le,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},r=new Di(5,5,5),i=new zi({name:"CubemapFromEquirect",uniforms:Ni(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:p,blending:g});i.uniforms.tEquirect.value=t;const s=new Oi(r,i),o=t.minFilter;t.minFilter===ge&&(t.minFilter=fe);const a=new Wi(1,10,this);return a.update(e,s),t.minFilter=o,s.geometry.dispose(),s.material.dispose(),this}clear(e,t,n,r){const i=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,n,r);e.setRenderTarget(i)}}Xi.prototype.isWebGLCubeRenderTarget=!0;const Yi=new kn,Ki=new kn,Ji=new dn;class Zi{constructor(e=new kn(1,0,0),t=0){this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=Yi.subVectors(n,t).cross(Ki.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const n=e.delta(Yi),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:t.copy(n).multiplyScalar(i).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||Ji.getNormalMatrix(e),r=this.coplanarPoint(Yi).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}Zi.prototype.isPlane=!0;const $i=new ir,Qi=new kn;class es{constructor(e=new Zi,t=new Zi,n=new Zi,r=new Zi,i=new Zi,s=new Zi){this.planes=[e,t,n,r,i,s]}set(e,t,n,r,i,s){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(r),o[4].copy(i),o[5].copy(s),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){const t=this.planes,n=e.elements,r=n[0],i=n[1],s=n[2],o=n[3],a=n[4],c=n[5],l=n[6],u=n[7],h=n[8],d=n[9],p=n[10],f=n[11],m=n[12],g=n[13],v=n[14],y=n[15];return t[0].setComponents(o-r,u-a,f-h,y-m).normalize(),t[1].setComponents(o+r,u+a,f+h,y+m).normalize(),t[2].setComponents(o+i,u+c,f+d,y+g).normalize(),t[3].setComponents(o-i,u-c,f-d,y-g).normalize(),t[4].setComponents(o-s,u-l,f-p,y-v).normalize(),t[5].setComponents(o+s,u+l,f+p,y+v).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),$i.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere($i)}intersectsSprite(e){return $i.center.set(0,0,0),$i.radius=.7071067811865476,$i.applyMatrix4(e.matrixWorld),this.intersectsSphere($i)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let i=0;i<6;i++){const e=t[i].distanceToPoint(n);if(e<r)return!1}return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(Qi.x=r.normal.x>0?e.max.x:e.min.x,Qi.y=r.normal.y>0?e.max.y:e.min.y,Qi.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Qi)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function ts(){let e=null,t=!1,n=null,r=null;function i(t,s){n(t,s),r=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function ns(e,t){const n=t.isWebGL2,r=new WeakMap;function i(t,r){const i=t.array,s=t.usage,o=e.createBuffer();let a;if(e.bindBuffer(r,o),e.bufferData(r,i,s),t.onUploadCallback(),i instanceof Float32Array)a=5126;else if(i instanceof Uint16Array)if(t.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");a=5131}else a=5123;else if(i instanceof Int16Array)a=5122;else if(i instanceof Uint32Array)a=5125;else if(i instanceof Int32Array)a=5124;else if(i instanceof Int8Array)a=5120;else if(i instanceof Uint8Array)a=5121;else{if(!(i instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+i);a=5121}return{buffer:o,type:a,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version}}function s(t,r,i){const s=r.array,o=r.updateRange;e.bindBuffer(i,t),-1===o.count?e.bufferSubData(i,0,s):(n?e.bufferSubData(i,o.offset*s.BYTES_PER_ELEMENT,s,o.offset,o.count):e.bufferSubData(i,o.offset*s.BYTES_PER_ELEMENT,s.subarray(o.offset,o.offset+o.count)),o.count=-1)}function o(e){return e.isInterleavedBufferAttribute&&(e=e.data),r.get(e)}function a(t){t.isInterleavedBufferAttribute&&(t=t.data);const n=r.get(t);n&&(e.deleteBuffer(n.buffer),r.delete(t))}function c(e,t){if(e.isGLBufferAttribute){const t=r.get(e);return void((!t||t.version<e.version)&&r.set(e,{buffer:e.buffer,type:e.type,bytesPerElement:e.elementSize,version:e.version}))}e.isInterleavedBufferAttribute&&(e=e.data);const n=r.get(e);void 0===n?r.set(e,i(e,t)):n.version<e.version&&(s(n.buffer,e,t),n.version=e.version)}return{get:o,remove:a,update:c}}class rs extends pi{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const i=e/2,s=t/2,o=Math.floor(n),a=Math.floor(r),c=o+1,l=a+1,u=e/o,h=t/a,d=[],p=[],f=[],m=[];for(let g=0;g<l;g++){const e=g*h-s;for(let t=0;t<c;t++){const n=t*u-i;p.push(n,-e,0),f.push(0,0,1),m.push(t/o),m.push(1-g/a)}}for(let g=0;g<a;g++)for(let e=0;e<o;e++){const t=e+c*g,n=e+c*(g+1),r=e+1+c*(g+1),i=e+1+c*g;d.push(t,n,i),d.push(n,r,i)}this.setIndex(d),this.setAttribute("position",new si(p,3)),this.setAttribute("normal",new si(f,3)),this.setAttribute("uv",new si(m,2))}static fromJSON(e){return new rs(e.width,e.height,e.widthSegments,e.heightSegments)}}var is="#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",ss="#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",os="#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",as="#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",cs="#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",ls="#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",us="vec3 transformed = vec3( position );",hs="vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",ds="vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",ps="#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",fs="#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",ms="#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",gs="#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",vs="#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",ys="#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",_s="#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",xs="#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",bs="#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",ws="#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",Ms="#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 ) + 0.5;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",Ss="vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",Ts="#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",Es="#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",As="#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",Rs="#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",Cs="gl_FragColor = linearToOutputTexel( gl_FragColor );",Ls="vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",Os="#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",Ps="#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",Is="#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",Ds="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",Ns="#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",ks="#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",Fs="#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",Us="#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",Bs="#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",zs="#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",Hs="#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tlightMapIrradiance *= PI;\n\t#endif\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",js="#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",Vs="vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",Gs="uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",Ws="#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec;\n\t\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\t\treflectVec = reflect( - viewDir, normal );\n\t\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\t#else\n\t\t\t\treflectVec = refract( - viewDir, normal, refractionRatio );\n\t\t\t#endif\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",qs="ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",Xs="varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",Ys="BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",Ks="varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",Js="PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",Zs="struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\tvec3 FssEss = specularColor * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",$s="\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",Qs="#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",eo="#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",to="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",no="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",ro="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",io="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",so="#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",oo="#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",ao="#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",co="#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",lo="float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",uo="#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",ho="#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ]\n\t\t#endif\n\t}\n#endif",po="#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",fo="#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform vec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tfloat texelIndex = float( vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset );\n\t\t\tfloat y = floor( texelIndex / morphTargetsTextureSize.x );\n\t\t\tfloat x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tvec3 morphUV = vec3( ( x + 0.5 ) / morphTargetsTextureSize.x, y / morphTargetsTextureSize.y, morphTargetIndex );\n\t\t\treturn texture( morphTargetsTexture, morphUV );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",mo="#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",go="float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",vo="#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",yo="#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",_o="#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",xo="#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",bo="#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",wo="#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",Mo="#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",So="#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",To="#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",Eo="vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",Ao="#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",Ro="vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",Co="#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",Lo="#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",Oo="float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",Po="#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",Io="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",Do="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",No="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",ko="float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",Fo="#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",Uo="#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",Bo="#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",zo="#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",Ho="float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",jo="#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",Vo="#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",Go="#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",Wo="#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",qo="#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",Xo="#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",Yo="#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",Ko="#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",Jo="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",Zo="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",$o="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",Qo="#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif";const ea="varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",ta="uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",na="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",ra="#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",ia="#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",sa="#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",oa="#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",aa="#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",ca="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",la="uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",ua="uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",ha="uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",da="#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",pa="uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",fa="#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",ma="uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",ga="#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",va="#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",ya="#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",_a="#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",xa="#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",ba="#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",wa="#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",Ma="#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Sa="#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",Ta="#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Ea="uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",Aa="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",Ra="#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",Ca="uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",La="uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",Oa="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",Pa={alphamap_fragment:is,alphamap_pars_fragment:ss,alphatest_fragment:os,alphatest_pars_fragment:as,aomap_fragment:cs,aomap_pars_fragment:ls,begin_vertex:us,beginnormal_vertex:hs,bsdfs:ds,bumpmap_pars_fragment:ps,clipping_planes_fragment:fs,clipping_planes_pars_fragment:ms,clipping_planes_pars_vertex:gs,clipping_planes_vertex:vs,color_fragment:ys,color_pars_fragment:_s,color_pars_vertex:xs,color_vertex:bs,common:ws,cube_uv_reflection_fragment:Ms,defaultnormal_vertex:Ss,displacementmap_pars_vertex:Ts,displacementmap_vertex:Es,emissivemap_fragment:As,emissivemap_pars_fragment:Rs,encodings_fragment:Cs,encodings_pars_fragment:Ls,envmap_fragment:Os,envmap_common_pars_fragment:Ps,envmap_pars_fragment:Is,envmap_pars_vertex:Ds,envmap_physical_pars_fragment:Ws,envmap_vertex:Ns,fog_vertex:ks,fog_pars_vertex:Fs,fog_fragment:Us,fog_pars_fragment:Bs,gradientmap_pars_fragment:zs,lightmap_fragment:Hs,lightmap_pars_fragment:js,lights_lambert_vertex:Vs,lights_pars_begin:Gs,lights_toon_fragment:qs,lights_toon_pars_fragment:Xs,lights_phong_fragment:Ys,lights_phong_pars_fragment:Ks,lights_physical_fragment:Js,lights_physical_pars_fragment:Zs,lights_fragment_begin:$s,lights_fragment_maps:Qs,lights_fragment_end:eo,logdepthbuf_fragment:to,logdepthbuf_pars_fragment:no,logdepthbuf_pars_vertex:ro,logdepthbuf_vertex:io,map_fragment:so,map_pars_fragment:oo,map_particle_fragment:ao,map_particle_pars_fragment:co,metalnessmap_fragment:lo,metalnessmap_pars_fragment:uo,morphcolor_vertex:ho,morphnormal_vertex:po,morphtarget_pars_vertex:fo,morphtarget_vertex:mo,normal_fragment_begin:go,normal_fragment_maps:vo,normal_pars_fragment:yo,normal_pars_vertex:_o,normal_vertex:xo,normalmap_pars_fragment:bo,clearcoat_normal_fragment_begin:wo,clearcoat_normal_fragment_maps:Mo,clearcoat_pars_fragment:So,output_fragment:To,packing:Eo,premultiplied_alpha_fragment:Ao,project_vertex:Ro,dithering_fragment:Co,dithering_pars_fragment:Lo,roughnessmap_fragment:Oo,roughnessmap_pars_fragment:Po,shadowmap_pars_fragment:Io,shadowmap_pars_vertex:Do,shadowmap_vertex:No,shadowmask_pars_fragment:ko,skinbase_vertex:Fo,skinning_pars_vertex:Uo,skinning_vertex:Bo,skinnormal_vertex:zo,specularmap_fragment:Ho,specularmap_pars_fragment:jo,tonemapping_fragment:Vo,tonemapping_pars_fragment:Go,transmission_fragment:Wo,transmission_pars_fragment:qo,uv_pars_fragment:Xo,uv_pars_vertex:Yo,uv_vertex:Ko,uv2_pars_fragment:Jo,uv2_pars_vertex:Zo,uv2_vertex:$o,worldpos_vertex:Qo,background_vert:ea,background_frag:ta,cube_vert:na,cube_frag:ra,depth_vert:ia,depth_frag:sa,distanceRGBA_vert:oa,distanceRGBA_frag:aa,equirect_vert:ca,equirect_frag:la,linedashed_vert:ua,linedashed_frag:ha,meshbasic_vert:da,meshbasic_frag:pa,meshlambert_vert:fa,meshlambert_frag:ma,meshmatcap_vert:ga,meshmatcap_frag:va,meshnormal_vert:ya,meshnormal_frag:_a,meshphong_vert:xa,meshphong_frag:ba,meshphysical_vert:wa,meshphysical_frag:Ma,meshtoon_vert:Sa,meshtoon_frag:Ta,points_vert:Ea,points_frag:Aa,shadow_vert:Ra,shadow_frag:Ca,sprite_vert:La,sprite_frag:Oa},Ia={common:{diffuse:{value:new bn(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new dn},uv2Transform:{value:new dn},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new hn(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new bn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new bn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new dn}},sprite:{diffuse:{value:new bn(16777215)},opacity:{value:1},center:{value:new hn(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new dn}}},Da={basic:{uniforms:ki([Ia.common,Ia.specularmap,Ia.envmap,Ia.aomap,Ia.lightmap,Ia.fog]),vertexShader:Pa.meshbasic_vert,fragmentShader:Pa.meshbasic_frag},lambert:{uniforms:ki([Ia.common,Ia.specularmap,Ia.envmap,Ia.aomap,Ia.lightmap,Ia.emissivemap,Ia.fog,Ia.lights,{emissive:{value:new bn(0)}}]),vertexShader:Pa.meshlambert_vert,fragmentShader:Pa.meshlambert_frag},phong:{uniforms:ki([Ia.common,Ia.specularmap,Ia.envmap,Ia.aomap,Ia.lightmap,Ia.emissivemap,Ia.bumpmap,Ia.normalmap,Ia.displacementmap,Ia.fog,Ia.lights,{emissive:{value:new bn(0)},specular:{value:new bn(1118481)},shininess:{value:30}}]),vertexShader:Pa.meshphong_vert,fragmentShader:Pa.meshphong_frag},standard:{uniforms:ki([Ia.common,Ia.envmap,Ia.aomap,Ia.lightmap,Ia.emissivemap,Ia.bumpmap,Ia.normalmap,Ia.displacementmap,Ia.roughnessmap,Ia.metalnessmap,Ia.fog,Ia.lights,{emissive:{value:new bn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Pa.meshphysical_vert,fragmentShader:Pa.meshphysical_frag},toon:{uniforms:ki([Ia.common,Ia.aomap,Ia.lightmap,Ia.emissivemap,Ia.bumpmap,Ia.normalmap,Ia.displacementmap,Ia.gradientmap,Ia.fog,Ia.lights,{emissive:{value:new bn(0)}}]),vertexShader:Pa.meshtoon_vert,fragmentShader:Pa.meshtoon_frag},matcap:{uniforms:ki([Ia.common,Ia.bumpmap,Ia.normalmap,Ia.displacementmap,Ia.fog,{matcap:{value:null}}]),vertexShader:Pa.meshmatcap_vert,fragmentShader:Pa.meshmatcap_frag},points:{uniforms:ki([Ia.points,Ia.fog]),vertexShader:Pa.points_vert,fragmentShader:Pa.points_frag},dashed:{uniforms:ki([Ia.common,Ia.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Pa.linedashed_vert,fragmentShader:Pa.linedashed_frag},depth:{uniforms:ki([Ia.common,Ia.displacementmap]),vertexShader:Pa.depth_vert,fragmentShader:Pa.depth_frag},normal:{uniforms:ki([Ia.common,Ia.bumpmap,Ia.normalmap,Ia.displacementmap,{opacity:{value:1}}]),vertexShader:Pa.meshnormal_vert,fragmentShader:Pa.meshnormal_frag},sprite:{uniforms:ki([Ia.sprite,Ia.fog]),vertexShader:Pa.sprite_vert,fragmentShader:Pa.sprite_frag},background:{uniforms:{uvTransform:{value:new dn},t2D:{value:null}},vertexShader:Pa.background_vert,fragmentShader:Pa.background_frag},cube:{uniforms:ki([Ia.envmap,{opacity:{value:1}}]),vertexShader:Pa.cube_vert,fragmentShader:Pa.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Pa.equirect_vert,fragmentShader:Pa.equirect_frag},distanceRGBA:{uniforms:ki([Ia.common,Ia.displacementmap,{referencePosition:{value:new kn},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Pa.distanceRGBA_vert,fragmentShader:Pa.distanceRGBA_frag},shadow:{uniforms:ki([Ia.lights,Ia.fog,{color:{value:new bn(0)},opacity:{value:1}}]),vertexShader:Pa.shadow_vert,fragmentShader:Pa.shadow_frag}};function Na(e,t,n,r,i,s){const o=new bn(0);let a,c,l=!0===i?0:1,u=null,h=0,f=null;function m(n,i){let s=!1,m=!0===i.isScene?i.background:null;m&&m.isTexture&&(m=t.get(m));const v=e.xr,y=v.getSession&&v.getSession();y&&"additive"===y.environmentBlendMode&&(m=null),null===m?g(o,l):m&&m.isColor&&(g(m,1),s=!0),(e.autoClear||s)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),m&&(m.isCubeTexture||m.mapping===oe)?(void 0===c&&(c=new Oi(new Di(1,1,1),new zi({name:"BackgroundCubeMaterial",uniforms:Ni(Da.cube.uniforms),vertexShader:Da.cube.vertexShader,fragmentShader:Da.cube.fragmentShader,side:p,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(c)),c.material.uniforms.envMap.value=m,c.material.uniforms.flipEnvMap.value=m.isCubeTexture&&!1===m.isRenderTargetTexture?-1:1,u===m&&h===m.version&&f===e.toneMapping||(c.material.needsUpdate=!0,u=m,h=m.version,f=e.toneMapping),n.unshift(c,c.geometry,c.material,0,0,null)):m&&m.isTexture&&(void 0===a&&(a=new Oi(new rs(2,2),new zi({name:"BackgroundMaterial",uniforms:Ni(Da.background.uniforms),vertexShader:Da.background.vertexShader,fragmentShader:Da.background.fragmentShader,side:d,depthTest:!1,depthWrite:!1,fog:!1})),a.geometry.deleteAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(a)),a.material.uniforms.t2D.value=m,!0===m.matrixAutoUpdate&&m.updateMatrix(),a.material.uniforms.uvTransform.value.copy(m.matrix),u===m&&h===m.version&&f===e.toneMapping||(a.material.needsUpdate=!0,u=m,h=m.version,f=e.toneMapping),n.unshift(a,a.geometry,a.material,0,0,null))}function g(e,t){n.buffers.color.setClear(e.r,e.g,e.b,t,s)}return{getClearColor:function(){return o},setClearColor:function(e,t=1){o.set(e),l=t,g(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(e){l=e,g(o,l)},render:m}}function ka(e,t,n,r){const i=e.getParameter(34921),s=r.isWebGL2?null:t.get("OES_vertex_array_object"),o=r.isWebGL2||null!==s,a={},c=m(null);let l=c;function u(t,r,i,s,a){let c=!1;if(o){const e=f(s,i,r);l!==e&&(l=e,d(l.object)),c=g(s,a),c&&v(s,a)}else{const e=!0===r.wireframe;l.geometry===s.id&&l.program===i.id&&l.wireframe===e||(l.geometry=s.id,l.program=i.id,l.wireframe=e,c=!0)}!0===t.isInstancedMesh&&(c=!0),null!==a&&n.update(a,34963),c&&(M(t,r,i,s),null!==a&&e.bindBuffer(34963,n.get(a).buffer))}function h(){return r.isWebGL2?e.createVertexArray():s.createVertexArrayOES()}function d(t){return r.isWebGL2?e.bindVertexArray(t):s.bindVertexArrayOES(t)}function p(t){return r.isWebGL2?e.deleteVertexArray(t):s.deleteVertexArrayOES(t)}function f(e,t,n){const r=!0===n.wireframe;let i=a[e.id];void 0===i&&(i={},a[e.id]=i);let s=i[t.id];void 0===s&&(s={},i[t.id]=s);let o=s[r];return void 0===o&&(o=m(h()),s[r]=o),o}function m(e){const t=[],n=[],r=[];for(let s=0;s<i;s++)t[s]=0,n[s]=0,r[s]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:r,object:e,attributes:{},index:null}}function g(e,t){const n=l.attributes,r=e.attributes;let i=0;for(const s in r){const e=n[s],t=r[s];if(void 0===e)return!0;if(e.attribute!==t)return!0;if(e.data!==t.data)return!0;i++}return l.attributesNum!==i||l.index!==t}function v(e,t){const n={},r=e.attributes;let i=0;for(const s in r){const e=r[s],t={};t.attribute=e,e.data&&(t.data=e.data),n[s]=t,i++}l.attributes=n,l.attributesNum=i,l.index=t}function y(){const e=l.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function _(e){x(e,0)}function x(n,i){const s=l.newAttributes,o=l.enabledAttributes,a=l.attributeDivisors;if(s[n]=1,0===o[n]&&(e.enableVertexAttribArray(n),o[n]=1),a[n]!==i){const s=r.isWebGL2?e:t.get("ANGLE_instanced_arrays");s[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),a[n]=i}}function b(){const t=l.newAttributes,n=l.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function w(t,n,i,s,o,a){!0!==r.isWebGL2||5124!==i&&5125!==i?e.vertexAttribPointer(t,n,i,s,o,a):e.vertexAttribIPointer(t,n,i,o,a)}function M(i,s,o,a){if(!1===r.isWebGL2&&(i.isInstancedMesh||a.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;y();const c=a.attributes,l=o.getAttributes(),u=s.defaultAttributeValues;for(const t in l){const r=l[t];if(r.location>=0){let s=c[t];if(void 0===s&&("instanceMatrix"===t&&i.instanceMatrix&&(s=i.instanceMatrix),"instanceColor"===t&&i.instanceColor&&(s=i.instanceColor)),void 0!==s){const t=s.normalized,o=s.itemSize,c=n.get(s);if(void 0===c)continue;const l=c.buffer,u=c.type,h=c.bytesPerElement;if(s.isInterleavedBufferAttribute){const n=s.data,c=n.stride,d=s.offset;if(n.isInstancedInterleavedBuffer){for(let e=0;e<r.locationSize;e++)x(r.location+e,n.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===a._maxInstanceCount&&(a._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let e=0;e<r.locationSize;e++)_(r.location+e);e.bindBuffer(34962,l);for(let e=0;e<r.locationSize;e++)w(r.location+e,o/r.locationSize,u,t,c*h,(d+o/r.locationSize*e)*h)}else{if(s.isInstancedBufferAttribute){for(let e=0;e<r.locationSize;e++)x(r.location+e,s.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===a._maxInstanceCount&&(a._maxInstanceCount=s.meshPerAttribute*s.count)}else for(let e=0;e<r.locationSize;e++)_(r.location+e);e.bindBuffer(34962,l);for(let e=0;e<r.locationSize;e++)w(r.location+e,o/r.locationSize,u,t,o*h,o/r.locationSize*e*h)}}else if(void 0!==u){const n=u[t];if(void 0!==n)switch(n.length){case 2:e.vertexAttrib2fv(r.location,n);break;case 3:e.vertexAttrib3fv(r.location,n);break;case 4:e.vertexAttrib4fv(r.location,n);break;default:e.vertexAttrib1fv(r.location,n)}}}}b()}function S(){A();for(const e in a){const t=a[e];for(const e in t){const n=t[e];for(const e in n)p(n[e].object),delete n[e];delete t[e]}delete a[e]}}function T(e){if(void 0===a[e.id])return;const t=a[e.id];for(const n in t){const e=t[n];for(const t in e)p(e[t].object),delete e[t];delete t[n]}delete a[e.id]}function E(e){for(const t in a){const n=a[t];if(void 0===n[e.id])continue;const r=n[e.id];for(const e in r)p(r[e].object),delete r[e];delete n[e.id]}}function A(){R(),l!==c&&(l=c,d(l.object))}function R(){c.geometry=null,c.program=null,c.wireframe=!1}return{setup:u,reset:A,resetDefaultState:R,dispose:S,releaseStatesOfGeometry:T,releaseStatesOfProgram:E,initAttributes:y,enableAttribute:_,disableUnusedAttributes:b}}function Fa(e,t,n,r){const i=r.isWebGL2;let s;function o(e){s=e}function a(t,r){e.drawArrays(s,t,r),n.update(r,s,1)}function c(r,o,a){if(0===a)return;let c,l;if(i)c=e,l="drawArraysInstanced";else if(c=t.get("ANGLE_instanced_arrays"),l="drawArraysInstancedANGLE",null===c)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[l](s,r,o,a),n.update(o,s,a)}this.setMode=o,this.render=a,this.renderInstances=c}function Ua(e,t,n){let r;function i(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){const n=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o="undefined"!==typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!==typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext;let a=void 0!==n.precision?n.precision:"highp";const c=s(a);c!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",c,"instead."),a=c);const l=o||t.has("WEBGL_draw_buffers"),u=!0===n.logarithmicDepthBuffer,h=e.getParameter(34930),d=e.getParameter(35660),p=e.getParameter(3379),f=e.getParameter(34076),m=e.getParameter(34921),g=e.getParameter(36347),v=e.getParameter(36348),y=e.getParameter(36349),_=d>0,x=o||t.has("OES_texture_float"),b=_&&x,w=o?e.getParameter(36183):0;return{isWebGL2:o,drawBuffers:l,getMaxAnisotropy:i,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:u,maxTextures:h,maxVertexTextures:d,maxTextureSize:p,maxCubemapSize:f,maxAttributes:m,maxVertexUniforms:g,maxVaryings:v,maxFragmentUniforms:y,vertexTextures:_,floatFragmentTextures:x,floatVertexTextures:b,maxSamples:w}}function Ba(e){const t=this;let n=null,r=0,i=!1,s=!1;const o=new Zi,a=new dn,c={value:null,needsUpdate:!1};function l(){c.value!==n&&(c.value=n,c.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0}function u(e,n,r,i){const s=null!==e?e.length:0;let l=null;if(0!==s){if(l=c.value,!0!==i||null===l){const t=r+4*s,i=n.matrixWorldInverse;a.getNormalMatrix(i),(null===l||l.length<t)&&(l=new Float32Array(t));for(let n=0,c=r;n!==s;++n,c+=4)o.copy(e[n]).applyMatrix4(i,a),o.normal.toArray(l,c),l[c+3]=o.constant}c.value=l,c.needsUpdate=!0}return t.numPlanes=s,t.numIntersection=0,l}this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t,s){const o=0!==e.length||t||0!==r||i;return i=t,n=u(e,s,0),r=e.length,o},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1,l()},this.setState=function(t,o,a){const h=t.clippingPlanes,d=t.clipIntersection,p=t.clipShadows,f=e.get(t);if(!i||null===h||0===h.length||s&&!p)s?u(null):l();else{const e=s?0:r,t=4*e;let i=f.clippingState||null;c.value=i,i=u(h,o,t,a);for(let r=0;r!==t;++r)i[r]=n[r];f.clippingState=i,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=e}}}function za(e){let t=new WeakMap;function n(e,t){return t===ie?e.mapping=ne:t===se&&(e.mapping=re),e}function r(r){if(r&&r.isTexture&&!1===r.isRenderTargetTexture){const s=r.mapping;if(s===ie||s===se){if(t.has(r)){const e=t.get(r).texture;return n(e,r.mapping)}{const s=r.image;if(s&&s.height>0){const o=new Xi(s.height/2);return o.fromEquirectangularTexture(e,r),t.set(r,o),r.addEventListener("dispose",i),n(o.texture,r.mapping)}return null}}}return r}function i(e){const n=e.target;n.removeEventListener("dispose",i);const r=t.get(n);void 0!==r&&(t.delete(n),r.dispose())}function s(){t=new WeakMap}return{get:r,dispose:s}}Da.physical={uniforms:ki([Da.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new hn(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new bn(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new hn},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new bn(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new bn(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Pa.meshphysical_vert,fragmentShader:Pa.meshphysical_frag};class Ha extends Hi{constructor(e=-1,t=1,n=1,r=-1,i=.1,s=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=i,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,i,s){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let i=n-e,s=n+e,o=r+t,a=r-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=e*this.view.offsetX,s=i+e*this.view.width,o-=t*this.view.offsetY,a=o-t*this.view.height}this.projectionMatrix.makeOrthographic(i,s,o,a,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}Ha.prototype.isOrthographicCamera=!0;const ja=4,Va=[.125,.215,.35,.446,.526,.582],Ga=20,Wa=new Ha,qa=new bn;let Xa=null;const Ya=(1+Math.sqrt(5))/2,Ka=1/Ya,Ja=[new kn(1,1,1),new kn(-1,1,1),new kn(1,1,-1),new kn(-1,1,-1),new kn(0,Ya,Ka),new kn(0,Ya,-Ka),new kn(Ka,0,Ya),new kn(-Ka,0,Ya),new kn(Ya,Ka,0),new kn(-Ya,Ka,0)];class Za{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100){Xa=this._renderer.getRenderTarget(),this._setSize(256);const i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(e,n,r,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=rc(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=nc(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Xa),e.scissorTest=!1,ec(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===ne||e.mapping===re?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Xa=this._renderer.getRenderTarget();const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize-32,n={magFilter:fe,minFilter:fe,generateMipmaps:!1,type:Se,format:Le,encoding:Et,depthBuffer:!1},r=Qa(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=Qa(e,t,n);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=$a(r)),this._blurMaterial=tc(r,e,t)}return r}_compileMaterial(e){const t=new Oi(this._lodPlanes[0],e);this._renderer.compile(t,Wa)}_sceneToCubeUV(e,t,n,r){const i=90,s=1,o=new ji(i,s,t,n),a=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],l=this._renderer,u=l.autoClear,h=l.toneMapping;l.getClearColor(qa),l.toneMapping=K,l.autoClear=!1;const d=new $r({name:"PMREM.Background",side:p,depthWrite:!1,depthTest:!1}),f=new Oi(new Di,d);let m=!1;const g=e.background;g?g.isColor&&(d.color.copy(g),e.background=null,m=!0):(d.color.copy(qa),m=!0);for(let p=0;p<6;p++){const t=p%3;0===t?(o.up.set(0,a[p],0),o.lookAt(c[p],0,0)):1===t?(o.up.set(0,0,a[p]),o.lookAt(0,c[p],0)):(o.up.set(0,a[p],0),o.lookAt(0,0,c[p]));const n=this._cubeSize;ec(r,t*n,p>2?n:0,n,n),l.setRenderTarget(r),m&&l.render(f,o),l.render(e,o)}f.geometry.dispose(),f.material.dispose(),l.toneMapping=h,l.autoClear=u,e.background=g}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===ne||e.mapping===re;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=rc()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=nc());const i=r?this._cubemapMaterial:this._equirectMaterial,s=new Oi(this._lodPlanes[0],i),o=i.uniforms;o["envMap"].value=e;const a=this._cubeSize;ec(t,0,0,3*a,2*a),n.setRenderTarget(t),n.render(s,Wa)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const t=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),n=Ja[(r-1)%Ja.length];this._blur(e,r-1,r,t,n)}t.autoClear=n}_blur(e,t,n,r,i){const s=this._pingPongRenderTarget;this._halfBlur(e,s,t,n,r,"latitudinal",i),this._halfBlur(s,e,n,n,r,"longitudinal",i)}_halfBlur(e,t,n,r,i,s,o){const a=this._renderer,c=this._blurMaterial;"latitudinal"!==s&&"longitudinal"!==s&&console.error("blur direction must be either latitudinal or longitudinal!");const l=3,u=new Oi(this._lodPlanes[r],c),h=c.uniforms,d=this._sizeLods[n]-1,p=isFinite(i)?Math.PI/(2*d):2*Math.PI/(2*Ga-1),f=i/p,m=isFinite(i)?1+Math.floor(l*f):Ga;m>Ga&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${m} samples when the maximum is set to ${Ga}`);const g=[];let v=0;for(let w=0;w<Ga;++w){const e=w/f,t=Math.exp(-e*e/2);g.push(t),0===w?v+=t:w<m&&(v+=2*t)}for(let w=0;w<g.length;w++)g[w]=g[w]/v;h["envMap"].value=e.texture,h["samples"].value=m,h["weights"].value=g,h["latitudinal"].value="latitudinal"===s,o&&(h["poleAxis"].value=o);const{_lodMax:y}=this;h["dTheta"].value=p,h["mipInt"].value=y-n;const _=this._sizeLods[r],x=3*_*(r>y-ja?r-y+ja:0),b=4*(this._cubeSize-_);ec(t,x,b,3*_,2*_),a.setRenderTarget(t),a.render(u,Wa)}}function $a(e){const t=[],n=[],r=[];let i=e;const s=e-ja+1+Va.length;for(let o=0;o<s;o++){const s=Math.pow(2,i);n.push(s);let a=1/s;o>e-ja?a=Va[o-e+ja-1]:0===o&&(a=0),r.push(a);const c=1/(s-1),l=-c/2,u=1+c/2,h=[l,l,u,l,u,u,l,l,u,u,l,u],d=6,p=6,f=3,m=2,g=1,v=new Float32Array(f*p*d),y=new Float32Array(m*p*d),_=new Float32Array(g*p*d);for(let e=0;e<d;e++){const t=e%3*2/3-1,n=e>2?0:-1,r=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];v.set(r,f*p*e),y.set(h,m*p*e);const i=[e,e,e,e,e,e];_.set(i,g*p*e)}const x=new pi;x.setAttribute("position",new ti(v,f)),x.setAttribute("uv",new ti(y,m)),x.setAttribute("faceIndex",new ti(_,g)),t.push(x),i>ja&&i--}return{lodPlanes:t,sizeLods:n,sigmas:r}}function Qa(e,t,n){const r=new Cn(e,t,n);return r.texture.mapping=oe,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function ec(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function tc(e,t,n){const r=new Float32Array(Ga),i=new kn(0,1,0),s=new zi({name:"SphericalGaussianBlur",defines:{n:Ga,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:e+".0"},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:ic(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:g,depthTest:!1,depthWrite:!1});return s}function nc(){return new zi({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:ic(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:g,depthTest:!1,depthWrite:!1})}function rc(){return new zi({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:ic(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:g,depthTest:!1,depthWrite:!1})}function ic(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function sc(e){let t=new WeakMap,n=null;function r(r){if(r&&r.isTexture){const o=r.mapping,a=o===ie||o===se,c=o===ne||o===re;if(a||c){if(r.isRenderTargetTexture&&!0===r.needsPMREMUpdate){r.needsPMREMUpdate=!1;let i=t.get(r);return null===n&&(n=new Za(e)),i=a?n.fromEquirectangular(r,i):n.fromCubemap(r,i),t.set(r,i),i.texture}if(t.has(r))return t.get(r).texture;{const o=r.image;if(a&&o&&o.height>0||c&&o&&i(o)){null===n&&(n=new Za(e));const i=a?n.fromEquirectangular(r):n.fromCubemap(r);return t.set(r,i),r.addEventListener("dispose",s),i.texture}return null}}}return r}function i(e){let t=0;const n=6;for(let r=0;r<n;r++)void 0!==e[r]&&t++;return t===n}function s(e){const n=e.target;n.removeEventListener("dispose",s);const r=t.get(n);void 0!==r&&(t.delete(n),r.dispose())}function o(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}return{get:r,dispose:o}}function oc(e){const t={};function n(n){if(void 0!==t[n])return t[n];let r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(e){const t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function ac(e,t,n,r){const i={},s=new WeakMap;function o(e){const a=e.target;null!==a.index&&t.remove(a.index);for(const n in a.attributes)t.remove(a.attributes[n]);a.removeEventListener("dispose",o),delete i[a.id];const c=s.get(a);c&&(t.remove(c),s.delete(a)),r.releaseStatesOfGeometry(a),!0===a.isInstancedBufferGeometry&&delete a._maxInstanceCount,n.memory.geometries--}function a(e,t){return!0===i[t.id]||(t.addEventListener("dispose",o),i[t.id]=!0,n.memory.geometries++),t}function c(e){const n=e.attributes;for(const i in n)t.update(n[i],34962);const r=e.morphAttributes;for(const i in r){const e=r[i];for(let n=0,r=e.length;n<r;n++)t.update(e[n],34962)}}function l(e){const n=[],r=e.index,i=e.attributes.position;let o=0;if(null!==r){const e=r.array;o=r.version;for(let t=0,r=e.length;t<r;t+=3){const r=e[t+0],i=e[t+1],s=e[t+2];n.push(r,i,i,s,s,r)}}else{const e=i.array;o=i.version;for(let t=0,r=e.length/3-1;t<r;t+=3){const e=t+0,r=t+1,i=t+2;n.push(e,r,r,i,i,e)}}const a=new(pn(n)?ri:ni)(n,1);a.version=o;const c=s.get(e);c&&t.remove(c),s.set(e,a)}function u(e){const t=s.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&l(e)}else l(e);return s.get(e)}return{get:a,update:c,getWireframeAttribute:u}}function cc(e,t,n,r){const i=r.isWebGL2;let s,o,a;function c(e){s=e}function l(e){o=e.type,a=e.bytesPerElement}function u(t,r){e.drawElements(s,r,o,t*a),n.update(r,s,1)}function h(r,c,l){if(0===l)return;let u,h;if(i)u=e,h="drawElementsInstanced";else if(u=t.get("ANGLE_instanced_arrays"),h="drawElementsInstancedANGLE",null===u)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[h](s,c,o,r*a,l),n.update(c,s,l)}this.setMode=c,this.setIndex=l,this.render=u,this.renderInstances=h}function lc(e){const t={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(e,t,r){switch(n.calls++,t){case 4:n.triangles+=r*(e/3);break;case 1:n.lines+=r*(e/2);break;case 3:n.lines+=r*(e-1);break;case 2:n.lines+=r*e;break;case 0:n.points+=r*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",t);break}}function i(){n.frame++,n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:t,render:n,programs:null,autoReset:!0,reset:i,update:r}}function uc(e,t){return e[0]-t[0]}function hc(e,t){return Math.abs(t[1])-Math.abs(e[1])}function dc(e,t){let n=1;const r=t.isInterleavedBufferAttribute?t.data.array:t.array;r instanceof Int8Array?n=127:r instanceof Int16Array?n=32767:r instanceof Int32Array?n=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",r),e.divideScalar(n)}function pc(e,t,n){const r={},i=new Float32Array(8),s=new WeakMap,o=new Rn,a=[];for(let l=0;l<8;l++)a[l]=[l,0];function c(c,l,u,h){const d=c.morphTargetInfluences;if(!0===t.isWebGL2){const r=l.morphAttributes.position||l.morphAttributes.normal||l.morphAttributes.color,i=void 0!==r?r.length:0;let a=s.get(l);if(void 0===a||a.count!==i){void 0!==a&&a.texture.dispose();const e=void 0!==l.morphAttributes.position,n=void 0!==l.morphAttributes.normal,r=void 0!==l.morphAttributes.color,c=l.morphAttributes.position||[],u=l.morphAttributes.normal||[],h=l.morphAttributes.color||[];let d=0;!0===e&&(d=1),!0===n&&(d=2),!0===r&&(d=3);let f=l.attributes.position.count*d,m=1;f>t.maxTextureSize&&(m=Math.ceil(f/t.maxTextureSize),f=t.maxTextureSize);const g=new Float32Array(f*m*4*i),v=new Ln(g,f,m,i);v.format=Le,v.type=Me,v.needsUpdate=!0;const y=4*d;for(let t=0;t<i;t++){const i=c[t],s=u[t],a=h[t],l=f*m*4*t;for(let t=0;t<i.count;t++){const c=t*y;!0===e&&(o.fromBufferAttribute(i,t),!0===i.normalized&&dc(o,i),g[l+c+0]=o.x,g[l+c+1]=o.y,g[l+c+2]=o.z,g[l+c+3]=0),!0===n&&(o.fromBufferAttribute(s,t),!0===s.normalized&&dc(o,s),g[l+c+4]=o.x,g[l+c+5]=o.y,g[l+c+6]=o.z,g[l+c+7]=0),!0===r&&(o.fromBufferAttribute(a,t),!0===a.normalized&&dc(o,s),g[l+c+8]=o.x,g[l+c+9]=o.y,g[l+c+10]=o.z,g[l+c+11]=4===a.itemSize?o.w:1)}}function p(){v.dispose(),s.delete(l),l.removeEventListener("dispose",p)}a={count:i,texture:v,size:new hn(f,m)},s.set(l,a),l.addEventListener("dispose",p)}let c=0;for(let e=0;e<d.length;e++)c+=d[e];const u=l.morphTargetsRelative?1:1-c;h.getUniforms().setValue(e,"morphTargetBaseInfluence",u),h.getUniforms().setValue(e,"morphTargetInfluences",d),h.getUniforms().setValue(e,"morphTargetsTexture",a.texture,n),h.getUniforms().setValue(e,"morphTargetsTextureSize",a.size)}else{const t=void 0===d?0:d.length;let n=r[l.id];if(void 0===n||n.length!==t){n=[];for(let e=0;e<t;e++)n[e]=[e,0];r[l.id]=n}for(let e=0;e<t;e++){const t=n[e];t[0]=e,t[1]=d[e]}n.sort(hc);for(let e=0;e<8;e++)e<t&&n[e][1]?(a[e][0]=n[e][0],a[e][1]=n[e][1]):(a[e][0]=Number.MAX_SAFE_INTEGER,a[e][1]=0);a.sort(uc);const s=l.morphAttributes.position,o=l.morphAttributes.normal;let c=0;for(let e=0;e<8;e++){const t=a[e],n=t[0],r=t[1];n!==Number.MAX_SAFE_INTEGER&&r?(s&&l.getAttribute("morphTarget"+e)!==s[n]&&l.setAttribute("morphTarget"+e,s[n]),o&&l.getAttribute("morphNormal"+e)!==o[n]&&l.setAttribute("morphNormal"+e,o[n]),i[e]=r,c+=r):(s&&!0===l.hasAttribute("morphTarget"+e)&&l.deleteAttribute("morphTarget"+e),o&&!0===l.hasAttribute("morphNormal"+e)&&l.deleteAttribute("morphNormal"+e),i[e]=0)}const u=l.morphTargetsRelative?1:1-c;h.getUniforms().setValue(e,"morphTargetBaseInfluence",u),h.getUniforms().setValue(e,"morphTargetInfluences",i)}}return{update:c}}function fc(e,t,n,r){let i=new WeakMap;function s(e){const s=r.render.frame,o=e.geometry,c=t.get(e,o);return i.get(c)!==s&&(t.update(c),i.set(c,s)),e.isInstancedMesh&&(!1===e.hasEventListener("dispose",a)&&e.addEventListener("dispose",a),n.update(e.instanceMatrix,34962),null!==e.instanceColor&&n.update(e.instanceColor,34962)),c}function o(){i=new WeakMap}function a(e){const t=e.target;t.removeEventListener("dispose",a),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:s,dispose:o}}const mc=new An,gc=new Ln,vc=new Pn,yc=new qi,_c=[],xc=[],bc=new Float32Array(16),wc=new Float32Array(9),Mc=new Float32Array(4);function Sc(e,t,n){const r=e[0];if(r<=0||r>0)return e;const i=t*n;let s=_c[i];if(void 0===s&&(s=new Float32Array(i),_c[i]=s),0!==t){r.toArray(s,0);for(let r=1,i=0;r!==t;++r)i+=n,e[r].toArray(s,i)}return s}function Tc(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function Ec(e,t){for(let n=0,r=t.length;n<r;n++)e[n]=t[n]}function Ac(e,t){let n=xc[t];void 0===n&&(n=new Int32Array(t),xc[t]=n);for(let r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function Rc(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function Cc(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Tc(n,t))return;e.uniform2fv(this.addr,t),Ec(n,t)}}function Lc(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Tc(n,t))return;e.uniform3fv(this.addr,t),Ec(n,t)}}function Oc(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Tc(n,t))return;e.uniform4fv(this.addr,t),Ec(n,t)}}function Pc(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(Tc(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),Ec(n,t)}else{if(Tc(n,r))return;Mc.set(r),e.uniformMatrix2fv(this.addr,!1,Mc),Ec(n,r)}}function Ic(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(Tc(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),Ec(n,t)}else{if(Tc(n,r))return;wc.set(r),e.uniformMatrix3fv(this.addr,!1,wc),Ec(n,r)}}function Dc(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(Tc(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),Ec(n,t)}else{if(Tc(n,r))return;bc.set(r),e.uniformMatrix4fv(this.addr,!1,bc),Ec(n,r)}}function Nc(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function kc(e,t){const n=this.cache;Tc(n,t)||(e.uniform2iv(this.addr,t),Ec(n,t))}function Fc(e,t){const n=this.cache;Tc(n,t)||(e.uniform3iv(this.addr,t),Ec(n,t))}function Uc(e,t){const n=this.cache;Tc(n,t)||(e.uniform4iv(this.addr,t),Ec(n,t))}function Bc(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function zc(e,t){const n=this.cache;Tc(n,t)||(e.uniform2uiv(this.addr,t),Ec(n,t))}function Hc(e,t){const n=this.cache;Tc(n,t)||(e.uniform3uiv(this.addr,t),Ec(n,t))}function jc(e,t){const n=this.cache;Tc(n,t)||(e.uniform4uiv(this.addr,t),Ec(n,t))}function Vc(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2D(t||mc,i)}function Gc(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||vc,i)}function Wc(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(t||yc,i)}function qc(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||gc,i)}function Xc(e){switch(e){case 5126:return Rc;case 35664:return Cc;case 35665:return Lc;case 35666:return Oc;case 35674:return Pc;case 35675:return Ic;case 35676:return Dc;case 5124:case 35670:return Nc;case 35667:case 35671:return kc;case 35668:case 35672:return Fc;case 35669:case 35673:return Uc;case 5125:return Bc;case 36294:return zc;case 36295:return Hc;case 36296:return jc;case 35678:case 36198:case 36298:case 36306:case 35682:return Vc;case 35679:case 36299:case 36307:return Gc;case 35680:case 36300:case 36308:case 36293:return Wc;case 36289:case 36303:case 36311:case 36292:return qc}}function Yc(e,t){e.uniform1fv(this.addr,t)}function Kc(e,t){const n=Sc(t,this.size,2);e.uniform2fv(this.addr,n)}function Jc(e,t){const n=Sc(t,this.size,3);e.uniform3fv(this.addr,n)}function Zc(e,t){const n=Sc(t,this.size,4);e.uniform4fv(this.addr,n)}function $c(e,t){const n=Sc(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function Qc(e,t){const n=Sc(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function el(e,t){const n=Sc(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function tl(e,t){e.uniform1iv(this.addr,t)}function nl(e,t){e.uniform2iv(this.addr,t)}function rl(e,t){e.uniform3iv(this.addr,t)}function il(e,t){e.uniform4iv(this.addr,t)}function sl(e,t){e.uniform1uiv(this.addr,t)}function ol(e,t){e.uniform2uiv(this.addr,t)}function al(e,t){e.uniform3uiv(this.addr,t)}function cl(e,t){e.uniform4uiv(this.addr,t)}function ll(e,t,n){const r=t.length,i=Ac(n,r);e.uniform1iv(this.addr,i);for(let s=0;s!==r;++s)n.setTexture2D(t[s]||mc,i[s])}function ul(e,t,n){const r=t.length,i=Ac(n,r);e.uniform1iv(this.addr,i);for(let s=0;s!==r;++s)n.setTexture3D(t[s]||vc,i[s])}function hl(e,t,n){const r=t.length,i=Ac(n,r);e.uniform1iv(this.addr,i);for(let s=0;s!==r;++s)n.setTextureCube(t[s]||yc,i[s])}function dl(e,t,n){const r=t.length,i=Ac(n,r);e.uniform1iv(this.addr,i);for(let s=0;s!==r;++s)n.setTexture2DArray(t[s]||gc,i[s])}function pl(e){switch(e){case 5126:return Yc;case 35664:return Kc;case 35665:return Jc;case 35666:return Zc;case 35674:return $c;case 35675:return Qc;case 35676:return el;case 5124:case 35670:return tl;case 35667:case 35671:return nl;case 35668:case 35672:return rl;case 35669:case 35673:return il;case 5125:return sl;case 36294:return ol;case 36295:return al;case 36296:return cl;case 35678:case 36198:case 36298:case 36306:case 35682:return ll;case 35679:case 36299:case 36307:return ul;case 35680:case 36300:case 36308:case 36293:return hl;case 36289:case 36303:case 36311:case 36292:return dl}}function fl(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=Xc(t.type)}function ml(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=pl(t.type)}function gl(e){this.id=e,this.seq=[],this.map={}}ml.prototype.updateCache=function(e){const t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),Ec(t,e)},gl.prototype.setValue=function(e,t,n){const r=this.seq;for(let i=0,s=r.length;i!==s;++i){const s=r[i];s.setValue(e,t[s.id],n)}};const vl=/(\w+)(\])?(\[|\.)?/g;function yl(e,t){e.seq.push(t),e.map[t.id]=t}function _l(e,t,n){const r=e.name,i=r.length;vl.lastIndex=0;while(1){const s=vl.exec(r),o=vl.lastIndex;let a=s[1];const c="]"===s[2],l=s[3];if(c&&(a|=0),void 0===l||"["===l&&o+2===i){yl(n,void 0===l?new fl(a,e,t):new ml(a,e,t));break}{const e=n.map;let t=e[a];void 0===t&&(t=new gl(a),yl(n,t)),n=t}}}function xl(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,35718);for(let r=0;r<n;++r){const n=e.getActiveUniform(t,r),i=e.getUniformLocation(t,n.name);_l(n,i,this)}}function bl(e,t,n){const r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}xl.prototype.setValue=function(e,t,n,r){const i=this.map[t];void 0!==i&&i.setValue(e,n,r)},xl.prototype.setOptional=function(e,t,n){const r=t[n];void 0!==r&&this.setValue(e,n,r)},xl.upload=function(e,t,n,r){for(let i=0,s=t.length;i!==s;++i){const s=t[i],o=n[s.id];!1!==o.needsUpdate&&s.setValue(e,o.value,r)}},xl.seqWithValue=function(e,t){const n=[];for(let r=0,i=e.length;r!==i;++r){const i=e[r];i.id in t&&n.push(i)}return n};let wl=0;function Ml(e){const t=e.split("\n");for(let n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")}function Sl(e){switch(e){case Et:return["Linear","( value )"];case At:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function Tl(e,t,n){const r=e.getShaderParameter(t,35713),i=e.getShaderInfoLog(t).trim();return r&&""===i?"":n.toUpperCase()+"\n\n"+i+"\n\n"+Ml(e.getShaderSource(t))}function El(e,t){const n=Sl(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Al(e,t){let n;switch(t){case J:n="Linear";break;case Z:n="Reinhard";break;case $:n="OptimizedCineon";break;case Q:n="ACESFilmic";break;case ee:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Rl(e){const t=[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""];return t.filter(Ol).join("\n")}function Cl(e){const t=[];for(const n in e){const r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}function Ll(e,t){const n={},r=e.getProgramParameter(t,35721);for(let i=0;i<r;i++){const r=e.getActiveAttrib(t,i),s=r.name;let o=1;35674===r.type&&(o=2),35675===r.type&&(o=3),35676===r.type&&(o=4),n[s]={type:r.type,location:e.getAttribLocation(t,s),locationSize:o}}return n}function Ol(e){return""!==e}function Pl(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function Il(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const Dl=/^[ \t]*#include +<([\w\d./]+)>/gm;function Nl(e){return e.replace(Dl,kl)}function kl(e,t){const n=Pa[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return Nl(n)}const Fl=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Ul=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Bl(e){return e.replace(Ul,Hl).replace(Fl,zl)}function zl(e,t,n,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),Hl(e,t,n,r)}function Hl(e,t,n,r){let i="";for(let s=parseInt(t);s<parseInt(n);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function jl(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function Vl(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===l?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===u?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===h&&(t="SHADOWMAP_TYPE_VSM"),t}function Gl(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case ne:case re:t="ENVMAP_TYPE_CUBE";break;case oe:case ae:t="ENVMAP_TYPE_CUBE_UV";break}return t}function Wl(e){let t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case re:case ae:t="ENVMAP_MODE_REFRACTION";break}return t}function ql(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case q:t="ENVMAP_BLENDING_MULTIPLY";break;case X:t="ENVMAP_BLENDING_MIX";break;case Y:t="ENVMAP_BLENDING_ADD";break}return t}function Xl(e){const t=e.envMapCubeUVHeight;if(null===t)return null;const n=Math.log2(t/32+1)+3,r=1/t,i=1/(3*Math.max(Math.pow(2,n),112));return{texelWidth:i,texelHeight:r,maxMip:n}}function Yl(e,t,n,r){const i=e.getContext(),s=n.defines;let o=n.vertexShader,a=n.fragmentShader;const c=Vl(n),l=Gl(n),u=Wl(n),h=ql(n),d=Xl(n),p=n.isWebGL2?"":Rl(n),f=Cl(s),m=i.createProgram();let g,v,y=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(g=[f].filter(Ol).join("\n"),g.length>0&&(g+="\n"),v=[p,f].filter(Ol).join("\n"),v.length>0&&(v+="\n")):(g=[jl(n),"#define SHADER_NAME "+n.shaderName,f,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Ol).join("\n"),v=[p,jl(n),"#define SHADER_NAME "+n.shaderName,f,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+l:"",n.envMap?"#define "+u:"",n.envMap?"#define "+h:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==K?"#define TONE_MAPPING":"",n.toneMapping!==K?Pa["tonemapping_pars_fragment"]:"",n.toneMapping!==K?Al("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Pa["encodings_pars_fragment"],El("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Ol).join("\n")),o=Nl(o),o=Pl(o,n),o=Il(o,n),a=Nl(a),a=Pl(a,n),a=Il(a,n),o=Bl(o),a=Bl(a),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(y="#version 300 es\n",g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,v=["#define varying in",n.glslVersion===kt?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===kt?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+v);const _=y+g+o,x=y+v+a,b=bl(i,35633,_),w=bl(i,35632,x);if(i.attachShader(m,b),i.attachShader(m,w),void 0!==n.index0AttributeName?i.bindAttribLocation(m,0,n.index0AttributeName):!0===n.morphTargets&&i.bindAttribLocation(m,0,"position"),i.linkProgram(m),e.debug.checkShaderErrors){const e=i.getProgramInfoLog(m).trim(),t=i.getShaderInfoLog(b).trim(),n=i.getShaderInfoLog(w).trim();let r=!0,s=!0;if(!1===i.getProgramParameter(m,35714)){r=!1;const t=Tl(i,b,"vertex"),n=Tl(i,w,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(m,35715)+"\n\nProgram Info Log: "+e+"\n"+t+"\n"+n)}else""!==e?console.warn("THREE.WebGLProgram: Program Info Log:",e):""!==t&&""!==n||(s=!1);s&&(this.diagnostics={runnable:r,programLog:e,vertexShader:{log:t,prefix:g},fragmentShader:{log:n,prefix:v}})}let M,S;return i.deleteShader(b),i.deleteShader(w),this.getUniforms=function(){return void 0===M&&(M=new xl(i,m)),M},this.getAttributes=function(){return void 0===S&&(S=Ll(i,m)),S},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(m),this.program=void 0},this.name=n.shaderName,this.id=wl++,this.cacheKey=t,this.usedTimes=1,this.program=m,this.vertexShader=b,this.fragmentShader=w,this}let Kl=0;class Jl{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),i=this._getShaderStage(n),s=this._getShaderCacheForMaterial(e);return!1===s.has(r)&&(s.add(r),r.usedTimes++),!1===s.has(i)&&(s.add(i),i.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;return!1===t.has(e)&&t.set(e,new Set),t.get(e)}_getShaderStage(e){const t=this.shaderCache;if(!1===t.has(e)){const n=new Zl;t.set(e,n)}return t.get(e)}}class Zl{constructor(){this.id=Kl++,this.usedTimes=0}}function $l(e,t,n,r,i,s,o){const a=new Sr,c=new Jl,l=[],u=i.isWebGL2,h=i.logarithmicDepthBuffer,d=i.floatVertexTextures,m=i.maxVertexUniforms,g=i.vertexTextures;let y=i.precision;const _={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function x(e){const t=e.skeleton,n=t.bones;if(d)return 1024;{const e=m,t=Math.floor((e-20)/4),r=Math.min(t,n.length);return r<n.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+n.length+" bones. This GPU supports "+r+"."),0):r}}function b(s,a,l,m,b){const w=m.fog,M=b.geometry,S=s.isMeshStandardMaterial?m.environment:null,T=(s.isMeshStandardMaterial?n:t).get(s.envMap||S),E=!T||T.mapping!==oe&&T.mapping!==ae?null:T.image.height,A=_[s.type],R=b.isSkinnedMesh?x(b):0;null!==s.precision&&(y=i.getMaxPrecision(s.precision),y!==s.precision&&console.warn("THREE.WebGLProgram.getParameters:",s.precision,"not supported, using",y,"instead."));const C=M.morphAttributes.position||M.morphAttributes.normal||M.morphAttributes.color,L=void 0!==C?C.length:0;let O,P,I,D,N=0;if(void 0!==M.morphAttributes.position&&(N=1),void 0!==M.morphAttributes.normal&&(N=2),void 0!==M.morphAttributes.color&&(N=3),A){const e=Da[A];O=e.vertexShader,P=e.fragmentShader}else O=s.vertexShader,P=s.fragmentShader,c.update(s),I=c.getVertexShaderID(s),D=c.getFragmentShaderID(s);const k=e.getRenderTarget(),F=s.alphaTest>0,U=s.clearcoat>0,B={isWebGL2:u,shaderID:A,shaderName:s.type,vertexShader:O,fragmentShader:P,defines:s.defines,customVertexShaderID:I,customFragmentShaderID:D,isRawShaderMaterial:!0===s.isRawShaderMaterial,glslVersion:s.glslVersion,precision:y,instancing:!0===b.isInstancedMesh,instancingColor:!0===b.isInstancedMesh&&null!==b.instanceColor,supportsVertexTextures:g,outputEncoding:null===k?e.outputEncoding:!0===k.isXRRenderTarget?k.texture.encoding:Et,map:!!s.map,matcap:!!s.matcap,envMap:!!T,envMapMode:T&&T.mapping,envMapCubeUVHeight:E,lightMap:!!s.lightMap,aoMap:!!s.aoMap,emissiveMap:!!s.emissiveMap,bumpMap:!!s.bumpMap,normalMap:!!s.normalMap,objectSpaceNormalMap:s.normalMapType===Ot,tangentSpaceNormalMap:s.normalMapType===Lt,decodeVideoTexture:!!s.map&&!0===s.map.isVideoTexture&&s.map.encoding===At,clearcoat:U,clearcoatMap:U&&!!s.clearcoatMap,clearcoatRoughnessMap:U&&!!s.clearcoatRoughnessMap,clearcoatNormalMap:U&&!!s.clearcoatNormalMap,displacementMap:!!s.displacementMap,roughnessMap:!!s.roughnessMap,metalnessMap:!!s.metalnessMap,specularMap:!!s.specularMap,specularIntensityMap:!!s.specularIntensityMap,specularColorMap:!!s.specularColorMap,opaque:!1===s.transparent&&s.blending===v,alphaMap:!!s.alphaMap,alphaTest:F,gradientMap:!!s.gradientMap,sheen:s.sheen>0,sheenColorMap:!!s.sheenColorMap,sheenRoughnessMap:!!s.sheenRoughnessMap,transmission:s.transmission>0,transmissionMap:!!s.transmissionMap,thicknessMap:!!s.thicknessMap,combine:s.combine,vertexTangents:!!s.normalMap&&!!M.attributes.tangent,vertexColors:s.vertexColors,vertexAlphas:!0===s.vertexColors&&!!M.attributes.color&&4===M.attributes.color.itemSize,vertexUvs:!!s.map||!!s.bumpMap||!!s.normalMap||!!s.specularMap||!!s.alphaMap||!!s.emissiveMap||!!s.roughnessMap||!!s.metalnessMap||!!s.clearcoatMap||!!s.clearcoatRoughnessMap||!!s.clearcoatNormalMap||!!s.displacementMap||!!s.transmissionMap||!!s.thicknessMap||!!s.specularIntensityMap||!!s.specularColorMap||!!s.sheenColorMap||!!s.sheenRoughnessMap,uvsVertexOnly:!(s.map||s.bumpMap||s.normalMap||s.specularMap||s.alphaMap||s.emissiveMap||s.roughnessMap||s.metalnessMap||s.clearcoatNormalMap||s.transmission>0||s.transmissionMap||s.thicknessMap||s.specularIntensityMap||s.specularColorMap||s.sheen>0||s.sheenColorMap||s.sheenRoughnessMap)&&!!s.displacementMap,fog:!!w,useFog:s.fog,fogExp2:w&&w.isFogExp2,flatShading:!!s.flatShading,sizeAttenuation:s.sizeAttenuation,logarithmicDepthBuffer:h,skinning:!0===b.isSkinnedMesh&&R>0,maxBones:R,useVertexTexture:d,morphTargets:void 0!==M.morphAttributes.position,morphNormals:void 0!==M.morphAttributes.normal,morphColors:void 0!==M.morphAttributes.color,morphTargetsCount:L,morphTextureStride:N,numDirLights:a.directional.length,numPointLights:a.point.length,numSpotLights:a.spot.length,numRectAreaLights:a.rectArea.length,numHemiLights:a.hemi.length,numDirLightShadows:a.directionalShadowMap.length,numPointLightShadows:a.pointShadowMap.length,numSpotLightShadows:a.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:s.dithering,shadowMapEnabled:e.shadowMap.enabled&&l.length>0,shadowMapType:e.shadowMap.type,toneMapping:s.toneMapped?e.toneMapping:K,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:s.premultipliedAlpha,doubleSided:s.side===f,flipSided:s.side===p,depthPacking:void 0!==s.depthPacking&&s.depthPacking,index0AttributeName:s.index0AttributeName,extensionDerivatives:s.extensions&&s.extensions.derivatives,extensionFragDepth:s.extensions&&s.extensions.fragDepth,extensionDrawBuffers:s.extensions&&s.extensions.drawBuffers,extensionShaderTextureLOD:s.extensions&&s.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||r.has("EXT_shader_texture_lod"),customProgramCacheKey:s.customProgramCacheKey()};return B}function w(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(M(n,t),S(n,t),n.push(e.outputEncoding)),n.push(t.customProgramCacheKey),n.join()}function M(e,t){e.push(t.precision),e.push(t.outputEncoding),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.combine),e.push(t.vertexUvs),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.maxBones),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection)}function S(e,t){a.disableAll(),t.isWebGL2&&a.enable(0),t.supportsVertexTextures&&a.enable(1),t.instancing&&a.enable(2),t.instancingColor&&a.enable(3),t.map&&a.enable(4),t.matcap&&a.enable(5),t.envMap&&a.enable(6),t.lightMap&&a.enable(7),t.aoMap&&a.enable(8),t.emissiveMap&&a.enable(9),t.bumpMap&&a.enable(10),t.normalMap&&a.enable(11),t.objectSpaceNormalMap&&a.enable(12),t.tangentSpaceNormalMap&&a.enable(13),t.clearcoat&&a.enable(14),t.clearcoatMap&&a.enable(15),t.clearcoatRoughnessMap&&a.enable(16),t.clearcoatNormalMap&&a.enable(17),t.displacementMap&&a.enable(18),t.specularMap&&a.enable(19),t.roughnessMap&&a.enable(20),t.metalnessMap&&a.enable(21),t.gradientMap&&a.enable(22),t.alphaMap&&a.enable(23),t.alphaTest&&a.enable(24),t.vertexColors&&a.enable(25),t.vertexAlphas&&a.enable(26),t.vertexUvs&&a.enable(27),t.vertexTangents&&a.enable(28),t.uvsVertexOnly&&a.enable(29),t.fog&&a.enable(30),e.push(a.mask),a.disableAll(),t.useFog&&a.enable(0),t.flatShading&&a.enable(1),t.logarithmicDepthBuffer&&a.enable(2),t.skinning&&a.enable(3),t.useVertexTexture&&a.enable(4),t.morphTargets&&a.enable(5),t.morphNormals&&a.enable(6),t.morphColors&&a.enable(7),t.premultipliedAlpha&&a.enable(8),t.shadowMapEnabled&&a.enable(9),t.physicallyCorrectLights&&a.enable(10),t.doubleSided&&a.enable(11),t.flipSided&&a.enable(12),t.depthPacking&&a.enable(13),t.dithering&&a.enable(14),t.specularIntensityMap&&a.enable(15),t.specularColorMap&&a.enable(16),t.transmission&&a.enable(17),t.transmissionMap&&a.enable(18),t.thicknessMap&&a.enable(19),t.sheen&&a.enable(20),t.sheenColorMap&&a.enable(21),t.sheenRoughnessMap&&a.enable(22),t.decodeVideoTexture&&a.enable(23),t.opaque&&a.enable(24),e.push(a.mask)}function T(e){const t=_[e.type];let n;if(t){const e=Da[t];n=Fi.clone(e.uniforms)}else n=e.uniforms;return n}function E(t,n){let r;for(let e=0,i=l.length;e<i;e++){const t=l[e];if(t.cacheKey===n){r=t,++r.usedTimes;break}}return void 0===r&&(r=new Yl(e,n,t,s),l.push(r)),r}function A(e){if(0===--e.usedTimes){const t=l.indexOf(e);l[t]=l[l.length-1],l.pop(),e.destroy()}}function R(e){c.remove(e)}function C(){c.dispose()}return{getParameters:b,getProgramCacheKey:w,getUniforms:T,acquireProgram:E,releaseProgram:A,releaseShaderCache:R,programs:l,dispose:C}}function Ql(){let e=new WeakMap;function t(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n}function n(t){e.delete(t)}function r(t,n,r){e.get(t)[n]=r}function i(){e=new WeakMap}return{get:t,remove:n,update:r,dispose:i}}function eu(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function tu(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function nu(){const e=[];let t=0;const n=[],r=[],i=[];function s(){t=0,n.length=0,r.length=0,i.length=0}function o(n,r,i,s,o,a){let c=e[t];return void 0===c?(c={id:n.id,object:n,geometry:r,material:i,groupOrder:s,renderOrder:n.renderOrder,z:o,group:a},e[t]=c):(c.id=n.id,c.object=n,c.geometry=r,c.material=i,c.groupOrder=s,c.renderOrder=n.renderOrder,c.z=o,c.group=a),t++,c}function a(e,t,s,a,c,l){const u=o(e,t,s,a,c,l);s.transmission>0?r.push(u):!0===s.transparent?i.push(u):n.push(u)}function c(e,t,s,a,c,l){const u=o(e,t,s,a,c,l);s.transmission>0?r.unshift(u):!0===s.transparent?i.unshift(u):n.unshift(u)}function l(e,t){n.length>1&&n.sort(e||eu),r.length>1&&r.sort(t||tu),i.length>1&&i.sort(t||tu)}function u(){for(let n=t,r=e.length;n<r;n++){const t=e[n];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}}return{opaque:n,transmissive:r,transparent:i,init:s,push:a,unshift:c,finish:u,sort:l}}function ru(){let e=new WeakMap;function t(t,n){let r;return!1===e.has(t)?(r=new nu,e.set(t,[r])):n>=e.get(t).length?(r=new nu,e.get(t).push(r)):r=e.get(t)[n],r}function n(){e=new WeakMap}return{get:t,dispose:n}}function iu(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new kn,color:new bn};break;case"SpotLight":n={position:new kn,direction:new kn,color:new bn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new kn,color:new bn,distance:0,decay:0};break;case"HemisphereLight":n={direction:new kn,skyColor:new bn,groundColor:new bn};break;case"RectAreaLight":n={color:new bn,position:new kn,halfWidth:new kn,halfHeight:new kn};break}return e[t.id]=n,n}}}function su(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new hn};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new hn};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new hn,shadowCameraNear:1,shadowCameraFar:1e3};break}return e[t.id]=n,n}}}let ou=0;function au(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function cu(e,t){const n=new iu,r=su(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let u=0;u<9;u++)i.probe.push(new kn);const s=new kn,o=new pr,a=new pr;function c(s,o){let a=0,c=0,l=0;for(let e=0;e<9;e++)i.probe[e].set(0,0,0);let u=0,h=0,d=0,p=0,f=0,m=0,g=0,v=0;s.sort(au);const y=!0!==o?Math.PI:1;for(let e=0,t=s.length;e<t;e++){const t=s[e],o=t.color,_=t.intensity,x=t.distance,b=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)a+=o.r*_*y,c+=o.g*_*y,l+=o.b*_*y;else if(t.isLightProbe)for(let e=0;e<9;e++)i.probe[e].addScaledVector(t.sh.coefficients[e],_);else if(t.isDirectionalLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*y),t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,i.directionalShadow[u]=n,i.directionalShadowMap[u]=b,i.directionalShadowMatrix[u]=t.shadow.matrix,m++}i.directional[u]=e,u++}else if(t.isSpotLight){const e=n.get(t);if(e.position.setFromMatrixPosition(t.matrixWorld),e.color.copy(o).multiplyScalar(_*y),e.distance=x,e.coneCos=Math.cos(t.angle),e.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),e.decay=t.decay,t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,i.spotShadow[d]=n,i.spotShadowMap[d]=b,i.spotShadowMatrix[d]=t.shadow.matrix,v++}i.spot[d]=e,d++}else if(t.isRectAreaLight){const e=n.get(t);e.color.copy(o).multiplyScalar(_),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),i.rectArea[p]=e,p++}else if(t.isPointLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*y),e.distance=t.distance,e.decay=t.decay,t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,n.shadowCameraNear=e.camera.near,n.shadowCameraFar=e.camera.far,i.pointShadow[h]=n,i.pointShadowMap[h]=b,i.pointShadowMatrix[h]=t.shadow.matrix,g++}i.point[h]=e,h++}else if(t.isHemisphereLight){const e=n.get(t);e.skyColor.copy(t.color).multiplyScalar(_*y),e.groundColor.copy(t.groundColor).multiplyScalar(_*y),i.hemi[f]=e,f++}}p>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(i.rectAreaLTC1=Ia.LTC_FLOAT_1,i.rectAreaLTC2=Ia.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=Ia.LTC_HALF_1,i.rectAreaLTC2=Ia.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=a,i.ambient[1]=c,i.ambient[2]=l;const _=i.hash;_.directionalLength===u&&_.pointLength===h&&_.spotLength===d&&_.rectAreaLength===p&&_.hemiLength===f&&_.numDirectionalShadows===m&&_.numPointShadows===g&&_.numSpotShadows===v||(i.directional.length=u,i.spot.length=d,i.rectArea.length=p,i.point.length=h,i.hemi.length=f,i.directionalShadow.length=m,i.directionalShadowMap.length=m,i.pointShadow.length=g,i.pointShadowMap.length=g,i.spotShadow.length=v,i.spotShadowMap.length=v,i.directionalShadowMatrix.length=m,i.pointShadowMatrix.length=g,i.spotShadowMatrix.length=v,_.directionalLength=u,_.pointLength=h,_.spotLength=d,_.rectAreaLength=p,_.hemiLength=f,_.numDirectionalShadows=m,_.numPointShadows=g,_.numSpotShadows=v,i.version=ou++)}function l(e,t){let n=0,r=0,c=0,l=0,u=0;const h=t.matrixWorldInverse;for(let d=0,p=e.length;d<p;d++){const t=e[d];if(t.isDirectionalLight){const e=i.directional[n];e.direction.setFromMatrixPosition(t.matrixWorld),s.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(s),e.direction.transformDirection(h),n++}else if(t.isSpotLight){const e=i.spot[c];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(h),e.direction.setFromMatrixPosition(t.matrixWorld),s.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(s),e.direction.transformDirection(h),c++}else if(t.isRectAreaLight){const e=i.rectArea[l];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(h),a.identity(),o.copy(t.matrixWorld),o.premultiply(h),a.extractRotation(o),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),e.halfWidth.applyMatrix4(a),e.halfHeight.applyMatrix4(a),l++}else if(t.isPointLight){const e=i.point[r];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(h),r++}else if(t.isHemisphereLight){const e=i.hemi[u];e.direction.setFromMatrixPosition(t.matrixWorld),e.direction.transformDirection(h),e.direction.normalize(),u++}}}return{setup:c,setupView:l,state:i}}function lu(e,t){const n=new cu(e,t),r=[],i=[];function s(){r.length=0,i.length=0}function o(e){r.push(e)}function a(e){i.push(e)}function c(e){n.setup(r,e)}function l(e){n.setupView(r,e)}const u={lightsArray:r,shadowsArray:i,lights:n};return{init:s,state:u,setupLights:c,setupLightsView:l,pushLight:o,pushShadow:a}}function uu(e,t){let n=new WeakMap;function r(r,i=0){let s;return!1===n.has(r)?(s=new lu(e,t),n.set(r,[s])):i>=n.get(r).length?(s=new lu(e,t),n.get(r).push(s)):s=n.get(r)[i],s}function i(){n=new WeakMap}return{get:r,dispose:i}}class hu extends Zr{constructor(e){super(),this.type="MeshDepthMaterial",this.depthPacking=Rt,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}hu.prototype.isMeshDepthMaterial=!0;class du extends Zr{constructor(e){super(),this.type="MeshDistanceMaterial",this.referencePosition=new kn,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}du.prototype.isMeshDistanceMaterial=!0;const pu="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fu="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}";function mu(e,t,n){let r=new es;const i=new hn,s=new hn,o=new Rn,a=new hu({depthPacking:Ct}),c=new du,u={},m=n.maxTextureSize,v={0:p,1:d,2:f},y=new zi({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new hn},radius:{value:4}},vertexShader:pu,fragmentShader:fu}),_=y.clone();_.defines.HORIZONTAL_PASS=1;const x=new pi;x.setAttribute("position",new ti(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const b=new Oi(x,y),w=this;function M(n,r){const i=t.update(b);y.defines.VSM_SAMPLES!==n.blurSamples&&(y.defines.VSM_SAMPLES=n.blurSamples,_.defines.VSM_SAMPLES=n.blurSamples,y.needsUpdate=!0,_.needsUpdate=!0),y.uniforms.shadow_pass.value=n.map.texture,y.uniforms.resolution.value=n.mapSize,y.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,i,y,b,null),_.uniforms.shadow_pass.value=n.mapPass.texture,_.uniforms.resolution.value=n.mapSize,_.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,i,_,b,null)}function S(t,n,r,i,s,o){let l=null;const d=!0===r.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(l=void 0!==d?d:!0===r.isPointLight?c:a,e.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0){const e=l.uuid,t=n.uuid;let r=u[e];void 0===r&&(r={},u[e]=r);let i=r[t];void 0===i&&(i=l.clone(),r[t]=i),l=i}return l.visible=n.visible,l.wireframe=n.wireframe,l.side=o===h?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:v[n.side],l.alphaMap=n.alphaMap,l.alphaTest=n.alphaTest,l.clipShadows=n.clipShadows,l.clippingPlanes=n.clippingPlanes,l.clipIntersection=n.clipIntersection,l.displacementMap=n.displacementMap,l.displacementScale=n.displacementScale,l.displacementBias=n.displacementBias,l.wireframeLinewidth=n.wireframeLinewidth,l.linewidth=n.linewidth,!0===r.isPointLight&&!0===l.isMeshDistanceMaterial&&(l.referencePosition.setFromMatrixPosition(r.matrixWorld),l.nearDistance=i,l.farDistance=s),l}function T(n,i,s,o,a){if(!1===n.visible)return;const c=n.layers.test(i.layers);if(c&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&a===h)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(s.matrixWorldInverse,n.matrixWorld);const r=t.update(n),i=n.material;if(Array.isArray(i)){const t=r.groups;for(let c=0,l=t.length;c<l;c++){const l=t[c],u=i[l.materialIndex];if(u&&u.visible){const t=S(n,u,o,s.near,s.far,a);e.renderBufferDirect(s,null,r,t,n,l)}}}else if(i.visible){const t=S(n,i,o,s.near,s.far,a);e.renderBufferDirect(s,null,r,t,n,null)}}const l=n.children;for(let e=0,t=l.length;e<t;e++)T(l[e],i,s,o,a)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=l,this.render=function(t,n,a){if(!1===w.enabled)return;if(!1===w.autoUpdate&&!1===w.needsUpdate)return;if(0===t.length)return;const c=e.getRenderTarget(),l=e.getActiveCubeFace(),u=e.getActiveMipmapLevel(),d=e.state;d.setBlending(g),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(let p=0,f=t.length;p<f;p++){const c=t[p],l=c.shadow;if(void 0===l){console.warn("THREE.WebGLShadowMap:",c,"has no shadow.");continue}if(!1===l.autoUpdate&&!1===l.needsUpdate)continue;i.copy(l.mapSize);const u=l.getFrameExtents();if(i.multiply(u),s.copy(l.mapSize),(i.x>m||i.y>m)&&(i.x>m&&(s.x=Math.floor(m/u.x),i.x=s.x*u.x,l.mapSize.x=s.x),i.y>m&&(s.y=Math.floor(m/u.y),i.y=s.y*u.y,l.mapSize.y=s.y)),null===l.map&&!l.isPointLightShadow&&this.type===h){const e={minFilter:fe,magFilter:fe,format:Le};l.map=new Cn(i.x,i.y,e),l.map.texture.name=c.name+".shadowMap",l.mapPass=new Cn(i.x,i.y,e),l.camera.updateProjectionMatrix()}if(null===l.map){const e={minFilter:he,magFilter:he,format:Le};l.map=new Cn(i.x,i.y,e),l.map.texture.name=c.name+".shadowMap",l.camera.updateProjectionMatrix()}e.setRenderTarget(l.map),e.clear();const f=l.getViewportCount();for(let e=0;e<f;e++){const t=l.getViewport(e);o.set(s.x*t.x,s.y*t.y,s.x*t.z,s.y*t.w),d.viewport(o),l.updateMatrices(c,e),r=l.getFrustum(),T(n,a,l.camera,c,this.type)}l.isPointLightShadow||this.type!==h||M(l,a),l.needsUpdate=!1}w.needsUpdate=!1,e.setRenderTarget(c,l,u)}}function gu(e,t,n){const r=n.isWebGL2;function i(){let t=!1;const n=new Rn;let r=null;const i=new Rn(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,s,o,a){!0===a&&(t*=o,r*=o,s*=o),n.set(t,r,s,o),!1===i.equals(n)&&(e.clearColor(t,r,s,o),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}}function s(){let t=!1,n=null,r=null,i=null;return{setTest:function(e){e?we(2929):Me(2929)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){if(t)switch(t){case U:e.depthFunc(512);break;case B:e.depthFunc(519);break;case z:e.depthFunc(513);break;case H:e.depthFunc(515);break;case j:e.depthFunc(514);break;case V:e.depthFunc(518);break;case G:e.depthFunc(516);break;case W:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}}function l(){let t=!1,n=null,r=null,i=null,s=null,o=null,a=null,c=null,l=null;return{setTest:function(e){t||(e?we(2960):Me(2960))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,o){r===t&&i===n&&s===o||(e.stencilFunc(t,n,o),r=t,i=n,s=o)},setOp:function(t,n,r){o===t&&a===n&&c===r||(e.stencilOp(t,n,r),o=t,a=n,c=r)},setLocked:function(e){t=e},setClear:function(t){l!==t&&(e.clearStencil(t),l=t)},reset:function(){t=!1,n=null,r=null,i=null,s=null,o=null,a=null,c=null,l=null}}}const u=new i,h=new s,d=new l;let m={},q={},X=new WeakMap,Y=[],K=null,J=!1,Z=null,$=null,Q=null,ee=null,te=null,ne=null,re=null,ie=!1,se=null,oe=null,ae=null,ce=null,le=null;const ue=e.getParameter(35661);let he=!1,de=0;const pe=e.getParameter(7938);-1!==pe.indexOf("WebGL")?(de=parseFloat(/^WebGL (\d)/.exec(pe)[1]),he=de>=1):-1!==pe.indexOf("OpenGL ES")&&(de=parseFloat(/^OpenGL ES (\d)/.exec(pe)[1]),he=de>=2);let fe=null,me={};const ge=e.getParameter(3088),ve=e.getParameter(2978),ye=(new Rn).fromArray(ge),_e=(new Rn).fromArray(ve);function xe(t,n,r){const i=new Uint8Array(4),s=e.createTexture();e.bindTexture(t,s),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(let o=0;o<r;o++)e.texImage2D(n+o,0,6408,1,1,0,6408,5121,i);return s}const be={};function we(t){!0!==m[t]&&(e.enable(t),m[t]=!0)}function Me(t){!1!==m[t]&&(e.disable(t),m[t]=!1)}function Se(t,n){return q[t]!==n&&(e.bindFramebuffer(t,n),q[t]=n,r&&(36009===t&&(q[36160]=n),36160===t&&(q[36009]=n)),!0)}function Te(r,i){let s=Y,o=!1;if(r)if(s=X.get(i),void 0===s&&(s=[],X.set(i,s)),r.isWebGLMultipleRenderTargets){const e=r.texture;if(s.length!==e.length||36064!==s[0]){for(let t=0,n=e.length;t<n;t++)s[t]=36064+t;s.length=e.length,o=!0}}else 36064!==s[0]&&(s[0]=36064,o=!0);else 1029!==s[0]&&(s[0]=1029,o=!0);o&&(n.isWebGL2?e.drawBuffers(s):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(s))}function Ee(t){return K!==t&&(e.useProgram(t),K=t,!0)}be[3553]=xe(3553,3553,1),be[34067]=xe(34067,34069,6),u.setClear(0,0,0,1),h.setClear(1),d.setClear(0),we(2929),h.setFunc(H),Oe(!1),Pe(a),we(2884),Ce(g);const Ae={[w]:32774,[M]:32778,[S]:32779};if(r)Ae[T]=32775,Ae[E]=32776;else{const e=t.get("EXT_blend_minmax");null!==e&&(Ae[T]=e.MIN_EXT,Ae[E]=e.MAX_EXT)}const Re={[A]:0,[R]:1,[C]:768,[O]:770,[F]:776,[N]:774,[I]:772,[L]:769,[P]:771,[k]:775,[D]:773};function Ce(t,n,r,i,s,o,a,c){if(t!==g){if(!1===J&&(we(3042),J=!0),t===b)s=s||n,o=o||r,a=a||i,n===$&&s===te||(e.blendEquationSeparate(Ae[n],Ae[s]),$=n,te=s),r===Q&&i===ee&&o===ne&&a===re||(e.blendFuncSeparate(Re[r],Re[i],Re[o],Re[a]),Q=r,ee=i,ne=o,re=a),Z=t,ie=null;else if(t!==Z||c!==ie){if($===w&&te===w||(e.blendEquation(32774),$=w,te=w),c)switch(t){case v:e.blendFuncSeparate(1,771,1,771);break;case y:e.blendFunc(1,1);break;case _:e.blendFuncSeparate(0,769,0,1);break;case x:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t);break}else switch(t){case v:e.blendFuncSeparate(770,771,1,771);break;case y:e.blendFunc(770,1);break;case _:e.blendFuncSeparate(0,769,0,1);break;case x:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t);break}Q=null,ee=null,ne=null,re=null,Z=t,ie=c}}else!0===J&&(Me(3042),J=!1)}function Le(e,t){e.side===f?Me(2884):we(2884);let n=e.side===p;t&&(n=!n),Oe(n),e.blending===v&&!1===e.transparent?Ce(g):Ce(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),h.setFunc(e.depthFunc),h.setTest(e.depthTest),h.setMask(e.depthWrite),u.setMask(e.colorWrite);const r=e.stencilWrite;d.setTest(r),r&&(d.setMask(e.stencilWriteMask),d.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),d.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),De(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?we(32926):Me(32926)}function Oe(t){se!==t&&(t?e.frontFace(2304):e.frontFace(2305),se=t)}function Pe(t){t!==o?(we(2884),t!==oe&&(t===a?e.cullFace(1029):t===c?e.cullFace(1028):e.cullFace(1032))):Me(2884),oe=t}function Ie(t){t!==ae&&(he&&e.lineWidth(t),ae=t)}function De(t,n,r){t?(we(32823),ce===n&&le===r||(e.polygonOffset(n,r),ce=n,le=r)):Me(32823)}function Ne(e){e?we(3089):Me(3089)}function ke(t){void 0===t&&(t=33984+ue-1),fe!==t&&(e.activeTexture(t),fe=t)}function Fe(t,n){null===fe&&ke();let r=me[fe];void 0===r&&(r={type:void 0,texture:void 0},me[fe]=r),r.type===t&&r.texture===n||(e.bindTexture(t,n||be[t]),r.type=t,r.texture=n)}function Ue(){const t=me[fe];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)}function Be(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function ze(){try{e.texSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function He(){try{e.texSubImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function je(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function Ve(){try{e.texStorage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function Ge(){try{e.texStorage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function We(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function qe(){try{e.texImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function Xe(t){!1===ye.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),ye.copy(t))}function Ye(t){!1===_e.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),_e.copy(t))}function Ke(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),!0===r&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),m={},fe=null,me={},q={},X=new WeakMap,Y=[],K=null,J=!1,Z=null,$=null,Q=null,ee=null,te=null,ne=null,re=null,ie=!1,se=null,oe=null,ae=null,ce=null,le=null,ye.set(0,0,e.canvas.width,e.canvas.height),_e.set(0,0,e.canvas.width,e.canvas.height),u.reset(),h.reset(),d.reset()}return{buffers:{color:u,depth:h,stencil:d},enable:we,disable:Me,bindFramebuffer:Se,drawBuffers:Te,useProgram:Ee,setBlending:Ce,setMaterial:Le,setFlipSided:Oe,setCullFace:Pe,setLineWidth:Ie,setPolygonOffset:De,setScissorTest:Ne,activeTexture:ke,bindTexture:Fe,unbindTexture:Ue,compressedTexImage2D:Be,texImage2D:We,texImage3D:qe,texStorage2D:Ve,texStorage3D:Ge,texSubImage2D:ze,texSubImage3D:He,compressedTexSubImage2D:je,scissor:Xe,viewport:Ye,reset:Ke}}function vu(e,t,n,r,i,s,o){const a=i.isWebGL2,c=i.maxTextures,l=i.maxCubemapSize,u=i.maxTextureSize,h=i.maxSamples,d=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,p=new WeakMap;let f;const m=new WeakMap;let g=!1;try{g="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(re){}function v(e,t){return g?new OffscreenCanvas(e,t):fn("canvas")}function y(e,t,n,r){let i=1;if((e.width>r||e.height>r)&&(i=r/Math.max(e.width,e.height)),i<1||!0===t){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){const r=t?cn:Math.floor,s=r(i*e.width),o=r(i*e.height);void 0===f&&(f=v(s,o));const a=n?v(s,o):f;a.width=s,a.height=o;const c=a.getContext("2d");return c.drawImage(e,0,0,s,o),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+s+"x"+o+")."),a}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function _(e){return on(e.width)&&on(e.height)}function x(e){return!a&&(e.wrapS!==le||e.wrapT!==le||e.minFilter!==he&&e.minFilter!==fe)}function b(e,t){return e.generateMipmaps&&t&&e.minFilter!==he&&e.minFilter!==fe}function w(t){e.generateMipmap(t)}function M(n,r,i,s,o=!1){if(!1===a)return r;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let c=r;return 6403===r&&(5126===i&&(c=33326),5131===i&&(c=33325),5121===i&&(c=33321)),33319===r&&(5126===i&&(c=33328),5131===i&&(c=33327),5121===i&&(c=33323)),6408===r&&(5126===i&&(c=34836),5131===i&&(c=34842),5121===i&&(c=s===At&&!1===o?35907:32856),32819===i&&(c=32854),32820===i&&(c=32855)),33325!==c&&33326!==c&&33327!==c&&33328!==c&&34842!==c&&34836!==c||t.get("EXT_color_buffer_float"),c}function S(e,t,n){return!0===b(e,n)||e.isFramebufferTexture&&e.minFilter!==he&&e.minFilter!==fe?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function T(e){return e===he||e===de||e===pe?9728:9729}function E(e){const t=e.target;t.removeEventListener("dispose",E),R(t),t.isVideoTexture&&p.delete(t)}function A(e){const t=e.target;t.removeEventListener("dispose",A),L(t)}function R(e){const t=r.get(e);if(void 0===t.__webglInit)return;const n=e.source,i=m.get(n);if(i){const r=i[t.__cacheKey];r.usedTimes--,0===r.usedTimes&&C(e),0===Object.keys(i).length&&m.delete(n)}r.remove(e)}function C(t){const n=r.get(t);e.deleteTexture(n.__webglTexture);const i=t.source,s=m.get(i);delete s[n.__cacheKey],o.memory.textures--}function L(t){const n=t.texture,i=r.get(t),s=r.get(n);if(void 0!==s.__webglTexture&&(e.deleteTexture(s.__webglTexture),o.memory.textures--),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLCubeRenderTarget)for(let r=0;r<6;r++)e.deleteFramebuffer(i.__webglFramebuffer[r]),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer[r]);else e.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&e.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer&&e.deleteRenderbuffer(i.__webglColorRenderbuffer),i.__webglDepthRenderbuffer&&e.deleteRenderbuffer(i.__webglDepthRenderbuffer);if(t.isWebGLMultipleRenderTargets)for(let a=0,c=n.length;a<c;a++){const t=r.get(n[a]);t.__webglTexture&&(e.deleteTexture(t.__webglTexture),o.memory.textures--),r.remove(n[a])}r.remove(n),r.remove(t)}let O=0;function P(){O=0}function I(){const e=O;return e>=c&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+c),O+=1,e}function D(e){const t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.encoding),t.join()}function N(e,t){const i=r.get(e);if(e.isVideoTexture&&te(e),!1===e.isRenderTargetTexture&&e.version>0&&i.__version!==e.version){const n=e.image;if(null===n)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==n.complete)return void V(i,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+t),n.bindTexture(3553,i.__webglTexture)}function k(e,t){const i=r.get(e);e.version>0&&i.__version!==e.version?V(i,e,t):(n.activeTexture(33984+t),n.bindTexture(35866,i.__webglTexture))}function F(e,t){const i=r.get(e);e.version>0&&i.__version!==e.version?V(i,e,t):(n.activeTexture(33984+t),n.bindTexture(32879,i.__webglTexture))}function U(e,t){const i=r.get(e);e.version>0&&i.__version!==e.version?G(i,e,t):(n.activeTexture(33984+t),n.bindTexture(34067,i.__webglTexture))}const B={[ce]:10497,[le]:33071,[ue]:33648},z={[he]:9728,[de]:9984,[pe]:9986,[fe]:9729,[me]:9985,[ge]:9987};function H(n,s,o){if(o?(e.texParameteri(n,10242,B[s.wrapS]),e.texParameteri(n,10243,B[s.wrapT]),32879!==n&&35866!==n||e.texParameteri(n,32882,B[s.wrapR]),e.texParameteri(n,10240,z[s.magFilter]),e.texParameteri(n,10241,z[s.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),s.wrapS===le&&s.wrapT===le||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,T(s.magFilter)),e.texParameteri(n,10241,T(s.minFilter)),s.minFilter!==he&&s.minFilter!==fe&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){const o=t.get("EXT_texture_filter_anisotropic");if(s.type===Me&&!1===t.has("OES_texture_float_linear"))return;if(!1===a&&s.type===Se&&!1===t.has("OES_texture_half_float_linear"))return;(s.anisotropy>1||r.get(s).__currentAnisotropy)&&(e.texParameterf(n,o.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(s.anisotropy,i.getMaxAnisotropy())),r.get(s).__currentAnisotropy=s.anisotropy)}}function j(t,n){let r=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",E));const i=n.source;let s=m.get(i);void 0===s&&(s={},m.set(i,s));const a=D(n);if(a!==t.__cacheKey){void 0===s[a]&&(s[a]={texture:e.createTexture(),usedTimes:0},o.memory.textures++,r=!0),s[a].usedTimes++;const i=s[t.__cacheKey];void 0!==i&&(s[t.__cacheKey].usedTimes--,0===i.usedTimes&&C(n)),t.__cacheKey=a,t.__webglTexture=s[a].texture}return r}function V(t,r,i){let o=3553;r.isDataArrayTexture&&(o=35866),r.isData3DTexture&&(o=32879);const c=j(t,r),l=r.source;if(n.activeTexture(33984+i),n.bindTexture(o,t.__webglTexture),l.version!==l.__currentVersion||!0===c){e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);const i=x(r)&&!1===_(r.image);let c=y(r.image,i,!1,u);c=ne(r,c);const h=_(c)||a,d=s.convert(r.format,r.encoding);let p,f=s.convert(r.type),m=M(r.internalFormat,d,f,r.encoding,r.isVideoTexture);H(o,r,h);const g=r.mipmaps,v=a&&!0!==r.isVideoTexture,T=void 0===t.__version,E=S(r,c,h);if(r.isDepthTexture)m=6402,a?m=r.type===Me?36012:r.type===we?33190:r.type===Ae?35056:33189:r.type===Me&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),r.format===Ie&&6402===m&&r.type!==xe&&r.type!==we&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=xe,f=s.convert(r.type)),r.format===De&&6402===m&&(m=34041,r.type!==Ae&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=Ae,f=s.convert(r.type))),v&&T?n.texStorage2D(3553,1,m,c.width,c.height):n.texImage2D(3553,0,m,c.width,c.height,0,d,f,null);else if(r.isDataTexture)if(g.length>0&&h){v&&T&&n.texStorage2D(3553,E,m,g[0].width,g[0].height);for(let e=0,t=g.length;e<t;e++)p=g[e],v?n.texSubImage2D(3553,e,0,0,p.width,p.height,d,f,p.data):n.texImage2D(3553,e,m,p.width,p.height,0,d,f,p.data);r.generateMipmaps=!1}else v?(T&&n.texStorage2D(3553,E,m,c.width,c.height),n.texSubImage2D(3553,0,0,0,c.width,c.height,d,f,c.data)):n.texImage2D(3553,0,m,c.width,c.height,0,d,f,c.data);else if(r.isCompressedTexture){v&&T&&n.texStorage2D(3553,E,m,g[0].width,g[0].height);for(let e=0,t=g.length;e<t;e++)p=g[e],r.format!==Le?null!==d?v?n.compressedTexSubImage2D(3553,e,0,0,p.width,p.height,d,p.data):n.compressedTexImage2D(3553,e,m,p.width,p.height,0,p.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):v?n.texSubImage2D(3553,e,0,0,p.width,p.height,d,f,p.data):n.texImage2D(3553,e,m,p.width,p.height,0,d,f,p.data)}else if(r.isDataArrayTexture)v?(T&&n.texStorage3D(35866,E,m,c.width,c.height,c.depth),n.texSubImage3D(35866,0,0,0,0,c.width,c.height,c.depth,d,f,c.data)):n.texImage3D(35866,0,m,c.width,c.height,c.depth,0,d,f,c.data);else if(r.isData3DTexture)v?(T&&n.texStorage3D(32879,E,m,c.width,c.height,c.depth),n.texSubImage3D(32879,0,0,0,0,c.width,c.height,c.depth,d,f,c.data)):n.texImage3D(32879,0,m,c.width,c.height,c.depth,0,d,f,c.data);else if(r.isFramebufferTexture)v&&T?n.texStorage2D(3553,E,m,c.width,c.height):n.texImage2D(3553,0,m,c.width,c.height,0,d,f,null);else if(g.length>0&&h){v&&T&&n.texStorage2D(3553,E,m,g[0].width,g[0].height);for(let e=0,t=g.length;e<t;e++)p=g[e],v?n.texSubImage2D(3553,e,0,0,d,f,p):n.texImage2D(3553,e,m,d,f,p);r.generateMipmaps=!1}else v?(T&&n.texStorage2D(3553,E,m,c.width,c.height),n.texSubImage2D(3553,0,0,0,d,f,c)):n.texImage2D(3553,0,m,d,f,c);b(r,h)&&w(o),l.__currentVersion=l.version,r.onUpdate&&r.onUpdate(r)}t.__version=r.version}function G(t,r,i){if(6!==r.image.length)return;const o=j(t,r),c=r.source;if(n.activeTexture(33984+i),n.bindTexture(34067,t.__webglTexture),c.version!==c.__currentVersion||!0===o){e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);const i=r.isCompressedTexture||r.image[0].isCompressedTexture,o=r.image[0]&&r.image[0].isDataTexture,u=[];for(let e=0;e<6;e++)u[e]=i||o?o?r.image[e].image:r.image[e]:y(r.image[e],!1,!0,l),u[e]=ne(r,u[e]);const h=u[0],d=_(h)||a,p=s.convert(r.format,r.encoding),f=s.convert(r.type),m=M(r.internalFormat,p,f,r.encoding),g=a&&!0!==r.isVideoTexture,v=void 0===t.__version;let x,T=S(r,h,d);if(H(34067,r,d),i){g&&v&&n.texStorage2D(34067,T,m,h.width,h.height);for(let e=0;e<6;e++){x=u[e].mipmaps;for(let t=0;t<x.length;t++){const i=x[t];r.format!==Le?null!==p?g?n.compressedTexSubImage2D(34069+e,t,0,0,i.width,i.height,p,i.data):n.compressedTexImage2D(34069+e,t,m,i.width,i.height,0,i.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):g?n.texSubImage2D(34069+e,t,0,0,i.width,i.height,p,f,i.data):n.texImage2D(34069+e,t,m,i.width,i.height,0,p,f,i.data)}}}else{x=r.mipmaps,g&&v&&(x.length>0&&T++,n.texStorage2D(34067,T,m,u[0].width,u[0].height));for(let e=0;e<6;e++)if(o){g?n.texSubImage2D(34069+e,0,0,0,u[e].width,u[e].height,p,f,u[e].data):n.texImage2D(34069+e,0,m,u[e].width,u[e].height,0,p,f,u[e].data);for(let t=0;t<x.length;t++){const r=x[t],i=r.image[e].image;g?n.texSubImage2D(34069+e,t+1,0,0,i.width,i.height,p,f,i.data):n.texImage2D(34069+e,t+1,m,i.width,i.height,0,p,f,i.data)}}else{g?n.texSubImage2D(34069+e,0,0,0,p,f,u[e]):n.texImage2D(34069+e,0,m,p,f,u[e]);for(let t=0;t<x.length;t++){const r=x[t];g?n.texSubImage2D(34069+e,t+1,0,0,p,f,r.image[e]):n.texImage2D(34069+e,t+1,m,p,f,r.image[e])}}}b(r,d)&&w(34067),c.__currentVersion=c.version,r.onUpdate&&r.onUpdate(r)}t.__version=r.version}function W(t,i,o,a,c){const l=s.convert(o.format,o.encoding),u=s.convert(o.type),h=M(o.internalFormat,l,u,o.encoding),p=r.get(i);p.__hasExternalTextures||(32879===c||35866===c?n.texImage3D(c,0,h,i.width,i.height,i.depth,0,l,u,null):n.texImage2D(c,0,h,i.width,i.height,0,l,u,null)),n.bindFramebuffer(36160,t),ee(i)?d.framebufferTexture2DMultisampleEXT(36160,a,c,r.get(o).__webglTexture,0,Q(i)):e.framebufferTexture2D(36160,a,c,r.get(o).__webglTexture,0),n.bindFramebuffer(36160,null)}function q(t,n,r){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){let i=33189;if(r||ee(n)){const t=n.depthTexture;t&&t.isDepthTexture&&(t.type===Me?i=36012:t.type===we&&(i=33190));const r=Q(n);ee(n)?d.renderbufferStorageMultisampleEXT(36161,r,i,n.width,n.height):e.renderbufferStorageMultisample(36161,r,i,n.width,n.height)}else e.renderbufferStorage(36161,i,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){const i=Q(n);r&&!1===ee(n)?e.renderbufferStorageMultisample(36161,i,35056,n.width,n.height):ee(n)?d.renderbufferStorageMultisampleEXT(36161,i,35056,n.width,n.height):e.renderbufferStorage(36161,34041,n.width,n.height),e.framebufferRenderbuffer(36160,33306,36161,t)}else{const t=!0===n.isWebGLMultipleRenderTargets?n.texture[0]:n.texture,i=s.convert(t.format,t.encoding),o=s.convert(t.type),a=M(t.internalFormat,i,o,t.encoding),c=Q(n);r&&!1===ee(n)?e.renderbufferStorageMultisample(36161,c,a,n.width,n.height):ee(n)?d.renderbufferStorageMultisampleEXT(36161,c,a,n.width,n.height):e.renderbufferStorage(36161,a,n.width,n.height)}e.bindRenderbuffer(36161,null)}function X(t,i){const s=i&&i.isWebGLCubeRenderTarget;if(s)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,t),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),N(i.depthTexture,0);const o=r.get(i.depthTexture).__webglTexture,a=Q(i);if(i.depthTexture.format===Ie)ee(i)?d.framebufferTexture2DMultisampleEXT(36160,36096,3553,o,0,a):e.framebufferTexture2D(36160,36096,3553,o,0);else{if(i.depthTexture.format!==De)throw new Error("Unknown depthTexture format");ee(i)?d.framebufferTexture2DMultisampleEXT(36160,33306,3553,o,0,a):e.framebufferTexture2D(36160,33306,3553,o,0)}}function Y(t){const i=r.get(t),s=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!i.__autoAllocateDepthBuffer){if(s)throw new Error("target.depthTexture not supported in Cube render targets");X(i.__webglFramebuffer,t)}else if(s){i.__webglDepthbuffer=[];for(let r=0;r<6;r++)n.bindFramebuffer(36160,i.__webglFramebuffer[r]),i.__webglDepthbuffer[r]=e.createRenderbuffer(),q(i.__webglDepthbuffer[r],t,!1)}else n.bindFramebuffer(36160,i.__webglFramebuffer),i.__webglDepthbuffer=e.createRenderbuffer(),q(i.__webglDepthbuffer,t,!1);n.bindFramebuffer(36160,null)}function K(e,t,n){const i=r.get(e);void 0!==t&&W(i.__webglFramebuffer,e,e.texture,36064,3553),void 0!==n&&Y(e)}function J(t){const c=t.texture,l=r.get(t),u=r.get(c);t.addEventListener("dispose",A),!0!==t.isWebGLMultipleRenderTargets&&(void 0===u.__webglTexture&&(u.__webglTexture=e.createTexture()),u.__version=c.version,o.memory.textures++);const h=!0===t.isWebGLCubeRenderTarget,d=!0===t.isWebGLMultipleRenderTargets,p=_(t)||a;if(h){l.__webglFramebuffer=[];for(let t=0;t<6;t++)l.__webglFramebuffer[t]=e.createFramebuffer()}else if(l.__webglFramebuffer=e.createFramebuffer(),d)if(i.drawBuffers){const n=t.texture;for(let t=0,i=n.length;t<i;t++){const i=r.get(n[t]);void 0===i.__webglTexture&&(i.__webglTexture=e.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(a&&t.samples>0&&!1===ee(t)){l.__webglMultisampledFramebuffer=e.createFramebuffer(),l.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,l.__webglColorRenderbuffer);const r=s.convert(c.format,c.encoding),i=s.convert(c.type),o=M(c.internalFormat,r,i,c.encoding),a=Q(t);e.renderbufferStorageMultisample(36161,a,o,t.width,t.height),n.bindFramebuffer(36160,l.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,l.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),t.depthBuffer&&(l.__webglDepthRenderbuffer=e.createRenderbuffer(),q(l.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(36160,null)}if(h){n.bindTexture(34067,u.__webglTexture),H(34067,c,p);for(let e=0;e<6;e++)W(l.__webglFramebuffer[e],t,c,36064,34069+e);b(c,p)&&w(34067),n.unbindTexture()}else if(d){const e=t.texture;for(let i=0,s=e.length;i<s;i++){const s=e[i],o=r.get(s);n.bindTexture(3553,o.__webglTexture),H(3553,s,p),W(l.__webglFramebuffer,t,s,36064+i,3553),b(s,p)&&w(3553)}n.unbindTexture()}else{let e=3553;(t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(a?e=t.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(e,u.__webglTexture),H(e,c,p),W(l.__webglFramebuffer,t,c,36064,e),b(c,p)&&w(e),n.unbindTexture()}t.depthBuffer&&Y(t)}function Z(e){const t=_(e)||a,i=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture];for(let s=0,o=i.length;s<o;s++){const o=i[s];if(b(o,t)){const t=e.isWebGLCubeRenderTarget?34067:3553,i=r.get(o).__webglTexture;n.bindTexture(t,i),w(t),n.unbindTexture()}}}function $(t){if(a&&t.samples>0&&!1===ee(t)){const i=t.width,s=t.height;let o=16384;const a=[36064],c=t.stencilBuffer?33306:36096;t.depthBuffer&&a.push(c);const l=r.get(t),u=void 0!==l.__ignoreDepthValues&&l.__ignoreDepthValues;!1===u&&(t.depthBuffer&&(o|=256),t.stencilBuffer&&(o|=1024)),n.bindFramebuffer(36008,l.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,l.__webglFramebuffer),!0===u&&(e.invalidateFramebuffer(36008,[c]),e.invalidateFramebuffer(36009,[c])),e.blitFramebuffer(0,0,i,s,0,0,i,s,o,9728),e.invalidateFramebuffer(36008,a),n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,l.__webglMultisampledFramebuffer)}}function Q(e){return Math.min(h,e.samples)}function ee(e){const n=r.get(e);return a&&e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function te(e){const t=o.render.frame;p.get(e)!==t&&(p.set(e,t),e.update())}function ne(e,n){const r=e.encoding,i=e.format,s=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||e.format===Ft||r!==Et&&(r===At?!1===a?!0===t.has("EXT_sRGB")&&i===Le?(e.format=Ft,e.minFilter=fe,e.generateMipmaps=!1):n=Mn.sRGBToLinear(n):i===Le&&s===ve||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",r)),n}this.allocateTextureUnit=I,this.resetTextureUnits=P,this.setTexture2D=N,this.setTexture2DArray=k,this.setTexture3D=F,this.setTextureCube=U,this.rebindTextures=K,this.setupRenderTarget=J,this.updateRenderTargetMipmap=Z,this.updateMultisampleRenderTarget=$,this.setupDepthRenderbuffer=Y,this.setupFrameBufferTexture=W,this.useMultisampledRTT=ee}function yu(e,t,n){const r=n.isWebGL2;function i(e,n=null){let i;if(e===ve)return 5121;if(e===Te)return 32819;if(e===Ee)return 32820;if(e===ye)return 5120;if(e===_e)return 5122;if(e===xe)return 5123;if(e===be)return 5124;if(e===we)return 5125;if(e===Me)return 5126;if(e===Se)return r?5131:(i=t.get("OES_texture_half_float"),null!==i?i.HALF_FLOAT_OES:null);if(e===Re)return 6406;if(e===Le)return 6408;if(e===Oe)return 6409;if(e===Pe)return 6410;if(e===Ie)return 6402;if(e===De)return 34041;if(e===Ne)return 6403;if(e===Ce)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(e===Ft)return i=t.get("EXT_sRGB"),null!==i?i.SRGB_ALPHA_EXT:null;if(e===ke)return 36244;if(e===Fe)return 33319;if(e===Ue)return 33320;if(e===Be)return 36249;if(e===ze||e===He||e===je||e===Ve)if(n===At){if(i=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===i)return null;if(e===ze)return i.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(e===He)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(e===je)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(e===Ve)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(i=t.get("WEBGL_compressed_texture_s3tc"),null===i)return null;if(e===ze)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===He)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===je)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===Ve)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(e===Ge||e===We||e===qe||e===Xe){if(i=t.get("WEBGL_compressed_texture_pvrtc"),null===i)return null;if(e===Ge)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===We)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===qe)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===Xe)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(e===Ye)return i=t.get("WEBGL_compressed_texture_etc1"),null!==i?i.COMPRESSED_RGB_ETC1_WEBGL:null;if(e===Ke||e===Je){if(i=t.get("WEBGL_compressed_texture_etc"),null===i)return null;if(e===Ke)return n===At?i.COMPRESSED_SRGB8_ETC2:i.COMPRESSED_RGB8_ETC2;if(e===Je)return n===At?i.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:i.COMPRESSED_RGBA8_ETC2_EAC}if(e===Ze||e===$e||e===Qe||e===et||e===tt||e===nt||e===rt||e===it||e===st||e===ot||e===at||e===ct||e===lt||e===ut){if(i=t.get("WEBGL_compressed_texture_astc"),null===i)return null;if(e===Ze)return n===At?i.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:i.COMPRESSED_RGBA_ASTC_4x4_KHR;if(e===$e)return n===At?i.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:i.COMPRESSED_RGBA_ASTC_5x4_KHR;if(e===Qe)return n===At?i.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:i.COMPRESSED_RGBA_ASTC_5x5_KHR;if(e===et)return n===At?i.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:i.COMPRESSED_RGBA_ASTC_6x5_KHR;if(e===tt)return n===At?i.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:i.COMPRESSED_RGBA_ASTC_6x6_KHR;if(e===nt)return n===At?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:i.COMPRESSED_RGBA_ASTC_8x5_KHR;if(e===rt)return n===At?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:i.COMPRESSED_RGBA_ASTC_8x6_KHR;if(e===it)return n===At?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:i.COMPRESSED_RGBA_ASTC_8x8_KHR;if(e===st)return n===At?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:i.COMPRESSED_RGBA_ASTC_10x5_KHR;if(e===ot)return n===At?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:i.COMPRESSED_RGBA_ASTC_10x6_KHR;if(e===at)return n===At?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:i.COMPRESSED_RGBA_ASTC_10x8_KHR;if(e===ct)return n===At?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:i.COMPRESSED_RGBA_ASTC_10x10_KHR;if(e===lt)return n===At?i.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:i.COMPRESSED_RGBA_ASTC_12x10_KHR;if(e===ut)return n===At?i.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:i.COMPRESSED_RGBA_ASTC_12x12_KHR}if(e===ht){if(i=t.get("EXT_texture_compression_bptc"),null===i)return null;if(e===ht)return n===At?i.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:i.COMPRESSED_RGBA_BPTC_UNORM_EXT}return e===Ae?r?34042:(i=t.get("WEBGL_depth_texture"),null!==i?i.UNSIGNED_INT_24_8_WEBGL:null):void 0}return{convert:i}}class _u extends ji{constructor(e=[]){super(),this.cameras=e}}_u.prototype.isArrayCamera=!0;class xu extends Ur{constructor(){super(),this.type="Group"}}xu.prototype.isGroup=!0;const bu={type:"move"};class wu{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new xu,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new xu,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new kn,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new kn),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new xu,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new kn,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new kn),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let r=null,i=null,s=null;const o=this._targetRay,a=this._grip,c=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState)if(null!==o&&(r=t.getPose(e.targetRaySpace,n),null!==r&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(bu))),c&&e.hand){s=!0;for(const s of e.hand.values()){const e=t.getJointPose(s,n);if(void 0===c.joints[s.jointName]){const e=new xu;e.matrixAutoUpdate=!1,e.visible=!1,c.joints[s.jointName]=e,c.add(e)}const r=c.joints[s.jointName];null!==e&&(r.matrix.fromArray(e.transform.matrix),r.matrix.decompose(r.position,r.rotation,r.scale),r.jointRadius=e.radius),r.visible=null!==e}const r=c.joints["index-finger-tip"],i=c.joints["thumb-tip"],o=r.position.distanceTo(i.position),a=.02,l=.005;c.inputState.pinching&&o>a+l?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&o<=a-l&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==a&&e.gripSpace&&(i=t.getPose(e.gripSpace,n),null!==i&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1));return null!==o&&(o.visible=null!==r),null!==a&&(a.visible=null!==i),null!==c&&(c.visible=null!==s),this}}class Mu extends An{constructor(e,t,n,r,i,s,o,a,c,l){if(l=void 0!==l?l:Ie,l!==Ie&&l!==De)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&l===Ie&&(n=xe),void 0===n&&l===De&&(n=Ae),super(null,r,i,s,o,a,l,n,c),this.image={width:e,height:t},this.magFilter=void 0!==o?o:he,this.minFilter=void 0!==a?a:he,this.flipY=!1,this.generateMipmaps=!1}}Mu.prototype.isDepthTexture=!0;class Su extends Ut{constructor(e,t){super();const n=this;let r=null,i=1,s=null,o="local-floor",a=null,c=null,l=null,u=null,h=null;const d=t.getContextAttributes();let p=null,f=null;const m=[],g=new Map,v=new ji;v.layers.enable(1),v.viewport=new Rn;const y=new ji;y.layers.enable(2),y.viewport=new Rn;const _=[v,y],x=new _u;x.layers.enable(1),x.layers.enable(2);let b=null,w=null;function M(e){const t=g.get(e.inputSource);t&&t.dispatchEvent({type:e.type,data:e.inputSource})}function S(){g.forEach((function(e,t){e.disconnect(t)})),g.clear(),b=null,w=null,e.setRenderTarget(p),u=null,l=null,c=null,r=null,f=null,P.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function T(e){const t=r.inputSources;for(let n=0;n<m.length;n++)g.set(t[n],m[n]);for(let n=0;n<e.removed.length;n++){const t=e.removed[n],r=g.get(t);r&&(r.dispatchEvent({type:"disconnected",data:t}),g.delete(t))}for(let n=0;n<e.added.length;n++){const t=e.added[n],r=g.get(t);r&&r.dispatchEvent({type:"connected",data:t})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=m[e];return void 0===t&&(t=new wu,m[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=m[e];return void 0===t&&(t=new wu,m[e]=t),t.getGripSpace()},this.getHand=function(e){let t=m[e];return void 0===t&&(t=new wu,m[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){i=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){o=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return s},this.getBaseLayer=function(){return null!==l?l:u},this.getBinding=function(){return c},this.getFrame=function(){return h},this.getSession=function(){return r},this.setSession=async function(a){if(r=a,null!==r){if(p=e.getRenderTarget(),r.addEventListener("select",M),r.addEventListener("selectstart",M),r.addEventListener("selectend",M),r.addEventListener("squeeze",M),r.addEventListener("squeezestart",M),r.addEventListener("squeezeend",M),r.addEventListener("end",S),r.addEventListener("inputsourceschange",T),!0!==d.xrCompatible&&await t.makeXRCompatible(),void 0===r.renderState.layers||!1===e.capabilities.isWebGL2){const n={antialias:void 0!==r.renderState.layers||d.antialias,alpha:d.alpha,depth:d.depth,stencil:d.stencil,framebufferScaleFactor:i};u=new XRWebGLLayer(r,t,n),r.updateRenderState({baseLayer:u}),f=new Cn(u.framebufferWidth,u.framebufferHeight,{format:Le,type:ve,encoding:e.outputEncoding})}else{let n=null,s=null,o=null;d.depth&&(o=d.stencil?35056:33190,n=d.stencil?De:Ie,s=d.stencil?Ae:xe);const a={colorFormat:e.outputEncoding===At?35907:32856,depthFormat:o,scaleFactor:i};c=new XRWebGLBinding(r,t),l=c.createProjectionLayer(a),r.updateRenderState({layers:[l]}),f=new Cn(l.textureWidth,l.textureHeight,{format:Le,type:ve,depthTexture:new Mu(l.textureWidth,l.textureHeight,s,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:d.stencil,encoding:e.outputEncoding,samples:d.antialias?4:0});const u=e.properties.get(f);u.__ignoreDepthValues=l.ignoreDepthValues}f.isXRRenderTarget=!0,this.setFoveation(1),s=await r.requestReferenceSpace(o),P.setContext(r),P.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};const E=new kn,A=new kn;function R(e,t,n){E.setFromMatrixPosition(t.matrixWorld),A.setFromMatrixPosition(n.matrixWorld);const r=E.distanceTo(A),i=t.projectionMatrix.elements,s=n.projectionMatrix.elements,o=i[14]/(i[10]-1),a=i[14]/(i[10]+1),c=(i[9]+1)/i[5],l=(i[9]-1)/i[5],u=(i[8]-1)/i[0],h=(s[8]+1)/s[0],d=o*u,p=o*h,f=r/(-u+h),m=f*-u;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(f),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();const g=o+f,v=a+f,y=d-m,_=p+(r-m),x=c*a/v*g,b=l*a/v*g;e.projectionMatrix.makePerspective(y,_,x,b,g,v)}function C(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===r)return;x.near=y.near=v.near=e.near,x.far=y.far=v.far=e.far,b===x.near&&w===x.far||(r.updateRenderState({depthNear:x.near,depthFar:x.far}),b=x.near,w=x.far);const t=e.parent,n=x.cameras;C(x,t);for(let r=0;r<n.length;r++)C(n[r],t);x.matrixWorld.decompose(x.position,x.quaternion,x.scale),e.position.copy(x.position),e.quaternion.copy(x.quaternion),e.scale.copy(x.scale),e.matrix.copy(x.matrix),e.matrixWorld.copy(x.matrixWorld);const i=e.children;for(let r=0,s=i.length;r<s;r++)i[r].updateMatrixWorld(!0);2===n.length?R(x,v,y):x.projectionMatrix.copy(v.projectionMatrix)},this.getCamera=function(){return x},this.getFoveation=function(){return null!==l?l.fixedFoveation:null!==u?u.fixedFoveation:void 0},this.setFoveation=function(e){null!==l&&(l.fixedFoveation=e),null!==u&&void 0!==u.fixedFoveation&&(u.fixedFoveation=e)};let L=null;function O(t,n){if(a=n.getViewerPose(s),h=n,null!==a){const t=a.views;null!==u&&(e.setRenderTargetFramebuffer(f,u.framebuffer),e.setRenderTarget(f));let n=!1;t.length!==x.cameras.length&&(x.cameras.length=0,n=!0);for(let r=0;r<t.length;r++){const i=t[r];let s=null;if(null!==u)s=u.getViewport(i);else{const t=c.getViewSubImage(l,i);s=t.viewport,0===r&&(e.setRenderTargetTextures(f,t.colorTexture,l.ignoreDepthValues?void 0:t.depthStencilTexture),e.setRenderTarget(f))}const o=_[r];o.matrix.fromArray(i.transform.matrix),o.projectionMatrix.fromArray(i.projectionMatrix),o.viewport.set(s.x,s.y,s.width,s.height),0===r&&x.matrix.copy(o.matrix),!0===n&&x.cameras.push(o)}}const i=r.inputSources;for(let e=0;e<m.length;e++){const t=m[e],r=i[e];t.update(r,n,s)}L&&L(t,n),h=null}const P=new ts;P.setAnimationLoop(O),this.setAnimationLoop=function(e){L=e},this.dispose=function(){}}}function Tu(e){function t(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)}function n(e,t,n,p,y){t.isMeshBasicMaterial?r(e,t):t.isMeshLambertMaterial?(r(e,t),c(e,t)):t.isMeshToonMaterial?(r(e,t),u(e,t)):t.isMeshPhongMaterial?(r(e,t),l(e,t)):t.isMeshStandardMaterial?(r(e,t),t.isMeshPhysicalMaterial?d(e,t,y):h(e,t)):t.isMeshMatcapMaterial?(r(e,t),f(e,t)):t.isMeshDepthMaterial?(r(e,t),m(e,t)):t.isMeshDistanceMaterial?(r(e,t),g(e,t)):t.isMeshNormalMaterial?(r(e,t),v(e,t)):t.isLineBasicMaterial?(i(e,t),t.isLineDashedMaterial&&s(e,t)):t.isPointsMaterial?o(e,t,n,p):t.isSpriteMaterial?a(e,t):t.isShadowMaterial?(e.color.value.copy(t.color),e.opacity.value=t.opacity):t.isShaderMaterial&&(t.uniformsNeedUpdate=!1)}function r(t,n){t.opacity.value=n.opacity,n.color&&t.diffuse.value.copy(n.color),n.emissive&&t.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(t.map.value=n.map),n.alphaMap&&(t.alphaMap.value=n.alphaMap),n.specularMap&&(t.specularMap.value=n.specularMap),n.alphaTest>0&&(t.alphaTest.value=n.alphaTest);const r=e.get(n).envMap;let i,s;r&&(t.envMap.value=r,t.flipEnvMap.value=r.isCubeTexture&&!1===r.isRenderTargetTexture?-1:1,t.reflectivity.value=n.reflectivity,t.ior.value=n.ior,t.refractionRatio.value=n.refractionRatio),n.lightMap&&(t.lightMap.value=n.lightMap,t.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(t.aoMap.value=n.aoMap,t.aoMapIntensity.value=n.aoMapIntensity),n.map?i=n.map:n.specularMap?i=n.specularMap:n.displacementMap?i=n.displacementMap:n.normalMap?i=n.normalMap:n.bumpMap?i=n.bumpMap:n.roughnessMap?i=n.roughnessMap:n.metalnessMap?i=n.metalnessMap:n.alphaMap?i=n.alphaMap:n.emissiveMap?i=n.emissiveMap:n.clearcoatMap?i=n.clearcoatMap:n.clearcoatNormalMap?i=n.clearcoatNormalMap:n.clearcoatRoughnessMap?i=n.clearcoatRoughnessMap:n.specularIntensityMap?i=n.specularIntensityMap:n.specularColorMap?i=n.specularColorMap:n.transmissionMap?i=n.transmissionMap:n.thicknessMap?i=n.thicknessMap:n.sheenColorMap?i=n.sheenColorMap:n.sheenRoughnessMap&&(i=n.sheenRoughnessMap),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),t.uvTransform.value.copy(i.matrix)),n.aoMap?s=n.aoMap:n.lightMap&&(s=n.lightMap),void 0!==s&&(s.isWebGLRenderTarget&&(s=s.texture),!0===s.matrixAutoUpdate&&s.updateMatrix(),t.uv2Transform.value.copy(s.matrix))}function i(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}function s(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}function o(e,t,n,r){let i;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*r,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest),t.map?i=t.map:t.alphaMap&&(i=t.alphaMap),void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix))}function a(e,t){let n;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest),t.map?n=t.map:t.alphaMap&&(n=t.alphaMap),void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}function c(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}function l(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===p&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===p&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function u(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===p&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===p&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function h(t,n){t.roughness.value=n.roughness,t.metalness.value=n.metalness,n.roughnessMap&&(t.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(t.metalnessMap.value=n.metalnessMap),n.emissiveMap&&(t.emissiveMap.value=n.emissiveMap),n.bumpMap&&(t.bumpMap.value=n.bumpMap,t.bumpScale.value=n.bumpScale,n.side===p&&(t.bumpScale.value*=-1)),n.normalMap&&(t.normalMap.value=n.normalMap,t.normalScale.value.copy(n.normalScale),n.side===p&&t.normalScale.value.negate()),n.displacementMap&&(t.displacementMap.value=n.displacementMap,t.displacementScale.value=n.displacementScale,t.displacementBias.value=n.displacementBias);const r=e.get(n).envMap;r&&(t.envMapIntensity.value=n.envMapIntensity)}function d(e,t,n){h(e,t),e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap)),t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap),t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,t.side===p&&e.clearcoatNormalScale.value.negate())),t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=n.texture,e.transmissionSamplerSize.value.set(n.width,n.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor)),e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap),t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap)}function f(e,t){t.matcap&&(e.matcap.value=t.matcap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===p&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===p&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function m(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function g(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}function v(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===p&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===p&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}return{refreshFogUniforms:t,refreshMaterialUniforms:n}}function Eu(){const e=fn("canvas");return e.style.display="block",e}function Au(e={}){const t=void 0!==e.canvas?e.canvas:Eu(),n=void 0!==e.context?e.context:null,i=void 0===e.depth||e.depth,s=void 0===e.stencil||e.stencil,o=void 0!==e.antialias&&e.antialias,a=void 0===e.premultipliedAlpha||e.premultipliedAlpha,c=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,l=void 0!==e.powerPreference?e.powerPreference:"default",u=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat;let h;h=void 0!==e.context?n.getContextAttributes().alpha:void 0!==e.alpha&&e.alpha;let m=null,g=null;const v=[],y=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Et,this.physicallyCorrectLights=!1,this.toneMapping=K,this.toneMappingExposure=1;const _=this;let x=!1,b=0,w=0,M=null,S=-1,T=null;const E=new Rn,A=new Rn;let R=null,C=t.width,L=t.height,O=1,P=null,I=null;const D=new Rn(0,0,C,L),N=new Rn(0,0,C,L);let k=!1;const F=new es;let U=!1,B=!1,z=null;const H=new pr,j=new hn,V=new kn,G={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function W(){return null===M?O:1}let q,X,Y,J,Z,$,Q,ee,te,ne,re,ie,se,oe,ae,ce,le,ue,he,de,pe,fe,me,ye=n;function _e(e,n){for(let r=0;r<e.length;r++){const i=e[r],s=t.getContext(i,n);if(null!==s)return s}return null}try{const e={alpha:!0,depth:i,stencil:s,antialias:o,premultipliedAlpha:a,preserveDrawingBuffer:c,powerPreference:l,failIfMajorPerformanceCaveat:u};if("setAttribute"in t&&t.setAttribute("data-engine","three.js r"+r),t.addEventListener("webglcontextlost",we,!1),t.addEventListener("webglcontextrestored",Te,!1),null===ye){const t=["webgl2","webgl","experimental-webgl"];if(!0===_.isWebGL1Renderer&&t.shift(),ye=_e(t,e),null===ye)throw _e(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===ye.getShaderPrecisionFormat&&(ye.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(We){throw console.error("THREE.WebGLRenderer: "+We.message),We}function xe(){q=new oc(ye),X=new Ua(ye,q,e),q.init(X),fe=new yu(ye,q,X),Y=new gu(ye,q,X),J=new lc(ye),Z=new Ql,$=new vu(ye,q,Y,Z,X,fe,J),Q=new za(_),ee=new sc(_),te=new ns(ye,X),me=new ka(ye,q,te,X),ne=new ac(ye,te,J,me),re=new fc(ye,ne,te,J),he=new pc(ye,X,$),ce=new Ba(Z),ie=new $l(_,Q,ee,q,X,me,ce),se=new Tu(Z),oe=new ru,ae=new uu(q,X),ue=new Na(_,Q,Y,re,h,a),le=new mu(_,re,X),de=new Fa(ye,q,J,X),pe=new cc(ye,q,J,X),J.programs=ie.programs,_.capabilities=X,_.extensions=q,_.properties=Z,_.renderLists=oe,_.shadowMap=le,_.state=Y,_.info=J}xe();const be=new Su(_,ye);function we(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),x=!0}function Te(){console.log("THREE.WebGLRenderer: Context Restored."),x=!1;const e=J.autoReset,t=le.enabled,n=le.autoUpdate,r=le.needsUpdate,i=le.type;xe(),J.autoReset=e,le.enabled=t,le.autoUpdate=n,le.needsUpdate=r,le.type=i}function Ee(e){const t=e.target;t.removeEventListener("dispose",Ee),Ae(t)}function Ae(e){Re(e),Z.remove(e)}function Re(e){const t=Z.get(e).programs;void 0!==t&&(t.forEach((function(e){ie.releaseProgram(e)})),e.isShaderMaterial&&ie.releaseShaderCache(e))}this.xr=be,this.getContext=function(){return ye},this.getContextAttributes=function(){return ye.getContextAttributes()},this.forceContextLoss=function(){const e=q.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=q.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return O},this.setPixelRatio=function(e){void 0!==e&&(O=e,this.setSize(C,L,!1))},this.getSize=function(e){return e.set(C,L)},this.setSize=function(e,n,r){be.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(C=e,L=n,t.width=Math.floor(e*O),t.height=Math.floor(n*O),!1!==r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return e.set(C*O,L*O).floor()},this.setDrawingBufferSize=function(e,n,r){C=e,L=n,O=r,t.width=Math.floor(e*r),t.height=Math.floor(n*r),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return e.copy(E)},this.getViewport=function(e){return e.copy(D)},this.setViewport=function(e,t,n,r){e.isVector4?D.set(e.x,e.y,e.z,e.w):D.set(e,t,n,r),Y.viewport(E.copy(D).multiplyScalar(O).floor())},this.getScissor=function(e){return e.copy(N)},this.setScissor=function(e,t,n,r){e.isVector4?N.set(e.x,e.y,e.z,e.w):N.set(e,t,n,r),Y.scissor(A.copy(N).multiplyScalar(O).floor())},this.getScissorTest=function(){return k},this.setScissorTest=function(e){Y.setScissorTest(k=e)},this.setOpaqueSort=function(e){P=e},this.setTransparentSort=function(e){I=e},this.getClearColor=function(e){return e.copy(ue.getClearColor())},this.setClearColor=function(){ue.setClearColor.apply(ue,arguments)},this.getClearAlpha=function(){return ue.getClearAlpha()},this.setClearAlpha=function(){ue.setClearAlpha.apply(ue,arguments)},this.clear=function(e=!0,t=!0,n=!0){let r=0;e&&(r|=16384),t&&(r|=256),n&&(r|=1024),ye.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",we,!1),t.removeEventListener("webglcontextrestored",Te,!1),oe.dispose(),ae.dispose(),Z.dispose(),Q.dispose(),ee.dispose(),re.dispose(),me.dispose(),ie.dispose(),be.dispose(),be.removeEventListener("sessionstart",Pe),be.removeEventListener("sessionend",Ie),z&&(z.dispose(),z=null),De.stop()},this.renderBufferDirect=function(e,t,n,r,i,s){null===t&&(t=G);const o=i.isMesh&&i.matrixWorld.determinant()<0,a=je(e,t,n,r,i);Y.setMaterial(r,o);let c=n.index;const l=n.attributes.position;if(null===c){if(void 0===l||0===l.count)return}else if(0===c.count)return;let u,h=1;!0===r.wireframe&&(c=ne.getWireframeAttribute(n),h=2),me.setup(i,r,a,n,c);let d=de;null!==c&&(u=te.get(c),d=pe,d.setIndex(u));const p=null!==c?c.count:l.count,f=n.drawRange.start*h,m=n.drawRange.count*h,g=null!==s?s.start*h:0,v=null!==s?s.count*h:1/0,y=Math.max(f,g),_=Math.min(p,f+m,g+v)-1,x=Math.max(0,_-y+1);if(0!==x){if(i.isMesh)!0===r.wireframe?(Y.setLineWidth(r.wireframeLinewidth*W()),d.setMode(1)):d.setMode(4);else if(i.isLine){let e=r.linewidth;void 0===e&&(e=1),Y.setLineWidth(e*W()),i.isLineSegments?d.setMode(1):i.isLineLoop?d.setMode(2):d.setMode(3)}else i.isPoints?d.setMode(0):i.isSprite&&d.setMode(4);if(i.isInstancedMesh)d.renderInstances(y,x,i.count);else if(n.isInstancedBufferGeometry){const e=Math.min(n.instanceCount,n._maxInstanceCount);d.renderInstances(y,x,e)}else d.render(y,x)}},this.compile=function(e,t){g=ae.get(e),g.init(),y.push(g),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(g.pushLight(e),e.castShadow&&g.pushShadow(e))})),g.setupLights(_.physicallyCorrectLights),e.traverse((function(t){const n=t.material;if(n)if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];ze(i,e,t)}else ze(n,e,t)})),y.pop(),g=null};let Ce=null;function Oe(e){Ce&&Ce(e)}function Pe(){De.stop()}function Ie(){De.start()}const De=new ts;function Ne(e,t,n,r){if(!1===e.visible)return;const i=e.layers.test(t.layers);if(i)if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)g.pushLight(e),e.castShadow&&g.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||F.intersectsSprite(e)){r&&V.setFromMatrixPosition(e.matrixWorld).applyMatrix4(H);const t=re.update(e),i=e.material;i.visible&&m.push(e,t,i,n,V.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==J.render.frame&&(e.skeleton.update(),e.skeleton.frame=J.render.frame),!e.frustumCulled||F.intersectsObject(e))){r&&V.setFromMatrixPosition(e.matrixWorld).applyMatrix4(H);const t=re.update(e),i=e.material;if(Array.isArray(i)){const r=t.groups;for(let s=0,o=r.length;s<o;s++){const o=r[s],a=i[o.materialIndex];a&&a.visible&&m.push(e,t,a,n,V.z,o)}}else i.visible&&m.push(e,t,i,n,V.z,null)}const s=e.children;for(let o=0,a=s.length;o<a;o++)Ne(s[o],t,n,r)}function ke(e,t,n,r){const i=e.opaque,s=e.transmissive,o=e.transparent;g.setupLightsView(n),s.length>0&&Fe(i,t,n),r&&Y.viewport(E.copy(r)),i.length>0&&Ue(i,t,n),s.length>0&&Ue(s,t,n),o.length>0&&Ue(o,t,n),Y.buffers.depth.setTest(!0),Y.buffers.depth.setMask(!0),Y.buffers.color.setMask(!0),Y.setPolygonOffset(!1)}function Fe(e,t,n){const r=X.isWebGL2;null===z&&(z=new Cn(1,1,{generateMipmaps:!0,type:null!==fe.convert(Se)?Se:ve,minFilter:ge,samples:r&&!0===o?4:0})),_.getDrawingBufferSize(j),r?z.setSize(j.x,j.y):z.setSize(cn(j.x),cn(j.y));const i=_.getRenderTarget();_.setRenderTarget(z),_.clear();const s=_.toneMapping;_.toneMapping=K,Ue(e,t,n),_.toneMapping=s,$.updateMultisampleRenderTarget(z),$.updateRenderTargetMipmap(z),_.setRenderTarget(i)}function Ue(e,t,n){const r=!0===t.isScene?t.overrideMaterial:null;for(let i=0,s=e.length;i<s;i++){const s=e[i],o=s.object,a=s.geometry,c=null===r?s.material:r,l=s.group;o.layers.test(n.layers)&&Be(o,t,n,a,c,l)}}function Be(e,t,n,r,i,s){e.onBeforeRender(_,t,n,r,i,s),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),i.onBeforeRender(_,t,n,r,e,s),!0===i.transparent&&i.side===f?(i.side=p,i.needsUpdate=!0,_.renderBufferDirect(n,t,r,i,e,s),i.side=d,i.needsUpdate=!0,_.renderBufferDirect(n,t,r,i,e,s),i.side=f):_.renderBufferDirect(n,t,r,i,e,s),e.onAfterRender(_,t,n,r,i,s)}function ze(e,t,n){!0!==t.isScene&&(t=G);const r=Z.get(e),i=g.state.lights,s=g.state.shadowsArray,o=i.state.version,a=ie.getParameters(e,i.state,s,t,n),c=ie.getProgramCacheKey(a);let l=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=(e.isMeshStandardMaterial?ee:Q).get(e.envMap||r.environment),void 0===l&&(e.addEventListener("dispose",Ee),l=new Map,r.programs=l);let u=l.get(c);if(void 0!==u){if(r.currentProgram===u&&r.lightsStateVersion===o)return He(e,a),u}else a.uniforms=ie.getUniforms(e),e.onBuild(n,a,_),e.onBeforeCompile(a,_),u=ie.acquireProgram(a,c),l.set(c,u),r.uniforms=a.uniforms;const h=r.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(h.clippingPlanes=ce.uniform),He(e,a),r.needsLights=Ge(e),r.lightsStateVersion=o,r.needsLights&&(h.ambientLightColor.value=i.state.ambient,h.lightProbe.value=i.state.probe,h.directionalLights.value=i.state.directional,h.directionalLightShadows.value=i.state.directionalShadow,h.spotLights.value=i.state.spot,h.spotLightShadows.value=i.state.spotShadow,h.rectAreaLights.value=i.state.rectArea,h.ltc_1.value=i.state.rectAreaLTC1,h.ltc_2.value=i.state.rectAreaLTC2,h.pointLights.value=i.state.point,h.pointLightShadows.value=i.state.pointShadow,h.hemisphereLights.value=i.state.hemi,h.directionalShadowMap.value=i.state.directionalShadowMap,h.directionalShadowMatrix.value=i.state.directionalShadowMatrix,h.spotShadowMap.value=i.state.spotShadowMap,h.spotShadowMatrix.value=i.state.spotShadowMatrix,h.pointShadowMap.value=i.state.pointShadowMap,h.pointShadowMatrix.value=i.state.pointShadowMatrix);const d=u.getUniforms(),p=xl.seqWithValue(d.seq,h);return r.currentProgram=u,r.uniformsList=p,u}function He(e,t){const n=Z.get(e);n.outputEncoding=t.outputEncoding,n.instancing=t.instancing,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}function je(e,t,n,r,i){!0!==t.isScene&&(t=G),$.resetTextureUnits();const s=t.fog,o=r.isMeshStandardMaterial?t.environment:null,a=null===M?_.outputEncoding:!0===M.isXRRenderTarget?M.texture.encoding:Et,c=(r.isMeshStandardMaterial?ee:Q).get(r.envMap||o),l=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,u=!!r.normalMap&&!!n.attributes.tangent,h=!!n.morphAttributes.position,d=!!n.morphAttributes.normal,p=!!n.morphAttributes.color,f=r.toneMapped?_.toneMapping:K,m=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,v=void 0!==m?m.length:0,y=Z.get(r),x=g.state.lights;if(!0===U&&(!0===B||e!==T)){const t=e===T&&r.id===S;ce.setState(r,e,t)}let b=!1;r.version===y.__version?y.needsLights&&y.lightsStateVersion!==x.state.version||y.outputEncoding!==a||i.isInstancedMesh&&!1===y.instancing?b=!0:i.isInstancedMesh||!0!==y.instancing?i.isSkinnedMesh&&!1===y.skinning?b=!0:i.isSkinnedMesh||!0!==y.skinning?y.envMap!==c||r.fog&&y.fog!==s?b=!0:void 0===y.numClippingPlanes||y.numClippingPlanes===ce.numPlanes&&y.numIntersection===ce.numIntersection?(y.vertexAlphas!==l||y.vertexTangents!==u||y.morphTargets!==h||y.morphNormals!==d||y.morphColors!==p||y.toneMapping!==f||!0===X.isWebGL2&&y.morphTargetsCount!==v)&&(b=!0):b=!0:b=!0:b=!0:(b=!0,y.__version=r.version);let w=y.currentProgram;!0===b&&(w=ze(r,t,i));let E=!1,A=!1,R=!1;const C=w.getUniforms(),P=y.uniforms;if(Y.useProgram(w.program)&&(E=!0,A=!0,R=!0),r.id!==S&&(S=r.id,A=!0),E||T!==e){if(C.setValue(ye,"projectionMatrix",e.projectionMatrix),X.logarithmicDepthBuffer&&C.setValue(ye,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),T!==e&&(T=e,A=!0,R=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshStandardMaterial||r.envMap){const t=C.map.cameraPosition;void 0!==t&&t.setValue(ye,V.setFromMatrixPosition(e.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&C.setValue(ye,"isOrthographic",!0===e.isOrthographicCamera),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.isShadowMaterial||i.isSkinnedMesh)&&C.setValue(ye,"viewMatrix",e.matrixWorldInverse)}if(i.isSkinnedMesh){C.setOptional(ye,i,"bindMatrix"),C.setOptional(ye,i,"bindMatrixInverse");const e=i.skeleton;e&&(X.floatVertexTextures?(null===e.boneTexture&&e.computeBoneTexture(),C.setValue(ye,"boneTexture",e.boneTexture,$),C.setValue(ye,"boneTextureSize",e.boneTextureSize)):C.setOptional(ye,e,"boneMatrices"))}const I=n.morphAttributes;return(void 0!==I.position||void 0!==I.normal||void 0!==I.color&&!0===X.isWebGL2)&&he.update(i,n,r,w),(A||y.receiveShadow!==i.receiveShadow)&&(y.receiveShadow=i.receiveShadow,C.setValue(ye,"receiveShadow",i.receiveShadow)),A&&(C.setValue(ye,"toneMappingExposure",_.toneMappingExposure),y.needsLights&&Ve(P,R),s&&r.fog&&se.refreshFogUniforms(P,s),se.refreshMaterialUniforms(P,r,O,L,z),xl.upload(ye,y.uniformsList,P,$)),r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(xl.upload(ye,y.uniformsList,P,$),r.uniformsNeedUpdate=!1),r.isSpriteMaterial&&C.setValue(ye,"center",i.center),C.setValue(ye,"modelViewMatrix",i.modelViewMatrix),C.setValue(ye,"normalMatrix",i.normalMatrix),C.setValue(ye,"modelMatrix",i.matrixWorld),w}function Ve(e,t){e.ambientLightColor.needsUpdate=t,e.lightProbe.needsUpdate=t,e.directionalLights.needsUpdate=t,e.directionalLightShadows.needsUpdate=t,e.pointLights.needsUpdate=t,e.pointLightShadows.needsUpdate=t,e.spotLights.needsUpdate=t,e.spotLightShadows.needsUpdate=t,e.rectAreaLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}function Ge(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}De.setAnimationLoop(Oe),"undefined"!==typeof window&&De.setContext(window),this.setAnimationLoop=function(e){Ce=e,be.setAnimationLoop(e),null===e?De.stop():De.start()},be.addEventListener("sessionstart",Pe),be.addEventListener("sessionend",Ie),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===x)return;!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),!0===be.enabled&&!0===be.isPresenting&&(!0===be.cameraAutoUpdate&&be.updateCamera(t),t=be.getCamera()),!0===e.isScene&&e.onBeforeRender(_,e,t,M),g=ae.get(e,y.length),g.init(),y.push(g),H.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),F.setFromProjectionMatrix(H),B=this.localClippingEnabled,U=ce.init(this.clippingPlanes,B,t),m=oe.get(e,v.length),m.init(),v.push(m),Ne(e,t,0,_.sortObjects),m.finish(),!0===_.sortObjects&&m.sort(P,I),!0===U&&ce.beginShadows();const n=g.state.shadowsArray;if(le.render(n,e,t),!0===U&&ce.endShadows(),!0===this.info.autoReset&&this.info.reset(),ue.render(m,e),g.setupLights(_.physicallyCorrectLights),t.isArrayCamera){const n=t.cameras;for(let t=0,r=n.length;t<r;t++){const r=n[t];ke(m,e,r,r.viewport)}}else ke(m,e,t);null!==M&&($.updateMultisampleRenderTarget(M),$.updateRenderTargetMipmap(M)),!0===e.isScene&&e.onAfterRender(_,e,t),me.resetDefaultState(),S=-1,T=null,y.pop(),g=y.length>0?y[y.length-1]:null,v.pop(),m=v.length>0?v[v.length-1]:null},this.getActiveCubeFace=function(){return b},this.getActiveMipmapLevel=function(){return w},this.getRenderTarget=function(){return M},this.setRenderTargetTextures=function(e,t,n){Z.get(e.texture).__webglTexture=t,Z.get(e.depthTexture).__webglTexture=n;const r=Z.get(e);r.__hasExternalTextures=!0,r.__hasExternalTextures&&(r.__autoAllocateDepthBuffer=void 0===n,r.__autoAllocateDepthBuffer||!0===q.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),r.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(e,t){const n=Z.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e,t=0,n=0){M=e,b=t,w=n;let r=!0;if(e){const t=Z.get(e);void 0!==t.__useDefaultFramebuffer?(Y.bindFramebuffer(36160,null),r=!1):void 0===t.__webglFramebuffer?$.setupRenderTarget(e):t.__hasExternalTextures&&$.rebindTextures(e,Z.get(e.texture).__webglTexture,Z.get(e.depthTexture).__webglTexture)}let i=null,s=!1,o=!1;if(e){const n=e.texture;(n.isData3DTexture||n.isDataArrayTexture)&&(o=!0);const r=Z.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(i=r[t],s=!0):i=X.isWebGL2&&e.samples>0&&!1===$.useMultisampledRTT(e)?Z.get(e).__webglMultisampledFramebuffer:r,E.copy(e.viewport),A.copy(e.scissor),R=e.scissorTest}else E.copy(D).multiplyScalar(O).floor(),A.copy(N).multiplyScalar(O).floor(),R=k;const a=Y.bindFramebuffer(36160,i);if(a&&X.drawBuffers&&r&&Y.drawBuffers(e,i),Y.viewport(E),Y.scissor(A),Y.setScissorTest(R),s){const r=Z.get(e.texture);ye.framebufferTexture2D(36160,36064,34069+t,r.__webglTexture,n)}else if(o){const r=Z.get(e.texture),i=t||0;ye.framebufferTextureLayer(36160,36064,r.__webglTexture,n||0,i)}S=-1},this.readRenderTargetPixels=function(e,t,n,r,i,s,o){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let a=Z.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==o&&(a=a[o]),a){Y.bindFramebuffer(36160,a);try{const o=e.texture,a=o.format,c=o.type;if(a!==Le&&fe.convert(a)!==ye.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const l=c===Se&&(q.has("EXT_color_buffer_half_float")||X.isWebGL2&&q.has("EXT_color_buffer_float"));if(c!==ve&&fe.convert(c)!==ye.getParameter(35738)&&(c!==Me||!(X.isWebGL2||q.has("OES_texture_float")||q.has("WEBGL_color_buffer_float")))&&!l)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===ye.checkFramebufferStatus(36160)?t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&ye.readPixels(t,n,r,i,fe.convert(a),fe.convert(c),s):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const e=null!==M?Z.get(M).__webglFramebuffer:null;Y.bindFramebuffer(36160,e)}}},this.copyFramebufferToTexture=function(e,t,n=0){if(!0!==t.isFramebufferTexture)return void console.error("THREE.WebGLRenderer: copyFramebufferToTexture() can only be used with FramebufferTexture.");const r=Math.pow(2,-n),i=Math.floor(t.image.width*r),s=Math.floor(t.image.height*r);$.setTexture2D(t,0),ye.copyTexSubImage2D(3553,n,0,0,e.x,e.y,i,s),Y.unbindTexture()},this.copyTextureToTexture=function(e,t,n,r=0){const i=t.image.width,s=t.image.height,o=fe.convert(n.format),a=fe.convert(n.type);$.setTexture2D(n,0),ye.pixelStorei(37440,n.flipY),ye.pixelStorei(37441,n.premultiplyAlpha),ye.pixelStorei(3317,n.unpackAlignment),t.isDataTexture?ye.texSubImage2D(3553,r,e.x,e.y,i,s,o,a,t.image.data):t.isCompressedTexture?ye.compressedTexSubImage2D(3553,r,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,o,t.mipmaps[0].data):ye.texSubImage2D(3553,r,e.x,e.y,o,a,t.image),0===r&&n.generateMipmaps&&ye.generateMipmap(3553),Y.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,r,i=0){if(_.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const s=e.max.x-e.min.x+1,o=e.max.y-e.min.y+1,a=e.max.z-e.min.z+1,c=fe.convert(r.format),l=fe.convert(r.type);let u;if(r.isData3DTexture)$.setTexture3D(r,0),u=32879;else{if(!r.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");$.setTexture2DArray(r,0),u=35866}ye.pixelStorei(37440,r.flipY),ye.pixelStorei(37441,r.premultiplyAlpha),ye.pixelStorei(3317,r.unpackAlignment);const h=ye.getParameter(3314),d=ye.getParameter(32878),p=ye.getParameter(3316),f=ye.getParameter(3315),m=ye.getParameter(32877),g=n.isCompressedTexture?n.mipmaps[0]:n.image;ye.pixelStorei(3314,g.width),ye.pixelStorei(32878,g.height),ye.pixelStorei(3316,e.min.x),ye.pixelStorei(3315,e.min.y),ye.pixelStorei(32877,e.min.z),n.isDataTexture||n.isData3DTexture?ye.texSubImage3D(u,i,t.x,t.y,t.z,s,o,a,c,l,g.data):n.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ye.compressedTexSubImage3D(u,i,t.x,t.y,t.z,s,o,a,c,g.data)):ye.texSubImage3D(u,i,t.x,t.y,t.z,s,o,a,c,l,g),ye.pixelStorei(3314,h),ye.pixelStorei(32878,d),ye.pixelStorei(3316,p),ye.pixelStorei(3315,f),ye.pixelStorei(32877,m),0===i&&r.generateMipmaps&&ye.generateMipmap(u),Y.unbindTexture()},this.initTexture=function(e){$.setTexture2D(e,0),Y.unbindTexture()},this.resetState=function(){b=0,w=0,M=null,Y.reset(),me.reset()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Au.prototype.isWebGLRenderer=!0;class Ru extends Au{}Ru.prototype.isWebGL1Renderer=!0;class Cu{constructor(e,t=25e-5){this.name="",this.color=new bn(e),this.density=t}clone(){return new Cu(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}Cu.prototype.isFogExp2=!0;class Lu{constructor(e,t=1,n=1e3){this.name="",this.color=new bn(e),this.near=t,this.far=n}clone(){return new Lu(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}Lu.prototype.isFog=!0;class Ou extends Ur{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}Ou.prototype.isScene=!0;class Pu{constructor(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=Dt,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Vt()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Vt()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Vt()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}Pu.prototype.isInterleavedBuffer=!0;const Iu=new kn;class Du{constructor(e,t,n,r=!1){this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)Iu.x=this.getX(t),Iu.y=this.getY(t),Iu.z=this.getZ(t),Iu.applyMatrix4(e),this.setXYZ(t,Iu.x,Iu.y,Iu.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Iu.x=this.getX(t),Iu.y=this.getY(t),Iu.z=this.getZ(t),Iu.applyNormalMatrix(e),this.setXYZ(t,Iu.x,Iu.y,Iu.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Iu.x=this.getX(t),Iu.y=this.getY(t),Iu.z=this.getZ(t),Iu.transformDirection(e),this.setXYZ(t,Iu.x,Iu.y,Iu.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return new ti(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Du(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}Du.prototype.isInterleavedBufferAttribute=!0;class Nu extends Zr{constructor(e){super(),this.type="SpriteMaterial",this.color=new bn(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}let ku;Nu.prototype.isSpriteMaterial=!0;const Fu=new kn,Uu=new kn,Bu=new kn,zu=new hn,Hu=new hn,ju=new pr,Vu=new kn,Gu=new kn,Wu=new kn,qu=new hn,Xu=new hn,Yu=new hn;class Ku extends Ur{constructor(e){if(super(),this.type="Sprite",void 0===ku){ku=new pi;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),t=new Pu(e,5);ku.setIndex([0,1,2,0,2,3]),ku.setAttribute("position",new Du(t,3,0,!1)),ku.setAttribute("uv",new Du(t,2,3,!1))}this.geometry=ku,this.material=void 0!==e?e:new Nu,this.center=new hn(.5,.5)}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Uu.setFromMatrixScale(this.matrixWorld),ju.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Bu.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Uu.multiplyScalar(-Bu.z);const n=this.material.rotation;let r,i;0!==n&&(i=Math.cos(n),r=Math.sin(n));const s=this.center;Ju(Vu.set(-.5,-.5,0),Bu,s,Uu,r,i),Ju(Gu.set(.5,-.5,0),Bu,s,Uu,r,i),Ju(Wu.set(.5,.5,0),Bu,s,Uu,r,i),qu.set(0,0),Xu.set(1,0),Yu.set(1,1);let o=e.ray.intersectTriangle(Vu,Gu,Wu,!1,Fu);if(null===o&&(Ju(Gu.set(-.5,.5,0),Bu,s,Uu,r,i),Xu.set(0,1),o=e.ray.intersectTriangle(Vu,Wu,Gu,!1,Fu),null===o))return;const a=e.ray.origin.distanceTo(Fu);a<e.near||a>e.far||t.push({distance:a,point:Fu.clone(),uv:Kr.getUV(Fu,Vu,Gu,Wu,qu,Xu,Yu,new hn),face:null,object:this})}copy(e){return super.copy(e),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}function Ju(e,t,n,r,i,s){zu.subVectors(e,n).addScalar(.5).multiply(r),void 0!==i?(Hu.x=s*zu.x-i*zu.y,Hu.y=i*zu.x+s*zu.y):Hu.copy(zu),e.copy(t),e.x+=Hu.x,e.y+=Hu.y,e.applyMatrix4(ju)}Ku.prototype.isSprite=!0;const Zu=new kn,$u=new Rn,Qu=new Rn,eh=new kn,th=new pr;class nh extends Oi{constructor(e,t){super(e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new pr,this.bindMatrixInverse=new pr}copy(e){return super.copy(e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Rn,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.w=t.getW(n);const r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const n=this.skeleton,r=this.geometry;$u.fromBufferAttribute(r.attributes.skinIndex,e),Qu.fromBufferAttribute(r.attributes.skinWeight,e),Zu.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let i=0;i<4;i++){const e=Qu.getComponent(i);if(0!==e){const r=$u.getComponent(i);th.multiplyMatrices(n.bones[r].matrixWorld,n.boneInverses[r]),t.addScaledVector(eh.copy(Zu).applyMatrix4(th),e)}}return t.applyMatrix4(this.bindMatrixInverse)}}nh.prototype.isSkinnedMesh=!0;class rh extends Ur{constructor(){super(),this.type="Bone"}}rh.prototype.isBone=!0;class ih extends An{constructor(e=null,t=1,n=1,r,i,s,o,a,c=he,l=he,u,h){super(null,s,o,a,c,l,r,i,u,h),this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}ih.prototype.isDataTexture=!0;const sh=new pr,oh=new pr;class ah{constructor(e=[],t=[]){this.uuid=Vt(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new pr)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const t=new pr;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let i=0,s=e.length;i<s;i++){const r=e[i]?e[i].matrixWorld:oh;sh.multiplyMatrices(r,t[i]),sh.toArray(n,16*i)}null!==r&&(r.needsUpdate=!0)}clone(){return new ah(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=an(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new ih(t,e,e,Le,Me);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const n=this.bones[t];if(n.name===e)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){const r=e.bones[n];let i=t[r];void 0===i&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),i=new rh),this.bones.push(i),this.boneInverses.push((new pr).fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let r=0,i=t.length;r<i;r++){const i=t[r];e.bones.push(i.uuid);const s=n[r];e.boneInverses.push(s.toArray())}return e}}class ch extends ti{constructor(e,t,n,r=1){"number"===typeof n&&(r=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(e,t,n),this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}ch.prototype.isInstancedBufferAttribute=!0;const lh=new pr,uh=new pr,hh=[],dh=new Oi;class ph extends Oi{constructor(e,t,n){super(e,t),this.instanceMatrix=new ch(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1}copy(e){return super.copy(e),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const n=this.matrixWorld,r=this.count;if(dh.geometry=this.geometry,dh.material=this.material,void 0!==dh.material)for(let i=0;i<r;i++){this.getMatrixAt(i,lh),uh.multiplyMatrices(n,lh),dh.matrixWorld=uh,dh.raycast(e,hh);for(let e=0,n=hh.length;e<n;e++){const n=hh[e];n.instanceId=i,n.object=this,t.push(n)}hh.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new ch(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}ph.prototype.isInstancedMesh=!0;class fh extends Zr{constructor(e){super(),this.type="LineBasicMaterial",this.color=new bn(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this}}fh.prototype.isLineBasicMaterial=!0;const mh=new kn,gh=new kn,vh=new pr,yh=new dr,_h=new ir;class xh extends Ur{constructor(e=new pi,t=new fh){super(),this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,n=[0];for(let e=1,r=t.count;e<r;e++)mh.fromBufferAttribute(t,e-1),gh.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=mh.distanceTo(gh);e.setAttribute("lineDistance",new si(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold,s=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),_h.copy(n.boundingSphere),_h.applyMatrix4(r),_h.radius+=i,!1===e.ray.intersectsSphere(_h))return;vh.copy(r).invert(),yh.copy(e.ray).applyMatrix4(vh);const o=i/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o,c=new kn,l=new kn,u=new kn,h=new kn,d=this.isLineSegments?2:1;if(n.isBufferGeometry){const r=n.index,i=n.attributes,o=i.position;if(null!==r){const n=Math.max(0,s.start),i=Math.min(r.count,s.start+s.count);for(let s=n,p=i-1;s<p;s+=d){const n=r.getX(s),i=r.getX(s+1);c.fromBufferAttribute(o,n),l.fromBufferAttribute(o,i);const d=yh.distanceSqToSegment(c,l,h,u);if(d>a)continue;h.applyMatrix4(this.matrixWorld);const p=e.ray.origin.distanceTo(h);p<e.near||p>e.far||t.push({distance:p,point:u.clone().applyMatrix4(this.matrixWorld),index:s,face:null,faceIndex:null,object:this})}}else{const n=Math.max(0,s.start),r=Math.min(o.count,s.start+s.count);for(let i=n,s=r-1;i<s;i+=d){c.fromBufferAttribute(o,i),l.fromBufferAttribute(o,i+1);const n=yh.distanceSqToSegment(c,l,h,u);if(n>a)continue;h.applyMatrix4(this.matrixWorld);const r=e.ray.origin.distanceTo(h);r<e.near||r>e.far||t.push({distance:r,point:u.clone().applyMatrix4(this.matrixWorld),index:i,face:null,faceIndex:null,object:this})}}}else n.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}xh.prototype.isLine=!0;const bh=new kn,wh=new kn;class Mh extends xh{constructor(e,t){super(e,t),this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,n=[];for(let e=0,r=t.count;e<r;e+=2)bh.fromBufferAttribute(t,e),wh.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+bh.distanceTo(wh);e.setAttribute("lineDistance",new si(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}Mh.prototype.isLineSegments=!0;class Sh extends xh{constructor(e,t){super(e,t),this.type="LineLoop"}}Sh.prototype.isLineLoop=!0;class Th extends Zr{constructor(e){super(),this.type="PointsMaterial",this.color=new bn(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this}}Th.prototype.isPointsMaterial=!0;const Eh=new pr,Ah=new dr,Rh=new ir,Ch=new kn;class Lh extends Ur{constructor(e=new pi,t=new Th){super(),this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold,s=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Rh.copy(n.boundingSphere),Rh.applyMatrix4(r),Rh.radius+=i,!1===e.ray.intersectsSphere(Rh))return;Eh.copy(r).invert(),Ah.copy(e.ray).applyMatrix4(Eh);const o=i/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o;if(n.isBufferGeometry){const i=n.index,o=n.attributes,c=o.position;if(null!==i){const n=Math.max(0,s.start),o=Math.min(i.count,s.start+s.count);for(let s=n,l=o;s<l;s++){const n=i.getX(s);Ch.fromBufferAttribute(c,n),Oh(Ch,n,a,r,e,t,this)}}else{const n=Math.max(0,s.start),i=Math.min(c.count,s.start+s.count);for(let s=n,o=i;s<o;s++)Ch.fromBufferAttribute(c,s),Oh(Ch,s,a,r,e,t,this)}}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}function Oh(e,t,n,r,i,s,o){const a=Ah.distanceSqToPoint(e);if(a<n){const n=new kn;Ah.closestPointToPoint(e,n),n.applyMatrix4(r);const c=i.ray.origin.distanceTo(n);if(c<i.near||c>i.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:n,index:t,face:null,object:o})}}Lh.prototype.isPoints=!0;class Ph extends An{constructor(e,t,n,r,i,s,o,a,c){super(e,t,n,r,i,s,o,a,c),this.minFilter=void 0!==s?s:fe,this.magFilter=void 0!==i?i:fe,this.generateMipmaps=!1;const l=this;function u(){l.needsUpdate=!0,e.requestVideoFrameCallback(u)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(u)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image,t="requestVideoFrameCallback"in e;!1===t&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}Ph.prototype.isVideoTexture=!0;class Ih extends An{constructor(e,t,n){super({width:e,height:t}),this.format=n,this.magFilter=he,this.minFilter=he,this.generateMipmaps=!1,this.needsUpdate=!0}}Ih.prototype.isFramebufferTexture=!0;class Dh extends An{constructor(e,t,n,r,i,s,o,a,c,l,u,h){super(null,s,o,a,c,l,r,i,u,h),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}Dh.prototype.isCompressedTexture=!0;class Nh extends An{constructor(e,t,n,r,i,s,o,a,c){super(e,t,n,r,i,s,o,a,c),this.needsUpdate=!0}}Nh.prototype.isCanvasTexture=!0;class kh extends pi{constructor(e=1,t=1,n=1,r=8,i=1,s=!1,o=0,a=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:a};const c=this;r=Math.floor(r),i=Math.floor(i);const l=[],u=[],h=[],d=[];let p=0;const f=[],m=n/2;let g=0;function v(){const s=new kn,v=new kn;let y=0;const _=(t-e)/n;for(let c=0;c<=i;c++){const l=[],g=c/i,y=g*(t-e)+e;for(let e=0;e<=r;e++){const t=e/r,i=t*a+o,c=Math.sin(i),f=Math.cos(i);v.x=y*c,v.y=-g*n+m,v.z=y*f,u.push(v.x,v.y,v.z),s.set(c,_,f).normalize(),h.push(s.x,s.y,s.z),d.push(t,1-g),l.push(p++)}f.push(l)}for(let e=0;e<r;e++)for(let t=0;t<i;t++){const n=f[t][e],r=f[t+1][e],i=f[t+1][e+1],s=f[t][e+1];l.push(n,r,s),l.push(r,i,s),y+=6}c.addGroup(g,y,0),g+=y}function y(n){const i=p,s=new hn,f=new kn;let v=0;const y=!0===n?e:t,_=!0===n?1:-1;for(let e=1;e<=r;e++)u.push(0,m*_,0),h.push(0,_,0),d.push(.5,.5),p++;const x=p;for(let e=0;e<=r;e++){const t=e/r,n=t*a+o,i=Math.cos(n),c=Math.sin(n);f.x=y*c,f.y=m*_,f.z=y*i,u.push(f.x,f.y,f.z),h.push(0,_,0),s.x=.5*i+.5,s.y=.5*c*_+.5,d.push(s.x,s.y),p++}for(let e=0;e<r;e++){const t=i+e,r=x+e;!0===n?l.push(r,r+1,t):l.push(r+1,r,t),v+=3}c.addGroup(g,v,!0===n?1:2),g+=v}v(),!1===s&&(e>0&&y(!0),t>0&&y(!1)),this.setIndex(l),this.setAttribute("position",new si(u,3)),this.setAttribute("normal",new si(h,3)),this.setAttribute("uv",new si(d,2))}static fromJSON(e){return new kh(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}new kn,new kn,new kn,new Kr;class Fh{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,r=this.getPoint(0),i=0;t.push(0);for(let s=1;s<=e;s++)n=this.getPoint(s/e),i+=n.distanceTo(r),t.push(i),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let r=0;const i=n.length;let s;s=t||e*n[i-1];let o,a=0,c=i-1;while(a<=c)if(r=Math.floor(a+(c-a)/2),o=n[r]-s,o<0)a=r+1;else{if(!(o>0)){c=r;break}c=r-1}if(r=c,n[r]===s)return r/(i-1);const l=n[r],u=n[r+1],h=u-l,d=(s-l)/h,p=(r+d)/(i-1);return p}getTangent(e,t){const n=1e-4;let r=e-n,i=e+n;r<0&&(r=0),i>1&&(i=1);const s=this.getPoint(r),o=this.getPoint(i),a=t||(s.isVector2?new hn:new kn);return a.copy(o).sub(s).normalize(),a}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new kn,r=[],i=[],s=[],o=new kn,a=new pr;for(let d=0;d<=e;d++){const t=d/e;r[d]=this.getTangentAt(t,new kn)}i[0]=new kn,s[0]=new kn;let c=Number.MAX_VALUE;const l=Math.abs(r[0].x),u=Math.abs(r[0].y),h=Math.abs(r[0].z);l<=c&&(c=l,n.set(1,0,0)),u<=c&&(c=u,n.set(0,1,0)),h<=c&&n.set(0,0,1),o.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],o),s[0].crossVectors(r[0],i[0]);for(let d=1;d<=e;d++){if(i[d]=i[d-1].clone(),s[d]=s[d-1].clone(),o.crossVectors(r[d-1],r[d]),o.length()>Number.EPSILON){o.normalize();const e=Math.acos(Gt(r[d-1].dot(r[d]),-1,1));i[d].applyMatrix4(a.makeRotationAxis(o,e))}s[d].crossVectors(r[d],i[d])}if(!0===t){let t=Math.acos(Gt(i[0].dot(i[e]),-1,1));t/=e,r[0].dot(o.crossVectors(i[0],i[e]))>0&&(t=-t);for(let n=1;n<=e;n++)i[n].applyMatrix4(a.makeRotationAxis(r[n],t*n)),s[n].crossVectors(r[n],i[n])}return{tangents:r,normals:i,binormals:s}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Uh extends Fh{constructor(e=0,t=0,n=1,r=1,i=0,s=2*Math.PI,o=!1,a=0){super(),this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=i,this.aEndAngle=s,this.aClockwise=o,this.aRotation=a}getPoint(e,t){const n=t||new hn,r=2*Math.PI;let i=this.aEndAngle-this.aStartAngle;const s=Math.abs(i)<Number.EPSILON;while(i<0)i+=r;while(i>r)i-=r;i<Number.EPSILON&&(i=s?0:r),!0!==this.aClockwise||s||(i===r?i=-r:i-=r);const o=this.aStartAngle+e*i;let a=this.aX+this.xRadius*Math.cos(o),c=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){const e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),n=a-this.aX,r=c-this.aY;a=n*e-r*t+this.aX,c=n*t+r*e+this.aY}return n.set(a,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}Uh.prototype.isEllipseCurve=!0;class Bh extends Uh{constructor(e,t,n,r,i,s){super(e,t,n,n,r,i,s),this.type="ArcCurve"}}function zh(){let e=0,t=0,n=0,r=0;function i(i,s,o,a){e=i,t=o,n=-3*i+3*s-2*o-a,r=2*i-2*s+o+a}return{initCatmullRom:function(e,t,n,r,s){i(t,n,s*(n-e),s*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,s,o,a){let c=(t-e)/s-(n-e)/(s+o)+(n-t)/o,l=(n-t)/o-(r-t)/(o+a)+(r-n)/a;c*=o,l*=o,i(t,n,c,l)},calc:function(i){const s=i*i,o=s*i;return e+t*i+n*s+r*o}}}Bh.prototype.isArcCurve=!0;const Hh=new kn,jh=new zh,Vh=new zh,Gh=new zh;class Wh extends Fh{constructor(e=[],t=!1,n="centripetal",r=.5){super(),this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e,t=new kn){const n=t,r=this.points,i=r.length,s=(i-(this.closed?0:1))*e;let o,a,c=Math.floor(s),l=s-c;this.closed?c+=c>0?0:(Math.floor(Math.abs(c)/i)+1)*i:0===l&&c===i-1&&(c=i-2,l=1),this.closed||c>0?o=r[(c-1)%i]:(Hh.subVectors(r[0],r[1]).add(r[0]),o=Hh);const u=r[c%i],h=r[(c+1)%i];if(this.closed||c+2<i?a=r[(c+2)%i]:(Hh.subVectors(r[i-1],r[i-2]).add(r[i-1]),a=Hh),"centripetal"===this.curveType||"chordal"===this.curveType){const e="chordal"===this.curveType?.5:.25;let t=Math.pow(o.distanceToSquared(u),e),n=Math.pow(u.distanceToSquared(h),e),r=Math.pow(h.distanceToSquared(a),e);n<1e-4&&(n=1),t<1e-4&&(t=n),r<1e-4&&(r=n),jh.initNonuniformCatmullRom(o.x,u.x,h.x,a.x,t,n,r),Vh.initNonuniformCatmullRom(o.y,u.y,h.y,a.y,t,n,r),Gh.initNonuniformCatmullRom(o.z,u.z,h.z,a.z,t,n,r)}else"catmullrom"===this.curveType&&(jh.initCatmullRom(o.x,u.x,h.x,a.x,this.tension),Vh.initCatmullRom(o.y,u.y,h.y,a.y,this.tension),Gh.initCatmullRom(o.z,u.z,h.z,a.z,this.tension));return n.set(jh.calc(l),Vh.calc(l),Gh.calc(l)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new kn).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function qh(e,t,n,r,i){const s=.5*(r-t),o=.5*(i-n),a=e*e,c=e*a;return(2*n-2*r+s+o)*c+(-3*n+3*r-2*s-o)*a+s*e+n}function Xh(e,t){const n=1-e;return n*n*t}function Yh(e,t){return 2*(1-e)*e*t}function Kh(e,t){return e*e*t}function Jh(e,t,n,r){return Xh(e,t)+Yh(e,n)+Kh(e,r)}function Zh(e,t){const n=1-e;return n*n*n*t}function $h(e,t){const n=1-e;return 3*n*n*e*t}function Qh(e,t){return 3*(1-e)*e*e*t}function ed(e,t){return e*e*e*t}function td(e,t,n,r,i){return Zh(e,t)+$h(e,n)+Qh(e,r)+ed(e,i)}Wh.prototype.isCatmullRomCurve3=!0;class nd extends Fh{constructor(e=new hn,t=new hn,n=new hn,r=new hn){super(),this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new hn){const n=t,r=this.v0,i=this.v1,s=this.v2,o=this.v3;return n.set(td(e,r.x,i.x,s.x,o.x),td(e,r.y,i.y,s.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}nd.prototype.isCubicBezierCurve=!0;class rd extends Fh{constructor(e=new kn,t=new kn,n=new kn,r=new kn){super(),this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new kn){const n=t,r=this.v0,i=this.v1,s=this.v2,o=this.v3;return n.set(td(e,r.x,i.x,s.x,o.x),td(e,r.y,i.y,s.y,o.y),td(e,r.z,i.z,s.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}rd.prototype.isCubicBezierCurve3=!0;class id extends Fh{constructor(e=new hn,t=new hn){super(),this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new hn){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const n=t||new hn;return n.copy(this.v2).sub(this.v1).normalize(),n}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}id.prototype.isLineCurve=!0;class sd extends Fh{constructor(e=new kn,t=new kn){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=e,this.v2=t}getPoint(e,t=new kn){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class od extends Fh{constructor(e=new hn,t=new hn,n=new hn){super(),this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new hn){const n=t,r=this.v0,i=this.v1,s=this.v2;return n.set(Jh(e,r.x,i.x,s.x),Jh(e,r.y,i.y,s.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}od.prototype.isQuadraticBezierCurve=!0;class ad extends Fh{constructor(e=new kn,t=new kn,n=new kn){super(),this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new kn){const n=t,r=this.v0,i=this.v1,s=this.v2;return n.set(Jh(e,r.x,i.x,s.x),Jh(e,r.y,i.y,s.y),Jh(e,r.z,i.z,s.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}ad.prototype.isQuadraticBezierCurve3=!0;class cd extends Fh{constructor(e=[]){super(),this.type="SplineCurve",this.points=e}getPoint(e,t=new hn){const n=t,r=this.points,i=(r.length-1)*e,s=Math.floor(i),o=i-s,a=r[0===s?s:s-1],c=r[s],l=r[s>r.length-2?r.length-1:s+1],u=r[s>r.length-3?r.length-1:s+2];return n.set(qh(o,a.x,c.x,l.x,u.x),qh(o,a.y,c.y,l.y,u.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new hn).fromArray(n))}return this}}cd.prototype.isSplineCurve=!0;var ld=Object.freeze({__proto__:null,ArcCurve:Bh,CatmullRomCurve3:Wh,CubicBezierCurve:nd,CubicBezierCurve3:rd,EllipseCurve:Uh,LineCurve:id,LineCurve3:sd,QuadraticBezierCurve:od,QuadraticBezierCurve3:ad,SplineCurve:cd});class ud extends Fh{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new id(t,e))}getPoint(e,t){const n=e*this.getLength(),r=this.getCurveLengths();let i=0;while(i<r.length){if(r[i]>=n){const e=r[i]-n,s=this.curves[i],o=s.getLength(),a=0===o?0:1-e/o;return s.getPointAt(a,t)}i++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let r=0,i=this.curves;r<i.length;r++){const s=i[r],o=s.isEllipseCurve?2*e:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?e*s.points.length:e,a=s.getPoints(o);for(let e=0;e<a.length;e++){const r=a[e];n&&n.equals(r)||(t.push(r),n=r)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const n=this.curves[t];e.curves.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push((new ld[n.type]).fromJSON(n))}return this}}class hd extends ud{constructor(e){super(),this.type="Path",this.currentPoint=new hn,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new id(this.currentPoint.clone(),new hn(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){const i=new od(this.currentPoint.clone(),new hn(e,t),new hn(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,i,s){const o=new nd(this.currentPoint.clone(),new hn(e,t),new hn(n,r),new hn(i,s));return this.curves.push(o),this.currentPoint.set(i,s),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new cd(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,i,s){const o=this.currentPoint.x,a=this.currentPoint.y;return this.absarc(e+o,t+a,n,r,i,s),this}absarc(e,t,n,r,i,s){return this.absellipse(e,t,n,n,r,i,s),this}ellipse(e,t,n,r,i,s,o,a){const c=this.currentPoint.x,l=this.currentPoint.y;return this.absellipse(e+c,t+l,n,r,i,s,o,a),this}absellipse(e,t,n,r,i,s,o,a){const c=new Uh(e,t,n,r,i,s,o,a);if(this.curves.length>0){const e=c.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(c);const l=c.getPoint(1);return this.currentPoint.copy(l),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class dd extends hd{constructor(e){super(e),this.uuid=Vt(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const n=this.holes[t];e.holes.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push((new hd).fromJSON(n))}return this}}const pd={triangulate:function(e,t,n=2){const r=t&&t.length,i=r?t[0]*n:e.length;let s=fd(e,0,i,n,!0);const o=[];if(!s||s.next===s.prev)return o;let a,c,l,u,h,d,p;if(r&&(s=bd(e,t,s,n)),e.length>80*n){a=l=e[0],c=u=e[1];for(let t=n;t<i;t+=n)h=e[t],d=e[t+1],h<a&&(a=h),d<c&&(c=d),h>l&&(l=h),d>u&&(u=d);p=Math.max(l-a,u-c),p=0!==p?1/p:0}return gd(s,o,n,a,c,p),o}};function fd(e,t,n,r,i){let s,o;if(i===Gd(e,t,n,r)>0)for(s=t;s<n;s+=r)o=Hd(s,e[s],e[s+1],o);else for(s=n-r;s>=t;s-=r)o=Hd(s,e[s],e[s+1],o);return o&&Id(o,o.next)&&(jd(o),o=o.next),o}function md(e,t){if(!e)return e;t||(t=e);let n,r=e;do{if(n=!1,r.steiner||!Id(r,r.next)&&0!==Pd(r.prev,r,r.next))r=r.next;else{if(jd(r),r=t=r.prev,r===r.next)break;n=!0}}while(n||r!==t);return t}function gd(e,t,n,r,i,s,o){if(!e)return;!o&&s&&Ed(e,r,i,s);let a,c,l=e;while(e.prev!==e.next)if(a=e.prev,c=e.next,s?yd(e,r,i,s):vd(e))t.push(a.i/n),t.push(e.i/n),t.push(c.i/n),jd(e),e=c.next,l=c.next;else if(e=c,e===l){o?1===o?(e=_d(md(e),t,n),gd(e,t,n,r,i,s,2)):2===o&&xd(e,t,n,r,i,s):gd(md(e),t,n,r,i,s,1);break}}function vd(e){const t=e.prev,n=e,r=e.next;if(Pd(t,n,r)>=0)return!1;let i=e.next.next;while(i!==e.prev){if(Ld(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&Pd(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function yd(e,t,n,r){const i=e.prev,s=e,o=e.next;if(Pd(i,s,o)>=0)return!1;const a=i.x<s.x?i.x<o.x?i.x:o.x:s.x<o.x?s.x:o.x,c=i.y<s.y?i.y<o.y?i.y:o.y:s.y<o.y?s.y:o.y,l=i.x>s.x?i.x>o.x?i.x:o.x:s.x>o.x?s.x:o.x,u=i.y>s.y?i.y>o.y?i.y:o.y:s.y>o.y?s.y:o.y,h=Rd(a,c,t,n,r),d=Rd(l,u,t,n,r);let p=e.prevZ,f=e.nextZ;while(p&&p.z>=h&&f&&f.z<=d){if(p!==e.prev&&p!==e.next&&Ld(i.x,i.y,s.x,s.y,o.x,o.y,p.x,p.y)&&Pd(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,f!==e.prev&&f!==e.next&&Ld(i.x,i.y,s.x,s.y,o.x,o.y,f.x,f.y)&&Pd(f.prev,f,f.next)>=0)return!1;f=f.nextZ}while(p&&p.z>=h){if(p!==e.prev&&p!==e.next&&Ld(i.x,i.y,s.x,s.y,o.x,o.y,p.x,p.y)&&Pd(p.prev,p,p.next)>=0)return!1;p=p.prevZ}while(f&&f.z<=d){if(f!==e.prev&&f!==e.next&&Ld(i.x,i.y,s.x,s.y,o.x,o.y,f.x,f.y)&&Pd(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function _d(e,t,n){let r=e;do{const i=r.prev,s=r.next.next;!Id(i,s)&&Dd(i,r,r.next,s)&&Ud(i,s)&&Ud(s,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(s.i/n),jd(r),jd(r.next),r=e=s),r=r.next}while(r!==e);return md(r)}function xd(e,t,n,r,i,s){let o=e;do{let e=o.next.next;while(e!==o.prev){if(o.i!==e.i&&Od(o,e)){let a=zd(o,e);return o=md(o,o.next),a=md(a,a.next),gd(o,t,n,r,i,s),void gd(a,t,n,r,i,s)}e=e.next}o=o.next}while(o!==e)}function bd(e,t,n,r){const i=[];let s,o,a,c,l;for(s=0,o=t.length;s<o;s++)a=t[s]*r,c=s<o-1?t[s+1]*r:e.length,l=fd(e,a,c,r,!1),l===l.next&&(l.steiner=!0),i.push(Cd(l));for(i.sort(wd),s=0;s<i.length;s++)Md(i[s],n),n=md(n,n.next);return n}function wd(e,t){return e.x-t.x}function Md(e,t){if(t=Sd(e,t),t){const n=zd(t,e);md(t,t.next),md(n,n.next)}}function Sd(e,t){let n=t;const r=e.x,i=e.y;let s,o=-1/0;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){const e=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(e<=r&&e>o){if(o=e,e===r){if(i===n.y)return n;if(i===n.next.y)return n.next}s=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!s)return null;if(r===o)return s;const a=s,c=s.x,l=s.y;let u,h=1/0;n=s;do{r>=n.x&&n.x>=c&&r!==n.x&&Ld(i<l?r:o,i,c,l,i<l?o:r,i,n.x,n.y)&&(u=Math.abs(i-n.y)/(r-n.x),Ud(n,e)&&(u<h||u===h&&(n.x>s.x||n.x===s.x&&Td(s,n)))&&(s=n,h=u)),n=n.next}while(n!==a);return s}function Td(e,t){return Pd(e.prev,e,t.prev)<0&&Pd(t.next,e,e.next)<0}function Ed(e,t,n,r){let i=e;do{null===i.z&&(i.z=Rd(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,Ad(i)}function Ad(e){let t,n,r,i,s,o,a,c,l=1;do{n=e,e=null,s=null,o=0;while(n){for(o++,r=n,a=0,t=0;t<l;t++)if(a++,r=r.nextZ,!r)break;c=l;while(a>0||c>0&&r)0!==a&&(0===c||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,c--),s?s.nextZ=i:e=i,i.prevZ=s,s=i;n=r}s.nextZ=null,l*=2}while(o>1);return e}function Rd(e,t,n,r,i){return e=32767*(e-n)*i,t=32767*(t-r)*i,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e|t<<1}function Cd(e){let t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function Ld(e,t,n,r,i,s,o,a){return(i-o)*(t-a)-(e-o)*(s-a)>=0&&(e-o)*(r-a)-(n-o)*(t-a)>=0&&(n-o)*(s-a)-(i-o)*(r-a)>=0}function Od(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!Fd(e,t)&&(Ud(e,t)&&Ud(t,e)&&Bd(e,t)&&(Pd(e.prev,e,t.prev)||Pd(e,t.prev,t))||Id(e,t)&&Pd(e.prev,e,e.next)>0&&Pd(t.prev,t,t.next)>0)}function Pd(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Id(e,t){return e.x===t.x&&e.y===t.y}function Dd(e,t,n,r){const i=kd(Pd(e,t,n)),s=kd(Pd(e,t,r)),o=kd(Pd(n,r,e)),a=kd(Pd(n,r,t));return i!==s&&o!==a||(!(0!==i||!Nd(e,n,t))||(!(0!==s||!Nd(e,r,t))||(!(0!==o||!Nd(n,e,r))||!(0!==a||!Nd(n,t,r)))))}function Nd(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function kd(e){return e>0?1:e<0?-1:0}function Fd(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Dd(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}function Ud(e,t){return Pd(e.prev,e,e.next)<0?Pd(e,t,e.next)>=0&&Pd(e,e.prev,t)>=0:Pd(e,t,e.prev)<0||Pd(e,e.next,t)<0}function Bd(e,t){let n=e,r=!1;const i=(e.x+t.x)/2,s=(e.y+t.y)/2;do{n.y>s!==n.next.y>s&&n.next.y!==n.y&&i<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}function zd(e,t){const n=new Vd(e.i,e.x,e.y),r=new Vd(t.i,t.x,t.y),i=e.next,s=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,s.next=r,r.prev=s,r}function Hd(e,t,n,r){const i=new Vd(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function jd(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Vd(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Gd(e,t,n,r){let i=0;for(let s=t,o=n-r;s<n;s+=r)i+=(e[o]-e[s])*(e[s+1]+e[o+1]),o=s;return i}class Wd{static area(e){const t=e.length;let n=0;for(let r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n}static isClockWise(e){return Wd.area(e)<0}static triangulateShape(e,t){const n=[],r=[],i=[];qd(e),Xd(n,e);let s=e.length;t.forEach(qd);for(let a=0;a<t.length;a++)r.push(s),s+=t[a].length,Xd(n,t[a]);const o=pd.triangulate(n,r);for(let a=0;a<o.length;a+=3)i.push(o.slice(a,a+3));return i}}function qd(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function Xd(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}class Yd extends pi{constructor(e=new dd([new hn(.5,.5),new hn(-.5,.5),new hn(-.5,-.5),new hn(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,r=[],i=[];for(let o=0,a=e.length;o<a;o++){const t=e[o];s(t)}function s(e){const s=[],o=void 0!==t.curveSegments?t.curveSegments:12,a=void 0!==t.steps?t.steps:1;let c=void 0!==t.depth?t.depth:1,l=void 0===t.bevelEnabled||t.bevelEnabled,u=void 0!==t.bevelThickness?t.bevelThickness:.2,h=void 0!==t.bevelSize?t.bevelSize:u-.1,d=void 0!==t.bevelOffset?t.bevelOffset:0,p=void 0!==t.bevelSegments?t.bevelSegments:3;const f=t.extrudePath,m=void 0!==t.UVGenerator?t.UVGenerator:Kd;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),c=t.amount);let g,v,y,_,x,b=!1;f&&(g=f.getSpacedPoints(a),b=!0,l=!1,v=f.computeFrenetFrames(a,!1),y=new kn,_=new kn,x=new kn),l||(p=0,u=0,h=0,d=0);const w=e.extractPoints(o);let M=w.shape;const S=w.holes,T=!Wd.isClockWise(M);if(T){M=M.reverse();for(let e=0,t=S.length;e<t;e++){const t=S[e];Wd.isClockWise(t)&&(S[e]=t.reverse())}}const E=Wd.triangulateShape(M,S),A=M;for(let t=0,n=S.length;t<n;t++){const e=S[t];M=M.concat(e)}function R(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}const C=M.length,L=E.length;function O(e,t,n){let r,i,s;const o=e.x-t.x,a=e.y-t.y,c=n.x-e.x,l=n.y-e.y,u=o*o+a*a,h=o*l-a*c;if(Math.abs(h)>Number.EPSILON){const h=Math.sqrt(u),d=Math.sqrt(c*c+l*l),p=t.x-a/h,f=t.y+o/h,m=n.x-l/d,g=n.y+c/d,v=((m-p)*l-(g-f)*c)/(o*l-a*c);r=p+o*v-e.x,i=f+a*v-e.y;const y=r*r+i*i;if(y<=2)return new hn(r,i);s=Math.sqrt(y/2)}else{let e=!1;o>Number.EPSILON?c>Number.EPSILON&&(e=!0):o<-Number.EPSILON?c<-Number.EPSILON&&(e=!0):Math.sign(a)===Math.sign(l)&&(e=!0),e?(r=-a,i=o,s=Math.sqrt(u)):(r=o,i=a,s=Math.sqrt(u/2))}return new hn(r/s,i/s)}const P=[];for(let t=0,n=A.length,r=n-1,i=t+1;t<n;t++,r++,i++)r===n&&(r=0),i===n&&(i=0),P[t]=O(A[t],A[r],A[i]);const I=[];let D,N=P.concat();for(let t=0,n=S.length;t<n;t++){const e=S[t];D=[];for(let t=0,n=e.length,r=n-1,i=t+1;t<n;t++,r++,i++)r===n&&(r=0),i===n&&(i=0),D[t]=O(e[t],e[r],e[i]);I.push(D),N=N.concat(D)}for(let t=0;t<p;t++){const e=t/p,n=u*Math.cos(e*Math.PI/2),r=h*Math.sin(e*Math.PI/2)+d;for(let t=0,i=A.length;t<i;t++){const e=R(A[t],P[t],r);z(e.x,e.y,-n)}for(let t=0,i=S.length;t<i;t++){const e=S[t];D=I[t];for(let t=0,i=e.length;t<i;t++){const i=R(e[t],D[t],r);z(i.x,i.y,-n)}}}const k=h+d;for(let t=0;t<C;t++){const e=l?R(M[t],N[t],k):M[t];b?(_.copy(v.normals[0]).multiplyScalar(e.x),y.copy(v.binormals[0]).multiplyScalar(e.y),x.copy(g[0]).add(_).add(y),z(x.x,x.y,x.z)):z(e.x,e.y,0)}for(let t=1;t<=a;t++)for(let e=0;e<C;e++){const n=l?R(M[e],N[e],k):M[e];b?(_.copy(v.normals[t]).multiplyScalar(n.x),y.copy(v.binormals[t]).multiplyScalar(n.y),x.copy(g[t]).add(_).add(y),z(x.x,x.y,x.z)):z(n.x,n.y,c/a*t)}for(let t=p-1;t>=0;t--){const e=t/p,n=u*Math.cos(e*Math.PI/2),r=h*Math.sin(e*Math.PI/2)+d;for(let t=0,i=A.length;t<i;t++){const e=R(A[t],P[t],r);z(e.x,e.y,c+n)}for(let t=0,i=S.length;t<i;t++){const e=S[t];D=I[t];for(let t=0,i=e.length;t<i;t++){const i=R(e[t],D[t],r);b?z(i.x,i.y+g[a-1].y,g[a-1].x+n):z(i.x,i.y,c+n)}}}function F(){const e=r.length/3;if(l){let e=0,t=C*e;for(let n=0;n<L;n++){const e=E[n];H(e[2]+t,e[1]+t,e[0]+t)}e=a+2*p,t=C*e;for(let n=0;n<L;n++){const e=E[n];H(e[0]+t,e[1]+t,e[2]+t)}}else{for(let e=0;e<L;e++){const t=E[e];H(t[2],t[1],t[0])}for(let e=0;e<L;e++){const t=E[e];H(t[0]+C*a,t[1]+C*a,t[2]+C*a)}}n.addGroup(e,r.length/3-e,0)}function U(){const e=r.length/3;let t=0;B(A,t),t+=A.length;for(let n=0,r=S.length;n<r;n++){const e=S[n];B(e,t),t+=e.length}n.addGroup(e,r.length/3-e,1)}function B(e,t){let n=e.length;while(--n>=0){const r=n;let i=n-1;i<0&&(i=e.length-1);for(let e=0,n=a+2*p;e<n;e++){const n=C*e,s=C*(e+1),o=t+r+n,a=t+i+n,c=t+i+s,l=t+r+s;j(o,a,c,l)}}}function z(e,t,n){s.push(e),s.push(t),s.push(n)}function H(e,t,i){V(e),V(t),V(i);const s=r.length/3,o=m.generateTopUV(n,r,s-3,s-2,s-1);G(o[0]),G(o[1]),G(o[2])}function j(e,t,i,s){V(e),V(t),V(s),V(t),V(i),V(s);const o=r.length/3,a=m.generateSideWallUV(n,r,o-6,o-3,o-2,o-1);G(a[0]),G(a[1]),G(a[3]),G(a[1]),G(a[2]),G(a[3])}function V(e){r.push(s[3*e+0]),r.push(s[3*e+1]),r.push(s[3*e+2])}function G(e){i.push(e.x),i.push(e.y)}F(),U()}this.setAttribute("position",new si(r,3)),this.setAttribute("uv",new si(i,2)),this.computeVertexNormals()}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return Jd(t,n,e)}static fromJSON(e,t){const n=[];for(let i=0,s=e.shapes.length;i<s;i++){const r=t[e.shapes[i]];n.push(r)}const r=e.options.extrudePath;return void 0!==r&&(e.options.extrudePath=(new ld[r.type]).fromJSON(r)),new Yd(n,e.options)}}const Kd={generateTopUV:function(e,t,n,r,i){const s=t[3*n],o=t[3*n+1],a=t[3*r],c=t[3*r+1],l=t[3*i],u=t[3*i+1];return[new hn(s,o),new hn(a,c),new hn(l,u)]},generateSideWallUV:function(e,t,n,r,i,s){const o=t[3*n],a=t[3*n+1],c=t[3*n+2],l=t[3*r],u=t[3*r+1],h=t[3*r+2],d=t[3*i],p=t[3*i+1],f=t[3*i+2],m=t[3*s],g=t[3*s+1],v=t[3*s+2];return Math.abs(a-u)<Math.abs(o-l)?[new hn(o,1-c),new hn(l,1-h),new hn(d,1-f),new hn(m,1-v)]:[new hn(a,1-c),new hn(u,1-h),new hn(p,1-f),new hn(g,1-v)]}};function Jd(e,t,n){if(n.shapes=[],Array.isArray(e))for(let r=0,i=e.length;r<i;r++){const t=e[r];n.shapes.push(t.uuid)}else n.shapes.push(e.uuid);return void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}class Zd extends pi{constructor(e=new dd([new hn(0,.5),new hn(-.5,-.5),new hn(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],r=[],i=[],s=[];let o=0,a=0;if(!1===Array.isArray(e))c(e);else for(let l=0;l<e.length;l++)c(e[l]),this.addGroup(o,a,l),o+=a,a=0;function c(e){const o=r.length/3,c=e.extractPoints(t);let l=c.shape;const u=c.holes;!1===Wd.isClockWise(l)&&(l=l.reverse());for(let t=0,n=u.length;t<n;t++){const e=u[t];!0===Wd.isClockWise(e)&&(u[t]=e.reverse())}const h=Wd.triangulateShape(l,u);for(let t=0,n=u.length;t<n;t++){const e=u[t];l=l.concat(e)}for(let t=0,n=l.length;t<n;t++){const e=l[t];r.push(e.x,e.y,0),i.push(0,0,1),s.push(e.x,e.y)}for(let t=0,r=h.length;t<r;t++){const e=h[t],r=e[0]+o,i=e[1]+o,s=e[2]+o;n.push(r,i,s),a+=3}}this.setIndex(n),this.setAttribute("position",new si(r,3)),this.setAttribute("normal",new si(i,3)),this.setAttribute("uv",new si(s,2))}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return $d(t,e)}static fromJSON(e,t){const n=[];for(let r=0,i=e.shapes.length;r<i;r++){const i=t[e.shapes[r]];n.push(i)}return new Zd(n,e.curveSegments)}}function $d(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,r=e.length;n<r;n++){const r=e[n];t.shapes.push(r.uuid)}else t.shapes.push(e.uuid);return t}class Qd extends pi{constructor(e=1,t=32,n=16,r=0,i=2*Math.PI,s=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:s,thetaLength:o},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const a=Math.min(s+o,Math.PI);let c=0;const l=[],u=new kn,h=new kn,d=[],p=[],f=[],m=[];for(let g=0;g<=n;g++){const d=[],v=g/n;let y=0;0==g&&0==s?y=.5/t:g==n&&a==Math.PI&&(y=-.5/t);for(let n=0;n<=t;n++){const a=n/t;u.x=-e*Math.cos(r+a*i)*Math.sin(s+v*o),u.y=e*Math.cos(s+v*o),u.z=e*Math.sin(r+a*i)*Math.sin(s+v*o),p.push(u.x,u.y,u.z),h.copy(u).normalize(),f.push(h.x,h.y,h.z),m.push(a+y,1-v),d.push(c++)}l.push(d)}for(let g=0;g<n;g++)for(let e=0;e<t;e++){const t=l[g][e+1],r=l[g][e],i=l[g+1][e],o=l[g+1][e+1];(0!==g||s>0)&&d.push(t,r,o),(g!==n-1||a<Math.PI)&&d.push(r,i,o)}this.setIndex(d),this.setAttribute("position",new si(p,3)),this.setAttribute("normal",new si(f,3)),this.setAttribute("uv",new si(m,2))}static fromJSON(e){return new Qd(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class ep extends pi{constructor(e=1,t=.4,n=8,r=6,i=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},n=Math.floor(n),r=Math.floor(r);const s=[],o=[],a=[],c=[],l=new kn,u=new kn,h=new kn;for(let d=0;d<=n;d++)for(let s=0;s<=r;s++){const p=s/r*i,f=d/n*Math.PI*2;u.x=(e+t*Math.cos(f))*Math.cos(p),u.y=(e+t*Math.cos(f))*Math.sin(p),u.z=t*Math.sin(f),o.push(u.x,u.y,u.z),l.x=e*Math.cos(p),l.y=e*Math.sin(p),h.subVectors(u,l).normalize(),a.push(h.x,h.y,h.z),c.push(s/r),c.push(d/n)}for(let d=1;d<=n;d++)for(let e=1;e<=r;e++){const t=(r+1)*d+e-1,n=(r+1)*(d-1)+e-1,i=(r+1)*(d-1)+e,o=(r+1)*d+e;s.push(t,n,o),s.push(n,i,o)}this.setIndex(s),this.setAttribute("position",new si(o,3)),this.setAttribute("normal",new si(a,3)),this.setAttribute("uv",new si(c,2))}static fromJSON(e){return new ep(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class tp extends Zr{constructor(e){super(),this.type="ShadowMaterial",this.color=new bn(0),this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this}}tp.prototype.isShadowMaterial=!0;class np extends zi{constructor(e){super(e),this.type="RawShaderMaterial"}}np.prototype.isRawShaderMaterial=!0;class rp extends Zr{constructor(e){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new bn(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new bn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Lt,this.normalScale=new hn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}rp.prototype.isMeshStandardMaterial=!0;class ip extends rp{constructor(e){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new hn(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Gt(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.sheenColor=new bn(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new bn(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new bn(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!==e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!==e>0&&this.version++,this._clearcoat=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!==e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}ip.prototype.isMeshPhysicalMaterial=!0;class sp extends Zr{constructor(e){super(),this.type="MeshPhongMaterial",this.color=new bn(16777215),this.specular=new bn(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new bn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Lt,this.normalScale=new hn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=q,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}sp.prototype.isMeshPhongMaterial=!0;class op extends Zr{constructor(e){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new bn(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new bn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Lt,this.normalScale=new hn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}op.prototype.isMeshToonMaterial=!0;class ap extends Zr{constructor(e){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Lt,this.normalScale=new hn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}ap.prototype.isMeshNormalMaterial=!0;class cp extends Zr{constructor(e){super(),this.type="MeshLambertMaterial",this.color=new bn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new bn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=q,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}cp.prototype.isMeshLambertMaterial=!0;class lp extends Zr{constructor(e){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new bn(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Lt,this.normalScale=new hn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this}}lp.prototype.isMeshMatcapMaterial=!0;class up extends fh{constructor(e){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}up.prototype.isLineDashedMaterial=!0;const hp={ShadowMaterial:tp,SpriteMaterial:Nu,RawShaderMaterial:np,ShaderMaterial:zi,PointsMaterial:Th,MeshPhysicalMaterial:ip,MeshStandardMaterial:rp,MeshPhongMaterial:sp,MeshToonMaterial:op,MeshNormalMaterial:ap,MeshLambertMaterial:cp,MeshDepthMaterial:hu,MeshDistanceMaterial:du,MeshBasicMaterial:$r,MeshMatcapMaterial:lp,LineDashedMaterial:up,LineBasicMaterial:fh,Material:Zr};Zr.fromType=function(e){return new hp[e]};const dp={arraySlice:function(e,t,n){return dp.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){function t(t,n){return e[t]-e[n]}const n=e.length,r=new Array(n);for(let i=0;i!==n;++i)r[i]=i;return r.sort(t),r},sortedArray:function(e,t,n){const r=e.length,i=new e.constructor(r);for(let s=0,o=0;o!==r;++s){const r=n[s]*t;for(let n=0;n!==t;++n)i[o++]=e[r+n]}return i},flattenJSON:function(e,t,n,r){let i=1,s=e[0];while(void 0!==s&&void 0===s[r])s=e[i++];if(void 0===s)return;let o=s[r];if(void 0!==o)if(Array.isArray(o))do{o=s[r],void 0!==o&&(t.push(s.time),n.push.apply(n,o)),s=e[i++]}while(void 0!==s);else if(void 0!==o.toArray)do{o=s[r],void 0!==o&&(t.push(s.time),o.toArray(n,n.length)),s=e[i++]}while(void 0!==s);else do{o=s[r],void 0!==o&&(t.push(s.time),n.push(o)),s=e[i++]}while(void 0!==s)},subclip:function(e,t,n,r,i=30){const s=e.clone();s.name=t;const o=[];for(let c=0;c<s.tracks.length;++c){const e=s.tracks[c],t=e.getValueSize(),a=[],l=[];for(let s=0;s<e.times.length;++s){const o=e.times[s]*i;if(!(o<n||o>=r)){a.push(e.times[s]);for(let n=0;n<t;++n)l.push(e.values[s*t+n])}}0!==a.length&&(e.times=dp.convertArray(a,e.times.constructor),e.values=dp.convertArray(l,e.values.constructor),o.push(e))}s.tracks=o;let a=1/0;for(let c=0;c<s.tracks.length;++c)a>s.tracks[c].times[0]&&(a=s.tracks[c].times[0]);for(let c=0;c<s.tracks.length;++c)s.tracks[c].shift(-1*a);return s.resetDuration(),s},makeClipAdditive:function(e,t=0,n=e,r=30){r<=0&&(r=30);const i=n.tracks.length,s=t/r;for(let o=0;o<i;++o){const t=n.tracks[o],r=t.ValueTypeName;if("bool"===r||"string"===r)continue;const i=e.tracks.find((function(e){return e.name===t.name&&e.ValueTypeName===r}));if(void 0===i)continue;let a=0;const c=t.getValueSize();t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(a=c/3);let l=0;const u=i.getValueSize();i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(l=u/3);const h=t.times.length-1;let d;if(s<=t.times[0]){const e=a,n=c-a;d=dp.arraySlice(t.values,e,n)}else if(s>=t.times[h]){const e=h*c+a,n=e+c-a;d=dp.arraySlice(t.values,e,n)}else{const e=t.createInterpolant(),n=a,r=c-a;e.evaluate(s),d=dp.arraySlice(e.resultBuffer,n,r)}if("quaternion"===r){const e=(new Nn).fromArray(d).normalize().conjugate();e.toArray(d)}const p=i.times.length;for(let e=0;e<p;++e){const t=e*u+l;if("quaternion"===r)Nn.multiplyQuaternionsFlat(i.values,t,d,0,i.values,t);else{const e=u-2*l;for(let n=0;n<e;++n)i.values[t+n]-=d[n]}}}return e.blendMode=wt,e}};class pp{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{let s;n:{r:if(!(e<r)){for(let s=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,i)}if(n===s)break;if(i=r,r=t[++n],e<r)break t}s=t.length;break n}if(e>=i)break e;{const o=t[1];e<o&&(n=2,i=o);for(let s=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===s)break;if(r=i,i=t[--n-1],e>=i)break t}s=n,n=0}}while(n<s){const r=n+s>>>1;e<t[r]?s=r:n=r+1}if(r=t[n],i=t[n-1],void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(void 0===r)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,i,e)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r;for(let s=0;s!==r;++s)t[s]=n[i+s];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}pp.prototype.beforeStart_=pp.prototype.copySampleValue_,pp.prototype.afterEnd_=pp.prototype.copySampleValue_;class fp extends pp{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:yt,endingEnd:yt}}intervalChanged_(e,t,n){const r=this.parameterPositions;let i=e-2,s=e+1,o=r[i],a=r[s];if(void 0===o)switch(this.getSettings_().endingStart){case _t:i=e,o=2*t-n;break;case xt:i=r.length-2,o=t+r[i]-r[i+1];break;default:i=e,o=n}if(void 0===a)switch(this.getSettings_().endingEnd){case _t:s=e,a=2*n-t;break;case xt:s=1,a=n+r[1]-r[0];break;default:s=e-1,a=t}const c=.5*(n-t),l=this.valueSize;this._weightPrev=c/(t-o),this._weightNext=c/(a-n),this._offsetPrev=i*l,this._offsetNext=s*l}interpolate_(e,t,n,r){const i=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=e*o,c=a-o,l=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,d=this._weightNext,p=(n-t)/(r-t),f=p*p,m=f*p,g=-h*m+2*h*f-h*p,v=(1+h)*m+(-1.5-2*h)*f+(-.5+h)*p+1,y=(-1-d)*m+(1.5+d)*f+.5*p,_=d*m-d*f;for(let x=0;x!==o;++x)i[x]=g*s[l+x]+v*s[c+x]+y*s[a+x]+_*s[u+x];return i}}class mp extends pp{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=e*o,c=a-o,l=(n-t)/(r-t),u=1-l;for(let h=0;h!==o;++h)i[h]=s[c+h]*u+s[a+h]*l;return i}}class gp extends pp{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class vp{constructor(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=dp.convertArray(t,this.TimeBufferType),this.values=dp.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:dp.convertArray(e.times,Array),values:dp.convertArray(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new gp(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new mp(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new fp(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case mt:t=this.InterpolantFactoryMethodDiscrete;break;case gt:t=this.InterpolantFactoryMethodLinear;break;case vt:t=this.InterpolantFactoryMethodSmooth;break}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return mt;case this.InterpolantFactoryMethodLinear:return gt;case this.InterpolantFactoryMethodSmooth:return vt}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let i=0,s=r-1;while(i!==r&&n[i]<e)++i;while(-1!==s&&n[s]>t)--s;if(++s,0!==i||s!==r){i>=s&&(s=Math.max(s,1),i=s-1);const e=this.getValueSize();this.times=dp.arraySlice(n,i,s),this.values=dp.arraySlice(this.values,i*e,s*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let o=0;o!==i;o++){const t=n[o];if("number"===typeof t&&isNaN(t)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,t),e=!1;break}if(null!==s&&s>t){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,t,s),e=!1;break}s=t}if(void 0!==r&&dp.isTypedArray(r))for(let o=0,a=r.length;o!==a;++o){const t=r[o];if(isNaN(t)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,t),e=!1;break}}return e}optimize(){const e=dp.arraySlice(this.times),t=dp.arraySlice(this.values),n=this.getValueSize(),r=this.getInterpolation()===vt,i=e.length-1;let s=1;for(let o=1;o<i;++o){let i=!1;const a=e[o],c=e[o+1];if(a!==c&&(1!==o||a!==e[0]))if(r)i=!0;else{const e=o*n,r=e-n,s=e+n;for(let o=0;o!==n;++o){const n=t[e+o];if(n!==t[r+o]||n!==t[s+o]){i=!0;break}}}if(i){if(o!==s){e[s]=e[o];const r=o*n,i=s*n;for(let e=0;e!==n;++e)t[i+e]=t[r+e]}++s}}if(i>0){e[s]=e[i];for(let e=i*n,r=s*n,o=0;o!==n;++o)t[r+o]=t[e+o];++s}return s!==e.length?(this.times=dp.arraySlice(e,0,s),this.values=dp.arraySlice(t,0,s*n)):(this.times=e,this.values=t),this}clone(){const e=dp.arraySlice(this.times,0),t=dp.arraySlice(this.values,0),n=this.constructor,r=new n(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}vp.prototype.TimeBufferType=Float32Array,vp.prototype.ValueBufferType=Float32Array,vp.prototype.DefaultInterpolation=gt;class yp extends vp{}yp.prototype.ValueTypeName="bool",yp.prototype.ValueBufferType=Array,yp.prototype.DefaultInterpolation=mt,yp.prototype.InterpolantFactoryMethodLinear=void 0,yp.prototype.InterpolantFactoryMethodSmooth=void 0;class _p extends vp{}_p.prototype.ValueTypeName="color";class xp extends vp{}xp.prototype.ValueTypeName="number";class bp extends pp{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=(n-t)/(r-t);let c=e*o;for(let l=c+o;c!==l;c+=4)Nn.slerpFlat(i,0,s,c-o,s,c,a);return i}}class wp extends vp{InterpolantFactoryMethodLinear(e){return new bp(this.times,this.values,this.getValueSize(),e)}}wp.prototype.ValueTypeName="quaternion",wp.prototype.DefaultInterpolation=gt,wp.prototype.InterpolantFactoryMethodSmooth=void 0;class Mp extends vp{}Mp.prototype.ValueTypeName="string",Mp.prototype.ValueBufferType=Array,Mp.prototype.DefaultInterpolation=mt,Mp.prototype.InterpolantFactoryMethodLinear=void 0,Mp.prototype.InterpolantFactoryMethodSmooth=void 0;class Sp extends vp{}Sp.prototype.ValueTypeName="vector";class Tp{constructor(e,t=-1,n,r=bt){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=Vt(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let s=0,o=n.length;s!==o;++s)t.push(Ap(n[s]).scale(r));const i=new this(e.name,e.duration,t,e.blendMode);return i.uuid=e.uuid,i}static toJSON(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let i=0,s=n.length;i!==s;++i)t.push(vp.toJSON(n[i]));return r}static CreateFromMorphTargetSequence(e,t,n,r){const i=t.length,s=[];for(let o=0;o<i;o++){let e=[],a=[];e.push((o+i-1)%i,o,(o+1)%i),a.push(0,1,0);const c=dp.getKeyframeOrder(e);e=dp.sortedArray(e,1,c),a=dp.sortedArray(a,1,c),r||0!==e[0]||(e.push(i),a.push(a[0])),s.push(new xp(".morphTargetInfluences["+t[o].name+"]",e,a).scale(1/n))}return new this(e,-1,s)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const t=e;n=t.geometry&&t.geometry.animations||t.animations}for(let r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const r={},i=/^([\w-]*?)([\d]+)$/;for(let o=0,a=e.length;o<a;o++){const t=e[o],n=t.name.match(i);if(n&&n.length>1){const e=n[1];let i=r[e];i||(r[e]=i=[]),i.push(t)}}const s=[];for(const o in r)s.push(this.CreateFromMorphTargetSequence(o,r[o],t,n));return s}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(e,t,n,r,i){if(0!==n.length){const s=[],o=[];dp.flattenJSON(n,s,o,r),0!==s.length&&i.push(new e(t,s,o))}},r=[],i=e.name||"default",s=e.fps||30,o=e.blendMode;let a=e.length||-1;const c=e.hierarchy||[];for(let u=0;u<c.length;u++){const e=c[u].keys;if(e&&0!==e.length)if(e[0].morphTargets){const t={};let n;for(n=0;n<e.length;n++)if(e[n].morphTargets)for(let r=0;r<e[n].morphTargets.length;r++)t[e[n].morphTargets[r]]=-1;for(const i in t){const t=[],s=[];for(let r=0;r!==e[n].morphTargets.length;++r){const r=e[n];t.push(r.time),s.push(r.morphTarget===i?1:0)}r.push(new xp(".morphTargetInfluence["+i+"]",t,s))}a=t.length*s}else{const i=".bones["+t[u].name+"]";n(Sp,i+".position",e,"pos",r),n(wp,i+".quaternion",e,"rot",r),n(Sp,i+".scale",e,"scl",r)}}if(0===r.length)return null;const l=new this(i,a,r,o);return l}resetDuration(){const e=this.tracks;let t=0;for(let n=0,r=e.length;n!==r;++n){const e=this.tracks[n];t=Math.max(t,e.times[e.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Ep(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return xp;case"vector":case"vector2":case"vector3":case"vector4":return Sp;case"color":return _p;case"quaternion":return wp;case"bool":case"boolean":return yp;case"string":return Mp}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}function Ap(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=Ep(e.type);if(void 0===e.times){const t=[],n=[];dp.flattenJSON(e.keys,t,n,"value"),e.times=t,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}const Rp={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};class Cp{constructor(e,t,n){const r=this;let i=!1,s=0,o=0,a=void 0;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){o++,!1===i&&void 0!==r.onStart&&r.onStart(e,s,o),i=!0},this.itemEnd=function(e){s++,void 0!==r.onProgress&&r.onProgress(e,s,o),s===o&&(i=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return a?a(e):e},this.setURLModifier=function(e){return a=e,this},this.addHandler=function(e,t){return c.push(e,t),this},this.removeHandler=function(e){const t=c.indexOf(e);return-1!==t&&c.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=c.length;t<n;t+=2){const n=c[t],r=c[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return r}return null}}}const Lp=new Cp;class Op{constructor(e){this.manager=void 0!==e?e:Lp,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise((function(r,i){n.load(e,r,t,i)}))}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Pp={};class Ip extends Op{constructor(e){super(e)}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=Rp.get(e);if(void 0!==i)return this.manager.itemStart(e),setTimeout(()=>{t&&t(i),this.manager.itemEnd(e)},0),i;if(void 0!==Pp[e])return void Pp[e].push({onLoad:t,onProgress:n,onError:r});Pp[e]=[],Pp[e].push({onLoad:t,onProgress:n,onError:r});const s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,a=this.responseType;fetch(s).then(t=>{if(200===t.status||0===t.status){if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"===typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;const n=Pp[e],r=t.body.getReader(),i=t.headers.get("Content-Length"),s=i?parseInt(i):0,o=0!==s;let a=0;const c=new ReadableStream({start(e){function t(){r.read().then(({done:r,value:i})=>{if(r)e.close();else{a+=i.byteLength;const r=new ProgressEvent("progress",{lengthComputable:o,loaded:a,total:s});for(let e=0,t=n.length;e<t;e++){const t=n[e];t.onProgress&&t.onProgress(r)}e.enqueue(i),t()}})}t()}});return new Response(c)}throw Error(`fetch for "${t.url}" responded with ${t.status}: ${t.statusText}`)}).then(e=>{switch(a){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then(e=>{const t=new DOMParser;return t.parseFromString(e,o)});case"json":return e.json();default:if(void 0===o)return e.text();{const t=/charset="?([^;"\s]*)"?/i,n=t.exec(o),r=n&&n[1]?n[1].toLowerCase():void 0,i=new TextDecoder(r);return e.arrayBuffer().then(e=>i.decode(e))}}}).then(t=>{Rp.add(e,t);const n=Pp[e];delete Pp[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onLoad&&r.onLoad(t)}}).catch(t=>{const n=Pp[e];if(void 0===n)throw this.manager.itemError(e),t;delete Pp[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onError&&r.onError(t)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Dp extends Op{constructor(e){super(e)}load(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,s=Rp.get(e);if(void 0!==s)return i.manager.itemStart(e),setTimeout((function(){t&&t(s),i.manager.itemEnd(e)}),0),s;const o=fn("img");function a(){l(),Rp.add(e,this),t&&t(this),i.manager.itemEnd(e)}function c(t){l(),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}function l(){o.removeEventListener("load",a,!1),o.removeEventListener("error",c,!1)}return o.addEventListener("load",a,!1),o.addEventListener("error",c,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),i.manager.itemStart(e),o.src=e,o}}class Np extends Op{constructor(e){super(e)}load(e,t,n,r){const i=new qi,s=new Dp(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let o=0;function a(n){s.load(e[n],(function(e){i.images[n]=e,o++,6===o&&(i.needsUpdate=!0,t&&t(i))}),void 0,r)}for(let c=0;c<e.length;++c)a(c);return i}}class kp extends Op{constructor(e){super(e)}load(e,t,n,r){const i=new An,s=new Dp(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,(function(e){i.image=e,i.needsUpdate=!0,void 0!==t&&t(i)}),n,r),i}}class Fp extends Ur{constructor(e,t=1){super(),this.type="Light",this.color=new bn(e),this.intensity=t}dispose(){}copy(e){return super.copy(e),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}Fp.prototype.isLight=!0;class Up extends Fp{constructor(e,t,n){super(e,n),this.type="HemisphereLight",this.position.copy(Ur.DefaultUp),this.updateMatrix(),this.groundColor=new bn(t)}copy(e){return Fp.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}Up.prototype.isHemisphereLight=!0;const Bp=new pr,zp=new kn,Hp=new kn;class jp{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new hn(512,512),this.map=null,this.mapPass=null,this.matrix=new pr,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new es,this._frameExtents=new hn(1,1),this._viewportCount=1,this._viewports=[new Rn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;zp.setFromMatrixPosition(e.matrixWorld),t.position.copy(zp),Hp.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Hp),t.updateMatrixWorld(),Bp.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Bp),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Vp extends jp{constructor(){super(new ji(50,1,.5,500)),this.focus=1}updateMatrices(e){const t=this.camera,n=2*jt*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;n===t.fov&&r===t.aspect&&i===t.far||(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}Vp.prototype.isSpotLightShadow=!0;class Gp extends Fp{constructor(e,t,n=0,r=Math.PI/3,i=0,s=1){super(e,t),this.type="SpotLight",this.position.copy(Ur.DefaultUp),this.updateMatrix(),this.target=new Ur,this.distance=n,this.angle=r,this.penumbra=i,this.decay=s,this.shadow=new Vp}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}Gp.prototype.isSpotLight=!0;const Wp=new pr,qp=new kn,Xp=new kn;class Yp extends jp{constructor(){super(new ji(90,1,.5,500)),this._frameExtents=new hn(4,2),this._viewportCount=6,this._viewports=[new Rn(2,1,1,1),new Rn(0,1,1,1),new Rn(3,1,1,1),new Rn(1,1,1,1),new Rn(3,0,1,1),new Rn(1,0,1,1)],this._cubeDirections=[new kn(1,0,0),new kn(-1,0,0),new kn(0,0,1),new kn(0,0,-1),new kn(0,1,0),new kn(0,-1,0)],this._cubeUps=[new kn(0,1,0),new kn(0,1,0),new kn(0,1,0),new kn(0,1,0),new kn(0,0,1),new kn(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,r=this.matrix,i=e.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),qp.setFromMatrixPosition(e.matrixWorld),n.position.copy(qp),Xp.copy(n.position),Xp.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(Xp),n.updateMatrixWorld(),r.makeTranslation(-qp.x,-qp.y,-qp.z),Wp.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Wp)}}Yp.prototype.isPointLightShadow=!0;class Kp extends Fp{constructor(e,t,n=0,r=1){super(e,t),this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new Yp}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}Kp.prototype.isPointLight=!0;class Jp extends jp{constructor(){super(new Ha(-5,5,5,-5,.5,500))}}Jp.prototype.isDirectionalLightShadow=!0;class Zp extends Fp{constructor(e,t){super(e,t),this.type="DirectionalLight",this.position.copy(Ur.DefaultUp),this.updateMatrix(),this.target=new Ur,this.shadow=new Jp}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}Zp.prototype.isDirectionalLight=!0;class $p extends Fp{constructor(e,t){super(e,t),this.type="AmbientLight"}}$p.prototype.isAmbientLight=!0;class Qp extends Fp{constructor(e,t,n=10,r=10){super(e,t),this.type="RectAreaLight",this.width=n,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}Qp.prototype.isRectAreaLight=!0;class ef{constructor(){this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new kn)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,r=e.y,i=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.282095),t.addScaledVector(s[1],.488603*r),t.addScaledVector(s[2],.488603*i),t.addScaledVector(s[3],.488603*n),t.addScaledVector(s[4],n*r*1.092548),t.addScaledVector(s[5],r*i*1.092548),t.addScaledVector(s[6],.315392*(3*i*i-1)),t.addScaledVector(s[7],n*i*1.092548),t.addScaledVector(s[8],.546274*(n*n-r*r)),t}getIrradianceAt(e,t){const n=e.x,r=e.y,i=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.886227),t.addScaledVector(s[1],1.023328*r),t.addScaledVector(s[2],1.023328*i),t.addScaledVector(s[3],1.023328*n),t.addScaledVector(s[4],.858086*n*r),t.addScaledVector(s[5],.858086*r*i),t.addScaledVector(s[6],.743125*i*i-.247708),t.addScaledVector(s[7],.858086*n*i),t.addScaledVector(s[8],.429043*(n*n-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(e,t+3*r);return this}toArray(e=[],t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(e,t+3*r);return e}static getBasisAt(e,t){const n=e.x,r=e.y,i=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*i,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*i,t[6]=.315392*(3*i*i-1),t[7]=1.092548*n*i,t[8]=.546274*(n*n-r*r)}}ef.prototype.isSphericalHarmonics3=!0;class tf extends Fp{constructor(e=new ef,t=1){super(void 0,t),this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}tf.prototype.isLightProbe=!0;class nf{static decodeText(e){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch(n){return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!==typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class rf extends pi{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return(new this.constructor).copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}rf.prototype.isInstancedBufferGeometry=!0;class sf extends Op{constructor(e){super(e),"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,s=Rp.get(e);if(void 0!==s)return i.manager.itemStart(e),setTimeout((function(){t&&t(s),i.manager.itemEnd(e)}),0),s;const o={};o.credentials="anonymous"===this.crossOrigin?"same-origin":"include",o.headers=this.requestHeader,fetch(e,o).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(i.options,{colorSpaceConversion:"none"}))})).then((function(n){Rp.add(e,n),t&&t(n),i.manager.itemEnd(e)})).catch((function(t){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)})),i.manager.itemStart(e)}}let of;sf.prototype.isImageBitmapLoader=!0;const af={getContext:function(){return void 0===of&&(of=new(window.AudioContext||window.webkitAudioContext)),of},setContext:function(e){of=e}};class cf extends Op{constructor(e){super(e)}load(e,t,n,r){const i=this,s=new Ip(this.manager);s.setResponseType("arraybuffer"),s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,(function(n){try{const e=n.slice(0),r=af.getContext();r.decodeAudioData(e,(function(e){t(e)}))}catch(s){r?r(s):console.error(s),i.manager.itemError(e)}}),n,r)}}class lf extends tf{constructor(e,t,n=1){super(void 0,n);const r=(new bn).set(e),i=(new bn).set(t),s=new kn(r.r,r.g,r.b),o=new kn(i.r,i.g,i.b),a=Math.sqrt(Math.PI),c=a*Math.sqrt(.75);this.sh.coefficients[0].copy(s).add(o).multiplyScalar(a),this.sh.coefficients[1].copy(s).sub(o).multiplyScalar(c)}}lf.prototype.isHemisphereLightProbe=!0;class uf extends tf{constructor(e,t=1){super(void 0,t);const n=(new bn).set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}}uf.prototype.isAmbientLightProbe=!0;class hf{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=df(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=df();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function df(){return("undefined"===typeof performance?Date:performance).now()}class pf extends Ur{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}class ff{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class mf{constructor(e,t,n){let r,i,s;switch(this.binding=e,this.valueSize=n,t){case"quaternion":r=this._slerp,i=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":r=this._select,i=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:r=this._lerp,i=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=i,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,r=this.valueSize,i=e*r+r;let s=this.cumulativeWeight;if(0===s){for(let e=0;e!==r;++e)n[i+e]=n[e];s=t}else{s+=t;const e=t/s;this._mixBufferRegion(n,i,0,e,r)}this.cumulativeWeight=s}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,s=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){const e=t*this._origIndex;this._mixBufferRegion(n,r,e,1-i,t)}s>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(let a=t,c=t+t;a!==c;++a)if(n[a]!==n[a+t]){o.setValue(n,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(let i=n,s=r;i!==s;++i)t[i]=t[r+i%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=3*this.valueSize;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,r,i){if(r>=.5)for(let s=0;s!==i;++s)e[t+s]=e[n+s]}_slerp(e,t,n,r){Nn.slerpFlat(e,t,e,t,e,n,r)}_slerpAdditive(e,t,n,r,i){const s=this._workIndex*i;Nn.multiplyQuaternionsFlat(e,s,e,t,e,n),Nn.slerpFlat(e,t,e,t,e,s,r)}_lerp(e,t,n,r,i){const s=1-r;for(let o=0;o!==i;++o){const i=t+o;e[i]=e[i]*s+e[n+o]*r}}_lerpAdditive(e,t,n,r,i){for(let s=0;s!==i;++s){const i=t+s;e[i]=e[i]+e[n+s]*r}}}const gf="\\[\\]\\.:\\/",vf=new RegExp("["+gf+"]","g"),yf="[^"+gf+"]",_f="[^"+gf.replace("\\.","")+"]",xf=/((?:WC+[\/:])*)/.source.replace("WC",yf),bf=/(WCOD+)?/.source.replace("WCOD",_f),wf=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",yf),Mf=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",yf),Sf=new RegExp("^"+xf+bf+wf+Mf+"$"),Tf=["material","materials","bones"];class Ef{constructor(e,t,n){const r=n||Af.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class Af{constructor(e,t,n){this.path=t,this.parsedPath=n||Af.parseTrackName(t),this.node=Af.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new Af.Composite(e,t,n):new Af(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(vf,"")}static parseTrackName(e){const t=Sf.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const e=n.nodeName.substring(r+1);-1!==Tf.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let r=0;r<e.length;r++){const i=e[r];if(i.name===t||i.uuid===t)return i;const s=n(i.children);if(s)return s}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let i=t.propertyIndex;if(e||(e=Af.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let r=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===r){r=t;break}break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==r){if(void 0===e[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[r]}}const s=e[r];if(void 0===s){const n=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+r+" but it wasn't found.",e)}let o=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?o=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(o=this.Versioning.MatrixWorldNeedsUpdate);let a=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[i]&&(i=e.morphTargetDictionary[i])}a=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=i}else void 0!==s.fromArray&&void 0!==s.toArray?(a=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(a=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[a],this.setValue=this.SetterByBindingTypeAndVersioning[a][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Af.Composite=Ef,Af.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Af.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Af.prototype.GetterByBindingType=[Af.prototype._getValue_direct,Af.prototype._getValue_array,Af.prototype._getValue_arrayElement,Af.prototype._getValue_toArray],Af.prototype.SetterByBindingTypeAndVersioning=[[Af.prototype._setValue_direct,Af.prototype._setValue_direct_setNeedsUpdate,Af.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Af.prototype._setValue_array,Af.prototype._setValue_array_setNeedsUpdate,Af.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Af.prototype._setValue_arrayElement,Af.prototype._setValue_arrayElement_setNeedsUpdate,Af.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Af.prototype._setValue_fromArray,Af.prototype._setValue_fromArray_setNeedsUpdate,Af.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Rf{constructor(){this.uuid=Vt(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,r=arguments.length;n!==r;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,i=this._bindings,s=i.length;let o=void 0,a=e.length,c=this.nCachedObjects_;for(let l=0,u=arguments.length;l!==u;++l){const u=arguments[l],h=u.uuid;let d=t[h];if(void 0===d){d=a++,t[h]=d,e.push(u);for(let e=0,t=s;e!==t;++e)i[e].push(new Af(u,n[e],r[e]))}else if(d<c){o=e[d];const a=--c,l=e[a];t[l.uuid]=d,e[d]=l,t[h]=a,e[a]=u;for(let e=0,t=s;e!==t;++e){const t=i[e],s=t[a];let o=t[d];t[d]=s,void 0===o&&(o=new Af(u,n[e],r[e])),t[a]=o}}else e[d]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_;for(let s=0,o=arguments.length;s!==o;++s){const o=arguments[s],a=o.uuid,c=t[a];if(void 0!==c&&c>=i){const s=i++,l=e[s];t[l.uuid]=c,e[c]=l,t[a]=s,e[s]=o;for(let e=0,t=r;e!==t;++e){const t=n[e],r=t[s],i=t[c];t[c]=r,t[s]=i}}}this.nCachedObjects_=i}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_,s=e.length;for(let o=0,a=arguments.length;o!==a;++o){const a=arguments[o],c=a.uuid,l=t[c];if(void 0!==l)if(delete t[c],l<i){const o=--i,a=e[o],c=--s,u=e[c];t[a.uuid]=l,e[l]=a,t[u.uuid]=o,e[o]=u,e.pop();for(let e=0,t=r;e!==t;++e){const t=n[e],r=t[o],i=t[c];t[l]=r,t[o]=i,t.pop()}}else{const i=--s,o=e[i];i>0&&(t[o.uuid]=l),e[l]=o,e.pop();for(let e=0,t=r;e!==t;++e){const t=n[e];t[l]=t[i],t.pop()}}}this.nCachedObjects_=i}subscribe_(e,t){const n=this._bindingsIndicesByPath;let r=n[e];const i=this._bindings;if(void 0!==r)return i[r];const s=this._paths,o=this._parsedPaths,a=this._objects,c=a.length,l=this.nCachedObjects_,u=new Array(c);r=i.length,n[e]=r,s.push(e),o.push(t),i.push(u);for(let h=l,d=a.length;h!==d;++h){const n=a[h];u[h]=new Af(n,e,t)}return u}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){const r=this._paths,i=this._parsedPaths,s=this._bindings,o=s.length-1,a=s[o],c=e[o];t[c]=n,s[n]=a,s.pop(),i[n]=i[o],i.pop(),r[n]=r[o],r.pop()}}}Rf.prototype.isAnimationObjectGroup=!0;class Cf{constructor(e,t,n=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=r;const i=t.tracks,s=i.length,o=new Array(s),a={endingStart:yt,endingEnd:yt};for(let c=0;c!==s;++c){const e=i[c].createInterpolant(null);o[c]=e,e.settings=a}this._interpolantSettings=a,this._interpolants=o,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=pt,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const n=this._clip.duration,r=e._clip.duration,i=r/n,s=n/r;e.warp(1,i,t),this.warp(s,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const r=this._mixer,i=r.time,s=this.timeScale;let o=this._timeScaleInterpolant;null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);const a=o.parameterPositions,c=o.sampleValues;return a[0]=i,a[1]=i+n,c[0]=e/s,c[1]=t/s,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,r){if(!this.enabled)return void this._updateWeight(e);const i=this._startTime;if(null!==i){const r=(e-i)*n;if(r<0||0===n)return;this._startTime=null,t=n*r}t*=this._updateTimeScale(e);const s=this._updateTime(t),o=this._updateWeight(e);if(o>0){const e=this._interpolants,t=this._propertyBindings;switch(this.blendMode){case wt:for(let n=0,r=e.length;n!==r;++n)e[n].evaluate(s),t[n].accumulateAdditive(o);break;case bt:default:for(let n=0,i=e.length;n!==i;++n)e[n].evaluate(s),t[n].accumulate(r,o)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(null!==n){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(null!==n){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let r=this.time+e,i=this._loopCount;const s=n===ft;if(0===e)return-1===i?r:s&&1===(1&i)?t-r:r;if(n===dt){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,s)):this._setEndings(0===this.repetitions,!0,s)),r>=t||r<0){const n=Math.floor(r/t);r-=t*n,i+=Math.abs(n);const o=this.repetitions-i;if(o<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===o){const t=e<0;this._setEndings(t,!t,s)}else this._setEndings(!1,!1,s);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=r;if(s&&1===(1&i))return t-r}return r}_setEndings(e,t,n){const r=this._interpolantSettings;n?(r.endingStart=_t,r.endingEnd=_t):(r.endingStart=e?this.zeroSlopeAtStart?_t:yt:xt,r.endingEnd=t?this.zeroSlopeAtEnd?_t:yt:xt)}_scheduleFading(e,t,n){const r=this._mixer,i=r.time;let s=this._weightInterpolant;null===s&&(s=r._lendControlInterpolant(),this._weightInterpolant=s);const o=s.parameterPositions,a=s.sampleValues;return o[0]=i,a[0]=t,o[1]=i+e,a[1]=n,this}}class Lf extends Ut{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,s=e._propertyBindings,o=e._interpolants,a=n.uuid,c=this._bindingsByRootAndName;let l=c[a];void 0===l&&(l={},c[a]=l);for(let u=0;u!==i;++u){const e=r[u],i=e.name;let c=l[i];if(void 0!==c)++c.referenceCount,s[u]=c;else{if(c=s[u],void 0!==c){null===c._cacheIndex&&(++c.referenceCount,this._addInactiveBinding(c,a,i));continue}const r=t&&t._propertyBindings[u].binding.parsedPath;c=new mf(Af.create(n,i,r),e.ValueTypeName,e.getValueSize()),++c.referenceCount,this._addInactiveBinding(c,a,i),s[u]=c}o[u].resultBuffer=c.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0===n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0===--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,n){const r=this._actions,i=this._actionsByClip;let s=i[t];if(void 0===s)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=s;else{const t=s.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=r.length,r.push(e),s.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;const i=e._clip.uuid,s=this._actionsByClip,o=s[i],a=o.knownActions,c=a[a.length-1],l=e._byClipCacheIndex;c._byClipCacheIndex=l,a[l]=c,a.pop(),e._byClipCacheIndex=null;const u=o.actionByRoot,h=(e._localRoot||this._root).uuid;delete u[h],0===a.length&&delete s[i],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const e=t[n];0===--e.referenceCount&&this._removeInactiveBinding(e)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_addInactiveBinding(e,t,n){const r=this._bindingsByRootAndName,i=this._bindings;let s=r[t];void 0===s&&(s={},r[t]=s),s[n]=e,e._cacheIndex=i.length,i.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,s=this._bindingsByRootAndName,o=s[r],a=t[t.length-1],c=e._cacheIndex;a._cacheIndex=c,t[c]=a,t.pop(),delete o[i],0===Object.keys(o).length&&delete s[r]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return void 0===n&&(n=new mp(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i}clipAction(e,t,n){const r=t||this._root,i=r.uuid;let s="string"===typeof e?Tp.findByName(r,e):e;const o=null!==s?s.uuid:e,a=this._actionsByClip[o];let c=null;if(void 0===n&&(n=null!==s?s.blendMode:bt),void 0!==a){const e=a.actionByRoot[i];if(void 0!==e&&e.blendMode===n)return e;c=a.knownActions[0],null===s&&(s=c._clip)}if(null===s)return null;const l=new Cf(this,s,t,n);return this._bindAction(l,c),this._addInactiveAction(l,o,i),l}existingAction(e,t){const n=t||this._root,r=n.uuid,i="string"===typeof e?Tp.findByName(n,e):e,s=i?i.uuid:e,o=this._actionsByClip[s];return void 0!==o&&o.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),s=this._accuIndex^=1;for(let c=0;c!==n;++c){const n=t[c];n._update(r,e,i,s)}const o=this._bindings,a=this._nActiveBindings;for(let c=0;c!==a;++c)o[c].apply(s);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){const e=i.knownActions;for(let n=0,r=e.length;n!==r;++n){const r=e[n];this._deactivateAction(r);const i=r._cacheIndex,s=t[t.length-1];r._cacheIndex=null,r._byClipCacheIndex=null,s._cacheIndex=i,t[i]=s,t.pop(),this._removeInactiveBindingsForAction(r)}delete r[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const s in n){const e=n[s].actionByRoot,r=e[t];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}const r=this._bindingsByRootAndName,i=r[t];if(void 0!==i)for(const s in i){const e=i[s];e.restoreOriginalState(),this._removeInactiveBinding(e)}}uncacheAction(e,t){const n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}Lf.prototype._controlInterpolantsResultBuffer=new Float32Array(1);class Of{constructor(e){"string"===typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new Of(void 0===this.value.clone?this.value:this.value.clone())}}class Pf extends Pu{constructor(e,t,n=1){super(e,t),this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}Pf.prototype.isInstancedInterleavedBuffer=!0;class If{constructor(e,t,n,r,i){this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=r,this.count=i,this.version=0}set needsUpdate(e){!0===e&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}If.prototype.isGLBufferAttribute=!0;class Df{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){const e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Gt(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}const Nf=new hn;class kf{constructor(e=new hn(1/0,1/0),t=new hn(-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Nf.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){const t=Nf.copy(e).clamp(this.min,this.max);return t.sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}kf.prototype.isBox2=!0;const Ff=new kn,Uf=new kn;class Bf{constructor(e=new kn,t=new kn){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){Ff.subVectors(e,this.start),Uf.subVectors(this.end,this.start);const n=Uf.dot(Uf),r=Uf.dot(Ff);let i=r/n;return t&&(i=Gt(i,0,1)),i}closestPointToPoint(e,t,n){const r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}const zf=new kn,Hf=new pr,jf=new pr;class Vf extends Mh{constructor(e){const t=Gf(e),n=new pi,r=[],i=[],s=new bn(0,0,1),o=new bn(0,1,0);for(let c=0;c<t.length;c++){const e=t[c];e.parent&&e.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(s.r,s.g,s.b),i.push(o.r,o.g,o.b))}n.setAttribute("position",new si(r,3)),n.setAttribute("color",new si(i,3));const a=new fh({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,a),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,r=n.getAttribute("position");jf.copy(this.root.matrixWorld).invert();for(let i=0,s=0;i<t.length;i++){const e=t[i];e.parent&&e.parent.isBone&&(Hf.multiplyMatrices(jf,e.matrixWorld),zf.setFromMatrixPosition(Hf),r.setXYZ(s,zf.x,zf.y,zf.z),Hf.multiplyMatrices(jf,e.parent.matrixWorld),zf.setFromMatrixPosition(Hf),r.setXYZ(s+1,zf.x,zf.y,zf.z),s+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}function Gf(e){const t=[];!0===e.isBone&&t.push(e);for(let n=0;n<e.children.length;n++)t.push.apply(t,Gf(e.children[n]));return t}class Wf extends Mh{constructor(e=10,t=10,n=4473924,r=8947848){n=new bn(n),r=new bn(r);const i=t/2,s=e/t,o=e/2,a=[],c=[];for(let h=0,d=0,p=-o;h<=t;h++,p+=s){a.push(-o,0,p,o,0,p),a.push(p,0,-o,p,0,o);const e=h===i?n:r;e.toArray(c,d),d+=3,e.toArray(c,d),d+=3,e.toArray(c,d),d+=3,e.toArray(c,d),d+=3}const l=new pi;l.setAttribute("position",new si(a,3)),l.setAttribute("color",new si(c,3));const u=new fh({vertexColors:!0,toneMapped:!1});super(l,u),this.type="GridHelper"}}const qf=new kn,Xf=new Hi;class Yf extends Mh{constructor(e){const t=new pi,n=new fh({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],i=[],s={},o=new bn(16755200),a=new bn(16711680),c=new bn(43775),l=new bn(16777215),u=new bn(3355443);function h(e,t,n){d(e,n),d(t,n)}function d(e,t){r.push(0,0,0),i.push(t.r,t.g,t.b),void 0===s[e]&&(s[e]=[]),s[e].push(r.length/3-1)}h("n1","n2",o),h("n2","n4",o),h("n4","n3",o),h("n3","n1",o),h("f1","f2",o),h("f2","f4",o),h("f4","f3",o),h("f3","f1",o),h("n1","f1",o),h("n2","f2",o),h("n3","f3",o),h("n4","f4",o),h("p","n1",a),h("p","n2",a),h("p","n3",a),h("p","n4",a),h("u1","u2",c),h("u2","u3",c),h("u3","u1",c),h("c","t",l),h("p","c",u),h("cn1","cn2",u),h("cn3","cn4",u),h("cf1","cf2",u),h("cf3","cf4",u),t.setAttribute("position",new si(r,3)),t.setAttribute("color",new si(i,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update()}update(){const e=this.geometry,t=this.pointMap,n=1,r=1;Xf.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Kf("c",t,e,Xf,0,0,-1),Kf("t",t,e,Xf,0,0,1),Kf("n1",t,e,Xf,-n,-r,-1),Kf("n2",t,e,Xf,n,-r,-1),Kf("n3",t,e,Xf,-n,r,-1),Kf("n4",t,e,Xf,n,r,-1),Kf("f1",t,e,Xf,-n,-r,1),Kf("f2",t,e,Xf,n,-r,1),Kf("f3",t,e,Xf,-n,r,1),Kf("f4",t,e,Xf,n,r,1),Kf("u1",t,e,Xf,.7*n,1.1*r,-1),Kf("u2",t,e,Xf,.7*-n,1.1*r,-1),Kf("u3",t,e,Xf,0,2*r,-1),Kf("cf1",t,e,Xf,-n,0,1),Kf("cf2",t,e,Xf,n,0,1),Kf("cf3",t,e,Xf,0,-r,1),Kf("cf4",t,e,Xf,0,r,1),Kf("cn1",t,e,Xf,-n,0,-1),Kf("cn2",t,e,Xf,n,0,-1),Kf("cn3",t,e,Xf,0,-r,-1),Kf("cn4",t,e,Xf,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Kf(e,t,n,r,i,s,o){qf.set(i,s,o).unproject(r);const a=t[e];if(void 0!==a){const e=n.getAttribute("position");for(let t=0,n=a.length;t<n;t++)e.setXYZ(a[t],qf.x,qf.y,qf.z)}}const Jf=new Float32Array(1);new Int32Array(Jf.buffer);function Zf(e){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),e}function $f(e=[]){return console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),e.isMultiMaterial=!0,e.materials=e,e.clone=function(){return e.slice()},e}Fh.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(Fh.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},hd.prototype.fromPoints=function(e){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)},Wf.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Vf.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Op.prototype.extractUrlBase=function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),nf.extractUrlBase(e)},Op.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},kf.prototype.center=function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},kf.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},kf.prototype.isIntersectionBox=function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},kf.prototype.size=function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)},Bn.prototype.center=function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Bn.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Bn.prototype.isIntersectionBox=function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},Bn.prototype.isIntersectionSphere=function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},Bn.prototype.size=function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)},Mr.prototype.toVector3=function(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")},ir.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},es.prototype.setFromMatrix=function(e){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(e)},Bf.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},dn.prototype.flattenToArrayOffset=function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},dn.prototype.multiplyVector3=function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},dn.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},dn.prototype.applyToBufferAttribute=function(e){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},dn.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},dn.prototype.getInverse=function(e){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()},pr.prototype.extractPosition=function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},pr.prototype.flattenToArrayOffset=function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},pr.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new kn).setFromMatrixColumn(this,3)},pr.prototype.setRotationFromQuaternion=function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},pr.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},pr.prototype.multiplyVector3=function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},pr.prototype.multiplyVector4=function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},pr.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},pr.prototype.rotateAxis=function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},pr.prototype.crossVector=function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},pr.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},pr.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},pr.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},pr.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},pr.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},pr.prototype.applyToBufferAttribute=function(e){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},pr.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},pr.prototype.makeFrustum=function(e,t,n,r,i,s){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,r,n,i,s)},pr.prototype.getInverse=function(e){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()},Zi.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},Nn.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Nn.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},dr.prototype.isIntersectionBox=function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},dr.prototype.isIntersectionPlane=function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},dr.prototype.isIntersectionSphere=function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},Kr.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},Kr.prototype.barycoordFromPoint=function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},Kr.prototype.midpoint=function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},Kr.prototypenormal=function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},Kr.prototype.plane=function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)},Kr.barycoordFromPoint=function(e,t,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Kr.getBarycoord(e,t,n,r,i)},Kr.normal=function(e,t,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Kr.getNormal(e,t,n,r)},dd.prototype.extractAllPoints=function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},dd.prototype.extrude=function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Yd(this,e)},dd.prototype.makeGeometry=function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Zd(this,e)},hn.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},hn.prototype.distanceToManhattan=function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},hn.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},kn.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},kn.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},kn.prototype.getPositionFromMatrix=function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},kn.prototype.getScaleFromMatrix=function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},kn.prototype.getColumnFromMatrix=function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},kn.prototype.applyProjection=function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},kn.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},kn.prototype.distanceToManhattan=function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},kn.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Rn.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},Rn.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Ur.prototype.getChildByName=function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},Ur.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},Ur.prototype.translate=function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},Ur.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},Ur.prototype.applyMatrix=function(e){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)},Object.defineProperties(Ur.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Oi.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(Oi.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),Mt},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),nh.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},ji.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(Fp.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(ti.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===Nt},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(Nt)}}}),ti.prototype.setDynamic=function(e){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?Nt:Dt),this},ti.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},ti.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},pi.prototype.addIndex=function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},pi.prototype.addAttribute=function(e,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(e,t):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(e,new ti(arguments[1],arguments[2])))},pi.prototype.addDrawCall=function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},pi.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},pi.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},pi.prototype.removeAttribute=function(e){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(e)},pi.prototype.applyMatrix=function(e){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)},Object.defineProperties(pi.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Pu.prototype.setDynamic=function(e){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?Nt:Dt),this},Pu.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},Yd.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},Yd.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},Yd.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},Ou.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},Of.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(Zr.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new bn}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=e===m}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(e){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=e}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}}),Object.defineProperties(zi.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Au.prototype.clearTarget=function(e,t,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,n,r)},Au.prototype.animate=function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},Au.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},Au.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},Au.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},Au.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},Au.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},Au.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},Au.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},Au.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},Au.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},Au.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},Au.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},Au.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},Au.prototype.enableScissorTest=function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},Au.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},Au.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},Au.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},Au.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},Au.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},Au.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},Au.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},Au.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},Au.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},Au.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(Au.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(e){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===e?At:Et}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}},gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}}),Object.defineProperties(mu.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Cn.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),pf.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const t=this,n=new cf;return n.load(e,(function(e){t.setBuffer(e)})),this},ff.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},Wi.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)},Wi.prototype.clear=function(e,t,n,r){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(e,t,n,r)},Mn.crossOrigin=void 0,Mn.loadTexture=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const i=new kp;i.setCrossOrigin(this.crossOrigin);const s=i.load(e,n,void 0,r);return t&&(s.mapping=t),s},Mn.loadTextureCube=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const i=new Np;i.setCrossOrigin(this.crossOrigin);const s=i.load(e,n,void 0,r);return t&&(s.mapping=t),s},Mn.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Mn.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:r}})),"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=r)},bcee:function(e,t,n){var r=n("9a00"),i=n("f11a"),s=n("505a");r||i(Object.prototype,"toString",s,{unsafe:!0})},c0eb:function(e,t,n){var r=n("dd09"),i=n("f42c"),s=n("69d4");e.exports=!r&&!i((function(){return 7!=Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a}))},c10c:function(e,t,n){var r=n("9caf"),i=Function.prototype,s=i.apply,o=i.call;e.exports="object"==typeof Reflect&&Reflect.apply||(r?o.bind(s):function(){return o.apply(s,arguments)})},c246:function(e,t,n){var r=n("53f4"),i=n("7f1e"),s=r("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||o[s]===e)}},c5ee:function(e,t,n){var r=n("4521"),i=Math.max,s=Math.min;e.exports=function(e,t){var n=r(e);return n<0?i(n+t,0):s(n,t)}},c880:function(e,t,n){var r=n("20d5");e.exports=/web0s(?!.*chrome)/i.test(r)},cad4:function(e,t){e.exports={}},cbcb:function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},cca5:function(e,t,n){"use strict";n.r(t),n.d(t,"Transition",(function(){return q})),n.d(t,"TransitionGroup",(function(){return de})),n.d(t,"VueElement",(function(){return B})),n.d(t,"createApp",(function(){return Xe})),n.d(t,"createSSRApp",(function(){return Ye})),n.d(t,"defineCustomElement",(function(){return k})),n.d(t,"defineSSRCustomElement",(function(){return F})),n.d(t,"hydrate",(function(){return qe})),n.d(t,"initDirectivesForSSR",(function(){return Ze})),n.d(t,"render",(function(){return We})),n.d(t,"useCssModule",(function(){return z})),n.d(t,"useCssVars",(function(){return H})),n.d(t,"vModelCheckbox",(function(){return we})),n.d(t,"vModelDynamic",(function(){return Ce})),n.d(t,"vModelRadio",(function(){return Se})),n.d(t,"vModelSelect",(function(){return Te})),n.d(t,"vModelText",(function(){return be})),n.d(t,"vShow",(function(){return Fe})),n.d(t,"withKeys",(function(){return ke})),n.d(t,"withModifiers",(function(){return De}));var r=n("ea1f"),i=n("8143"),s=n("87be");n.d(t,"EffectScope",(function(){return i["c"]})),n.d(t,"ReactiveEffect",(function(){return i["f"]})),n.d(t,"customRef",(function(){return i["C"]})),n.d(t,"effect",(function(){return i["J"]})),n.d(t,"effectScope",(function(){return i["K"]})),n.d(t,"getCurrentScope",(function(){return i["M"]})),n.d(t,"isProxy",(function(){return i["U"]})),n.d(t,"isReactive",(function(){return i["V"]})),n.d(t,"isReadonly",(function(){return i["W"]})),n.d(t,"isRef",(function(){return i["X"]})),n.d(t,"isShallow",(function(){return i["Z"]})),n.d(t,"markRaw",(function(){return i["bb"]})),n.d(t,"onScopeDispose",(function(){return i["rb"]})),n.d(t,"proxyRefs",(function(){return i["yb"]})),n.d(t,"reactive",(function(){return i["Bb"]})),n.d(t,"readonly",(function(){return i["Cb"]})),n.d(t,"ref",(function(){return i["Db"]})),n.d(t,"shallowReactive",(function(){return i["Pb"]})),n.d(t,"shallowReadonly",(function(){return i["Qb"]})),n.d(t,"shallowRef",(function(){return i["Rb"]})),n.d(t,"stop",(function(){return i["Ub"]})),n.d(t,"toRaw",(function(){return i["Yb"]})),n.d(t,"toRef",(function(){return i["Zb"]})),n.d(t,"toRefs",(function(){return i["ac"]})),n.d(t,"triggerRef",(function(){return i["cc"]})),n.d(t,"unref",(function(){return i["dc"]})),n.d(t,"camelize",(function(){return i["m"]})),n.d(t,"capitalize",(function(){return i["n"]})),n.d(t,"normalizeClass",(function(){return i["fb"]})),n.d(t,"normalizeProps",(function(){return i["gb"]})),n.d(t,"normalizeStyle",(function(){return i["hb"]})),n.d(t,"toDisplayString",(function(){return i["Vb"]})),n.d(t,"toHandlerKey",(function(){return i["Wb"]})),n.d(t,"BaseTransition",(function(){return i["a"]})),n.d(t,"Comment",(function(){return i["b"]})),n.d(t,"Fragment",(function(){return i["d"]})),n.d(t,"KeepAlive",(function(){return i["e"]})),n.d(t,"Static",(function(){return i["g"]})),n.d(t,"Suspense",(function(){return i["h"]})),n.d(t,"Teleport",(function(){return i["i"]})),n.d(t,"Text",(function(){return i["j"]})),n.d(t,"callWithAsyncErrorHandling",(function(){return i["k"]})),n.d(t,"callWithErrorHandling",(function(){return i["l"]})),n.d(t,"cloneVNode",(function(){return i["o"]})),n.d(t,"compatUtils",(function(){return i["p"]})),n.d(t,"computed",(function(){return i["q"]})),n.d(t,"createBlock",(function(){return i["r"]})),n.d(t,"createCommentVNode",(function(){return i["s"]})),n.d(t,"createElementBlock",(function(){return i["t"]})),n.d(t,"createElementVNode",(function(){return i["u"]})),n.d(t,"createHydrationRenderer",(function(){return i["v"]})),n.d(t,"createPropsRestProxy",(function(){return i["w"]})),n.d(t,"createRenderer",(function(){return i["x"]})),n.d(t,"createSlots",(function(){return i["y"]})),n.d(t,"createStaticVNode",(function(){return i["z"]})),n.d(t,"createTextVNode",(function(){return i["A"]})),n.d(t,"createVNode",(function(){return i["B"]})),n.d(t,"defineAsyncComponent",(function(){return i["D"]})),n.d(t,"defineComponent",(function(){return i["E"]})),n.d(t,"defineEmits",(function(){return i["F"]})),n.d(t,"defineExpose",(function(){return i["G"]})),n.d(t,"defineProps",(function(){return i["H"]})),n.d(t,"devtools",(function(){return i["I"]})),n.d(t,"getCurrentInstance",(function(){return i["L"]})),n.d(t,"getTransitionRawChildren",(function(){return i["N"]})),n.d(t,"guardReactiveProps",(function(){return i["O"]})),n.d(t,"h",(function(){return i["P"]})),n.d(t,"handleError",(function(){return i["Q"]})),n.d(t,"initCustomFormatter",(function(){return i["R"]})),n.d(t,"inject",(function(){return i["S"]})),n.d(t,"isMemoSame",(function(){return i["T"]})),n.d(t,"isRuntimeOnly",(function(){return i["Y"]})),n.d(t,"isVNode",(function(){return i["ab"]})),n.d(t,"mergeDefaults",(function(){return i["cb"]})),n.d(t,"mergeProps",(function(){return i["db"]})),n.d(t,"nextTick",(function(){return i["eb"]})),n.d(t,"onActivated",(function(){return i["ib"]})),n.d(t,"onBeforeMount",(function(){return i["jb"]})),n.d(t,"onBeforeUnmount",(function(){return i["kb"]})),n.d(t,"onBeforeUpdate",(function(){return i["lb"]})),n.d(t,"onDeactivated",(function(){return i["mb"]})),n.d(t,"onErrorCaptured",(function(){return i["nb"]})),n.d(t,"onMounted",(function(){return i["ob"]})),n.d(t,"onRenderTracked",(function(){return i["pb"]})),n.d(t,"onRenderTriggered",(function(){return i["qb"]})),n.d(t,"onServerPrefetch",(function(){return i["sb"]})),n.d(t,"onUnmounted",(function(){return i["tb"]})),n.d(t,"onUpdated",(function(){return i["ub"]})),n.d(t,"openBlock",(function(){return i["vb"]})),n.d(t,"popScopeId",(function(){return i["wb"]})),n.d(t,"provide",(function(){return i["xb"]})),n.d(t,"pushScopeId",(function(){return i["zb"]})),n.d(t,"queuePostFlushCb",(function(){return i["Ab"]})),n.d(t,"registerRuntimeCompiler",(function(){return i["Eb"]})),n.d(t,"renderList",(function(){return i["Fb"]})),n.d(t,"renderSlot",(function(){return i["Gb"]})),n.d(t,"resolveComponent",(function(){return i["Hb"]})),n.d(t,"resolveDirective",(function(){return i["Ib"]})),n.d(t,"resolveDynamicComponent",(function(){return i["Jb"]})),n.d(t,"resolveFilter",(function(){return i["Kb"]})),n.d(t,"resolveTransitionHooks",(function(){return i["Lb"]})),n.d(t,"setBlockTracking",(function(){return i["Mb"]})),n.d(t,"setDevtoolsHook",(function(){return i["Nb"]})),n.d(t,"setTransitionHooks",(function(){return i["Ob"]})),n.d(t,"ssrContextKey",(function(){return i["Sb"]})),n.d(t,"ssrUtils",(function(){return i["Tb"]})),n.d(t,"toHandlers",(function(){return i["Xb"]})),n.d(t,"transformVNodeArgs",(function(){return i["bc"]})),n.d(t,"useAttrs",(function(){return i["ec"]})),n.d(t,"useSSRContext",(function(){return i["fc"]})),n.d(t,"useSlots",(function(){return i["gc"]})),n.d(t,"useTransitionState",(function(){return i["hc"]})),n.d(t,"version",(function(){return i["ic"]})),n.d(t,"warn",(function(){return i["jc"]})),n.d(t,"watch",(function(){return i["kc"]})),n.d(t,"watchEffect",(function(){return i["lc"]})),n.d(t,"watchPostEffect",(function(){return i["mc"]})),n.d(t,"watchSyncEffect",(function(){return i["nc"]})),n.d(t,"withAsyncContext",(function(){return i["oc"]})),n.d(t,"withCtx",(function(){return i["pc"]})),n.d(t,"withDefaults",(function(){return i["qc"]})),n.d(t,"withDirectives",(function(){return i["rc"]})),n.d(t,"withMemo",(function(){return i["sc"]})),n.d(t,"withScopeId",(function(){return i["tc"]}));const o="http://www.w3.org/2000/svg",a="undefined"!==typeof document?document:null,c=a&&a.createElement("template"),l={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const i=t?a.createElementNS(o,e):a.createElement(e,n?{is:n}:void 0);return"select"===e&&r&&null!=r.multiple&&i.setAttribute("multiple",r.multiple),i},createText:e=>a.createTextNode(e),createComment:e=>a.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>a.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,n,r,i,s){const o=n?n.previousSibling:t.lastChild;if(i&&(i===s||i.nextSibling)){while(1)if(t.insertBefore(i.cloneNode(!0),n),i===s||!(i=i.nextSibling))break}else{c.innerHTML=r?`<svg>${e}</svg>`:e;const i=c.content;if(r){const e=i.firstChild;while(e.firstChild)i.appendChild(e.firstChild);i.removeChild(e)}t.insertBefore(i,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function u(e,t,n){const r=e._vtc;r&&(t=(t?[t,...r]:[...r]).join(" ")),null==t?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function h(e,t,n){const i=e.style,s=Object(r["G"])(n);if(n&&!s){for(const e in n)p(i,e,n[e]);if(t&&!Object(r["G"])(t))for(const e in t)null==n[e]&&p(i,e,"")}else{const r=i.display;s?t!==n&&(i.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(i.display=r)}}const d=/\s*!important$/;function p(e,t,n){if(Object(r["q"])(n))n.forEach(n=>p(e,t,n));else if(t.startsWith("--"))e.setProperty(t,n);else{const i=g(e,t);d.test(n)?e.setProperty(Object(r["n"])(i),n.replace(d,""),"important"):e[i]=n}}const f=["Webkit","Moz","ms"],m={};function g(e,t){const n=m[t];if(n)return n;let i=Object(r["f"])(t);if("filter"!==i&&i in e)return m[t]=i;i=Object(r["g"])(i);for(let r=0;r<f.length;r++){const n=f[r]+i;if(n in e)return m[t]=n}return t}const v="http://www.w3.org/1999/xlink";function y(e,t,n,i,s){if(i&&t.startsWith("xlink:"))null==n?e.removeAttributeNS(v,t.slice(6,t.length)):e.setAttributeNS(v,t,n);else{const i=Object(r["F"])(t);null==n||i&&!Object(r["o"])(n)?e.removeAttribute(t):e.setAttribute(t,i?"":n)}}function _(e,t,n,i,s,o,a){if("innerHTML"===t||"textContent"===t)return i&&a(i,s,o),void(e[t]=null==n?"":n);if("value"===t&&"PROGRESS"!==e.tagName&&!e.tagName.includes("-")){e._value=n;const r=null==n?"":n;return e.value===r&&"OPTION"!==e.tagName||(e.value=r),void(null==n&&e.removeAttribute(t))}if(""===n||null==n){const i=typeof e[t];if("boolean"===i)return void(e[t]=Object(r["o"])(n));if(null==n&&"string"===i)return e[t]="",void e.removeAttribute(t);if("number"===i){try{e[t]=0}catch(c){}return void e.removeAttribute(t)}}try{e[t]=n}catch(l){0}}let x=Date.now,b=!1;if("undefined"!==typeof window){x()>document.createEvent("Event").timeStamp&&(x=()=>performance.now());const e=navigator.userAgent.match(/firefox\/(\d+)/i);b=!!(e&&Number(e[1])<=53)}let w=0;const M=Promise.resolve(),S=()=>{w=0},T=()=>w||(M.then(S),w=x());function E(e,t,n,r){e.addEventListener(t,n,r)}function A(e,t,n,r){e.removeEventListener(t,n,r)}function R(e,t,n,r,i=null){const s=e._vei||(e._vei={}),o=s[t];if(r&&o)o.value=r;else{const[n,a]=L(t);if(r){const o=s[t]=O(r,i);E(e,n,o,a)}else o&&(A(e,n,o,a),s[t]=void 0)}}const C=/(?:Once|Passive|Capture)$/;function L(e){let t;if(C.test(e)){let n;t={};while(n=e.match(C))e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[Object(r["n"])(e.slice(2)),t]}function O(e,t){const n=e=>{const r=e.timeStamp||x();(b||r>=n.attached-1)&&Object(i["k"])(P(e,n.value),t,5,[e])};return n.value=e,n.attached=T(),n}function P(e,t){if(Object(r["q"])(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(e=>t=>!t._stopped&&e&&e(t))}return t}const I=/^on[a-z]/,D=(e,t,n,i,s=!1,o,a,c,l)=>{"class"===t?u(e,i,s):"style"===t?h(e,n,i):Object(r["z"])(t)?Object(r["x"])(t)||R(e,t,n,i,a):("."===t[0]?(t=t.slice(1),1):"^"===t[0]?(t=t.slice(1),0):N(e,t,i,s))?_(e,t,i,o,a,c,l):("true-value"===t?e._trueValue=i:"false-value"===t&&(e._falseValue=i),y(e,t,i,s))};function N(e,t,n,i){return i?"innerHTML"===t||"textContent"===t||!!(t in e&&I.test(t)&&Object(r["s"])(n)):"spellcheck"!==t&&"draggable"!==t&&("form"!==t&&(("list"!==t||"INPUT"!==e.tagName)&&(("type"!==t||"TEXTAREA"!==e.tagName)&&((!I.test(t)||!Object(r["G"])(n))&&t in e))))}function k(e,t){const n=Object(i["E"])(e);class r extends B{constructor(e){super(n,e,t)}}return r.def=n,r}const F=e=>k(e,qe),U="undefined"!==typeof HTMLElement?HTMLElement:class{};class B extends U{constructor(e,t={},n){super(),this._def=e,this._props=t,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this.shadowRoot&&n?n(this._createVNode(),this.shadowRoot):this.attachShadow({mode:"open"})}connectedCallback(){this._connected=!0,this._instance||this._resolveDef()}disconnectedCallback(){this._connected=!1,Object(i["eb"])(()=>{this._connected||(We(null,this.shadowRoot),this._instance=null)})}_resolveDef(){if(this._resolved)return;this._resolved=!0;for(let n=0;n<this.attributes.length;n++)this._setAttr(this.attributes[n].name);new MutationObserver(e=>{for(const t of e)this._setAttr(t.attributeName)}).observe(this,{attributes:!0});const e=e=>{const{props:t,styles:n}=e,i=!Object(r["q"])(t),s=t?i?Object.keys(t):t:[];let o;if(i)for(const a in this._props){const e=t[a];(e===Number||e&&e.type===Number)&&(this._props[a]=Object(r["T"])(this._props[a]),(o||(o=Object.create(null)))[a]=!0)}this._numberProps=o;for(const r of Object.keys(this))"_"!==r[0]&&this._setProp(r,this[r],!0,!1);for(const a of s.map(r["f"]))Object.defineProperty(this,a,{get(){return this._getProp(a)},set(e){this._setProp(a,e)}});this._applyStyles(n),this._update()},t=this._def.__asyncLoader;t?t().then(e):e(this._def)}_setAttr(e){let t=this.getAttribute(e);this._numberProps&&this._numberProps[e]&&(t=Object(r["T"])(t)),this._setProp(Object(r["f"])(e),t,!1)}_getProp(e){return this._props[e]}_setProp(e,t,n=!0,i=!0){t!==this._props[e]&&(this._props[e]=t,i&&this._instance&&this._update(),n&&(!0===t?this.setAttribute(Object(r["n"])(e),""):"string"===typeof t||"number"===typeof t?this.setAttribute(Object(r["n"])(e),t+""):t||this.removeAttribute(Object(r["n"])(e))))}_update(){We(this._createVNode(),this.shadowRoot)}_createVNode(){const e=Object(i["B"])(this._def,Object(r["i"])({},this._props));return this._instance||(e.ce=e=>{this._instance=e,e.isCE=!0,e.emit=(e,...t)=>{this.dispatchEvent(new CustomEvent(e,{detail:t}))};let t=this;while(t=t&&(t.parentNode||t.host))if(t instanceof B){e.parent=t._instance;break}}),e}_applyStyles(e){e&&e.forEach(e=>{const t=document.createElement("style");t.textContent=e,this.shadowRoot.appendChild(t)})}}function z(e="$style"){{const t=Object(i["L"])();if(!t)return r["b"];const n=t.type.__cssModules;if(!n)return r["b"];const s=n[e];return s||r["b"]}}function H(e){const t=Object(i["L"])();if(!t)return;const n=()=>j(t.subTree,e(t.proxy));Object(i["mc"])(n),Object(i["ob"])(()=>{const e=new MutationObserver(n);e.observe(t.subTree.el.parentNode,{childList:!0}),Object(i["tb"])(()=>e.disconnect())})}function j(e,t){if(128&e.shapeFlag){const n=e.suspense;e=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{j(n.activeBranch,t)})}while(e.component)e=e.component.subTree;if(1&e.shapeFlag&&e.el)V(e.el,t);else if(e.type===i["d"])e.children.forEach(e=>j(e,t));else if(e.type===i["g"]){let{el:n,anchor:r}=e;while(n){if(V(n,t),n===r)break;n=n.nextSibling}}}function V(e,t){if(1===e.nodeType){const n=e.style;for(const e in t)n.setProperty("--"+e,t[e])}}const G="transition",W="animation",q=(e,{slots:t})=>Object(i["P"])(i["a"],Z(e),t);q.displayName="Transition";const X={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Y=q.props=Object(r["i"])({},i["a"].props,X),K=(e,t=[])=>{Object(r["q"])(e)?e.forEach(e=>e(...t)):e&&e(...t)},J=e=>!!e&&(Object(r["q"])(e)?e.some(e=>e.length>1):e.length>1);function Z(e){const t={};for(const r in e)r in X||(t[r]=e[r]);if(!1===e.css)return t;const{name:n="v",type:i,duration:s,enterFromClass:o=n+"-enter-from",enterActiveClass:a=n+"-enter-active",enterToClass:c=n+"-enter-to",appearFromClass:l=o,appearActiveClass:u=a,appearToClass:h=c,leaveFromClass:d=n+"-leave-from",leaveActiveClass:p=n+"-leave-active",leaveToClass:f=n+"-leave-to"}=e,m=$(s),g=m&&m[0],v=m&&m[1],{onBeforeEnter:y,onEnter:_,onEnterCancelled:x,onLeave:b,onLeaveCancelled:w,onBeforeAppear:M=y,onAppear:S=_,onAppearCancelled:T=x}=t,E=(e,t,n)=>{te(e,t?h:c),te(e,t?u:a),n&&n()},A=(e,t)=>{te(e,f),te(e,p),t&&t()},R=e=>(t,n)=>{const r=e?S:_,s=()=>E(t,e,n);K(r,[t,s]),ne(()=>{te(t,e?l:o),ee(t,e?h:c),J(r)||ie(t,i,g,s)})};return Object(r["i"])(t,{onBeforeEnter(e){K(y,[e]),ee(e,o),ee(e,a)},onBeforeAppear(e){K(M,[e]),ee(e,l),ee(e,u)},onEnter:R(!1),onAppear:R(!0),onLeave(e,t){const n=()=>A(e,t);ee(e,d),ce(),ee(e,p),ne(()=>{te(e,d),ee(e,f),J(b)||ie(e,i,v,n)}),K(b,[e,n])},onEnterCancelled(e){E(e,!1),K(x,[e])},onAppearCancelled(e){E(e,!0),K(T,[e])},onLeaveCancelled(e){A(e),K(w,[e])}})}function $(e){if(null==e)return null;if(Object(r["y"])(e))return[Q(e.enter),Q(e.leave)];{const t=Q(e);return[t,t]}}function Q(e){const t=Object(r["T"])(e);return t}function ee(e,t){t.split(/\s+/).forEach(t=>t&&e.classList.add(t)),(e._vtc||(e._vtc=new Set)).add(t)}function te(e,t){t.split(/\s+/).forEach(t=>t&&e.classList.remove(t));const{_vtc:n}=e;n&&(n.delete(t),n.size||(e._vtc=void 0))}function ne(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let re=0;function ie(e,t,n,r){const i=e._endId=++re,s=()=>{i===e._endId&&r()};if(n)return setTimeout(s,n);const{type:o,timeout:a,propCount:c}=se(e,t);if(!o)return r();const l=o+"end";let u=0;const h=()=>{e.removeEventListener(l,d),s()},d=t=>{t.target===e&&++u>=c&&h()};setTimeout(()=>{u<c&&h()},a+1),e.addEventListener(l,d)}function se(e,t){const n=window.getComputedStyle(e),r=e=>(n[e]||"").split(", "),i=r(G+"Delay"),s=r(G+"Duration"),o=oe(i,s),a=r(W+"Delay"),c=r(W+"Duration"),l=oe(a,c);let u=null,h=0,d=0;t===G?o>0&&(u=G,h=o,d=s.length):t===W?l>0&&(u=W,h=l,d=c.length):(h=Math.max(o,l),u=h>0?o>l?G:W:null,d=u?u===G?s.length:c.length:0);const p=u===G&&/\b(transform|all)(,|$)/.test(n[G+"Property"]);return{type:u,timeout:h,propCount:d,hasTransform:p}}function oe(e,t){while(e.length<t.length)e=e.concat(e);return Math.max(...t.map((t,n)=>ae(t)+ae(e[n])))}function ae(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function ce(){return document.body.offsetHeight}const le=new WeakMap,ue=new WeakMap,he={name:"TransitionGroup",props:Object(r["i"])({},Y,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=Object(i["L"])(),r=Object(i["hc"])();let o,a;return Object(i["ub"])(()=>{if(!o.length)return;const t=e.moveClass||(e.name||"v")+"-move";if(!ge(o[0].el,n.vnode.el,t))return;o.forEach(pe),o.forEach(fe);const r=o.filter(me);ce(),r.forEach(e=>{const n=e.el,r=n.style;ee(n,t),r.transform=r.webkitTransform=r.transitionDuration="";const i=n._moveCb=e=>{e&&e.target!==n||e&&!/transform$/.test(e.propertyName)||(n.removeEventListener("transitionend",i),n._moveCb=null,te(n,t))};n.addEventListener("transitionend",i)})}),()=>{const c=Object(s["y"])(e),l=Z(c);let u=c.tag||i["d"];o=a,a=t.default?Object(i["N"])(t.default()):[];for(let e=0;e<a.length;e++){const t=a[e];null!=t.key&&Object(i["Ob"])(t,Object(i["Lb"])(t,l,r,n))}if(o)for(let e=0;e<o.length;e++){const t=o[e];Object(i["Ob"])(t,Object(i["Lb"])(t,l,r,n)),le.set(t,t.el.getBoundingClientRect())}return Object(i["B"])(u,null,a)}}},de=he;function pe(e){const t=e.el;t._moveCb&&t._moveCb(),t._enterCb&&t._enterCb()}function fe(e){ue.set(e,e.el.getBoundingClientRect())}function me(e){const t=le.get(e),n=ue.get(e),r=t.left-n.left,i=t.top-n.top;if(r||i){const t=e.el.style;return t.transform=t.webkitTransform=`translate(${r}px,${i}px)`,t.transitionDuration="0s",e}}function ge(e,t,n){const r=e.cloneNode();e._vtc&&e._vtc.forEach(e=>{e.split(/\s+/).forEach(e=>e&&r.classList.remove(e))}),n.split(/\s+/).forEach(e=>e&&r.classList.add(e)),r.style.display="none";const i=1===t.nodeType?t:t.parentNode;i.appendChild(r);const{hasTransform:s}=se(r);return i.removeChild(r),s}const ve=e=>{const t=e.props["onUpdate:modelValue"];return Object(r["q"])(t)?e=>Object(r["p"])(t,e):t};function ye(e){e.target.composing=!0}function _e(e){const t=e.target;t.composing&&(t.composing=!1,xe(t,"input"))}function xe(e,t){const n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0),e.dispatchEvent(n)}const be={created(e,{modifiers:{lazy:t,trim:n,number:i}},s){e._assign=ve(s);const o=i||s.props&&"number"===s.props.type;E(e,t?"change":"input",t=>{if(t.target.composing)return;let i=e.value;n?i=i.trim():o&&(i=Object(r["T"])(i)),e._assign(i)}),n&&E(e,"change",()=>{e.value=e.value.trim()}),t||(E(e,"compositionstart",ye),E(e,"compositionend",_e),E(e,"change",_e))},mounted(e,{value:t}){e.value=null==t?"":t},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:i,number:s}},o){if(e._assign=ve(o),e.composing)return;if(document.activeElement===e){if(n)return;if(i&&e.value.trim()===t)return;if((s||"number"===e.type)&&Object(r["T"])(e.value)===t)return}const a=null==t?"":t;e.value!==a&&(e.value=a)}},we={deep:!0,created(e,t,n){e._assign=ve(n),E(e,"change",()=>{const t=e._modelValue,n=Ae(e),i=e.checked,s=e._assign;if(Object(r["q"])(t)){const e=Object(r["K"])(t,n),o=-1!==e;if(i&&!o)s(t.concat(n));else if(!i&&o){const n=[...t];n.splice(e,1),s(n)}}else if(Object(r["E"])(t)){const e=new Set(t);i?e.add(n):e.delete(n),s(e)}else s(Re(e,i))})},mounted:Me,beforeUpdate(e,t,n){e._assign=ve(n),Me(e,t,n)}};function Me(e,{value:t,oldValue:n},i){e._modelValue=t,Object(r["q"])(t)?e.checked=Object(r["K"])(t,i.props.value)>-1:Object(r["E"])(t)?e.checked=t.has(i.props.value):t!==n&&(e.checked=Object(r["J"])(t,Re(e,!0)))}const Se={created(e,{value:t},n){e.checked=Object(r["J"])(t,n.props.value),e._assign=ve(n),E(e,"change",()=>{e._assign(Ae(e))})},beforeUpdate(e,{value:t,oldValue:n},i){e._assign=ve(i),t!==n&&(e.checked=Object(r["J"])(t,i.props.value))}},Te={deep:!0,created(e,{value:t,modifiers:{number:n}},i){const s=Object(r["E"])(t);E(e,"change",()=>{const t=Array.prototype.filter.call(e.options,e=>e.selected).map(e=>n?Object(r["T"])(Ae(e)):Ae(e));e._assign(e.multiple?s?new Set(t):t:t[0])}),e._assign=ve(i)},mounted(e,{value:t}){Ee(e,t)},beforeUpdate(e,t,n){e._assign=ve(n)},updated(e,{value:t}){Ee(e,t)}};function Ee(e,t){const n=e.multiple;if(!n||Object(r["q"])(t)||Object(r["E"])(t)){for(let i=0,s=e.options.length;i<s;i++){const s=e.options[i],o=Ae(s);if(n)Object(r["q"])(t)?s.selected=Object(r["K"])(t,o)>-1:s.selected=t.has(o);else if(Object(r["J"])(Ae(s),t))return void(e.selectedIndex!==i&&(e.selectedIndex=i))}n||-1===e.selectedIndex||(e.selectedIndex=-1)}}function Ae(e){return"_value"in e?e._value:e.value}function Re(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const Ce={created(e,t,n){Le(e,t,n,null,"created")},mounted(e,t,n){Le(e,t,n,null,"mounted")},beforeUpdate(e,t,n,r){Le(e,t,n,r,"beforeUpdate")},updated(e,t,n,r){Le(e,t,n,r,"updated")}};function Le(e,t,n,r,i){let s;switch(e.tagName){case"SELECT":s=Te;break;case"TEXTAREA":s=be;break;default:switch(n.props&&n.props.type){case"checkbox":s=we;break;case"radio":s=Se;break;default:s=be}}const o=s[i];o&&o(e,t,n,r)}function Oe(){be.getSSRProps=({value:e})=>({value:e}),Se.getSSRProps=({value:e},t)=>{if(t.props&&Object(r["J"])(t.props.value,e))return{checked:!0}},we.getSSRProps=({value:e},t)=>{if(Object(r["q"])(e)){if(t.props&&Object(r["K"])(e,t.props.value)>-1)return{checked:!0}}else if(Object(r["E"])(e)){if(t.props&&e.has(t.props.value))return{checked:!0}}else if(e)return{checked:!0}}}const Pe=["ctrl","shift","alt","meta"],Ie={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&0!==e.button,middle:e=>"button"in e&&1!==e.button,right:e=>"button"in e&&2!==e.button,exact:(e,t)=>Pe.some(n=>e[n+"Key"]&&!t.includes(n))},De=(e,t)=>(n,...r)=>{for(let e=0;e<t.length;e++){const r=Ie[t[e]];if(r&&r(n,t))return}return e(n,...r)},Ne={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},ke=(e,t)=>n=>{if(!("key"in n))return;const i=Object(r["n"])(n.key);return t.some(e=>e===i||Ne[e]===i)?e(n):void 0},Fe={beforeMount(e,{value:t},{transition:n}){e._vod="none"===e.style.display?"":e.style.display,n&&t?n.beforeEnter(e):Ue(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:r}){!t!==!n&&(r?t?(r.beforeEnter(e),Ue(e,!0),r.enter(e)):r.leave(e,()=>{Ue(e,!1)}):Ue(e,t))},beforeUnmount(e,{value:t}){Ue(e,t)}};function Ue(e,t){e.style.display=t?e._vod:"none"}function Be(){Fe.getSSRProps=({value:e})=>{if(!e)return{style:{display:"none"}}}}const ze=Object(r["i"])({patchProp:D},l);let He,je=!1;function Ve(){return He||(He=Object(i["x"])(ze))}function Ge(){return He=je?He:Object(i["v"])(ze),je=!0,He}const We=(...e)=>{Ve().render(...e)},qe=(...e)=>{Ge().hydrate(...e)},Xe=(...e)=>{const t=Ve().createApp(...e);const{mount:n}=t;return t.mount=e=>{const i=Ke(e);if(!i)return;const s=t._component;Object(r["s"])(s)||s.render||s.template||(s.template=i.innerHTML),i.innerHTML="";const o=n(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},t},Ye=(...e)=>{const t=Ge().createApp(...e);const{mount:n}=t;return t.mount=e=>{const t=Ke(e);if(t)return n(t,!0,t instanceof SVGElement)},t};function Ke(e){if(Object(r["G"])(e)){const t=document.querySelector(e);return t}return e}let Je=!1;const Ze=()=>{Je||(Je=!0,Oe(),Be())}},d031:function(e,t,n){var r=n("858e"),i=n("0361"),s=n("a9c2");e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{e=r(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),e(n,[]),t=n instanceof Array}catch(o){}return function(n,r){return i(n),s(r),t?e(n,r):n.__proto__=r,n}}():void 0)},d0a7:function(e,t,n){var r=n("def2"),i=n("0a26");e.exports="process"==r(i.process)},d3a6:function(e,t){var n=function(){this.head=null,this.tail=null};n.prototype={add:function(e){var t={item:e,next:null};this.head?this.tail.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return this.head=e.next,this.tail===e&&(this.tail=null),e.item}},e.exports=n},d6e0:function(e,t,n){var r=n("7d68");e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},d8fc:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}e.exports=n},d921:function(e,t,n){var r=n("0a26"),i=n("46ec"),s=n("87b4"),o=n("b211"),a=n("52ab"),c=n("39c2"),l=a("IE_PROTO"),u=r.Object,h=u.prototype;e.exports=c?u.getPrototypeOf:function(e){var t=o(e);if(i(t,l))return t[l];var n=t.constructor;return s(n)&&t instanceof n?n.prototype:t instanceof u?h:null}},db6e:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("b90d"),i=n("11ba");class s extends i["b"]{constructor(e,t){super(),this.textureID=void 0!==t?t:"tDiffuse",e instanceof r["rb"]?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=r["Gb"].clone(e.uniforms),this.material=new r["rb"]({defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new i["a"](this.material)}render(e,t,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}}},dba8:function(e,t,n){var r=n("f42c"),i=n("53f4"),s=n("b618"),o=i("species");e.exports=function(e){return s>=51||!r((function(){var t=[],n=t.constructor={};return n[o]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},dd09:function(e,t,n){var r=n("f42c");e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},de2e:function(e,t,n){var r=n("0a26"),i=n("30b8"),s=n("6d5d"),o=n("0361"),a=n("1459"),c=n("6bef"),l=r.TypeError;e.exports=function(e,t){var n=arguments.length<2?c(e):t;if(s(n))return o(i(n,e));throw l(a(e)+" is not iterable")}},def2:function(e,t,n){var r=n("858e"),i=r({}.toString),s=r("".slice);e.exports=function(e){return s(i(e),8,-1)}},e0f5:function(e,t,n){var r=n("30b8"),i=n("0361"),s=n("23a2");e.exports=function(e,t,n){var o,a;i(e);try{if(o=s(e,"return"),!o){if("throw"===t)throw n;return n}o=r(o,e)}catch(c){a=!0,o=c}if("throw"===t)throw n;if(a)throw o;return i(o),n}},e128:function(e,t,n){"use strict";var r=n("1672"),i=n("2f6c").map,s=n("dba8"),o=s("map");r({target:"Array",proto:!0,forced:!o},{map:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},e26a:function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}
/*!
 * GSAP 3.9.1
 * https://greensock.com
 *
 * @license Copyright 2008-2021, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/n.d(t,"a",(function(){return Fr}));var s,o,a,c,l,u,h,d,p,f={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},m={duration:.5,overwrite:!1,delay:0},g=1e8,v=1/g,y=2*Math.PI,_=y/4,x=0,b=Math.sqrt,w=Math.cos,M=Math.sin,S=function(e){return"string"===typeof e},T=function(e){return"function"===typeof e},E=function(e){return"number"===typeof e},A=function(e){return"undefined"===typeof e},R=function(e){return"object"===typeof e},C=function(e){return!1!==e},L=function(){return"undefined"!==typeof window},O=function(e){return T(e)||S(e)},P="function"===typeof ArrayBuffer&&ArrayBuffer.isView||function(){},I=Array.isArray,D=/(?:-?\.?\d|\.)+/gi,N=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,k=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,F=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,U=/[+-]=-?[.\d]+/,B=/[^,'"\[\]\s]+/gi,z=/[\d.+\-=]+(?:e[-+]\d*)*/i,H={},j={},V=function(e){return(j=me(e,H))&&bn},G=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},W=function(e,t){return!t&&console.warn(e)},q=function(e,t){return e&&(H[e]=t)&&j&&(j[e]=t)||H},X=function(){return 0},Y={},K=[],J={},Z={},$={},Q=30,ee=[],te="",ne=function(e){var t,n,r=e[0];if(R(r)||T(r)||(e=[e]),!(t=(r._gsap||{}).harness)){n=ee.length;while(n--&&!ee[n].targetTest(r));t=ee[n]}n=e.length;while(n--)e[n]&&(e[n]._gsap||(e[n]._gsap=new Ht(e[n],t)))||e.splice(n,1);return e},re=function(e){return e._gsap||ne(Ze(e))[0]._gsap},ie=function(e,t,n){return(n=e[t])&&T(n)?e[t]():A(n)&&e.getAttribute&&e.getAttribute(t)||n},se=function(e,t){return(e=e.split(",")).forEach(t)||e},oe=function(e){return Math.round(1e5*e)/1e5||0},ae=function(e){return Math.round(1e7*e)/1e7||0},ce=function(e,t){for(var n=t.length,r=0;e.indexOf(t[r])<0&&++r<n;);return r<n},le=function(){var e,t,n=K.length,r=K.slice(0);for(J={},K.length=0,e=0;e<n;e++)t=r[e],t&&t._lazy&&(t.render(t._lazy[0],t._lazy[1],!0)._lazy=0)},ue=function(e,t,n,r){K.length&&le(),e.render(t,n,r),K.length&&le()},he=function(e){var t=parseFloat(e);return(t||0===t)&&(e+"").match(B).length<2?t:S(e)?e.trim():e},de=function(e){return e},pe=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},fe=function(e){return function(t,n){for(var r in n)r in t||"duration"===r&&e||"ease"===r||(t[r]=n[r])}},me=function(e,t){for(var n in t)e[n]=t[n];return e},ge=function e(t,n){for(var r in n)"__proto__"!==r&&"constructor"!==r&&"prototype"!==r&&(t[r]=R(n[r])?e(t[r]||(t[r]={}),n[r]):n[r]);return t},ve=function(e,t){var n,r={};for(n in e)n in t||(r[n]=e[n]);return r},ye=function(e){var t=e.parent||o,n=e.keyframes?fe(I(e.keyframes)):pe;if(C(e.inherit))while(t)n(e,t.vars.defaults),t=t.parent||t._dp;return e},_e=function(e,t){var n=e.length,r=n===t.length;while(r&&n--&&e[n]===t[n]);return n<0},xe=function(e,t,n,r,i){void 0===n&&(n="_first"),void 0===r&&(r="_last");var s,o=e[r];if(i){s=t[i];while(o&&o[i]>s)o=o._prev}return o?(t._next=o._next,o._next=t):(t._next=e[n],e[n]=t),t._next?t._next._prev=t:e[r]=t,t._prev=o,t.parent=t._dp=e,t},be=function(e,t,n,r){void 0===n&&(n="_first"),void 0===r&&(r="_last");var i=t._prev,s=t._next;i?i._next=s:e[n]===t&&(e[n]=s),s?s._prev=i:e[r]===t&&(e[r]=i),t._next=t._prev=t.parent=null},we=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove(e),e._act=0},Me=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0)){var n=e;while(n)n._dirty=1,n=n.parent}return e},Se=function(e){var t=e.parent;while(t&&t.parent)t._dirty=1,t.totalDuration(),t=t.parent;return e},Te=function e(t){return!t||t._ts&&e(t.parent)},Ee=function(e){return e._repeat?Ae(e._tTime,e=e.duration()+e._rDelay)*e:0},Ae=function(e,t){var n=Math.floor(e/=t);return e&&n===e?n-1:n},Re=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},Ce=function(e){return e._end=ae(e._start+(e._tDur/Math.abs(e._ts||e._rts||v)||0))},Le=function(e,t){var n=e._dp;return n&&n.smoothChildTiming&&e._ts&&(e._start=ae(n._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),Ce(e),n._dirty||Me(n,e)),e},Oe=function(e,t){var n;if((t._time||t._initted&&!t._dur)&&(n=Re(e.rawTime(),t),(!t._dur||We(0,t.totalDuration(),n)-t._tTime>v)&&t.render(n,!0)),Me(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration()){n=e;while(n._dp)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp}e._zTime=-v}},Pe=function(e,t,n,r){return t.parent&&we(t),t._start=ae((E(n)?n:n||e!==o?je(e,n,t):e._time)+t._delay),t._end=ae(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),xe(e,t,"_first","_last",e._sort?"_start":0),ke(t)||(e._recent=t),r||Oe(e,t),e},Ie=function(e,t){return(H.ScrollTrigger||G("scrollTrigger",t))&&H.ScrollTrigger.create(t,e)},De=function(e,t,n,r){return Kt(e,t),e._initted?!n&&e._pt&&(e._dur&&!1!==e.vars.lazy||!e._dur&&e.vars.lazy)&&h!==Et.frame?(K.push(e),e._lazy=[t,r],1):void 0:1},Ne=function e(t){var n=t.parent;return n&&n._ts&&n._initted&&!n._lock&&(n.rawTime()<0||e(n))},ke=function(e){var t=e.data;return"isFromStart"===t||"isStart"===t},Fe=function(e,t,n,r){var i,s,o,a=e.ratio,c=t<0||!t&&(!e._start&&Ne(e)&&(e._initted||!ke(e))||(e._ts<0||e._dp._ts<0)&&!ke(e))?0:1,l=e._rDelay,u=0;if(l&&e._repeat&&(u=We(0,e._tDur,t),s=Ae(u,l),e._yoyo&&1&s&&(c=1-c),s!==Ae(e._tTime,l)&&(a=1-c,e.vars.repeatRefresh&&e._initted&&e.invalidate())),c!==a||r||e._zTime===v||!t&&e._zTime){if(!e._initted&&De(e,t,r,n))return;o=e._zTime,e._zTime=t||(n?v:0),n||(n=t&&!o),e.ratio=c,e._from&&(c=1-c),e._time=0,e._tTime=u,i=e._pt;while(i)i.r(c,i.d),i=i._next;e._startAt&&t<0&&e._startAt.render(t,!0,!0),e._onUpdate&&!n&&ft(e,"onUpdate"),u&&e._repeat&&!n&&e.parent&&ft(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===c&&(c&&we(e,1),n||(ft(e,c?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},Ue=function(e,t,n){var r;if(n>t){r=e._first;while(r&&r._start<=n){if("isPause"===r.data&&r._start>t)return r;r=r._next}}else{r=e._last;while(r&&r._start>=n){if("isPause"===r.data&&r._start<t)return r;r=r._prev}}},Be=function(e,t,n,r){var i=e._repeat,s=ae(t)||0,o=e._tTime/e._tDur;return o&&!r&&(e._time*=s/e._dur),e._dur=s,e._tDur=i?i<0?1e10:ae(s*(i+1)+e._rDelay*i):s,o>0&&!r?Le(e,e._tTime=e._tDur*o):e.parent&&Ce(e),n||Me(e.parent,e),e},ze=function(e){return e instanceof Vt?Me(e):Be(e,e._dur)},He={_start:0,endTime:X,totalDuration:X},je=function e(t,n,r){var i,s,o,a=t.labels,c=t._recent||He,l=t.duration()>=g?c.endTime(!1):t._dur;return S(n)&&(isNaN(n)||n in a)?(s=n.charAt(0),o="%"===n.substr(-1),i=n.indexOf("="),"<"===s||">"===s?(i>=0&&(n=n.replace(/=/,"")),("<"===s?c._start:c.endTime(c._repeat>=0))+(parseFloat(n.substr(1))||0)*(o?(i<0?c:r).totalDuration()/100:1)):i<0?(n in a||(a[n]=l),a[n]):(s=parseFloat(n.charAt(i-1)+n.substr(i+1)),o&&r&&(s=s/100*(I(r)?r[0]:r).totalDuration()),i>1?e(t,n.substr(0,i-1),r)+s:l+s)):null==n?l:+n},Ve=function(e,t,n){var r,i,s=E(t[1]),o=(s?2:1)+(e<2?0:1),a=t[o];if(s&&(a.duration=t[1]),a.parent=n,e){r=a,i=n;while(i&&!("immediateRender"in r))r=i.vars.defaults||{},i=C(i.vars.inherit)&&i.parent;a.immediateRender=C(r.immediateRender),e<2?a.runBackwards=1:a.startAt=t[o-1]}return new tn(t[0],a,t[o+1])},Ge=function(e,t){return e||0===e?t(e):t},We=function(e,t,n){return n<e?e:n>t?t:n},qe=function(e,t){return S(e)&&(t=z.exec(e))?e.substr(t.index+t[0].length):""},Xe=function(e,t,n){return Ge(n,(function(n){return We(e,t,n)}))},Ye=[].slice,Ke=function(e,t){return e&&R(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&R(e[0]))&&!e.nodeType&&e!==a},Je=function(e,t,n){return void 0===n&&(n=[]),e.forEach((function(e){var r;return S(e)&&!t||Ke(e,1)?(r=n).push.apply(r,Ze(e)):n.push(e)}))||n},Ze=function(e,t,n){return!S(e)||n||!c&&At()?I(e)?Je(e,n):Ke(e)?Ye.call(e,0):e?[e]:[]:Ye.call((t||l).querySelectorAll(e),0)},$e=function(e){return e=Ze(e)[0]||W("Invalid scope")||{},function(t){var n=e.current||e.nativeElement||e;return Ze(t,n.querySelectorAll?n:n===e?W("Invalid scope")||l.createElement("div"):e)}},Qe=function(e){return e.sort((function(){return.5-Math.random()}))},et=function(e){if(T(e))return e;var t=R(e)?e:{each:e},n=kt(t.ease),r=t.from||0,i=parseFloat(t.base)||0,s={},o=r>0&&r<1,a=isNaN(r)||o,c=t.axis,l=r,u=r;return S(r)?l=u={center:.5,edges:.5,end:1}[r]||0:!o&&a&&(l=r[0],u=r[1]),function(e,o,h){var d,p,f,m,v,y,_,x,w,M=(h||t).length,S=s[M];if(!S){if(w="auto"===t.grid?0:(t.grid||[1,g])[1],!w){_=-g;while(_<(_=h[w++].getBoundingClientRect().left)&&w<M);w--}for(S=s[M]=[],d=a?Math.min(w,M)*l-.5:r%w,p=w===g?0:a?M*u/w-.5:r/w|0,_=0,x=g,y=0;y<M;y++)f=y%w-d,m=p-(y/w|0),S[y]=v=c?Math.abs("y"===c?m:f):b(f*f+m*m),v>_&&(_=v),v<x&&(x=v);"random"===r&&Qe(S),S.max=_-x,S.min=x,S.v=M=(parseFloat(t.amount)||parseFloat(t.each)*(w>M?M-1:c?"y"===c?M/w:w:Math.max(w,M/w))||0)*("edges"===r?-1:1),S.b=M<0?i-M:i,S.u=qe(t.amount||t.each)||0,n=n&&M<0?Dt(n):n}return M=(S[e]-S.min)/S.max||0,ae(S.b+(n?n(M):M)*S.v)+S.u}},tt=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(n){var r=Math.round(parseFloat(n)/e)*e*t;return(r-r%1)/t+(E(n)?0:qe(n))}},nt=function(e,t){var n,r,i=I(e);return!i&&R(e)&&(n=i=e.radius||g,e.values?(e=Ze(e.values),(r=!E(e[0]))&&(n*=n)):e=tt(e.increment)),Ge(t,i?T(e)?function(t){return r=e(t),Math.abs(r-t)<=n?r:t}:function(t){var i,s,o=parseFloat(r?t.x:t),a=parseFloat(r?t.y:0),c=g,l=0,u=e.length;while(u--)r?(i=e[u].x-o,s=e[u].y-a,i=i*i+s*s):i=Math.abs(e[u]-o),i<c&&(c=i,l=u);return l=!n||c<=n?e[l]:t,r||l===t||E(t)?l:l+qe(t)}:tt(e))},rt=function(e,t,n,r){return Ge(I(e)?!t:!0===n?!!(n=0):!r,(function(){return I(e)?e[~~(Math.random()*e.length)]:(n=n||1e-5)&&(r=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((e-n/2+Math.random()*(t-e+.99*n))/n)*n*r)/r}))},it=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduce((function(e,t){return t(e)}),e)}},st=function(e,t){return function(n){return e(parseFloat(n))+(t||qe(n))}},ot=function(e,t,n){return ht(e,t,0,1,n)},at=function(e,t,n){return Ge(n,(function(n){return e[~~t(n)]}))},ct=function e(t,n,r){var i=n-t;return I(t)?at(t,e(0,t.length),n):Ge(r,(function(e){return(i+(e-t)%i)%i+t}))},lt=function e(t,n,r){var i=n-t,s=2*i;return I(t)?at(t,e(0,t.length-1),n):Ge(r,(function(e){return e=(s+(e-t)%s)%s||0,t+(e>i?s-e:e)}))},ut=function(e){var t,n,r,i,s=0,o="";while(~(t=e.indexOf("random(",s)))r=e.indexOf(")",t),i="["===e.charAt(t+7),n=e.substr(t+7,r-t-7).match(i?B:D),o+=e.substr(s,t-s)+rt(i?n:+n[0],i?0:+n[1],+n[2]||1e-5),s=r+1;return o+e.substr(s,e.length-s)},ht=function(e,t,n,r,i){var s=t-e,o=r-n;return Ge(i,(function(t){return n+((t-e)/s*o||0)}))},dt=function e(t,n,r,i){var s=isNaN(t+n)?0:function(e){return(1-e)*t+e*n};if(!s){var o,a,c,l,u,h=S(t),d={};if(!0===r&&(i=1)&&(r=null),h)t={p:t},n={p:n};else if(I(t)&&!I(n)){for(c=[],l=t.length,u=l-2,a=1;a<l;a++)c.push(e(t[a-1],t[a]));l--,s=function(e){e*=l;var t=Math.min(u,~~e);return c[t](e-t)},r=n}else i||(t=me(I(t)?[]:{},t));if(!c){for(o in n)qt.call(d,t,o,"get",n[o]);s=function(e){return hn(e,d)||(h?t.p:t)}}}return Ge(r,s)},pt=function(e,t,n){var r,i,s,o=e.labels,a=g;for(r in o)i=o[r]-t,i<0===!!n&&i&&a>(i=Math.abs(i))&&(s=r,a=i);return s},ft=function(e,t,n){var r,i,s=e.vars,o=s[t];if(o)return r=s[t+"Params"],i=s.callbackScope||e,n&&K.length&&le(),r?o.apply(i,r):o.call(i)},mt=function(e){return we(e),e.scrollTrigger&&e.scrollTrigger.kill(!1),e.progress()<1&&ft(e,"onInterrupt"),e},gt=function(e){e=!e.name&&e["default"]||e;var t=e.name,n=T(e),r=t&&!n&&e.init?function(){this._props=[]}:e,i={init:X,render:hn,add:qt,kill:pn,modifier:dn,rawVars:0},s={targetTest:0,get:0,getSetter:an,aliases:{},register:0};if(At(),e!==r){if(Z[t])return;pe(r,pe(ve(e,i),s)),me(r.prototype,me(i,ve(e,s))),Z[r.prop=t]=r,e.targetTest&&(ee.push(r),Y[t]=1),t=("css"===t?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}q(t,r),e.register&&e.register(bn,r,gn)},vt=255,yt={aqua:[0,vt,vt],lime:[0,vt,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,vt],navy:[0,0,128],white:[vt,vt,vt],olive:[128,128,0],yellow:[vt,vt,0],orange:[vt,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[vt,0,0],pink:[vt,192,203],cyan:[0,vt,vt],transparent:[vt,vt,vt,0]},_t=function(e,t,n){return e+=e<0?1:e>1?-1:0,(6*e<1?t+(n-t)*e*6:e<.5?n:3*e<2?t+(n-t)*(2/3-e)*6:t)*vt+.5|0},xt=function(e,t,n){var r,i,s,o,a,c,l,u,h,d,p=e?E(e)?[e>>16,e>>8&vt,e&vt]:0:yt.black;if(!p){if(","===e.substr(-1)&&(e=e.substr(0,e.length-1)),yt[e])p=yt[e];else if("#"===e.charAt(0)){if(e.length<6&&(r=e.charAt(1),i=e.charAt(2),s=e.charAt(3),e="#"+r+r+i+i+s+s+(5===e.length?e.charAt(4)+e.charAt(4):"")),9===e.length)return p=parseInt(e.substr(1,6),16),[p>>16,p>>8&vt,p&vt,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),p=[e>>16,e>>8&vt,e&vt]}else if("hsl"===e.substr(0,3))if(p=d=e.match(D),t){if(~e.indexOf("="))return p=e.match(N),n&&p.length<4&&(p[3]=1),p}else o=+p[0]%360/360,a=+p[1]/100,c=+p[2]/100,i=c<=.5?c*(a+1):c+a-c*a,r=2*c-i,p.length>3&&(p[3]*=1),p[0]=_t(o+1/3,r,i),p[1]=_t(o,r,i),p[2]=_t(o-1/3,r,i);else p=e.match(D)||yt.transparent;p=p.map(Number)}return t&&!d&&(r=p[0]/vt,i=p[1]/vt,s=p[2]/vt,l=Math.max(r,i,s),u=Math.min(r,i,s),c=(l+u)/2,l===u?o=a=0:(h=l-u,a=c>.5?h/(2-l-u):h/(l+u),o=l===r?(i-s)/h+(i<s?6:0):l===i?(s-r)/h+2:(r-i)/h+4,o*=60),p[0]=~~(o+.5),p[1]=~~(100*a+.5),p[2]=~~(100*c+.5)),n&&p.length<4&&(p[3]=1),p},bt=function(e){var t=[],n=[],r=-1;return e.split(Mt).forEach((function(e){var i=e.match(k)||[];t.push.apply(t,i),n.push(r+=i.length+1)})),t.c=n,t},wt=function(e,t,n){var r,i,s,o,a="",c=(e+a).match(Mt),l=t?"hsla(":"rgba(",u=0;if(!c)return e;if(c=c.map((function(e){return(e=xt(e,t,1))&&l+(t?e[0]+","+e[1]+"%,"+e[2]+"%,"+e[3]:e.join(","))+")"})),n&&(s=bt(e),r=n.c,r.join(a)!==s.c.join(a)))for(i=e.replace(Mt,"1").split(k),o=i.length-1;u<o;u++)a+=i[u]+(~r.indexOf(u)?c.shift()||l+"0,0,0,0)":(s.length?s:c.length?c:n).shift());if(!i)for(i=e.split(Mt),o=i.length-1;u<o;u++)a+=i[u]+c[u];return a+i[o]},Mt=function(){var e,t="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(e in yt)t+="|"+e+"\\b";return new RegExp(t+")","gi")}(),St=/hsl[a]?\(/,Tt=function(e){var t,n=e.join(" ");if(Mt.lastIndex=0,Mt.test(n))return t=St.test(n),e[1]=wt(e[1],t),e[0]=wt(e[0],t,bt(e[1])),!0},Et=function(){var e,t,n,r,i,s,o=Date.now,h=500,d=33,f=o(),m=f,g=1e3/240,y=g,_=[],x=function n(a){var c,l,u,p,v=o()-m,x=!0===a;if(v>h&&(f+=v-d),m+=v,u=m-f,c=u-y,(c>0||x)&&(p=++r.frame,i=u-1e3*r.time,r.time=u/=1e3,y+=c+(c>=g?4:g-c),l=1),x||(e=t(n)),l)for(s=0;s<_.length;s++)_[s](u,i,p,a)};return r={time:0,frame:0,tick:function(){x(!0)},deltaRatio:function(e){return i/(1e3/(e||60))},wake:function(){u&&(!c&&L()&&(a=c=window,l=a.document||{},H.gsap=bn,(a.gsapVersions||(a.gsapVersions=[])).push(bn.version),V(j||a.GreenSockGlobals||!a.gsap&&a||{}),n=a.requestAnimationFrame),e&&r.sleep(),t=n||function(e){return setTimeout(e,y-1e3*r.time+1|0)},p=1,x(2))},sleep:function(){(n?a.cancelAnimationFrame:clearTimeout)(e),p=0,t=X},lagSmoothing:function(e,t){h=e||1/v,d=Math.min(t,h,0)},fps:function(e){g=1e3/(e||240),y=1e3*r.time+g},add:function(e){_.indexOf(e)<0&&_.push(e),At()},remove:function(e,t){~(t=_.indexOf(e))&&_.splice(t,1)&&s>=t&&s--},_listeners:_},r}(),At=function(){return!p&&Et.wake()},Rt={},Ct=/^[\d.\-M][\d.\-,\s]/,Lt=/["']/g,Ot=function(e){for(var t,n,r,i={},s=e.substr(1,e.length-3).split(":"),o=s[0],a=1,c=s.length;a<c;a++)n=s[a],t=a!==c-1?n.lastIndexOf(","):n.length,r=n.substr(0,t),i[o]=isNaN(r)?r.replace(Lt,"").trim():+r,o=n.substr(t+1).trim();return i},Pt=function(e){var t=e.indexOf("(")+1,n=e.indexOf(")"),r=e.indexOf("(",t);return e.substring(t,~r&&r<n?e.indexOf(")",n+1):n)},It=function(e){var t=(e+"").split("("),n=Rt[t[0]];return n&&t.length>1&&n.config?n.config.apply(null,~e.indexOf("{")?[Ot(t[1])]:Pt(e).split(",").map(he)):Rt._CE&&Ct.test(e)?Rt._CE("",e):n},Dt=function(e){return function(t){return 1-e(1-t)}},Nt=function e(t,n){var r,i=t._first;while(i)i instanceof Vt?e(i,n):!i.vars.yoyoEase||i._yoyo&&i._repeat||i._yoyo===n||(i.timeline?e(i.timeline,n):(r=i._ease,i._ease=i._yEase,i._yEase=r,i._yoyo=n)),i=i._next},kt=function(e,t){return e&&(T(e)?e:Rt[e]||It(e))||t},Ft=function(e,t,n,r){void 0===n&&(n=function(e){return 1-t(1-e)}),void 0===r&&(r=function(e){return e<.5?t(2*e)/2:1-t(2*(1-e))/2});var i,s={easeIn:t,easeOut:n,easeInOut:r};return se(e,(function(e){for(var t in Rt[e]=H[e]=s,Rt[i=e.toLowerCase()]=n,s)Rt[i+("easeIn"===t?".in":"easeOut"===t?".out":".inOut")]=Rt[e+"."+t]=s[t]})),s},Ut=function(e){return function(t){return t<.5?(1-e(1-2*t))/2:.5+e(2*(t-.5))/2}},Bt=function e(t,n,r){var i=n>=1?n:1,s=(r||(t?.3:.45))/(n<1?n:1),o=s/y*(Math.asin(1/i)||0),a=function(e){return 1===e?1:i*Math.pow(2,-10*e)*M((e-o)*s)+1},c="out"===t?a:"in"===t?function(e){return 1-a(1-e)}:Ut(a);return s=y/s,c.config=function(n,r){return e(t,n,r)},c},zt=function e(t,n){void 0===n&&(n=1.70158);var r=function(e){return e?--e*e*((n+1)*e+n)+1:0},i="out"===t?r:"in"===t?function(e){return 1-r(1-e)}:Ut(r);return i.config=function(n){return e(t,n)},i};se("Linear,Quad,Cubic,Quart,Quint,Strong",(function(e,t){var n=t<5?t+1:t;Ft(e+",Power"+(n-1),t?function(e){return Math.pow(e,n)}:function(e){return e},(function(e){return 1-Math.pow(1-e,n)}),(function(e){return e<.5?Math.pow(2*e,n)/2:1-Math.pow(2*(1-e),n)/2}))})),Rt.Linear.easeNone=Rt.none=Rt.Linear.easeIn,Ft("Elastic",Bt("in"),Bt("out"),Bt()),function(e,t){var n=1/t,r=2*n,i=2.5*n,s=function(s){return s<n?e*s*s:s<r?e*Math.pow(s-1.5/t,2)+.75:s<i?e*(s-=2.25/t)*s+.9375:e*Math.pow(s-2.625/t,2)+.984375};Ft("Bounce",(function(e){return 1-s(1-e)}),s)}(7.5625,2.75),Ft("Expo",(function(e){return e?Math.pow(2,10*(e-1)):0})),Ft("Circ",(function(e){return-(b(1-e*e)-1)})),Ft("Sine",(function(e){return 1===e?1:1-w(e*_)})),Ft("Back",zt("in"),zt("out"),zt()),Rt.SteppedEase=Rt.steps=H.SteppedEase={config:function(e,t){void 0===e&&(e=1);var n=1/e,r=e+(t?0:1),i=t?1:0,s=1-v;return function(e){return((r*We(0,s,e)|0)+i)*n}}},m.ease=Rt["quad.out"],se("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",(function(e){return te+=e+","+e+"Params,"}));var Ht=function(e,t){this.id=x++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:ie,this.set=t?t.getSetter:an},jt=function(){function e(e){this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,Be(this,+e.duration,1,1),this.data=e.data,p||Et.wake()}var t=e.prototype;return t.delay=function(e){return e||0===e?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+e-this._delay),this._delay=e,this):this._delay},t.duration=function(e){return arguments.length?this.totalDuration(this._repeat>0?e+(e+this._rDelay)*this._repeat:e):this.totalDuration()&&this._dur},t.totalDuration=function(e){return arguments.length?(this._dirty=0,Be(this,this._repeat<0?e:(e-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(e,t){if(At(),!arguments.length)return this._tTime;var n=this._dp;if(n&&n.smoothChildTiming&&this._ts){Le(this,e),!n._dp||n.parent||Oe(n,this);while(n&&n.parent)n.parent._time!==n._start+(n._ts>=0?n._tTime/n._ts:(n.totalDuration()-n._tTime)/-n._ts)&&n.totalTime(n._tTime,!0),n=n.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&e<this._tDur||this._ts<0&&e>0||!this._tDur&&!e)&&Pe(this._dp,this,this._start-this._delay)}return(this._tTime!==e||!this._dur&&!t||this._initted&&Math.abs(this._zTime)===v||!e&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=e),ue(this,e,t)),this},t.time=function(e,t){return arguments.length?this.totalTime(Math.min(this.totalDuration(),e+Ee(this))%(this._dur+this._rDelay)||(e?this._dur:0),t):this._time},t.totalProgress=function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},t.progress=function(e,t){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?e:1-e)+Ee(this),t):this.duration()?Math.min(1,this._time/this._dur):this.ratio},t.iteration=function(e,t){var n=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(e-1)*n,t):this._repeat?Ae(this._tTime,n)+1:1},t.timeScale=function(e){if(!arguments.length)return this._rts===-v?0:this._rts;if(this._rts===e)return this;var t=this.parent&&this._ts?Re(this.parent._time,this):this._tTime;return this._rts=+e||0,this._ts=this._ps||e===-v?0:this._rts,Se(this.totalTime(We(-this._delay,this._tDur,t),!0)),Ce(this),this},t.paused=function(e){return arguments.length?(this._ps!==e&&(this._ps=e,e?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(At(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==v&&(this._tTime-=v)))),this):this._ps},t.startTime=function(e){if(arguments.length){this._start=e;var t=this.parent||this._dp;return t&&(t._sort||!this.parent)&&Pe(t,this,e-this._delay),this}return this._start},t.endTime=function(e){return this._start+(C(e)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(e){var t=this.parent||this._dp;return t?e&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Re(t.rawTime(e),this):this._tTime:this._tTime},t.globalTime=function(e){var t=this,n=arguments.length?e:t.rawTime();while(t)n=t._start+n/(t._ts||1),t=t._dp;return n},t.repeat=function(e){return arguments.length?(this._repeat=e===1/0?-2:e,ze(this)):-2===this._repeat?1/0:this._repeat},t.repeatDelay=function(e){if(arguments.length){var t=this._time;return this._rDelay=e,ze(this),t?this.time(t):this}return this._rDelay},t.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},t.seek=function(e,t){return this.totalTime(je(this,e),C(t))},t.restart=function(e,t){return this.play().totalTime(e?-this._delay:0,C(t))},t.play=function(e,t){return null!=e&&this.seek(e,t),this.reversed(!1).paused(!1)},t.reverse=function(e,t){return null!=e&&this.seek(e||this.totalDuration(),t),this.reversed(!0).paused(!1)},t.pause=function(e,t){return null!=e&&this.seek(e,t),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(e){return arguments.length?(!!e!==this.reversed()&&this.timeScale(-this._rts||(e?-v:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-v,this},t.isActive=function(){var e,t=this.parent||this._dp,n=this._start;return!(t&&!(this._ts&&this._initted&&t.isActive()&&(e=t.rawTime(!0))>=n&&e<this.endTime(!0)-v))},t.eventCallback=function(e,t,n){var r=this.vars;return arguments.length>1?(t?(r[e]=t,n&&(r[e+"Params"]=n),"onUpdate"===e&&(this._onUpdate=t)):delete r[e],this):r[e]},t.then=function(e){var t=this;return new Promise((function(n){var r=T(e)?e:de,i=function(){var e=t.then;t.then=null,T(r)&&(r=r(t))&&(r.then||r===t)&&(t.then=e),n(r),t.then=e};t._initted&&1===t.totalProgress()&&t._ts>=0||!t._tTime&&t._ts<0?i():t._prom=i}))},t.kill=function(){mt(this)},e}();pe(jt.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-v,_prom:0,_ps:!1,_rts:1});var Vt=function(e){function t(t,n){var i;return void 0===t&&(t={}),i=e.call(this,t)||this,i.labels={},i.smoothChildTiming=!!t.smoothChildTiming,i.autoRemoveChildren=!!t.autoRemoveChildren,i._sort=C(t.sortChildren),o&&Pe(t.parent||o,r(i),n),t.reversed&&i.reverse(),t.paused&&i.paused(!0),t.scrollTrigger&&Ie(r(i),t.scrollTrigger),i}i(t,e);var n=t.prototype;return n.to=function(e,t,n){return Ve(0,arguments,this),this},n.from=function(e,t,n){return Ve(1,arguments,this),this},n.fromTo=function(e,t,n,r){return Ve(2,arguments,this),this},n.set=function(e,t,n){return t.duration=0,t.parent=this,ye(t).repeatDelay||(t.repeat=0),t.immediateRender=!!t.immediateRender,new tn(e,t,je(this,n),1),this},n.call=function(e,t,n){return Pe(this,tn.delayedCall(0,e,t),n)},n.staggerTo=function(e,t,n,r,i,s,o){return n.duration=t,n.stagger=n.stagger||r,n.onComplete=s,n.onCompleteParams=o,n.parent=this,new tn(e,n,je(this,i)),this},n.staggerFrom=function(e,t,n,r,i,s,o){return n.runBackwards=1,ye(n).immediateRender=C(n.immediateRender),this.staggerTo(e,t,n,r,i,s,o)},n.staggerFromTo=function(e,t,n,r,i,s,o,a){return r.startAt=n,ye(r).immediateRender=C(r.immediateRender),this.staggerTo(e,t,r,i,s,o,a)},n.render=function(e,t,n){var r,i,s,a,c,l,u,h,d,p,f,m,g=this._time,y=this._dirty?this.totalDuration():this._tDur,_=this._dur,x=e<=0?0:ae(e),b=this._zTime<0!==e<0&&(this._initted||!_);if(this!==o&&x>y&&e>=0&&(x=y),x!==this._tTime||n||b){if(g!==this._time&&_&&(x+=this._time-g,e+=this._time-g),r=x,d=this._start,h=this._ts,l=!h,b&&(_||(g=this._zTime),(e||!t)&&(this._zTime=e)),this._repeat){if(f=this._yoyo,c=_+this._rDelay,this._repeat<-1&&e<0)return this.totalTime(100*c+e,t,n);if(r=ae(x%c),x===y?(a=this._repeat,r=_):(a=~~(x/c),a&&a===x/c&&(r=_,a--),r>_&&(r=_)),p=Ae(this._tTime,c),!g&&this._tTime&&p!==a&&(p=a),f&&1&a&&(r=_-r,m=1),a!==p&&!this._lock){var w=f&&1&p,M=w===(f&&1&a);if(a<p&&(w=!w),g=w?0:_,this._lock=1,this.render(g||(m?0:ae(a*c)),t,!_)._lock=0,this._tTime=x,!t&&this.parent&&ft(this,"onRepeat"),this.vars.repeatRefresh&&!m&&(this.invalidate()._lock=1),g&&g!==this._time||l!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(_=this._dur,y=this._tDur,M&&(this._lock=2,g=w?_:-1e-4,this.render(g,!0),this.vars.repeatRefresh&&!m&&this.invalidate()),this._lock=0,!this._ts&&!l)return this;Nt(this,m)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(u=Ue(this,ae(g),ae(r)),u&&(x-=r-(r=u._start))),this._tTime=x,this._time=r,this._act=!h,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=e,g=0),!g&&r&&!t&&(ft(this,"onStart"),this._tTime!==x))return this;if(r>=g&&e>=0){i=this._first;while(i){if(s=i._next,(i._act||r>=i._start)&&i._ts&&u!==i){if(i.parent!==this)return this.render(e,t,n);if(i.render(i._ts>0?(r-i._start)*i._ts:(i._dirty?i.totalDuration():i._tDur)+(r-i._start)*i._ts,t,n),r!==this._time||!this._ts&&!l){u=0,s&&(x+=this._zTime=-v);break}}i=s}}else{i=this._last;var S=e<0?e:r;while(i){if(s=i._prev,(i._act||S<=i._end)&&i._ts&&u!==i){if(i.parent!==this)return this.render(e,t,n);if(i.render(i._ts>0?(S-i._start)*i._ts:(i._dirty?i.totalDuration():i._tDur)+(S-i._start)*i._ts,t,n),r!==this._time||!this._ts&&!l){u=0,s&&(x+=this._zTime=S?-v:v);break}}i=s}}if(u&&!t&&(this.pause(),u.render(r>=g?0:-v)._zTime=r>=g?1:-1,this._ts))return this._start=d,Ce(this),this.render(e,t,n);this._onUpdate&&!t&&ft(this,"onUpdate",!0),(x===y&&y>=this.totalDuration()||!x&&g)&&(d!==this._start&&Math.abs(h)===Math.abs(this._ts)||this._lock||((e||!_)&&(x===y&&this._ts>0||!x&&this._ts<0)&&we(this,1),t||e<0&&!g||!x&&!g&&y||(ft(this,x===y&&e>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(x<y&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(e,t){var n=this;if(E(t)||(t=je(this,t,e)),!(e instanceof jt)){if(I(e))return e.forEach((function(e){return n.add(e,t)})),this;if(S(e))return this.addLabel(e,t);if(!T(e))return this;e=tn.delayedCall(0,e)}return this!==e?Pe(this,e,t):this},n.getChildren=function(e,t,n,r){void 0===e&&(e=!0),void 0===t&&(t=!0),void 0===n&&(n=!0),void 0===r&&(r=-g);var i=[],s=this._first;while(s)s._start>=r&&(s instanceof tn?t&&i.push(s):(n&&i.push(s),e&&i.push.apply(i,s.getChildren(!0,t,n)))),s=s._next;return i},n.getById=function(e){var t=this.getChildren(1,1,1),n=t.length;while(n--)if(t[n].vars.id===e)return t[n]},n.remove=function(e){return S(e)?this.removeLabel(e):T(e)?this.killTweensOf(e):(be(this,e),e===this._recent&&(this._recent=this._last),Me(this))},n.totalTime=function(t,n){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=ae(Et.time-(this._ts>0?t/this._ts:(this.totalDuration()-t)/-this._ts))),e.prototype.totalTime.call(this,t,n),this._forcing=0,this):this._tTime},n.addLabel=function(e,t){return this.labels[e]=je(this,t),this},n.removeLabel=function(e){return delete this.labels[e],this},n.addPause=function(e,t,n){var r=tn.delayedCall(0,t||X,n);return r.data="isPause",this._hasPause=1,Pe(this,r,je(this,e))},n.removePause=function(e){var t=this._first;e=je(this,e);while(t)t._start===e&&"isPause"===t.data&&we(t),t=t._next},n.killTweensOf=function(e,t,n){var r=this.getTweensOf(e,n),i=r.length;while(i--)Gt!==r[i]&&r[i].kill(e,t);return this},n.getTweensOf=function(e,t){var n,r=[],i=Ze(e),s=this._first,o=E(t);while(s)s instanceof tn?ce(s._targets,i)&&(o?(!Gt||s._initted&&s._ts)&&s.globalTime(0)<=t&&s.globalTime(s.totalDuration())>t:!t||s.isActive())&&r.push(s):(n=s.getTweensOf(i,t)).length&&r.push.apply(r,n),s=s._next;return r},n.tweenTo=function(e,t){t=t||{};var n,r=this,i=je(r,e),s=t,o=s.startAt,a=s.onStart,c=s.onStartParams,l=s.immediateRender,u=tn.to(r,pe({ease:t.ease||"none",lazy:!1,immediateRender:!1,time:i,overwrite:"auto",duration:t.duration||Math.abs((i-(o&&"time"in o?o.time:r._time))/r.timeScale())||v,onStart:function(){if(r.pause(),!n){var e=t.duration||Math.abs((i-(o&&"time"in o?o.time:r._time))/r.timeScale());u._dur!==e&&Be(u,e,0,1).render(u._time,!0,!0),n=1}a&&a.apply(u,c||[])}},t));return l?u.render(0):u},n.tweenFromTo=function(e,t,n){return this.tweenTo(t,pe({startAt:{time:je(this,e)}},n))},n.recent=function(){return this._recent},n.nextLabel=function(e){return void 0===e&&(e=this._time),pt(this,je(this,e))},n.previousLabel=function(e){return void 0===e&&(e=this._time),pt(this,je(this,e),1)},n.currentLabel=function(e){return arguments.length?this.seek(e,!0):this.previousLabel(this._time+v)},n.shiftChildren=function(e,t,n){void 0===n&&(n=0);var r,i=this._first,s=this.labels;while(i)i._start>=n&&(i._start+=e,i._end+=e),i=i._next;if(t)for(r in s)s[r]>=n&&(s[r]+=e);return Me(this)},n.invalidate=function(){var t=this._first;this._lock=0;while(t)t.invalidate(),t=t._next;return e.prototype.invalidate.call(this)},n.clear=function(e){void 0===e&&(e=!0);var t,n=this._first;while(n)t=n._next,this.remove(n),n=t;return this._dp&&(this._time=this._tTime=this._pTime=0),e&&(this.labels={}),Me(this)},n.totalDuration=function(e){var t,n,r,i=0,s=this,a=s._last,c=g;if(arguments.length)return s.timeScale((s._repeat<0?s.duration():s.totalDuration())/(s.reversed()?-e:e));if(s._dirty){r=s.parent;while(a)t=a._prev,a._dirty&&a.totalDuration(),n=a._start,n>c&&s._sort&&a._ts&&!s._lock?(s._lock=1,Pe(s,a,n-a._delay,1)._lock=0):c=n,n<0&&a._ts&&(i-=n,(!r&&!s._dp||r&&r.smoothChildTiming)&&(s._start+=n/s._ts,s._time-=n,s._tTime-=n),s.shiftChildren(-n,!1,-Infinity),c=0),a._end>i&&a._ts&&(i=a._end),a=t;Be(s,s===o&&s._time>i?s._time:i,1,1),s._dirty=0}return s._tDur},t.updateRoot=function(e){if(o._ts&&(ue(o,Re(e,o)),h=Et.frame),Et.frame>=Q){Q+=f.autoSleep||120;var t=o._first;if((!t||!t._ts)&&f.autoSleep&&Et._listeners.length<2){while(t&&!t._ts)t=t._next;t||Et.sleep()}}},t}(jt);pe(Vt.prototype,{_lock:0,_hasPause:0,_forcing:0});var Gt,Wt=function(e,t,n,r,i,s,o){var a,c,l,u,h,d,p,f,m=new gn(this._pt,e,t,0,1,un,null,i),g=0,v=0;m.b=n,m.e=r,n+="",r+="",(p=~r.indexOf("random("))&&(r=ut(r)),s&&(f=[n,r],s(f,e,t),n=f[0],r=f[1]),c=n.match(F)||[];while(a=F.exec(r))u=a[0],h=r.substring(g,a.index),l?l=(l+1)%5:"rgba("===h.substr(-5)&&(l=1),u!==c[v++]&&(d=parseFloat(c[v-1])||0,m._pt={_next:m._pt,p:h||1===v?h:",",s:d,c:"="===u.charAt(1)?parseFloat(u.substr(2))*("-"===u.charAt(0)?-1:1):parseFloat(u)-d,m:l&&l<4?Math.round:0},g=F.lastIndex);return m.c=g<r.length?r.substring(g,r.length):"",m.fp=o,(U.test(r)||p)&&(m.e=0),this._pt=m,m},qt=function(e,t,n,r,i,s,o,a,c){T(r)&&(r=r(i||0,e,s));var l,u=e[t],h="get"!==n?n:T(u)?c?e[t.indexOf("set")||!T(e["get"+t.substr(3)])?t:"get"+t.substr(3)](c):e[t]():u,d=T(u)?c?sn:rn:nn;if(S(r)&&(~r.indexOf("random(")&&(r=ut(r)),"="===r.charAt(1)&&(l=parseFloat(h)+parseFloat(r.substr(2))*("-"===r.charAt(0)?-1:1)+(qe(h)||0),(l||0===l)&&(r=l))),h!==r)return isNaN(h*r)||""===r?(!u&&!(t in e)&&G(t,r),Wt.call(this,e,t,h,r,d,a||f.stringFilter,c)):(l=new gn(this._pt,e,t,+h||0,r-(h||0),"boolean"===typeof u?ln:cn,0,d),c&&(l.fp=c),o&&l.modifier(o,this,e),this._pt=l)},Xt=function(e,t,n,r,i){if(T(e)&&(e=$t(e,i,t,n,r)),!R(e)||e.style&&e.nodeType||I(e)||P(e))return S(e)?$t(e,i,t,n,r):e;var s,o={};for(s in e)o[s]=$t(e[s],i,t,n,r);return o},Yt=function(e,t,n,r,i,s){var o,a,c,l;if(Z[e]&&!1!==(o=new Z[e]).init(i,o.rawVars?t[e]:Xt(t[e],r,i,s,n),n,r,s)&&(n._pt=a=new gn(n._pt,i,e,0,1,o.render,o,0,o.priority),n!==d)){c=n._ptLookup[n._targets.indexOf(i)],l=o._props.length;while(l--)c[o._props[l]]=a}return o},Kt=function e(t,n){var r,i,a,c,l,u,h,d,p,f,y,_,x,b=t.vars,w=b.ease,M=b.startAt,S=b.immediateRender,T=b.lazy,E=b.onUpdate,A=b.onUpdateParams,R=b.callbackScope,L=b.runBackwards,O=b.yoyoEase,P=b.keyframes,I=b.autoRevert,D=t._dur,N=t._startAt,k=t._targets,F=t.parent,U=F&&"nested"===F.data?F.parent._targets:k,B="auto"===t._overwrite&&!s,z=t.timeline;if(z&&(!P||!w)&&(w="none"),t._ease=kt(w,m.ease),t._yEase=O?Dt(kt(!0===O?w:O,m.ease)):0,O&&t._yoyo&&!t._repeat&&(O=t._yEase,t._yEase=t._ease,t._ease=O),t._from=!z&&!!b.runBackwards,!z||P&&!b.stagger){if(d=k[0]?re(k[0]).harness:0,_=d&&b[d.prop],r=ve(b,Y),N&&we(N.render(-1,!0)),M)if(we(t._startAt=tn.set(k,pe({data:"isStart",overwrite:!1,parent:F,immediateRender:!0,lazy:C(T),startAt:null,delay:0,onUpdate:E,onUpdateParams:A,callbackScope:R,stagger:0},M))),n<0&&!S&&!I&&t._startAt.render(-1,!0),S){if(n>0&&!I&&(t._startAt=0),D&&n<=0)return void(n&&(t._zTime=n))}else!1===I&&(t._startAt=0);else if(L&&D)if(N)!I&&(t._startAt=0);else if(n&&(S=!1),a=pe({overwrite:!1,data:"isFromStart",lazy:S&&C(T),immediateRender:S,stagger:0,parent:F},r),_&&(a[d.prop]=_),we(t._startAt=tn.set(k,a)),n<0&&t._startAt.render(-1,!0),t._zTime=n,S){if(!n)return}else e(t._startAt,v);for(t._pt=0,T=D&&C(T)||T&&!D,i=0;i<k.length;i++){if(l=k[i],h=l._gsap||ne(k)[i]._gsap,t._ptLookup[i]=f={},J[h.id]&&K.length&&le(),y=U===k?i:U.indexOf(l),d&&!1!==(p=new d).init(l,_||r,t,y,U)&&(t._pt=c=new gn(t._pt,l,p.name,0,1,p.render,p,0,p.priority),p._props.forEach((function(e){f[e]=c})),p.priority&&(u=1)),!d||_)for(a in r)Z[a]&&(p=Yt(a,r,t,y,l,U))?p.priority&&(u=1):f[a]=c=qt.call(t,l,a,"get",r[a],y,U,0,b.stringFilter);t._op&&t._op[i]&&t.kill(l,t._op[i]),B&&t._pt&&(Gt=t,o.killTweensOf(l,f,t.globalTime(n)),x=!t.parent,Gt=0),t._pt&&T&&(J[h.id]=1)}u&&mn(t),t._onInit&&t._onInit(t)}t._onUpdate=E,t._initted=(!t._op||t._pt)&&!x,P&&n<=0&&z.render(g,!0,!0)},Jt=function(e,t){var n,r,i,s,o=e[0]?re(e[0]).harness:0,a=o&&o.aliases;if(!a)return t;for(r in n=me({},t),a)if(r in n){s=a[r].split(","),i=s.length;while(i--)n[s[i]]=n[r]}return n},Zt=function(e,t,n,r){var i,s,o=t.ease||r||"power1.inOut";if(I(t))s=n[e]||(n[e]=[]),t.forEach((function(e,n){return s.push({t:n/(t.length-1)*100,v:e,e:o})}));else for(i in t)s=n[i]||(n[i]=[]),"ease"===i||s.push({t:parseFloat(e),v:t[i],e:o})},$t=function(e,t,n,r,i){return T(e)?e.call(t,n,r,i):S(e)&&~e.indexOf("random(")?ut(e):e},Qt=te+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase",en={};se(Qt+",id,stagger,delay,duration,paused,scrollTrigger",(function(e){return en[e]=1}));var tn=function(e){function t(t,n,i,a){var c;"number"===typeof n&&(i.duration=n,n=i,i=null),c=e.call(this,a?n:ye(n))||this;var l,u,h,d,p,m,g,y,_=c.vars,x=_.duration,b=_.delay,w=_.immediateRender,M=_.stagger,S=_.overwrite,T=_.keyframes,A=_.defaults,L=_.scrollTrigger,D=_.yoyoEase,N=n.parent||o,k=(I(t)||P(t)?E(t[0]):"length"in n)?[t]:Ze(t);if(c._targets=k.length?ne(k):W("GSAP target "+t+" not found. https://greensock.com",!f.nullTargetWarn)||[],c._ptLookup=[],c._overwrite=S,T||M||O(x)||O(b)){if(n=c.vars,l=c.timeline=new Vt({data:"nested",defaults:A||{}}),l.kill(),l.parent=l._dp=r(c),l._start=0,M||O(x)||O(b)){if(d=k.length,g=M&&et(M),R(M))for(p in M)~Qt.indexOf(p)&&(y||(y={}),y[p]=M[p]);for(u=0;u<d;u++)h=ve(n,en),h.stagger=0,D&&(h.yoyoEase=D),y&&me(h,y),m=k[u],h.duration=+$t(x,r(c),u,m,k),h.delay=(+$t(b,r(c),u,m,k)||0)-c._delay,!M&&1===d&&h.delay&&(c._delay=b=h.delay,c._start+=b,h.delay=0),l.to(m,h,g?g(u,m,k):0),l._ease=Rt.none;l.duration()?x=b=0:c.timeline=0}else if(T){ye(pe(l.vars.defaults,{ease:"none"})),l._ease=kt(T.ease||n.ease||"none");var F,U,B,z=0;if(I(T))T.forEach((function(e){return l.to(k,e,">")}));else{for(p in h={},T)"ease"===p||"easeEach"===p||Zt(p,T[p],h,T.easeEach);for(p in h)for(F=h[p].sort((function(e,t){return e.t-t.t})),z=0,u=0;u<F.length;u++)U=F[u],B={ease:U.e,duration:(U.t-(u?F[u-1].t:0))/100*x},B[p]=U.v,l.to(k,B,z),z+=B.duration;l.duration()<x&&l.to({},{duration:x-l.duration()})}}x||c.duration(x=l.duration())}else c.timeline=0;return!0!==S||s||(Gt=r(c),o.killTweensOf(k),Gt=0),Pe(N,r(c),i),n.reversed&&c.reverse(),n.paused&&c.paused(!0),(w||!x&&!T&&c._start===ae(N._time)&&C(w)&&Te(r(c))&&"nested"!==N.data)&&(c._tTime=-v,c.render(Math.max(0,-b))),L&&Ie(r(c),L),c}i(t,e);var n=t.prototype;return n.render=function(e,t,n){var r,i,s,o,a,c,l,u,h,d=this._time,p=this._tDur,f=this._dur,m=e>p-v&&e>=0?p:e<v?0:e;if(f){if(m!==this._tTime||!e||n||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==e<0){if(r=m,u=this.timeline,this._repeat){if(o=f+this._rDelay,this._repeat<-1&&e<0)return this.totalTime(100*o+e,t,n);if(r=ae(m%o),m===p?(s=this._repeat,r=f):(s=~~(m/o),s&&s===m/o&&(r=f,s--),r>f&&(r=f)),c=this._yoyo&&1&s,c&&(h=this._yEase,r=f-r),a=Ae(this._tTime,o),r===d&&!n&&this._initted)return this;s!==a&&(u&&this._yEase&&Nt(u,c),!this.vars.repeatRefresh||c||this._lock||(this._lock=n=1,this.render(ae(o*s),!0).invalidate()._lock=0))}if(!this._initted){if(De(this,e<0?e:r,n,t))return this._tTime=0,this;if(f!==this._dur)return this.render(e,t,n)}if(this._tTime=m,this._time=r,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=l=(h||this._ease)(r/f),this._from&&(this.ratio=l=1-l),r&&!d&&!t&&(ft(this,"onStart"),this._tTime!==m))return this;i=this._pt;while(i)i.r(l,i.d),i=i._next;u&&u.render(e<0?e:!r&&c?-v:u._dur*u._ease(r/this._dur),t,n)||this._startAt&&(this._zTime=e),this._onUpdate&&!t&&(e<0&&this._startAt&&this._startAt.render(e,!0,n),ft(this,"onUpdate")),this._repeat&&s!==a&&this.vars.onRepeat&&!t&&this.parent&&ft(this,"onRepeat"),m!==this._tDur&&m||this._tTime!==m||(e<0&&this._startAt&&!this._onUpdate&&this._startAt.render(e,!0,!0),(e||!f)&&(m===this._tDur&&this._ts>0||!m&&this._ts<0)&&we(this,1),t||e<0&&!d||!m&&!d||(ft(this,m===p?"onComplete":"onReverseComplete",!0),this._prom&&!(m<p&&this.timeScale()>0)&&this._prom()))}}else Fe(this,e,t,n);return this},n.targets=function(){return this._targets},n.invalidate=function(){return this._pt=this._op=this._startAt=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(),e.prototype.invalidate.call(this)},n.kill=function(e,t){if(void 0===t&&(t="all"),!e&&(!t||"all"===t))return this._lazy=this._pt=0,this.parent?mt(this):this;if(this.timeline){var n=this.timeline.totalDuration();return this.timeline.killTweensOf(e,t,Gt&&!0!==Gt.vars.overwrite)._first||mt(this),this.parent&&n!==this.timeline.totalDuration()&&Be(this,this._dur*this.timeline._tDur/n,0,1),this}var r,i,s,o,a,c,l,u=this._targets,h=e?Ze(e):u,d=this._ptLookup,p=this._pt;if((!t||"all"===t)&&_e(u,h))return"all"===t&&(this._pt=0),mt(this);r=this._op=this._op||[],"all"!==t&&(S(t)&&(a={},se(t,(function(e){return a[e]=1})),t=a),t=Jt(u,t)),l=u.length;while(l--)if(~h.indexOf(u[l]))for(a in i=d[l],"all"===t?(r[l]=t,o=i,s={}):(s=r[l]=r[l]||{},o=t),o)c=i&&i[a],c&&("kill"in c.d&&!0!==c.d.kill(a)||be(this,c,"_pt"),delete i[a]),"all"!==s&&(s[a]=1);return this._initted&&!this._pt&&p&&mt(this),this},t.to=function(e,n){return new t(e,n,arguments[2])},t.from=function(e,t){return Ve(1,arguments)},t.delayedCall=function(e,n,r,i){return new t(n,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:e,onComplete:n,onReverseComplete:n,onCompleteParams:r,onReverseCompleteParams:r,callbackScope:i})},t.fromTo=function(e,t,n){return Ve(2,arguments)},t.set=function(e,n){return n.duration=0,n.repeatDelay||(n.repeat=0),new t(e,n)},t.killTweensOf=function(e,t,n){return o.killTweensOf(e,t,n)},t}(jt);pe(tn.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),se("staggerTo,staggerFrom,staggerFromTo",(function(e){tn[e]=function(){var t=new Vt,n=Ye.call(arguments,0);return n.splice("staggerFromTo"===e?5:4,0,0),t[e].apply(t,n)}}));var nn=function(e,t,n){return e[t]=n},rn=function(e,t,n){return e[t](n)},sn=function(e,t,n,r){return e[t](r.fp,n)},on=function(e,t,n){return e.setAttribute(t,n)},an=function(e,t){return T(e[t])?rn:A(e[t])&&e.setAttribute?on:nn},cn=function(e,t){return t.set(t.t,t.p,Math.round(1e6*(t.s+t.c*e))/1e6,t)},ln=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},un=function(e,t){var n=t._pt,r="";if(!e&&t.b)r=t.b;else if(1===e&&t.e)r=t.e;else{while(n)r=n.p+(n.m?n.m(n.s+n.c*e):Math.round(1e4*(n.s+n.c*e))/1e4)+r,n=n._next;r+=t.c}t.set(t.t,t.p,r,t)},hn=function(e,t){var n=t._pt;while(n)n.r(e,n.d),n=n._next},dn=function(e,t,n,r){var i,s=this._pt;while(s)i=s._next,s.p===r&&s.modifier(e,t,n),s=i},pn=function(e){var t,n,r=this._pt;while(r)n=r._next,r.p===e&&!r.op||r.op===e?be(this,r,"_pt"):r.dep||(t=1),r=n;return!t},fn=function(e,t,n,r){r.mSet(e,t,r.m.call(r.tween,n,r.mt),r)},mn=function(e){var t,n,r,i,s=e._pt;while(s){t=s._next,n=r;while(n&&n.pr>s.pr)n=n._next;(s._prev=n?n._prev:i)?s._prev._next=s:r=s,(s._next=n)?n._prev=s:i=s,s=t}e._pt=r},gn=function(){function e(e,t,n,r,i,s,o,a,c){this.t=t,this.s=r,this.c=i,this.p=n,this.r=s||cn,this.d=o||this,this.set=a||nn,this.pr=c||0,this._next=e,e&&(e._prev=this)}var t=e.prototype;return t.modifier=function(e,t,n){this.mSet=this.mSet||this.set,this.set=fn,this.m=e,this.mt=n,this.tween=t},e}();se(te+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",(function(e){return Y[e]=1})),H.TweenMax=H.TweenLite=tn,H.TimelineLite=H.TimelineMax=Vt,o=new Vt({sortChildren:!1,defaults:m,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),f.stringFilter=Tt;var vn={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach((function(e){return gt(e)}))},timeline:function(e){return new Vt(e)},getTweensOf:function(e,t){return o.getTweensOf(e,t)},getProperty:function(e,t,n,r){S(e)&&(e=Ze(e)[0]);var i=re(e||{}).get,s=n?de:he;return"native"===n&&(n=""),e?t?s((Z[t]&&Z[t].get||i)(e,t,n,r)):function(t,n,r){return s((Z[t]&&Z[t].get||i)(e,t,n,r))}:e},quickSetter:function(e,t,n){if(e=Ze(e),e.length>1){var r=e.map((function(e){return bn.quickSetter(e,t,n)})),i=r.length;return function(e){var t=i;while(t--)r[t](e)}}e=e[0]||{};var s=Z[t],o=re(e),a=o.harness&&(o.harness.aliases||{})[t]||t,c=s?function(t){var r=new s;d._pt=0,r.init(e,n?t+n:t,d,0,[e]),r.render(1,r),d._pt&&hn(1,d)}:o.set(e,a);return s?c:function(t){return c(e,a,n?t+n:t,o,1)}},isTweening:function(e){return o.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=kt(e.ease,m.ease)),ge(m,e||{})},config:function(e){return ge(f,e||{})},registerEffect:function(e){var t=e.name,n=e.effect,r=e.plugins,i=e.defaults,s=e.extendTimeline;(r||"").split(",").forEach((function(e){return e&&!Z[e]&&!H[e]&&W(t+" effect requires "+e+" plugin.")})),$[t]=function(e,t,r){return n(Ze(e),pe(t||{},i),r)},s&&(Vt.prototype[t]=function(e,n,r){return this.add($[t](e,R(n)?n:(r=n)&&{},this),r)})},registerEase:function(e,t){Rt[e]=kt(t)},parseEase:function(e,t){return arguments.length?kt(e,t):Rt},getById:function(e){return o.getById(e)},exportRoot:function(e,t){void 0===e&&(e={});var n,r,i=new Vt(e);i.smoothChildTiming=C(e.smoothChildTiming),o.remove(i),i._dp=0,i._time=i._tTime=o._time,n=o._first;while(n)r=n._next,!t&&!n._dur&&n instanceof tn&&n.vars.onComplete===n._targets[0]||Pe(i,n,n._start-n._delay),n=r;return Pe(o,i,0),i},utils:{wrap:ct,wrapYoyo:lt,distribute:et,random:rt,snap:nt,normalize:ot,getUnit:qe,clamp:Xe,splitColor:xt,toArray:Ze,selector:$e,mapRange:ht,pipe:it,unitize:st,interpolate:dt,shuffle:Qe},install:V,effects:$,ticker:Et,updateRoot:Vt.updateRoot,plugins:Z,globalTimeline:o,core:{PropTween:gn,globals:q,Tween:tn,Timeline:Vt,Animation:jt,getCache:re,_removeLinkedListItem:be,suppressOverwrites:function(e){return s=e}}};se("to,from,fromTo,delayedCall,set,killTweensOf",(function(e){return vn[e]=tn[e]})),Et.add(Vt.updateRoot),d=vn.to({},{duration:0});var yn=function(e,t){var n=e._pt;while(n&&n.p!==t&&n.op!==t&&n.fp!==t)n=n._next;return n},_n=function(e,t){var n,r,i,s=e._targets;for(n in t){r=s.length;while(r--)i=e._ptLookup[r][n],i&&(i=i.d)&&(i._pt&&(i=yn(i,n)),i&&i.modifier&&i.modifier(t[n],e,s[r],n))}},xn=function(e,t){return{name:e,rawVars:1,init:function(e,n,r){r._onInit=function(e){var r,i;if(S(n)&&(r={},se(n,(function(e){return r[e]=1})),n=r),t){for(i in r={},n)r[i]=t(n[i]);n=r}_n(e,n)}}}},bn=vn.registerPlugin({name:"attr",init:function(e,t,n,r,i){var s,o;for(s in t)o=this.add(e,"setAttribute",(e.getAttribute(s)||0)+"",t[s],r,i,0,0,s),o&&(o.op=s),this._props.push(s)}},{name:"endArray",init:function(e,t){var n=t.length;while(n--)this.add(e,n,e[n]||0,t[n])}},xn("roundProps",tt),xn("modifiers"),xn("snap",nt))||vn;tn.version=Vt.version=bn.version="3.9.1",u=1,L()&&At();Rt.Power0,Rt.Power1,Rt.Power2,Rt.Power3,Rt.Power4,Rt.Linear,Rt.Quad,Rt.Cubic,Rt.Quart,Rt.Quint,Rt.Strong,Rt.Elastic,Rt.Back,Rt.SteppedEase,Rt.Bounce,Rt.Sine,Rt.Expo,Rt.Circ;
/*!
 * CSSPlugin 3.9.1
 * https://greensock.com
 *
 * Copyright 2008-2021, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var wn,Mn,Sn,Tn,En,An,Rn,Cn=function(){return"undefined"!==typeof window},Ln={},On=180/Math.PI,Pn=Math.PI/180,In=Math.atan2,Dn=1e8,Nn=/([A-Z])/g,kn=/(?:left|right|width|margin|padding|x)/i,Fn=/[\s,\(]\S/,Un={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Bn=function(e,t){return t.set(t.t,t.p,Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},zn=function(e,t){return t.set(t.t,t.p,1===e?t.e:Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},Hn=function(e,t){return t.set(t.t,t.p,e?Math.round(1e4*(t.s+t.c*e))/1e4+t.u:t.b,t)},jn=function(e,t){var n=t.s+t.c*e;t.set(t.t,t.p,~~(n+(n<0?-.5:.5))+t.u,t)},Vn=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},Gn=function(e,t){return t.set(t.t,t.p,1!==e?t.b:t.e,t)},Wn=function(e,t,n){return e.style[t]=n},qn=function(e,t,n){return e.style.setProperty(t,n)},Xn=function(e,t,n){return e._gsap[t]=n},Yn=function(e,t,n){return e._gsap.scaleX=e._gsap.scaleY=n},Kn=function(e,t,n,r,i){var s=e._gsap;s.scaleX=s.scaleY=n,s.renderTransform(i,s)},Jn=function(e,t,n,r,i){var s=e._gsap;s[t]=n,s.renderTransform(i,s)},Zn="transform",$n=Zn+"Origin",Qn=function(e,t){var n=Mn.createElementNS?Mn.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Mn.createElement(e);return n.style?n:Mn.createElement(e)},er=function e(t,n,r){var i=getComputedStyle(t);return i[n]||i.getPropertyValue(n.replace(Nn,"-$1").toLowerCase())||i.getPropertyValue(n)||!r&&e(t,nr(n)||n,1)||""},tr="O,Moz,ms,Ms,Webkit".split(","),nr=function(e,t,n){var r=t||En,i=r.style,s=5;if(e in i&&!n)return e;e=e.charAt(0).toUpperCase()+e.substr(1);while(s--&&!(tr[s]+e in i));return s<0?null:(3===s?"ms":s>=0?tr[s]:"")+e},rr=function(){Cn()&&window.document&&(wn=window,Mn=wn.document,Sn=Mn.documentElement,En=Qn("div")||{style:{}},Qn("div"),Zn=nr(Zn),$n=Zn+"Origin",En.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Rn=!!nr("perspective"),Tn=1)},ir=function e(t){var n,r=Qn("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,s=this.nextSibling,o=this.style.cssText;if(Sn.appendChild(r),r.appendChild(this),this.style.display="block",t)try{n=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=e}catch(a){}else this._gsapBBox&&(n=this._gsapBBox());return i&&(s?i.insertBefore(this,s):i.appendChild(this)),Sn.removeChild(r),this.style.cssText=o,n},sr=function(e,t){var n=t.length;while(n--)if(e.hasAttribute(t[n]))return e.getAttribute(t[n])},or=function(e){var t;try{t=e.getBBox()}catch(n){t=ir.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===ir||(t=ir.call(e,!0)),!t||t.width||t.x||t.y?t:{x:+sr(e,["x","cx","x1"])||0,y:+sr(e,["y","cy","y1"])||0,width:0,height:0}},ar=function(e){return!(!e.getCTM||e.parentNode&&!e.ownerSVGElement||!or(e))},cr=function(e,t){if(t){var n=e.style;t in Ln&&t!==$n&&(t=Zn),n.removeProperty?("ms"!==t.substr(0,2)&&"webkit"!==t.substr(0,6)||(t="-"+t),n.removeProperty(t.replace(Nn,"-$1").toLowerCase())):n.removeAttribute(t)}},lr=function(e,t,n,r,i,s){var o=new gn(e._pt,t,n,0,1,s?Gn:Vn);return e._pt=o,o.b=r,o.e=i,e._props.push(n),o},ur={deg:1,rad:1,turn:1},hr=function e(t,n,r,i){var s,o,a,c,l=parseFloat(r)||0,u=(r+"").trim().substr((l+"").length)||"px",h=En.style,d=kn.test(n),p="svg"===t.tagName.toLowerCase(),f=(p?"client":"offset")+(d?"Width":"Height"),m=100,g="px"===i,v="%"===i;return i===u||!l||ur[i]||ur[u]?l:("px"!==u&&!g&&(l=e(t,n,r,"px")),c=t.getCTM&&ar(t),!v&&"%"!==u||!Ln[n]&&!~n.indexOf("adius")?(h[d?"width":"height"]=m+(g?u:i),o=~n.indexOf("adius")||"em"===i&&t.appendChild&&!p?t:t.parentNode,c&&(o=(t.ownerSVGElement||{}).parentNode),o&&o!==Mn&&o.appendChild||(o=Mn.body),a=o._gsap,a&&v&&a.width&&d&&a.time===Et.time?oe(l/a.width*m):((v||"%"===u)&&(h.position=er(t,"position")),o===t&&(h.position="static"),o.appendChild(En),s=En[f],o.removeChild(En),h.position="absolute",d&&v&&(a=re(o),a.time=Et.time,a.width=o[f]),oe(g?s*l/m:s&&l?m/s*l:0))):(s=c?t.getBBox()[d?"width":"height"]:t[f],oe(v?l/s*m:l/100*s)))},dr=function(e,t,n,r){var i;return Tn||rr(),t in Un&&"transform"!==t&&(t=Un[t],~t.indexOf(",")&&(t=t.split(",")[0])),Ln[t]&&"transform"!==t?(i=Sr(e,r),i="transformOrigin"!==t?i[t]:i.svg?i.origin:Tr(er(e,$n))+" "+i.zOrigin+"px"):(i=e.style[t],(!i||"auto"===i||r||~(i+"").indexOf("calc("))&&(i=vr[t]&&vr[t](e,t,n)||er(e,t)||ie(e,t)||("opacity"===t?1:0))),n&&!~(i+"").trim().indexOf(" ")?hr(e,t,i,n)+n:i},pr=function(e,t,n,r){if(!n||"none"===n){var i=nr(t,e,1),s=i&&er(e,i,1);s&&s!==n?(t=i,n=s):"borderColor"===t&&(n=er(e,"borderTopColor"))}var o,a,c,l,u,h,d,p,m,g,v,y,_,x=new gn(this._pt,e.style,t,0,1,un),b=0,w=0;if(x.b=n,x.e=r,n+="",r+="","auto"===r&&(e.style[t]=r,r=er(e,t)||r,e.style[t]=n),o=[n,r],Tt(o),n=o[0],r=o[1],c=n.match(k)||[],_=r.match(k)||[],_.length){while(a=k.exec(r))d=a[0],m=r.substring(b,a.index),u?u=(u+1)%5:"rgba("!==m.substr(-5)&&"hsla("!==m.substr(-5)||(u=1),d!==(h=c[w++]||"")&&(l=parseFloat(h)||0,v=h.substr((l+"").length),y="="===d.charAt(1)?+(d.charAt(0)+"1"):0,y&&(d=d.substr(2)),p=parseFloat(d),g=d.substr((p+"").length),b=k.lastIndex-g.length,g||(g=g||f.units[t]||v,b===r.length&&(r+=g,x.e+=g)),v!==g&&(l=hr(e,t,h,g)||0),x._pt={_next:x._pt,p:m||1===w?m:",",s:l,c:y?y*p:p-l,m:u&&u<4||"zIndex"===t?Math.round:0});x.c=b<r.length?r.substring(b,r.length):""}else x.r="display"===t&&"none"===r?Gn:Vn;return U.test(r)&&(x.e=0),this._pt=x,x},fr={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},mr=function(e){var t=e.split(" "),n=t[0],r=t[1]||"50%";return"top"!==n&&"bottom"!==n&&"left"!==r&&"right"!==r||(e=n,n=r,r=e),t[0]=fr[n]||n,t[1]=fr[r]||r,t.join(" ")},gr=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var n,r,i,s=t.t,o=s.style,a=t.u,c=s._gsap;if("all"===a||!0===a)o.cssText="",r=1;else{a=a.split(","),i=a.length;while(--i>-1)n=a[i],Ln[n]&&(r=1,n="transformOrigin"===n?$n:Zn),cr(s,n)}r&&(cr(s,Zn),c&&(c.svg&&s.removeAttribute("transform"),Sr(s,1),c.uncache=1))}},vr={clearProps:function(e,t,n,r,i){if("isFromStart"!==i.data){var s=e._pt=new gn(e._pt,t,n,0,0,gr);return s.u=r,s.pr=-10,s.tween=i,e._props.push(n),1}}},yr=[1,0,0,1,0,0],_r={},xr=function(e){return"matrix(1, 0, 0, 1, 0, 0)"===e||"none"===e||!e},br=function(e){var t=er(e,Zn);return xr(t)?yr:t.substr(7).match(N).map(oe)},wr=function(e,t){var n,r,i,s,o=e._gsap||re(e),a=e.style,c=br(e);return o.svg&&e.getAttribute("transform")?(i=e.transform.baseVal.consolidate().matrix,c=[i.a,i.b,i.c,i.d,i.e,i.f],"1,0,0,1,0,0"===c.join(",")?yr:c):(c!==yr||e.offsetParent||e===Sn||o.svg||(i=a.display,a.display="block",n=e.parentNode,n&&e.offsetParent||(s=1,r=e.nextSibling,Sn.appendChild(e)),c=br(e),i?a.display=i:cr(e,"display"),s&&(r?n.insertBefore(e,r):n?n.appendChild(e):Sn.removeChild(e))),t&&c.length>6?[c[0],c[1],c[4],c[5],c[12],c[13]]:c)},Mr=function(e,t,n,r,i,s){var o,a,c,l,u=e._gsap,h=i||wr(e,!0),d=u.xOrigin||0,p=u.yOrigin||0,f=u.xOffset||0,m=u.yOffset||0,g=h[0],v=h[1],y=h[2],_=h[3],x=h[4],b=h[5],w=t.split(" "),M=parseFloat(w[0])||0,S=parseFloat(w[1])||0;n?h!==yr&&(a=g*_-v*y)&&(c=M*(_/a)+S*(-y/a)+(y*b-_*x)/a,l=M*(-v/a)+S*(g/a)-(g*b-v*x)/a,M=c,S=l):(o=or(e),M=o.x+(~w[0].indexOf("%")?M/100*o.width:M),S=o.y+(~(w[1]||w[0]).indexOf("%")?S/100*o.height:S)),r||!1!==r&&u.smooth?(x=M-d,b=S-p,u.xOffset=f+(x*g+b*y)-x,u.yOffset=m+(x*v+b*_)-b):u.xOffset=u.yOffset=0,u.xOrigin=M,u.yOrigin=S,u.smooth=!!r,u.origin=t,u.originIsAbsolute=!!n,e.style[$n]="0px 0px",s&&(lr(s,u,"xOrigin",d,M),lr(s,u,"yOrigin",p,S),lr(s,u,"xOffset",f,u.xOffset),lr(s,u,"yOffset",m,u.yOffset)),e.setAttribute("data-svg-origin",M+" "+S)},Sr=function(e,t){var n=e._gsap||new Ht(e);if("x"in n&&!t&&!n.uncache)return n;var r,i,s,o,a,c,l,u,h,d,p,m,g,v,y,_,x,b,w,M,S,T,E,A,R,C,L,O,P,I,D,N,k=e.style,F=n.scaleX<0,U="px",B="deg",z=er(e,$n)||"0";return r=i=s=c=l=u=h=d=p=0,o=a=1,n.svg=!(!e.getCTM||!ar(e)),v=wr(e,n.svg),n.svg&&(A=(!n.uncache||"0px 0px"===z)&&!t&&e.getAttribute("data-svg-origin"),Mr(e,A||z,!!A||n.originIsAbsolute,!1!==n.smooth,v)),m=n.xOrigin||0,g=n.yOrigin||0,v!==yr&&(b=v[0],w=v[1],M=v[2],S=v[3],r=T=v[4],i=E=v[5],6===v.length?(o=Math.sqrt(b*b+w*w),a=Math.sqrt(S*S+M*M),c=b||w?In(w,b)*On:0,h=M||S?In(M,S)*On+c:0,h&&(a*=Math.abs(Math.cos(h*Pn))),n.svg&&(r-=m-(m*b+g*M),i-=g-(m*w+g*S))):(N=v[6],I=v[7],L=v[8],O=v[9],P=v[10],D=v[11],r=v[12],i=v[13],s=v[14],y=In(N,P),l=y*On,y&&(_=Math.cos(-y),x=Math.sin(-y),A=T*_+L*x,R=E*_+O*x,C=N*_+P*x,L=T*-x+L*_,O=E*-x+O*_,P=N*-x+P*_,D=I*-x+D*_,T=A,E=R,N=C),y=In(-M,P),u=y*On,y&&(_=Math.cos(-y),x=Math.sin(-y),A=b*_-L*x,R=w*_-O*x,C=M*_-P*x,D=S*x+D*_,b=A,w=R,M=C),y=In(w,b),c=y*On,y&&(_=Math.cos(y),x=Math.sin(y),A=b*_+w*x,R=T*_+E*x,w=w*_-b*x,E=E*_-T*x,b=A,T=R),l&&Math.abs(l)+Math.abs(c)>359.9&&(l=c=0,u=180-u),o=oe(Math.sqrt(b*b+w*w+M*M)),a=oe(Math.sqrt(E*E+N*N)),y=In(T,E),h=Math.abs(y)>2e-4?y*On:0,p=D?1/(D<0?-D:D):0),n.svg&&(A=e.getAttribute("transform"),n.forceCSS=e.setAttribute("transform","")||!xr(er(e,Zn)),A&&e.setAttribute("transform",A))),Math.abs(h)>90&&Math.abs(h)<270&&(F?(o*=-1,h+=c<=0?180:-180,c+=c<=0?180:-180):(a*=-1,h+=h<=0?180:-180)),n.x=r-((n.xPercent=r&&(n.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-r)?-50:0)))?e.offsetWidth*n.xPercent/100:0)+U,n.y=i-((n.yPercent=i&&(n.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-i)?-50:0)))?e.offsetHeight*n.yPercent/100:0)+U,n.z=s+U,n.scaleX=oe(o),n.scaleY=oe(a),n.rotation=oe(c)+B,n.rotationX=oe(l)+B,n.rotationY=oe(u)+B,n.skewX=h+B,n.skewY=d+B,n.transformPerspective=p+U,(n.zOrigin=parseFloat(z.split(" ")[2])||0)&&(k[$n]=Tr(z)),n.xOffset=n.yOffset=0,n.force3D=f.force3D,n.renderTransform=n.svg?Pr:Rn?Or:Ar,n.uncache=0,n},Tr=function(e){return(e=e.split(" "))[0]+" "+e[1]},Er=function(e,t,n){var r=qe(t);return oe(parseFloat(t)+parseFloat(hr(e,"x",n+"px",r)))+r},Ar=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,Or(e,t)},Rr="0deg",Cr="0px",Lr=") ",Or=function(e,t){var n=t||this,r=n.xPercent,i=n.yPercent,s=n.x,o=n.y,a=n.z,c=n.rotation,l=n.rotationY,u=n.rotationX,h=n.skewX,d=n.skewY,p=n.scaleX,f=n.scaleY,m=n.transformPerspective,g=n.force3D,v=n.target,y=n.zOrigin,_="",x="auto"===g&&e&&1!==e||!0===g;if(y&&(u!==Rr||l!==Rr)){var b,w=parseFloat(l)*Pn,M=Math.sin(w),S=Math.cos(w);w=parseFloat(u)*Pn,b=Math.cos(w),s=Er(v,s,M*b*-y),o=Er(v,o,-Math.sin(w)*-y),a=Er(v,a,S*b*-y+y)}m!==Cr&&(_+="perspective("+m+Lr),(r||i)&&(_+="translate("+r+"%, "+i+"%) "),(x||s!==Cr||o!==Cr||a!==Cr)&&(_+=a!==Cr||x?"translate3d("+s+", "+o+", "+a+") ":"translate("+s+", "+o+Lr),c!==Rr&&(_+="rotate("+c+Lr),l!==Rr&&(_+="rotateY("+l+Lr),u!==Rr&&(_+="rotateX("+u+Lr),h===Rr&&d===Rr||(_+="skew("+h+", "+d+Lr),1===p&&1===f||(_+="scale("+p+", "+f+Lr),v.style[Zn]=_||"translate(0, 0)"},Pr=function(e,t){var n,r,i,s,o,a=t||this,c=a.xPercent,l=a.yPercent,u=a.x,h=a.y,d=a.rotation,p=a.skewX,f=a.skewY,m=a.scaleX,g=a.scaleY,v=a.target,y=a.xOrigin,_=a.yOrigin,x=a.xOffset,b=a.yOffset,w=a.forceCSS,M=parseFloat(u),S=parseFloat(h);d=parseFloat(d),p=parseFloat(p),f=parseFloat(f),f&&(f=parseFloat(f),p+=f,d+=f),d||p?(d*=Pn,p*=Pn,n=Math.cos(d)*m,r=Math.sin(d)*m,i=Math.sin(d-p)*-g,s=Math.cos(d-p)*g,p&&(f*=Pn,o=Math.tan(p-f),o=Math.sqrt(1+o*o),i*=o,s*=o,f&&(o=Math.tan(f),o=Math.sqrt(1+o*o),n*=o,r*=o)),n=oe(n),r=oe(r),i=oe(i),s=oe(s)):(n=m,s=g,r=i=0),(M&&!~(u+"").indexOf("px")||S&&!~(h+"").indexOf("px"))&&(M=hr(v,"x",u,"px"),S=hr(v,"y",h,"px")),(y||_||x||b)&&(M=oe(M+y-(y*n+_*i)+x),S=oe(S+_-(y*r+_*s)+b)),(c||l)&&(o=v.getBBox(),M=oe(M+c/100*o.width),S=oe(S+l/100*o.height)),o="matrix("+n+","+r+","+i+","+s+","+M+","+S+")",v.setAttribute("transform",o),w&&(v.style[Zn]=o)},Ir=function(e,t,n,r,i,s){var o,a,c=360,l=S(i),u=parseFloat(i)*(l&&~i.indexOf("rad")?On:1),h=s?u*s:u-r,d=r+h+"deg";return l&&(o=i.split("_")[1],"short"===o&&(h%=c,h!==h%(c/2)&&(h+=h<0?c:-c)),"cw"===o&&h<0?h=(h+c*Dn)%c-~~(h/c)*c:"ccw"===o&&h>0&&(h=(h-c*Dn)%c-~~(h/c)*c)),e._pt=a=new gn(e._pt,t,n,r,h,zn),a.e=d,a.u="deg",e._props.push(n),a},Dr=function(e,t){for(var n in t)e[n]=t[n];return e},Nr=function(e,t,n){var r,i,s,o,a,c,l,u,h=Dr({},n._gsap),d="perspective,force3D,transformOrigin,svgOrigin",p=n.style;for(i in h.svg?(s=n.getAttribute("transform"),n.setAttribute("transform",""),p[Zn]=t,r=Sr(n,1),cr(n,Zn),n.setAttribute("transform",s)):(s=getComputedStyle(n)[Zn],p[Zn]=t,r=Sr(n,1),p[Zn]=s),Ln)s=h[i],o=r[i],s!==o&&d.indexOf(i)<0&&(l=qe(s),u=qe(o),a=l!==u?hr(n,i,s,u):parseFloat(s),c=parseFloat(o),e._pt=new gn(e._pt,r,i,a,c-a,Bn),e._pt.u=u||0,e._props.push(i));Dr(r,h)};se("padding,margin,Width,Radius",(function(e,t){var n="Top",r="Right",i="Bottom",s="Left",o=(t<3?[n,r,i,s]:[n+s,n+r,i+r,i+s]).map((function(n){return t<2?e+n:"border"+n+e}));vr[t>1?"border"+e:e]=function(e,t,n,r,i){var s,a;if(arguments.length<4)return s=o.map((function(t){return dr(e,t,n)})),a=s.join(" "),5===a.split(s[0]).length?s[0]:a;s=(r+"").split(" "),a={},o.forEach((function(e,t){return a[e]=s[t]=s[t]||s[(t-1)/2|0]})),e.init(t,a,i)}}));var kr={name:"css",register:rr,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,n,r,i){var s,o,a,c,l,u,h,d,p,m,g,v,y,_,x,b=this._props,w=e.style,M=n.vars.startAt;for(h in Tn||rr(),t)if("autoRound"!==h&&(o=t[h],!Z[h]||!Yt(h,t,n,r,e,i)))if(l=typeof o,u=vr[h],"function"===l&&(o=o.call(n,r,e,i),l=typeof o),"string"===l&&~o.indexOf("random(")&&(o=ut(o)),u)u(this,e,h,o,n)&&(x=1);else if("--"===h.substr(0,2))s=(getComputedStyle(e).getPropertyValue(h)+"").trim(),o+="",Mt.lastIndex=0,Mt.test(s)||(d=qe(s),p=qe(o)),p?d!==p&&(s=hr(e,h,s,p)+p):d&&(o+=d),this.add(w,"setProperty",s,o,r,i,0,0,h),b.push(h);else if("undefined"!==l){if(M&&h in M?(s="function"===typeof M[h]?M[h].call(n,r,e,i):M[h],S(s)&&~s.indexOf("random(")&&(s=ut(s)),qe(s+"")||(s+=f.units[h]||qe(dr(e,h))||""),"="===(s+"").charAt(1)&&(s=dr(e,h))):s=dr(e,h),c=parseFloat(s),m="string"===l&&"="===o.charAt(1)?+(o.charAt(0)+"1"):0,m&&(o=o.substr(2)),a=parseFloat(o),h in Un&&("autoAlpha"===h&&(1===c&&"hidden"===dr(e,"visibility")&&a&&(c=0),lr(this,w,"visibility",c?"inherit":"hidden",a?"inherit":"hidden",!a)),"scale"!==h&&"transform"!==h&&(h=Un[h],~h.indexOf(",")&&(h=h.split(",")[0]))),g=h in Ln,g)if(v||(y=e._gsap,y.renderTransform&&!t.parseTransform||Sr(e,t.parseTransform),_=!1!==t.smoothOrigin&&y.smooth,v=this._pt=new gn(this._pt,w,Zn,0,1,y.renderTransform,y,0,-1),v.dep=1),"scale"===h)this._pt=new gn(this._pt,y,"scaleY",y.scaleY,(m?m*a:a-y.scaleY)||0),b.push("scaleY",h),h+="X";else{if("transformOrigin"===h){o=mr(o),y.svg?Mr(e,o,0,_,0,this):(p=parseFloat(o.split(" ")[2])||0,p!==y.zOrigin&&lr(this,y,"zOrigin",y.zOrigin,p),lr(this,w,h,Tr(s),Tr(o)));continue}if("svgOrigin"===h){Mr(e,o,1,_,0,this);continue}if(h in _r){Ir(this,y,h,c,o,m);continue}if("smoothOrigin"===h){lr(this,y,"smooth",y.smooth,o);continue}if("force3D"===h){y[h]=o;continue}if("transform"===h){Nr(this,o,e);continue}}else h in w||(h=nr(h)||h);if(g||(a||0===a)&&(c||0===c)&&!Fn.test(o)&&h in w)d=(s+"").substr((c+"").length),a||(a=0),p=qe(o)||(h in f.units?f.units[h]:d),d!==p&&(c=hr(e,h,s,p)),this._pt=new gn(this._pt,g?y:w,h,c,m?m*a:a-c,g||"px"!==p&&"zIndex"!==h||!1===t.autoRound?Bn:jn),this._pt.u=p||0,d!==p&&"%"!==p&&(this._pt.b=s,this._pt.r=Hn);else if(h in w)pr.call(this,e,h,s,o);else{if(!(h in e)){G(h,o);continue}this.add(e,h,s||e[h],o,r,i)}b.push(h)}x&&mn(this)},get:dr,aliases:Un,getSetter:function(e,t,n){var r=Un[t];return r&&r.indexOf(",")<0&&(t=r),t in Ln&&t!==$n&&(e._gsap.x||dr(e,"x"))?n&&An===n?"scale"===t?Yn:Xn:(An=n||{})&&("scale"===t?Kn:Jn):e.style&&!A(e.style[t])?Wn:~t.indexOf("-")?qn:an(e,t)},core:{_removeProperty:cr,_getMatrix:wr}};bn.utils.checkPrefix=nr,function(e,t,n,r){var i=se(e+","+t+","+n,(function(e){Ln[e]=1}));se(t,(function(e){f.units[e]="deg",_r[e]=1})),Un[i[13]]=e+","+t,se(r,(function(e){var t=e.split(":");Un[t[1]]=i[t[0]]}))}("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY"),se("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",(function(e){f.units[e]="px"})),bn.registerPlugin(kr);var Fr=bn.registerPlugin(kr)||bn;Fr.core.Tween},e2ae:function(e,t,n){"use strict";var r=n("6d5d"),i=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)};e.exports.f=function(e){return new i(e)}},e36c:function(e,t,n){var r=n("0a26"),i=n("dd09"),s=n("c0eb"),o=n("f7ee"),a=n("0361"),c=n("5cfa"),l=r.TypeError,u=Object.defineProperty,h=Object.getOwnPropertyDescriptor,d="enumerable",p="configurable",f="writable";t.f=i?o?function(e,t,n){if(a(e),t=c(t),a(n),"function"===typeof e&&"prototype"===t&&"value"in n&&f in n&&!n[f]){var r=h(e,t);r&&r[f]&&(e[t]=n.value,n={configurable:p in n?n[p]:r[p],enumerable:d in n?n[d]:r[d],writable:!1})}return u(e,t,n)}:u:function(e,t,n){if(a(e),t=c(t),a(n),s)try{return u(e,t,n)}catch(r){}if("get"in n||"set"in n)throw l("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},e44a:function(e,t,n){var r,i;
/* NProgress, (c) 2013, 2014 Rico Sta. Cruz - http://ricostacruz.com/nprogress
 * @license MIT */(function(s,o){r=o,i="function"===typeof r?r.call(t,n,t,e):r,void 0===i||(e.exports=i)})(0,(function(){var e={version:"0.2.0"},t=e.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};function n(e,t,n){return e<t?t:e>n?n:e}function r(e){return 100*(-1+e)}function i(e,n,i){var s;return s="translate3d"===t.positionUsing?{transform:"translate3d("+r(e)+"%,0,0)"}:"translate"===t.positionUsing?{transform:"translate("+r(e)+"%,0)"}:{"margin-left":r(e)+"%"},s.transition="all "+n+"ms "+i,s}e.configure=function(e){var n,r;for(n in e)r=e[n],void 0!==r&&e.hasOwnProperty(n)&&(t[n]=r);return this},e.status=null,e.set=function(r){var a=e.isStarted();r=n(r,t.minimum,1),e.status=1===r?null:r;var c=e.render(!a),l=c.querySelector(t.barSelector),u=t.speed,h=t.easing;return c.offsetWidth,s((function(n){""===t.positionUsing&&(t.positionUsing=e.getPositioningCSS()),o(l,i(r,u,h)),1===r?(o(c,{transition:"none",opacity:1}),c.offsetWidth,setTimeout((function(){o(c,{transition:"all "+u+"ms linear",opacity:0}),setTimeout((function(){e.remove(),n()}),u)}),u)):setTimeout(n,u)})),this},e.isStarted=function(){return"number"===typeof e.status},e.start=function(){e.status||e.set(0);var n=function(){setTimeout((function(){e.status&&(e.trickle(),n())}),t.trickleSpeed)};return t.trickle&&n(),this},e.done=function(t){return t||e.status?e.inc(.3+.5*Math.random()).set(1):this},e.inc=function(t){var r=e.status;return r?("number"!==typeof t&&(t=(1-r)*n(Math.random()*r,.1,.95)),r=n(r+t,0,.994),e.set(r)):e.start()},e.trickle=function(){return e.inc(Math.random()*t.trickleRate)},function(){var t=0,n=0;e.promise=function(r){return r&&"resolved"!==r.state()?(0===n&&e.start(),t++,n++,r.always((function(){n--,0===n?(t=0,e.done()):e.set((t-n)/t)})),this):this}}(),e.render=function(n){if(e.isRendered())return document.getElementById("nprogress");c(document.documentElement,"nprogress-busy");var i=document.createElement("div");i.id="nprogress",i.innerHTML=t.template;var s,a=i.querySelector(t.barSelector),l=n?"-100":r(e.status||0),u=document.querySelector(t.parent);return o(a,{transition:"all 0 linear",transform:"translate3d("+l+"%,0,0)"}),t.showSpinner||(s=i.querySelector(t.spinnerSelector),s&&h(s)),u!=document.body&&c(u,"nprogress-custom-parent"),u.appendChild(i),i},e.remove=function(){l(document.documentElement,"nprogress-busy"),l(document.querySelector(t.parent),"nprogress-custom-parent");var e=document.getElementById("nprogress");e&&h(e)},e.isRendered=function(){return!!document.getElementById("nprogress")},e.getPositioningCSS=function(){var e=document.body.style,t="WebkitTransform"in e?"Webkit":"MozTransform"in e?"Moz":"msTransform"in e?"ms":"OTransform"in e?"O":"";return t+"Perspective"in e?"translate3d":t+"Transform"in e?"translate":"margin"};var s=function(){var e=[];function t(){var n=e.shift();n&&n(t)}return function(n){e.push(n),1==e.length&&t()}}(),o=function(){var e=["Webkit","O","Moz","ms"],t={};function n(e){return e.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,(function(e,t){return t.toUpperCase()}))}function r(t){var n=document.body.style;if(t in n)return t;var r,i=e.length,s=t.charAt(0).toUpperCase()+t.slice(1);while(i--)if(r=e[i]+s,r in n)return r;return t}function i(e){return e=n(e),t[e]||(t[e]=r(e))}function s(e,t,n){t=i(t),e.style[t]=n}return function(e,t){var n,r,i=arguments;if(2==i.length)for(n in t)r=t[n],void 0!==r&&t.hasOwnProperty(n)&&s(e,n,r);else s(e,i[1],i[2])}}();function a(e,t){var n="string"==typeof e?e:u(e);return n.indexOf(" "+t+" ")>=0}function c(e,t){var n=u(e),r=n+t;a(n,t)||(e.className=r.substring(1))}function l(e,t){var n,r=u(e);a(e,t)&&(n=r.replace(" "+t+" "," "),e.className=n.substring(1,n.length-1))}function u(e){return(" "+(e.className||"")+" ").replace(/\s+/gi," ")}function h(e){e&&e.parentNode&&e.parentNode.removeChild(e)}return e}))},e4bd:function(e,t,n){"use strict";var r=n("858e"),i=n("2490").PROPER,s=n("f11a"),o=n("0361"),a=n("3d1e"),c=n("f656"),l=n("f42c"),u=n("9664"),h="toString",d=RegExp.prototype,p=d[h],f=r(u),m=l((function(){return"/a/b"!=p.call({source:"a",flags:"b"})})),g=i&&p.name!=h;(m||g)&&s(RegExp.prototype,h,(function(){var e=o(this),t=c(e.source),n=e.flags,r=c(void 0===n&&a(d,e)&&!("flags"in d)?f(e):n);return"/"+t+"/"+r}),{unsafe:!0})},e687:function(e,t,n){var r=n("dd09"),i=n("2490").EXISTS,s=n("858e"),o=n("e36c").f,a=Function.prototype,c=s(a.toString),l=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,u=s(l.exec),h="name";r&&!i&&o(a,h,{configurable:!0,get:function(){try{return u(l,c(this))[1]}catch(e){return""}}})},ea1f:function(e,t,n){"use strict";(function(e){function r(e,t){const n=Object.create(null),r=e.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return t?e=>!!n[e.toLowerCase()]:e=>!!n[e]}n.d(t,"a",(function(){return L})),n.d(t,"b",(function(){return C})),n.d(t,"c",(function(){return P})),n.d(t,"d",(function(){return O})),n.d(t,"e",(function(){return i})),n.d(t,"f",(function(){return ie})),n.d(t,"g",(function(){return ae})),n.d(t,"h",(function(){return he})),n.d(t,"i",(function(){return k})),n.d(t,"j",(function(){return c})),n.d(t,"k",(function(){return fe})),n.d(t,"l",(function(){return le})),n.d(t,"m",(function(){return B})),n.d(t,"n",(function(){return oe})),n.d(t,"o",(function(){return h})),n.d(t,"p",(function(){return ue})),n.d(t,"q",(function(){return z})),n.d(t,"r",(function(){return te})),n.d(t,"s",(function(){return G})),n.d(t,"t",(function(){return o})),n.d(t,"u",(function(){return b})),n.d(t,"v",(function(){return Q})),n.d(t,"w",(function(){return H})),n.d(t,"x",(function(){return N})),n.d(t,"y",(function(){return X})),n.d(t,"z",(function(){return D})),n.d(t,"A",(function(){return $})),n.d(t,"B",(function(){return Y})),n.d(t,"C",(function(){return ee})),n.d(t,"D",(function(){return w})),n.d(t,"E",(function(){return j})),n.d(t,"F",(function(){return u})),n.d(t,"G",(function(){return W})),n.d(t,"H",(function(){return q})),n.d(t,"I",(function(){return M})),n.d(t,"J",(function(){return T})),n.d(t,"K",(function(){return E})),n.d(t,"L",(function(){return r})),n.d(t,"M",(function(){return g})),n.d(t,"N",(function(){return v})),n.d(t,"O",(function(){return d})),n.d(t,"P",(function(){return m})),n.d(t,"Q",(function(){return F})),n.d(t,"R",(function(){return A})),n.d(t,"S",(function(){return ce})),n.d(t,"T",(function(){return de})),n.d(t,"U",(function(){return Z}));const i={[1]:"TEXT",[2]:"CLASS",[4]:"STYLE",[8]:"PROPS",[16]:"FULL_PROPS",[32]:"HYDRATE_EVENTS",[64]:"STABLE_FRAGMENT",[128]:"KEYED_FRAGMENT",[256]:"UNKEYED_FRAGMENT",[512]:"NEED_PATCH",[1024]:"DYNAMIC_SLOTS",[2048]:"DEV_ROOT_FRAGMENT",[-1]:"HOISTED",[-2]:"BAIL"},s="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt",o=r(s),a=2;function c(e,t=0,n=e.length){let r=e.split(/(\r?\n)/);const i=r.filter((e,t)=>t%2===1);r=r.filter((e,t)=>t%2===0);let s=0;const o=[];for(let c=0;c<r.length;c++)if(s+=r[c].length+(i[c]&&i[c].length||0),s>=t){for(let e=c-a;e<=c+a||n>s;e++){if(e<0||e>=r.length)continue;const a=e+1;o.push(`${a}${" ".repeat(Math.max(3-String(a).length,0))}|  ${r[e]}`);const l=r[e].length,u=i[e]&&i[e].length||0;if(e===c){const e=t-(s-(l+u)),r=Math.max(1,n>s?l-e:n-t);o.push("   |  "+" ".repeat(e)+"^".repeat(r))}else if(e>c){if(n>s){const e=Math.max(Math.min(n-s,l),1);o.push("   |  "+"^".repeat(e))}s+=l+u}}break}return o.join("\n")}const l="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",u=r(l);function h(e){return!!e||""===e}function d(e){if(z(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],i=W(r)?m(r):d(r);if(i)for(const e in i)t[e]=i[e]}return t}return W(e)||X(e)?e:void 0}const p=/;(?![^(]*\))/g,f=/:(.+)/;function m(e){const t={};return e.split(p).forEach(e=>{if(e){const n=e.split(f);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function g(e){let t="";if(W(e))t=e;else if(z(e))for(let n=0;n<e.length;n++){const r=g(e[n]);r&&(t+=r+" ")}else if(X(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}function v(e){if(!e)return null;let{class:t,style:n}=e;return t&&!W(t)&&(e.class=g(t)),n&&(e.style=d(n)),e}const y="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",_="svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistanceLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view",x="area,base,br,col,embed,hr,img,input,link,meta,param,source,track,wbr",b=r(y),w=r(_),M=r(x);function S(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=T(e[r],t[r]);return n}function T(e,t){if(e===t)return!0;let n=V(e),r=V(t);if(n||r)return!(!n||!r)&&e.getTime()===t.getTime();if(n=z(e),r=z(t),n||r)return!(!n||!r)&&S(e,t);if(n=X(e),r=X(t),n||r){if(!n||!r)return!1;const i=Object.keys(e).length,s=Object.keys(t).length;if(i!==s)return!1;for(const n in e){const r=e.hasOwnProperty(n),i=t.hasOwnProperty(n);if(r&&!i||!r&&i||!T(e[n],t[n]))return!1}}return String(e)===String(t)}function E(e,t){return e.findIndex(e=>T(e,t))}const A=e=>W(e)?e:null==e?"":z(e)||X(e)&&(e.toString===K||!G(e.toString))?JSON.stringify(e,R,2):String(e),R=(e,t)=>t&&t.__v_isRef?R(e,t.value):H(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[t,n])=>(e[t+" =>"]=n,e),{})}:j(t)?{[`Set(${t.size})`]:[...t.values()]}:!X(t)||z(t)||$(t)?t:String(t),C={},L=[],O=()=>{},P=()=>!1,I=/^on[^a-z]/,D=e=>I.test(e),N=e=>e.startsWith("onUpdate:"),k=Object.assign,F=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},U=Object.prototype.hasOwnProperty,B=(e,t)=>U.call(e,t),z=Array.isArray,H=e=>"[object Map]"===J(e),j=e=>"[object Set]"===J(e),V=e=>e instanceof Date,G=e=>"function"===typeof e,W=e=>"string"===typeof e,q=e=>"symbol"===typeof e,X=e=>null!==e&&"object"===typeof e,Y=e=>X(e)&&G(e.then)&&G(e.catch),K=Object.prototype.toString,J=e=>K.call(e),Z=e=>J(e).slice(8,-1),$=e=>"[object Object]"===J(e),Q=e=>W(e)&&"NaN"!==e&&"-"!==e[0]&&""+parseInt(e,10)===e,ee=r(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),te=r("bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo"),ne=e=>{const t=Object.create(null);return n=>{const r=t[n];return r||(t[n]=e(n))}},re=/-(\w)/g,ie=ne(e=>e.replace(re,(e,t)=>t?t.toUpperCase():"")),se=/\B([A-Z])/g,oe=ne(e=>e.replace(se,"-$1").toLowerCase()),ae=ne(e=>e.charAt(0).toUpperCase()+e.slice(1)),ce=ne(e=>e?"on"+ae(e):""),le=(e,t)=>!Object.is(e,t),ue=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},he=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},de=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let pe;const fe=()=>pe||(pe="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof e?e:{})}).call(this,n("d8fc"))},eb5c:function(e,t,n){var r=n("f11a");e.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},ed30:function(e,t,n){"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,s=i&&!r.call({1:2},1);t.f=s?function(e){var t=i(this,e);return!!t&&t.enumerable}:r},eda1:function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},f11a:function(e,t,n){var r=n("0a26"),i=n("87b4"),s=n("46ec"),o=n("6035"),a=n("3016"),c=n("7c29"),l=n("5faf"),u=n("2490").CONFIGURABLE,h=l.get,d=l.enforce,p=String(String).split("String");(e.exports=function(e,t,n,c){var l,h=!!c&&!!c.unsafe,f=!!c&&!!c.enumerable,m=!!c&&!!c.noTargetGet,g=c&&void 0!==c.name?c.name:t;i(n)&&("Symbol("===String(g).slice(0,7)&&(g="["+String(g).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!s(n,"name")||u&&n.name!==g)&&o(n,"name",g),l=d(n),l.source||(l.source=p.join("string"==typeof g?g:""))),e!==r?(h?!m&&e[t]&&(f=!0):delete e[t],f?e[t]=n:o(e,t,n)):f?e[t]=n:a(t,n)})(Function.prototype,"toString",(function(){return i(this)&&h(this).source||c(this)}))},f42c:function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},f516:function(e,t,n){var r=n("20d5");e.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(r)},f5d9:function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},f656:function(e,t,n){var r=n("0a26"),i=n("2d0e"),s=r.String;e.exports=function(e){if("Symbol"===i(e))throw TypeError("Cannot convert a Symbol value to a string");return s(e)}},f6a3:function(e,t,n){var r=n("dd09"),i=n("f7ee"),s=n("e36c"),o=n("0361"),a=n("65e2"),c=n("54bd");t.f=r&&!i?Object.defineProperties:function(e,t){o(e);var n,r=a(t),i=c(t),l=i.length,u=0;while(l>u)s.f(e,n=i[u++],r[n]);return e}},f7ee:function(e,t,n){var r=n("dd09"),i=n("f42c");e.exports=r&&i((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},fc9b:function(e,t){e.exports=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}}}}]);
//# sourceMappingURL=chunk-vendors.44e3e031.js.map